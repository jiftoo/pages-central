import{k as s,f as t,G as b,M as c,t as w,T as u,l as z,m as y,o as _,c as P,w as f,x as q,B as h,z as $}from"./index-BWNNp1d4.js";import{Q as o}from"./QuestionSection-S4QOHm5r.js";import{D as C}from"./DropdownSelect-Ebjhyugq.js";import{u as E,d as v,r as F,S as H,t as M,v as U,w as R,x as B,y as G,E as I}from"./DocumentFlow-CT58WF8E.js";import{c as O,p as T,D as L}from"./Proofs-Dgy0YH5L.js";import{R as S}from"./RadioGroup-CcCufTdI.js";import{C as N}from"./Checkbox-D8fHGPx1.js";import"./ListBox-B3vhHm8q.js";const Q={"period-grid":"_period-grid_xztcy_1"};var m=w("<div>"),j=w("<h3>Будет добавлено <!> <!>.");function ne(){const[e,r]=E(),l=(n,d)=>r("srokVozvrata",n,F(d));return(()=>{var n=m();return s(n,t(o,{get children(){return t(S,{items:[{label:"Сумма займа подлежит единовременному возврату до конкретной даты",value:"date"},{label:"Сумма займа предоставлена на опредлённый срок",value:"period"},{label:"Договором предусмотрена рассрочка возврата займа",value:"hire"},{label:"В договоре отсутствует условие о сроке (дате) возврата займа",value:"not-specified"},{label:"Срок возврата займа определён моментом востребования",value:"on-demand"}],get value(){return e.srokVozvrata.type},setValue:d=>{switch(d){case"date":r("srokVozvrata",v(new B));break;case"period":r("srokVozvrata",v(new R));break;case"hire":r("srokVozvrata",v(new U));break;case"not-specified":r("srokVozvrata",v(new M));break;case"on-demand":r("srokVozvrata",v(new H));break;default:throw new Error("Unknown srokVozvrata type")}},get children(){return t(b,{get children(){return[t(c,{get when(){return e.srokVozvrata.type==="date"},get children(){return t(o,{get children(){return t(A,{get value(){return e.srokVozvrata},setValue:l})}})}}),t(c,{get when(){return e.srokVozvrata.type==="period"},get children(){return t(o,{get children(){return t(J,{get value(){return e.srokVozvrata},setValue:l})}})}}),t(c,{get when(){return e.srokVozvrata.type==="hire"},get children(){return t(o,{get children(){return t(K,{get value(){return e.srokVozvrata},setValue:l})}})}}),t(c,{get when(){return e.srokVozvrata.type==="on-demand"},get children(){return t(o,{get children(){return t(W,{get value(){return e.srokVozvrata},setValue:l})}})}})]}})}})}})),n})()}function A(e){return[t(u,{type:"date",label:"Дата возврата",get value(){return e.value.date},setValue:r=>e.setValue("date",r)}),t(u,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:r=>e.setValue("clause",r)})]}function J(e){return(()=>{var r=m();return s(r,t(u,{label:"Займ предоставлен на",get value(){return e.value.period},setValue:l=>e.setValue("period",l)}),null),s(r,t(C,{items:[{text:"Дней",value:"day"},{text:"Недель",value:"week"},{text:"Месяцев",value:"month"},{text:"Лет",value:"year"}],get value(){return e.value.periodUnit},setValue:l=>e.setValue("periodUnit",l)}),null),s(r,t(u,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:l=>e.setValue("clause",l)}),null),z(()=>y(r,Q["period-grid"])),r})()}function K(e){const r=(l,n)=>{e.setValue("hire",{...e.value.hire,[l]:n})};return _(()=>{console.log("fields on mount")}),t(S,{items:[{label:"Рассрочка на равные ежемесячные платежи",value:"equal"},{label:"Рассрочка на разные по суммам и датам платежи",value:"unequal"}],get value(){return e.value.hire.type},setValue:l=>{switch(l){case"equal":e.setValue("hire",v(new I));break;case"unequal":e.setValue("hire",v(new G));break;default:throw new Error("Unknown hire type")}},get children(){return t(b,{get children(){return[t(c,{get when(){return e.value.hire.type==="equal"},get children(){return t(o,{get children(){return t(X,{get value(){return e.value.hire},setValue:r})}})}}),t(c,{get when(){return e.value.hire.type==="unequal"},get children(){return t(o,{children:"Вы сможете добавить платежи на экране «Доказательства»"})}})]}})}})}function W(e){return t(u,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:r=>e.setValue("clause",r)})}function X(e){const[r,l]=P(!1),n=f(()=>O(e.value),[],{equals:(a,i)=>a.length===i.length&&a.every((V,g)=>V.date===i[g].date&&V.sum===i[g].sum)}),d=()=>n().length!==0,x=()=>{if(n().length===11)return"доказательств";const a=n().length%10;return a===1?"доказательство":a>=2&&a<=4?"доказательства":"доказательств"};return[t(L,{onClose:()=>l(!1),get show(){return r()},get children(){return[t(o,{question:"Рассрочка",get children(){return[t(u,{label:"Размер одного платежа",get value(){return e.value.sum},setValue:a=>e.setValue("sum",a)}),t(u,{label:"День месяца, в который нужно произвести платёж",get value(){return e.value.paymentDay},setValue:a=>e.setValue("paymentDay",a)}),t(u,{type:"date",min:"1990-01-01",label:"С",get value(){return e.value.dateStart},setValue:a=>e.setValue("dateStart",a)}),t(u,{type:"date",get min(){return e.value.dateStart},get max(){return new Date().toISOString().split("T")[0]},label:"По",get value(){return e.value.dateEnd},setValue:a=>e.setValue("dateEnd",a)}),t(u,{get max(){return e.value.dateEnd},type:"date",label:"Дата последнего произведённого платежа заёмщика",get value(){return e.value.dateLastPaid},setValue:a=>e.setValue("dateLastPaid",a),get disabled(){return e.value.neverPaid}}),t(N,{label:"Заёмщик ни разу не платил по рассрочке",get value(){return e.value.neverPaid},setValue:a=>e.setValue("neverPaid",a)}),t(u,{label:"Пункт договора с условием о рассрочке",get value(){return e.value.clause},setValue:a=>e.setValue("clause",a)})]}}),t(o,{get children(){return[f(()=>d()),(()=>{var a=m();return s(a,t(q,{get when(){return d()},get children(){var i=j(),V=i.firstChild,g=V.nextSibling,D=g.nextSibling,k=D.nextSibling;return k.nextSibling,i.style.setProperty("margin","0"),s(i,()=>n().length,g),s(i,x,k),i}}),null),s(a,t(h,{text:"Закрыть",get class(){return $["flow-back-button"]},onClick:()=>l(!1)}),null),s(a,t(h,{text:"Готово",get disabled(){return!d()},onClick:()=>l(!1)}),null),z(()=>y(a,T["adder-buttons"])),a})()]}})]}}),t(h,{thin:!0,text:"Настроить рассрочку",onClick:()=>{l(!0)}})]}export{ne as default};
