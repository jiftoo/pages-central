import{k as m,f as e,x as w,t as y,c as C,e as M,J as oe,G as B,M as v,T as l,B as O,z as J,l as x,m as E,F as W,S as X,s as H,A as ne,H as ae,_,Q as ue,C as le}from"./index-DbyuVPhe.js";import{Q as V}from"./QuestionSection-hEmHklqG.js";import{u as se,d as $,p as I,T as de,V as ce,W as z,X as ie,Y as fe,Z as ge,_ as me,$ as ve,a0 as pe,a1 as he,a2 as be,a3 as Pe,a4 as _e}from"./DocumentFlow-DiIg8ayY.js";import{R as we}from"./RadioGroup-BgytdiUX.js";import{C as R}from"./Checkbox-nTz0Lecp.js";import{L as ke}from"./ListBox-BFlK8qIY.js";const Ve=(t,o)=>{const n=t[o];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,d)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(d.bind(null,new Error("Unknown variable dynamic import: "+o)))})},b={"adder-popup":"_adder-popup_wnbxe_1","adder-modal-fix":"_adder-modal-fix_wnbxe_39","dialog-appear":"_dialog-appear_wnbxe_1","hover-example":"_hover-example_wnbxe_85","adder-buttons":"_adder-buttons_wnbxe_145","proof-adder":"_proof-adder_wnbxe_163","proof-card":"_proof-card_wnbxe_179","add-proof-card":"_add-proof-card_wnbxe_225","simple-proof-fields":"_simple-proof-fields_wnbxe_341","simple-proof-adder":"_simple-proof-adder_wnbxe_383"},ye="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-x'%3e%3cline%20x1='18'%20y1='6'%20x2='6'%20y2='18'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='18'%20y2='18'%3e%3c/line%3e%3c/svg%3e",xe="data:image/svg+xml,%3csvg%20width='15'%20height='20'%20viewBox='0%200%2015%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.37398%200H1V9.24801H0V12.248H1V13.5836H0V16.5836H1V20H4V16.5836H7.75V13.5836H4V12.25H8.37481C11.7524%2012.25%2014.5%209.50238%2014.5%206.1252C14.5%202.74762%2011.7524%200%208.37398%200ZM8.3752%209.25H4V2.99961H8.3752C10.0984%202.99961%2011.5004%204.4016%2011.5004%206.1248C11.5004%207.84801%2010.0984%209.25%208.3752%209.25Z'%20fill='%231C4681'/%3e%3c/svg%3e";var Q=y("<pre>"),S=y("<div>"),De=y('<div><div>пример</div><img alt="">'),Ee=y("<div><dialog><div>"),Ce=y("<span>Платёж "),$e=y("<br>"),Re=y("<span>На сумму <span class=warning> р."),Se=y("<button><img alt=x>");function Me(){const[t,o]=se(),n=f=>o("proofs","dogovorProofs",t.proofs.dogovorProofs.length,f),r=f=>o("proofs","dogovorProofs",I(a=>{a.splice(f,1)})),d=(f,a)=>{console.log("setting document proof",f,a,t.proofs.dogovorProofs),o("proofs","dogovorProofs",I(c=>{c[f]=a}))};return(()=>{var f=S();return m(f,e(V,{get children(){return[e(Y,{get proofs(){return t.proofs.dogovorProofs},addProof:n,deleteProof:r,setProof:d}),(()=>{var a=Q();return m(a,()=>JSON.stringify(t.proofs.dogovorProofs,null,2)),a})(),(()=>{var a=Q();return m(a,()=>JSON.stringify(t.proofs.returnProofs,null,2)),a})()]}}),null),m(f,e(V,{question:"Возвращение займа",get children(){return e(we,{items:[{label:"Заёмщик, и его правопреемники ни разу не производили оплату по договору займа",value:"never-paid"},{label:"Заёмщик частично платил по договору спорному договору займа",value:"paid"}],get value(){return t.proofs.returnProofs.type},setValue:a=>{switch(a){case"never-paid":o("proofs","returnProofs",$(new ce));break;case"paid":o("proofs","returnProofs",$(new de));break;default:throw new Error("Unknown proof type")}},get children(){return e(w,{get when(){return t.proofs.returnProofs.type==="paid"},get children(){return e(Te,{document:t,setDocument:o})}})}})}}),null),f})()}const U={clause:"Пункт договора","transfer-raspiska":"Расписка в передаче денежных средств","funds-transfer":"Акт приёма-передачи денежных средств","dogovor-raspiska":"Расписка на договоре","card-transfer":"Перевод на карту","account-statement":"Выписка по счёту","payment-order":"Платёжное поручение","cash-receipt-voucher":"Квитанция к приходному кассовому ордеру","expense-receipt":"Расходный кассовый ордер","check-order":"Чек-ордер банка","payment-agreement":"Соглашение о зачёте",other:"Другое"};function Y(t){const[o,n]=C(!1);let r;M(()=>o()?r.showModal():r.close());const d=s=>{const g=$(s);return g.note=null,g},[f,a]=C(null),[c,P]=C({proof:d(new z),mode:{value:"add"}}),i=s=>P(g=>({...g,proof:s})),L=()=>{i(d(new z)),a(null)},A=(s,g)=>{P(p=>g!==void 0?{...p,mode:{value:s,index:g}}:{...p,mode:{value:s}})};M(()=>{console.log("proof in progress updated",c(),f())});const j=()=>Object.values(c().proof).every(s=>s!==""),re=()=>{const s=c();console.log(s),s.proof.note=f(),s.mode.value==="edit"?(t.setProof(s.mode.index,s.proof),n(!1)):(t.addProof(s.proof),n(!1))},F=()=>{A("add"),L(),n(!0)},K=(s,g)=>{A("edit",g),a(s.note),i($(s)),n(!0)},[N,q]=C(0),te=s=>{const[g]=ae(()=>Ve(Object.assign({"../../../assets/example-documents/account-statement.jpg":()=>_(()=>import("./account-statement-DzdXkgl8.js"),[]),"../../../assets/example-documents/card-transfer.jpg":()=>_(()=>import("./card-transfer-CSMD_Vck.js"),[]),"../../../assets/example-documents/cash-receipt-voucher.jpg":()=>_(()=>import("./cash-receipt-voucher-DNXc6Sdk.js"),[]),"../../../assets/example-documents/check-order.jpg":()=>_(()=>import("./check-order-BCVPIxgK.js"),[]),"../../../assets/example-documents/clause.jpg":()=>_(()=>import("./clause-DmFs3e5G.js"),[]),"../../../assets/example-documents/expense-receipt.jpg":()=>_(()=>import("./expense-receipt-rsnUZ8tJ.js"),[]),"../../../assets/example-documents/funds-transfer.jpg":()=>_(()=>import("./funds-transfer-BN_LdnSn.js"),[]),"../../../assets/example-documents/other.jpg":()=>_(()=>import("./other-5fxjf8TQ.js"),[]),"../../../assets/example-documents/payment-order.jpg":()=>_(()=>import("./payment-order-cI9zTrOO.js"),[])}),`../../../assets/example-documents/${s.type}.jpg`).then(p=>p.default).catch(p=>{}));return M(()=>console.log("image:",s.type,g())),e(w,{get when(){return g()},children:p=>(()=>{var D=De(),u=D.firstChild,h=u.nextSibling;return x(k=>{var T=b["hover-example"],G=p();return T!==k.e&&E(D,k.e=T),G!==k.t&&H(h,"src",k.t=G),k},{e:void 0,t:void 0}),D})()})};return(()=>{var s=Ee(),g=s.firstChild,p=g.firstChild;g.addEventListener("close",()=>n(!1)),g.$$click=u=>u.target===u.currentTarget&&n(!1);var D=r;return typeof D=="function"?oe(D,g):r=g,m(p,e(V,{get question(){return c().mode.value==="add"?"Добавить доказательство":"Изменить доказательство"},get children(){return e(B,{get children(){return[e(v,{get when(){return N()===0},get children(){return e(ke,{get items(){return Object.entries(U).map(([u,h])=>({value:u,text:h,aside:()=>e(te,{type:u})}))},get value(){return c().proof.type},setValue:u=>{switch(u){case"clause":i(d(new z));break;case"transfer-raspiska":i(d(new _e));break;case"funds-transfer":i(d(new Pe));break;case"dogovor-raspiska":i(d(new be));break;case"card-transfer":i(d(new he));break;case"account-statement":i(d(new pe));break;case"payment-order":i(d(new ve));break;case"cash-receipt-voucher":i(d(new me));break;case"expense-receipt":i(d(new ge));break;case"check-order":i(d(new fe));break;case"other":i(d(new ie));break;default:throw new Error("Unknown proof type")}}})}}),e(v,{get when(){return N()===1},get children(){return[e(l,{icon:"no-space",label:"Примечание (не обязательно)",get value(){return f()??""},setValue:u=>a(u===""?null:u)}),e(Ae,{get value(){return c().proof},setValue:i})]}})]}})}}),null),m(p,e(V,{get children(){var u=S();return m(u,e(B,{get children(){return[e(v,{get when(){return N()===0},get children(){return[e(O,{text:"Закрыть",get class(){return J["flow-back-button"]},onClick:()=>n(!1)}),e(O,{text:"Далее",onClick:()=>q(1)})]}}),e(v,{get when(){return N()===1},get children(){return[e(O,{text:"К типам",get class(){return J["flow-back-button"]},onClick:()=>q(0)}),e(O,{get text(){return c().mode.value==="add"?"Добавить":"Сохранить"},onClick:re,get disabled(){return!j()}})]}})]}})),x(()=>E(u,b["adder-buttons"])),u}}),null),m(s,e(W,{get each(){return t.proofs},children:(u,h)=>e(ee,{get index(){return h()},onDelete:()=>t.deleteProof(h()),onClick:()=>K($(u),h()),onKeyDown:()=>K($(u),h()),get label(){return U[u.type]},get note(){return u.note??void 0}})}),null),m(s,e(X,{shadow:!0,get classList(){return{[b["proof-card"]]:!0,[b["add-proof-card"]]:!0}},onClick:F,onKeyDown:u=>{u.target===u.currentTarget&&(u.key==="Enter"||u.key===" ")&&F()},tabIndex:0,children:"Добавить доказательство"}),null),x(u=>{var h=b["proof-adder"],k=b["adder-popup"],T=b["adder-modal-fix"];return h!==u.e&&E(s,u.e=h),k!==u.t&&E(g,u.t=k),T!==u.a&&E(p,u.a=T),u},{e:void 0,t:void 0,a:void 0}),s})()}function Z(t){const o=()=>{},[n,r]=C(""),[d,f]=C("");return[(()=>{var a=S();return m(a,e(l,{icon:ue,type:"date",label:"Дата платежа",get value(){return n()},setValue:r}),null),m(a,e(l,{icon:xe,label:"Сумма платежа",get value(){return d()},setValue:f}),null),m(a,e(O,{get disabled(){return n()===""||d()===""},text:"Добавить",onClick:()=>(t.addProof({date:n(),sum:d()}),r(""),f(""))}),null),x(()=>E(a,b["simple-proof-fields"])),a})(),e(w,{get when(){return t.proofs.length>0},get children(){var a=S();return m(a,e(W,{get each(){return t.proofs},children:(c,P)=>e(ee,{get label(){return[(()=>{var i=Ce();return i.firstChild,m(i,()=>new Date(c.date).toLocaleDateString("ru"),null),i})(),$e(),(()=>{var i=Re(),L=i.firstChild,A=L.nextSibling,j=A.firstChild;return m(A,()=>c.sum,j),i})()]},get index(){return P()},onDelete:()=>t.deleteProof(P()),onClick:o,onKeyDown:o})})),x(c=>le(a,{[b["proof-adder"]]:!0,[b["simple-proof-adder"]]:!0},c)),a}})]}function ee(t){return e(X,{shadow:!0,get class(){return b["proof-card"]},onClick:()=>t.onClick(),onKeyDown:o=>{o.target===o.currentTarget&&(o.key==="Enter"||o.key===" ")&&t.onKeyDown()},get title(){return t.note??(typeof t.label=="string"?t.label:void 0)},tabIndex:0,get children(){return[e(w,{get when(){return t.note!==void 0},get children(){var o=S();return m(o,()=>t.note),x(()=>H(o,"title",t.note)),o}}),(()=>{var o=S();return m(o,()=>t.label),x(()=>H(o,"title",typeof t.label=="string"?t.label:void 0)),o})(),(()=>{var o=Se(),n=o.firstChild;return o.$$click=r=>(r.stopPropagation(),t.onDelete()),H(n,"src",ye),o})()]}})}function Ae(t){const o=()=>t.value,n=(r,d)=>t.setValue({...t.value,[r]:d});return e(B,{get children(){return[e(v,{get when(){return t.value.type==="clause"},get children(){return[e(l,{label:"Пункт договора",get value(){return o().clause},setValue:r=>n("clause",r)}),e(R,{label:"Расплывчатая формулировка",get value(){return o().vague},setValue:r=>n("vague",r)})]}}),e(v,{get when(){return t.value.type==="transfer-raspiska"},get children(){return[e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма платежа",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="funds-transfer"},get children(){return[e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма платежа",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="dogovor-raspiska"},get children(){return[e(l,{label:"Сумма платежа",get value(){return o().sum},setValue:r=>n("sum",r)}),e(R,{label:"В расписке указана дата передачи денежных средств, отличная от даты составления договора",get value(){return o().date!==null},setValue:r=>n("date",r?"":null)}),e(w,{get when(){return o().date!==null},get children(){return e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)})}})]}}),e(v,{get when(){return t.value.type==="card-transfer"},get children(){return[e(l,{label:"Наименование документа",get value(){return o().documentName},setValue:r=>n("documentName",r)}),e(l,{label:"Номер документа",get value(){return o().documentNumber},setValue:r=>n("documentNumber",r)}),e(l,{type:"date",label:"Дата документа",get value(){return o().documentDate},setValue:r=>n("documentDate",r)}),e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма платежа",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="account-statement"},get children(){return[e(l,{label:"Начало периода",get value(){return o().periodStart},setValue:r=>n("periodStart",r)}),e(l,{label:"Конец периода",get value(){return o().periodEnd},setValue:r=>n("periodEnd",r)}),"TODO inner adders"]}}),e(v,{get when(){return t.value.type==="payment-order"},get children(){return[e(l,{label:"Номер",get value(){return o().number},setValue:r=>n("number",r)}),e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="cash-receipt-voucher"},get children(){return[e(l,{label:"Номер",get value(){return o().number},setValue:r=>n("number",r)}),e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="expense-receipt"},get children(){return[e(l,{label:"Номер",get value(){return o().number},setValue:r=>n("number",r)}),e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="check-order"},get children(){return[e(l,{label:"Номер",get value(){return o().number},setValue:r=>n("number",r)}),e(l,{type:"date",label:"Дата",get value(){return o().date},setValue:r=>n("date",r)}),e(l,{label:"Сумма",get value(){return o().sum},setValue:r=>n("sum",r)})]}}),e(v,{get when(){return t.value.type==="other"},get children(){return[e(l,{label:"Наименование документа",get value(){return o().documentName},setValue:r=>n("documentName",r)}),e(R,{label:"Без номера",get value(){return o().documentNumber===null},setValue:r=>n("documentNumber",r?null:"")}),e(w,{get when(){return o().documentNumber!==null},get children(){return e(l,{label:"Номер документа",get value(){return o().documentNumber},setValue:r=>n("documentNumber",r)})}}),e(l,{type:"date",label:"Дата документа",get value(){return o().documentDate},setValue:r=>n("documentDate",r)})]}})]}})}function Te(t){const o=a=>t.setDocument("proofs","returnProofs","proofs",t.document.proofs.returnProofs.proofs.length,a),n=a=>t.setDocument("proofs","returnProofs","proofs",I(c=>{c.splice(a,1)})),r=(a,c)=>{console.log("setting return proof",a,c,t.document.proofs.returnProofs.proofs),t.setDocument("proofs","returnProofs","proofs",I(P=>{P[a]=c}))},d=(a,c)=>t.setDocument("proofs","returnProofs",c,t.document.proofs.returnProofs[c].length,a),f=(a,c)=>t.setDocument("proofs","returnProofs",c,I(P=>{P.splice(a,1)}));return e(V,{get children(){return[e(R,{label:"У меня имеется оригинал или копия документа о возврате части задолженности Заёмщиком",get value(){return t.document.proofs.returnProofs.proofs!==null},setValue:a=>t.setDocument("proofs","returnProofs","proofs",a?[]:null)}),e(w,{get when(){return t.document.proofs.returnProofs.proofs!==null},get children(){return e(V,{get children(){return e(Y,{get proofs(){return t.document.proofs.returnProofs.proofs},addProof:o,deleteProof:n,setProof:r})}})}}),e(R,{label:"Документ об оплате части задолженности находится у Заёмщика",get value(){return t.document.proofs.returnProofs.zaemshikProofs!==null},setValue:a=>t.setDocument("proofs","returnProofs","zaemshikProofs",a?[]:null)}),e(w,{get when(){return t.document.proofs.returnProofs.zaemshikProofs!==null},get children(){return e(V,{get children(){return e(Z,{get proofs(){return t.document.proofs.returnProofs.zaemshikProofs},addProof:a=>d(a,"zaemshikProofs"),deleteProof:a=>f(a,"zaemshikProofs")})}})}}),e(R,{label:"Часть задолженности мне была возвращена, но соответствующий документ не был составлен",get value(){return t.document.proofs.returnProofs.unbackedProofs!==null},setValue:a=>t.setDocument("proofs","returnProofs","unbackedProofs",a?[]:null)}),e(w,{get when(){return t.document.proofs.returnProofs.unbackedProofs!==null},get children(){return e(V,{get children(){return e(Z,{get proofs(){return t.document.proofs.returnProofs.unbackedProofs},addProof:a=>d(a,"unbackedProofs"),deleteProof:a=>f(a,"unbackedProofs")})}})}})]}})}ne(["click"]);export{Me as default};
