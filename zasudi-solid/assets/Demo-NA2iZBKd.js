var ss=Object.defineProperty;var rs=(U,t,F)=>t in U?ss(U,t,{enumerable:!0,configurable:!0,writable:!0,value:F}):U[t]=F;var tt=(U,t,F)=>(rs(U,typeof t!="symbol"?t+"":t,F),F),Yt=(U,t,F)=>{if(!t.has(U))throw TypeError("Cannot "+F)};var e=(U,t,F)=>(Yt(U,t,"read from private field"),F?F.call(U):t.get(U)),O=(U,t,F)=>{if(t.has(U))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(U):t.set(U,F)},Z=(U,t,F,n)=>(Yt(U,t,"write to private field"),n?n.call(U,F):t.set(U,F),F);var dt=(U,t,F,n)=>({set _(g){Z(U,t,g,F)},get _(){return e(U,t,n)}}),G=(U,t,F)=>(Yt(U,t,"access private method"),F);import{u as untrack,b as batch,g as getListener,c as createSignal,n as sharedConfig,p as onCleanup,e as createEffect,J as use,l as createRenderEffect,m as className,k as insert,f as createComponent,P as Portal,F as For,C as classList,t as template,G as Switch,M as Match,T as TextField,B as BigGreenButton,x as Show,s as setAttribute}from"./index-BUGSF_1t.js";import{Q as QuestionSection}from"./QuestionSection-BHbQVVtN.js";import{L as ListBox}from"./ListBox-CKe_4OuY.js";import{a5 as isObject,a6 as accessWith,a7 as createStore$1,r as reconcile}from"./DocumentFlow-BFJurFr1.js";import{g as getAugmentedNamespace}from"./_commonjsHelpers-IkB594pC.js";import{C as Checkbox}from"./Checkbox-DtUE8zpe.js";function createStaticStore(U){const t={...U},F={...U},n={},g=k=>{let M=n[k];if(!M){if(!getListener())return t[k];n[k]=M=createSignal(t[k],{internal:!0}),delete t[k]}return M[0]()};for(const k in U)Object.defineProperty(F,k,{get:()=>g(k),enumerable:!0});const V=(k,M)=>{const A=n[k];if(A)return A[1](M);k in t&&(t[k]=accessWith(M,[t[k]]))};return[F,(k,M)=>{if(isObject(k)){const A=untrack(()=>Object.entries(accessWith(k,F)));batch(()=>{for(const[l,r]of A)V(l,()=>r)})}else V(k,M);return F}]}const demo={"demo-name":"_demo-name_1lm9s_1","raschet-buttons":"_raschet-buttons_1lm9s_10","calculator-table":"_calculator-table_1lm9s_35","rounded-fix":"_rounded-fix_1lm9s_67","checkpoint-glow":"_checkpoint-glow_1lm9s_185","checkpoint-start":"_checkpoint-start_1lm9s_188","checkpoint-deadline":"_checkpoint-deadline_1lm9s_191","checkpoint-payment-decrease":"_checkpoint-payment-decrease_1lm9s_194","checkpoint-payment-increase":"_checkpoint-payment-increase_1lm9s_197","checkpoint-change":"_checkpoint-change_1lm9s_200","checkpoint-change-term":"_checkpoint-change-term_1lm9s_203","checkpoint-leapYear":"_checkpoint-leapYear_1lm9s_206","checkpoint-charge":"_checkpoint-charge_1lm9s_209","checkpoint-synthetic":"_checkpoint-synthetic_1lm9s_212","checkpoint-idk":"_checkpoint-idk_1lm9s_215"};function commonjsRequire(U){throw new Error('Could not dynamically require "'+U+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,F){module.exports=t.pdfjsLib=F()})(globalThis,()=>(()=>{var __webpack_modules__=[,(U,t)=>{var Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=le,t.bytesToString=ne,t.createValidAbsoluteUrl=Ee,t.getModificationDate=Le,t.getUuid=Ke,t.getVerbosityLevel=q,t.info=J,t.isArrayBuffer=me,t.isArrayEqual=Te,t.isNodeJS=void 0,t.normalizeUnicode=Ge,t.objectFromMap=se,t.objectSize=Pe,t.setVerbosityLevel=T,t.shadow=we,t.string32=pe,t.stringToBytes=_e,t.stringToPDFString=oe,t.stringToUTF8String=te,t.unreachable=W,t.utf8StringToString=ee,t.warn=Y;const F=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=F;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const g=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=g;const V=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=V;const k=1.35;t.LINE_FACTOR=k;const M=.35;t.LINE_DESCENT_FACTOR=M;const A=M/k;t.BASELINE_FACTOR=A;const l={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=l;const r={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=r;const R="pdfjs_internal_editor_";t.AnnotationEditorPrefix=R;const x={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=x;const b={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=b;const d={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=d;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=v;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=f;const w={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=w;const E={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=E;const p={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=p;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=y;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=s;const i={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=i;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=S;const m={O:"PageOpen",C:"PageClose"};t.PageActionEventType=m;const h={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=h;const D={NONE:0,BINARY:1};t.CMapCompressionType=D;const C={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=C;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=z;let ie=h.WARNINGS;function T(Se){Number.isInteger(Se)&&(ie=Se)}function q(){return ie}function J(Se){ie>=h.INFOS&&console.log(`Info: ${Se}`)}function Y(Se){ie>=h.WARNINGS&&console.log(`Warning: ${Se}`)}function W(Se){throw new Error(Se)}function le(Se,_){Se||W(_)}function $(Se){switch(Se==null?void 0:Se.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(Se,_=null,I=null){if(!Se)return null;try{if(I&&typeof Se=="string"){if(I.addDefaultProtocol&&Se.startsWith("www.")){const ae=Se.match(/\./g);(ae==null?void 0:ae.length)>=2&&(Se=`http://${Se}`)}if(I.tryConvertEncoding)try{Se=te(Se)}catch{}}const he=_?new URL(Se,_):new URL(Se);if($(he))return he}catch{}return null}function we(Se,_,I,he=!1){return Object.defineProperty(Se,_,{value:I,enumerable:!he,configurable:!0,writable:!1}),I}const N=function(){function _(I,he){this.constructor===_&&W("Cannot initialize BaseException."),this.message=I,this.name=he}return _.prototype=new Error,_.constructor=_,_}();t.BaseException=N;class a extends N{constructor(_,I){super(_,"PasswordException"),this.code=I}}t.PasswordException=a;class u extends N{constructor(_,I){super(_,"UnknownErrorException"),this.details=I}}t.UnknownErrorException=u;class c extends N{constructor(_){super(_,"InvalidPDFException")}}t.InvalidPDFException=c;class P extends N{constructor(_){super(_,"MissingPDFException")}}t.MissingPDFException=P;class L extends N{constructor(_,I){super(_,"UnexpectedResponseException"),this.status=I}}t.UnexpectedResponseException=L;class H extends N{constructor(_){super(_,"FormatError")}}t.FormatError=H;class K extends N{constructor(_){super(_,"AbortException")}}t.AbortException=K;function ne(Se){(typeof Se!="object"||(Se==null?void 0:Se.length)===void 0)&&W("Invalid argument for bytesToString");const _=Se.length,I=8192;if(_<I)return String.fromCharCode.apply(null,Se);const he=[];for(let ae=0;ae<_;ae+=I){const ue=Math.min(ae+I,_),ve=Se.subarray(ae,ue);he.push(String.fromCharCode.apply(null,ve))}return he.join("")}function _e(Se){typeof Se!="string"&&W("Invalid argument for stringToBytes");const _=Se.length,I=new Uint8Array(_);for(let he=0;he<_;++he)I[he]=Se.charCodeAt(he)&255;return I}function pe(Se){return String.fromCharCode(Se>>24&255,Se>>16&255,Se>>8&255,Se&255)}function Pe(Se){return Object.keys(Se).length}function se(Se){const _=Object.create(null);for(const[I,he]of Se)_[I]=he;return _}function be(){const Se=new Uint8Array(4);return Se[0]=1,new Uint32Array(Se.buffer,0,1)[0]===1}function ge(){try{return new Function(""),!0}catch{return!1}}class Fe{static get isLittleEndian(){return we(this,"isLittleEndian",be())}static get isEvalSupported(){return we(this,"isEvalSupported",ge())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?we(this,"platform",{isWin:!1,isMac:!1}):we(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var _,I;return we(this,"isCSSRoundSupported",(I=(_=globalThis.CSS)==null?void 0:_.supports)==null?void 0:I.call(_,"width: round(1.5px, 1px)"))}}t.FeatureTest=Fe;const Re=[...Array(256).keys()].map(Se=>Se.toString(16).padStart(2,"0"));class xe{static makeHexColor(_,I,he){return`#${Re[_]}${Re[I]}${Re[he]}`}static scaleMinMax(_,I){let he;_[0]?(_[0]<0&&(he=I[0],I[0]=I[1],I[1]=he),I[0]*=_[0],I[1]*=_[0],_[3]<0&&(he=I[2],I[2]=I[3],I[3]=he),I[2]*=_[3],I[3]*=_[3]):(he=I[0],I[0]=I[2],I[2]=he,he=I[1],I[1]=I[3],I[3]=he,_[1]<0&&(he=I[2],I[2]=I[3],I[3]=he),I[2]*=_[1],I[3]*=_[1],_[2]<0&&(he=I[0],I[0]=I[1],I[1]=he),I[0]*=_[2],I[1]*=_[2]),I[0]+=_[4],I[1]+=_[4],I[2]+=_[5],I[3]+=_[5]}static transform(_,I){return[_[0]*I[0]+_[2]*I[1],_[1]*I[0]+_[3]*I[1],_[0]*I[2]+_[2]*I[3],_[1]*I[2]+_[3]*I[3],_[0]*I[4]+_[2]*I[5]+_[4],_[1]*I[4]+_[3]*I[5]+_[5]]}static applyTransform(_,I){const he=_[0]*I[0]+_[1]*I[2]+I[4],ae=_[0]*I[1]+_[1]*I[3]+I[5];return[he,ae]}static applyInverseTransform(_,I){const he=I[0]*I[3]-I[1]*I[2],ae=(_[0]*I[3]-_[1]*I[2]+I[2]*I[5]-I[4]*I[3])/he,ue=(-_[0]*I[1]+_[1]*I[0]+I[4]*I[1]-I[5]*I[0])/he;return[ae,ue]}static getAxialAlignedBoundingBox(_,I){const he=this.applyTransform(_,I),ae=this.applyTransform(_.slice(2,4),I),ue=this.applyTransform([_[0],_[3]],I),ve=this.applyTransform([_[2],_[1]],I);return[Math.min(he[0],ae[0],ue[0],ve[0]),Math.min(he[1],ae[1],ue[1],ve[1]),Math.max(he[0],ae[0],ue[0],ve[0]),Math.max(he[1],ae[1],ue[1],ve[1])]}static inverseTransform(_){const I=_[0]*_[3]-_[1]*_[2];return[_[3]/I,-_[1]/I,-_[2]/I,_[0]/I,(_[2]*_[5]-_[4]*_[3])/I,(_[4]*_[1]-_[5]*_[0])/I]}static singularValueDecompose2dScale(_){const I=[_[0],_[2],_[1],_[3]],he=_[0]*I[0]+_[1]*I[2],ae=_[0]*I[1]+_[1]*I[3],ue=_[2]*I[0]+_[3]*I[2],ve=_[2]*I[1]+_[3]*I[3],j=(he+ve)/2,ce=Math.sqrt((he+ve)**2-4*(he*ve-ue*ae))/2,Me=j+ce||1,Ae=j-ce||1;return[Math.sqrt(Me),Math.sqrt(Ae)]}static normalizeRect(_){const I=_.slice(0);return _[0]>_[2]&&(I[0]=_[2],I[2]=_[0]),_[1]>_[3]&&(I[1]=_[3],I[3]=_[1]),I}static intersect(_,I){const he=Math.max(Math.min(_[0],_[2]),Math.min(I[0],I[2])),ae=Math.min(Math.max(_[0],_[2]),Math.max(I[0],I[2]));if(he>ae)return null;const ue=Math.max(Math.min(_[1],_[3]),Math.min(I[1],I[3])),ve=Math.min(Math.max(_[1],_[3]),Math.max(I[1],I[3]));return ue>ve?null:[he,ue,ae,ve]}static bezierBoundingBox(_,I,he,ae,ue,ve,j,ce){const Me=[],Ae=[[],[]];let ke,Oe,je,Ce,qe,Ve,Q,o;for(let fe=0;fe<2;++fe){if(fe===0?(Oe=6*_-12*he+6*ue,ke=-3*_+9*he-9*ue+3*j,je=3*he-3*_):(Oe=6*I-12*ae+6*ve,ke=-3*I+9*ae-9*ve+3*ce,je=3*ae-3*I),Math.abs(ke)<1e-12){if(Math.abs(Oe)<1e-12)continue;Ce=-je/Oe,0<Ce&&Ce<1&&Me.push(Ce);continue}Q=Oe*Oe-4*je*ke,o=Math.sqrt(Q),!(Q<0)&&(qe=(-Oe+o)/(2*ke),0<qe&&qe<1&&Me.push(qe),Ve=(-Oe-o)/(2*ke),0<Ve&&Ve<1&&Me.push(Ve))}let B=Me.length,X;const re=B;for(;B--;)Ce=Me[B],X=1-Ce,Ae[0][B]=X*X*X*_+3*X*X*Ce*he+3*X*Ce*Ce*ue+Ce*Ce*Ce*j,Ae[1][B]=X*X*X*I+3*X*X*Ce*ae+3*X*Ce*Ce*ve+Ce*Ce*Ce*ce;return Ae[0][re]=_,Ae[1][re]=I,Ae[0][re+1]=j,Ae[1][re+1]=ce,Ae[0].length=Ae[1].length=re+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}t.Util=xe;const de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(Se){if(Se[0]>="ï"){let I;if(Se[0]==="þ"&&Se[1]==="ÿ"?I="utf-16be":Se[0]==="ÿ"&&Se[1]==="þ"?I="utf-16le":Se[0]==="ï"&&Se[1]==="»"&&Se[2]==="¿"&&(I="utf-8"),I)try{const he=new TextDecoder(I,{fatal:!0}),ae=_e(Se);return he.decode(ae)}catch(he){Y(`stringToPDFString: "${he}".`)}}const _=[];for(let I=0,he=Se.length;I<he;I++){const ae=de[Se.charCodeAt(I)];_.push(ae?String.fromCharCode(ae):Se.charAt(I))}return _.join("")}function te(Se){return decodeURIComponent(escape(Se))}function ee(Se){return unescape(encodeURIComponent(Se))}function me(Se){return typeof Se=="object"&&(Se==null?void 0:Se.byteLength)!==void 0}function Te(Se,_){if(Se.length!==_.length)return!1;for(let I=0,he=Se.length;I<he;I++)if(Se[I]!==_[I])return!1;return!0}function Le(Se=new Date){return[Se.getUTCFullYear().toString(),(Se.getUTCMonth()+1).toString().padStart(2,"0"),Se.getUTCDate().toString().padStart(2,"0"),Se.getUTCHours().toString().padStart(2,"0"),Se.getUTCMinutes().toString().padStart(2,"0"),Se.getUTCSeconds().toString().padStart(2,"0")].join("")}class Be{constructor(){O(this,Ze,!1);this.promise=new Promise((_,I)=>{this.resolve=he=>{Z(this,Ze,!0),_(he)},this.reject=he=>{Z(this,Ze,!0),I(he)}})}get settled(){return e(this,Ze)}}Ze=new WeakMap,t.PromiseCapability=Be;let Ue=null,$e=null;function Ge(Se){return Ue||(Ue=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$e=new Map([["ﬅ","ſt"]])),Se.replaceAll(Ue,(_,I,he)=>I?I.normalize("NFKC"):$e.get(he))}function Ke(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Se=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Se);else for(let _=0;_<32;_++)Se[_]=Math.floor(Math.random()*255);return ne(Se)}const Xe="pdfjs_internal_id_";t.AnnotationPrefix=Xe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var U,F,n,g,ut,k,xt,A,l,r,R,x,b,d,v,f,Ft,E,p,Kt,s,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(m){if(typeof m=="string"||m instanceof URL?m={url:m}:(0,_util.isArrayBuffer)(m)&&(m={data:m}),typeof m!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:D}=h,C=m.url?getUrlProp(m.url):null,z=m.data?getDataProp(m.data):null,ie=m.httpHeaders||null,T=m.withCredentials===!0,q=m.password??null,J=m.range instanceof PDFDataRangeTransport?m.range:null,Y=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let W=m.worker instanceof PDFWorker?m.worker:null;const le=m.verbosity,$=typeof m.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(m.docBaseUrl)?m.docBaseUrl:null,Ee=typeof m.cMapUrl=="string"?m.cMapUrl:null,we=m.cMapPacked!==!1,N=m.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof m.standardFontDataUrl=="string"?m.standardFontDataUrl:null,u=m.StandardFontDataFactory||DefaultStandardFontDataFactory,c=m.stopAtErrors!==!0,P=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,L=m.isEvalSupported!==!1,H=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!_util.isNodeJS,K=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,ne=typeof m.disableFontFace=="boolean"?m.disableFontFace:_util.isNodeJS,_e=m.fontExtraProperties===!0,pe=m.enableXfa===!0,Pe=m.ownerDocument||globalThis.document,se=m.disableRange===!0,be=m.disableStream===!0,ge=m.disableAutoFetch===!0,Fe=m.pdfBug===!0,Re=J?J.length:m.length??NaN,xe=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!_util.isNodeJS&&!ne,de=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:N===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&Ee&&a&&(0,_display_utils.isValidFetchUrl)(Ee,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),oe=m.canvasFactory||new DefaultCanvasFactory({ownerDocument:Pe}),te=m.filterFactory||new DefaultFilterFactory({docId:D,ownerDocument:Pe}),ee=null;(0,_util.setVerbosityLevel)(le);const me={canvasFactory:oe,filterFactory:te};if(de||(me.cMapReaderFactory=new N({baseUrl:Ee,isCompressed:we}),me.standardFontDataFactory=new u({baseUrl:a})),!W){const Be={verbosity:le,port:_worker_options.GlobalWorkerOptions.workerPort};W=Be.port?PDFWorker.fromPort(Be):new PDFWorker(Be),h._worker=W}const Te={docId:D,apiVersion:"3.11.174",data:z,password:q,disableAutoFetch:ge,rangeChunkSize:Y,length:Re,docBaseUrl:$,enableXfa:pe,evaluatorOptions:{maxImageSize:P,disableFontFace:ne,ignoreErrors:c,isEvalSupported:L,isOffscreenCanvasSupported:H,canvasMaxAreaInBytes:K,fontExtraProperties:_e,useSystemFonts:xe,cMapUrl:de?Ee:null,standardFontDataUrl:de?a:null}},Le={ignoreErrors:c,isEvalSupported:L,disableFontFace:ne,fontExtraProperties:_e,enableXfa:pe,ownerDocument:Pe,disableAutoFetch:ge,pdfBug:Fe,styleElement:ee};return W.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Be=_fetchDocument(W,Te),Ue=new Promise(function($e){let Ge;J?Ge=new _transport_stream.PDFDataTransportStream({length:Re,initialData:J.initialData,progressiveDone:J.progressiveDone,contentDispositionFilename:J.contentDispositionFilename,disableRange:se,disableStream:be},J):z||(Ge=(Xe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Xe):(0,_display_utils.isValidFetchUrl)(Xe.url)?new _displayFetch_stream.PDFFetchStream(Xe):new _displayNetwork.PDFNetworkStream(Xe))({url:C,length:Re,httpHeaders:ie,withCredentials:T,rangeChunkSize:Y,disableRange:se,disableStream:be})),$e(Ge)});return Promise.all([Be,Ue]).then(function([$e,Ge]){if(h.destroyed)throw new Error("Loading aborted");const Ke=new _message_handler.MessageHandler(D,$e,W.port),Xe=new WorkerTransport(Ke,h,Ge,Le,me);h._transport=Xe,Ke.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(m,h){if(m.destroyed)throw new Error("Worker was destroyed");const D=await m.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(m.destroyed)throw new Error("Worker was destroyed");return D}function getUrlProp(m){if(m instanceof URL)return m.href;try{return new URL(m,window.location).href}catch{if(_util.isNodeJS&&typeof m=="string")return m}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(m){if(_util.isNodeJS&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return(0,_util.stringToBytes)(m);if(typeof m=="object"&&!isNaN(m==null?void 0:m.length)||(0,_util.isArrayBuffer)(m))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${dt(t,U)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,D,C;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((D=this._transport)==null?void 0:D.destroy())}catch(z){throw(C=this._worker)!=null&&C.port&&delete this._worker._pendingDestroy,z}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};U=new WeakMap,O(t,U,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,D,C=!1,z=null){this.length=h,this.initialData=D,this.progressiveDone=C,this.contentDispositionFilename=z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,D){for(const C of this._rangeListeners)C(h,D)}onDataProgress(h,D){this._readyCapability.promise.then(()=>{for(const C of this._progressListeners)C(h,D)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,D){this._pdfInfo=h,this._transport=D,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(C=>{if(!C)return C;const z=[];for(const ie in C)z.push(...C[ie]);return z}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,D,C,z=!1){O(this,g);O(this,k);O(this,F,null);O(this,n,!1);this._pageIndex=h,this._pageInfo=D,this._transport=C,this._stats=z?new _display_utils.StatTimer:null,this._pdfBug=z,this.commonObjs=C.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:D=this.rotate,offsetX:C=0,offsetY:z=0,dontFlip:ie=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:D,offsetX:C,offsetY:z,dontFlip:ie})}getAnnotations({intent:h="display"}={}){const D=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,D.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:D,intent:C="display",annotationMode:z=_util.AnnotationMode.ENABLE,transform:ie=null,background:T=null,optionalContentConfigPromise:q=null,annotationCanvasMap:J=null,pageColors:Y=null,printAnnotationStorage:W=null}){var u,c;(u=this._stats)==null||u.time("Overall");const le=this._transport.getRenderingIntent(C,z,W);Z(this,n,!1),G(this,k,xt).call(this),q||(q=this._transport.getOptionalContentConfig());let $=this._intentStates.get(le.cacheKey);$||($=Object.create(null),this._intentStates.set(le.cacheKey,$)),$.streamReaderCancelTimeout&&(clearTimeout($.streamReaderCancelTimeout),$.streamReaderCancelTimeout=null);const Ee=!!(le.renderingIntent&_util.RenderingIntentFlag.PRINT);$.displayReadyCapability||($.displayReadyCapability=new _util.PromiseCapability,$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(le));const we=P=>{var L,H;$.renderTasks.delete(N),(this._maybeCleanupAfterRender||Ee)&&Z(this,n,!0),G(this,g,ut).call(this,!Ee),P?(N.capability.reject(P),this._abortOperatorList({intentState:$,reason:P instanceof Error?P:new Error(P)})):N.capability.resolve(),(L=this._stats)==null||L.timeEnd("Rendering"),(H=this._stats)==null||H.timeEnd("Overall")},N=new InternalRenderTask({callback:we,params:{canvasContext:h,viewport:D,transform:ie,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:$.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ee,pdfBug:this._pdfBug,pageColors:Y});($.renderTasks||($.renderTasks=new Set)).add(N);const a=N.task;return Promise.all([$.displayReadyCapability.promise,q]).then(([P,L])=>{var H;if(this.destroyed){we();return}(H=this._stats)==null||H.time("Rendering"),N.initializeGraphics({transparency:P,optionalContentConfig:L}),N.operatorListChanged()}).catch(we),a}getOperatorList({intent:h="display",annotationMode:D=_util.AnnotationMode.ENABLE,printAnnotationStorage:C=null}={}){var J;function z(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(q))}const ie=this._transport.getRenderingIntent(h,D,C,!0);let T=this._intentStates.get(ie.cacheKey);T||(T=Object.create(null),this._intentStates.set(ie.cacheKey,T));let q;return T.opListReadCapability||(q=Object.create(null),q.operatorListChanged=z,T.opListReadCapability=new _util.PromiseCapability,(T.renderTasks||(T.renderTasks=new Set)).add(q),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(ie)),T.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:D===!0},{highWaterMark:100,size(z){return z.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(C=>_xfa_text.XfaText.textContent(C));const D=this.streamTextContent(h);return new Promise(function(C,z){function ie(){T.read().then(function({value:J,done:Y}){if(Y){C(q);return}Object.assign(q.styles,J.styles),q.items.push(...J.items),ie()},z)}const T=D.getReader(),q={items:[],styles:Object.create(null)};ie()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const C of D.renderTasks)h.push(C.completed),C.cancel();return this.objs.clear(),Z(this,n,!1),G(this,k,xt).call(this),Promise.all(h)}cleanup(h=!1){Z(this,n,!0);const D=G(this,g,ut).call(this,!1);return h&&D&&this._stats&&(this._stats=new _display_utils.StatTimer),D}_startRenderPage(h,D){var z,ie;const C=this._intentStates.get(D);C&&((z=this._stats)==null||z.timeEnd("Page Request"),(ie=C.displayReadyCapability)==null||ie.resolve(h))}_renderPageChunk(h,D){for(let C=0,z=h.length;C<z;C++)D.operatorList.fnArray.push(h.fnArray[C]),D.operatorList.argsArray.push(h.argsArray[C]);D.operatorList.lastChunk=h.lastChunk,D.operatorList.separateAnnots=h.separateAnnots;for(const C of D.renderTasks)C.operatorListChanged();h.lastChunk&&G(this,g,ut).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:D,annotationStorageSerializable:C}){const{map:z,transfers:ie}=C,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:D,annotationStorage:z},ie).getReader(),J=this._intentStates.get(D);J.streamReader=q;const Y=()=>{q.read().then(({value:W,done:le})=>{if(le){J.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(W,J),Y())},W=>{if(J.streamReader=null,!this._transport.destroyed){if(J.operatorList){J.operatorList.lastChunk=!0;for(const le of J.renderTasks)le.operatorListChanged();G(this,g,ut).call(this,!0)}if(J.displayReadyCapability)J.displayReadyCapability.reject(W);else if(J.opListReadCapability)J.opListReadCapability.reject(W);else throw W}})};Y()}_abortOperatorList({intentState:h,reason:D,force:C=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!C){if(h.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let z=RENDERING_CANCELLED_TIMEOUT;D.extraDelay>0&&D.extraDelay<1e3&&(z+=D.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:D,force:!0})},z);return}}if(h.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[z,ie]of this._intentStates)if(ie===h){this._intentStates.delete(z);break}this.cleanup()}}}get stats(){return this._stats}}F=new WeakMap,n=new WeakMap,g=new WeakSet,ut=function(h=!1){if(G(this,k,xt).call(this),!e(this,n)||this.destroyed)return!1;if(h)return Z(this,F,setTimeout(()=>{Z(this,F,null),G(this,g,ut).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:D,operatorList:C}of this._intentStates.values())if(D.size>0||!C.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Z(this,n,!1),!0},k=new WeakSet,xt=function(){e(this,F)&&(clearTimeout(e(this,F)),Z(this,F,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){O(this,A,new Set);O(this,l,Promise.resolve())}postMessage(h,D){const C={data:structuredClone(h,D?{transfer:D}:null)};e(this,l).then(()=>{for(const z of e(this,A))z.call(this,C)})}addEventListener(h,D){e(this,A).add(D)}removeEventListener(h,D){e(this,A).delete(D)}terminate(){e(this,A).clear()}}A=new WeakMap,l=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(r=document==null?void 0:document.currentScript)==null?void 0:r.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,h){let D;try{if(D=new URL(m),!D.origin||D.origin==="null")return!1}catch{return!1}const C=new URL(h,D);return D.origin===C.origin},PDFWorkerUtil.createCDNWrapper=function(m){const h=`importScripts("${m}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:m=null,port:h=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){var C;if(this.name=m,this.destroyed=!1,this.verbosity=D,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((C=e(_PDFWorker,R))!=null&&C.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,R)||Z(_PDFWorker,R,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:m}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const h=new Worker(m),D=new _message_handler.MessageHandler("main","worker",h),C=()=>{h.removeEventListener("error",z),D.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},z=()=>{this._webWorker||C()};h.addEventListener("error",z),D.on("test",T=>{if(h.removeEventListener("error",z),this.destroyed){C();return}T?(this._messageHandler=D,this._port=h,this._webWorker=h,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),h.terminate())}),D.on("ready",T=>{if(h.removeEventListener("error",z),this.destroyed){C();return}try{ie()}catch{this._setupFakeWorker()}});const ie=()=>{const T=new Uint8Array;D.send("test",T,[T.buffer])};ie();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const D=`fake${PDFWorkerUtil.fakeWorkerId++}`,C=new _message_handler.MessageHandler(D+"_worker",D,h);m.setup(C,h);const z=new _message_handler.MessageHandler(D,D+"_worker",h);this._messageHandler=z,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){var m;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(m=e(_PDFWorker,R))==null||m.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){var D;if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(D=e(this,R))==null?void 0:D.get(m.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};R=new WeakMap,O(_PDFWorker,R,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,D,C,z,ie){O(this,f);O(this,x,new Map);O(this,b,new Map);O(this,d,new Map);O(this,v,null);this.messageHandler=h,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:z.ownerDocument,styleElement:z.styleElement}),this._params=z,this.canvasFactory=ie.canvasFactory,this.filterFactory=ie.filterFactory,this.cMapReaderFactory=ie.cMapReaderFactory,this.standardFontDataFactory=ie.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=C,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,D=_util.AnnotationMode.ENABLE,C=null,z=!1){let ie=_util.RenderingIntentFlag.DISPLAY,T=_annotation_storage.SerializableEmpty;switch(h){case"any":ie=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":ie=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(D){case _util.AnnotationMode.DISABLE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:ie+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=(ie&_util.RenderingIntentFlag.PRINT&&C instanceof _annotation_storage.PrintAnnotationStorage?C:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return z&&(ie+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:ie,cacheKey:`${ie}_${T.hash}`,annotationStorageSerializable:T}}destroy(){var C;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(C=e(this,v))==null||C.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const z of e(this,b).values())h.push(z._destroy());e(this,b).clear(),e(this,d).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return h.push(D),Promise.all(h).then(()=>{var z;this.commonObjs.clear(),this.fontLoader.clear(),e(this,x).clear(),this.filterFactory.destroy(),(z=this._networkStream)==null||z.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:D}=this;h.on("GetReader",(C,z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ie=>{this._lastProgress={loaded:ie.loaded,total:ie.total}},z.onPull=()=>{this._fullReader.read().then(function({value:ie,done:T}){if(T){z.close();return}(0,_util.assert)(ie instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(ie),1,[ie])}).catch(ie=>{z.error(ie)})},z.onCancel=ie=>{this._fullReader.cancel(ie),z.ready.catch(T=>{if(!this.destroyed)throw T})}}),h.on("ReaderHeadersReady",C=>{const z=new _util.PromiseCapability,ie=this._fullReader;return ie.headersReady.then(()=>{var T;(!ie.isStreamingSupported||!ie.isRangeSupported)&&(this._lastProgress&&((T=D.onProgress)==null||T.call(D,this._lastProgress)),ie.onProgress=q=>{var J;(J=D.onProgress)==null||J.call(D,{loaded:q.loaded,total:q.total})}),z.resolve({isStreamingSupported:ie.isStreamingSupported,isRangeSupported:ie.isRangeSupported,contentLength:ie.contentLength})},z.reject),z.promise}),h.on("GetRangeReader",(C,z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ie=this._networkStream.getRangeReader(C.begin,C.end);if(!ie){z.close();return}z.onPull=()=>{ie.read().then(function({value:T,done:q}){if(q){z.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{z.error(T)})},z.onCancel=T=>{ie.cancel(T),z.ready.catch(q=>{if(!this.destroyed)throw q})}}),h.on("GetDoc",({pdfInfo:C})=>{this._numPages=C.numPages,this._htmlForXfa=C.htmlForXfa,delete C.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(C,this))}),h.on("DocException",function(C){let z;switch(C.name){case"PasswordException":z=new _util.PasswordException(C.message,C.code);break;case"InvalidPDFException":z=new _util.InvalidPDFException(C.message);break;case"MissingPDFException":z=new _util.MissingPDFException(C.message);break;case"UnexpectedResponseException":z=new _util.UnexpectedResponseException(C.message,C.status);break;case"UnknownErrorException":z=new _util.UnknownErrorException(C.message,C.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(z)}),h.on("PasswordRequest",C=>{if(Z(this,v,new _util.PromiseCapability),D.onPassword){const z=ie=>{ie instanceof Error?e(this,v).reject(ie):e(this,v).resolve({password:ie})};try{D.onPassword(z,C.code)}catch(ie){e(this,v).reject(ie)}}else e(this,v).reject(new _util.PasswordException(C.message,C.code));return e(this,v).promise}),h.on("DataLoaded",C=>{var z;(z=D.onProgress)==null||z.call(D,{loaded:C.length,total:C.length}),this.downloadInfoCapability.resolve(C)}),h.on("StartRenderPage",C=>{if(this.destroyed)return;e(this,b).get(C.pageIndex)._startRenderPage(C.transparency,C.cacheKey)}),h.on("commonobj",([C,z,ie])=>{var T;if(!this.destroyed&&!this.commonObjs.has(C))switch(z){case"Font":const q=this._params;if("error"in ie){const W=ie.error;(0,_util.warn)(`Error during font loading: ${W}`),this.commonObjs.resolve(C,W);break}const J=q.pdfBug&&((T=globalThis.FontInspector)!=null&&T.enabled)?(W,le)=>globalThis.FontInspector.fontAdded(W,le):null,Y=new _font_loader.FontFaceObject(ie,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:J});this.fontLoader.bind(Y).catch(W=>h.sendWithPromise("FontFallback",{id:C})).finally(()=>{!q.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(C,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(C,ie);break;default:throw new Error(`Got unknown common object type ${z}`)}}),h.on("obj",([C,z,ie,T])=>{var J;if(this.destroyed)return;const q=e(this,b).get(z);if(!q.objs.has(C))switch(ie){case"Image":if(q.objs.resolve(C,T),T){let Y;if(T.bitmap){const{width:W,height:le}=T;Y=W*le*4}else Y=((J=T.data)==null?void 0:J.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(C,T);break;default:throw new Error(`Got unknown object type ${ie}`)}}),h.on("DocProgress",C=>{var z;this.destroyed||(z=D.onProgress)==null||z.call(D,{loaded:C.loaded,total:C.total})}),h.on("FetchBuiltInCMap",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(C):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(C):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var C;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:D}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((C=this._fullReader)==null?void 0:C.filename)??null},D).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=h-1,C=e(this,d).get(D);if(C)return C;const z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then(ie=>{if(this.destroyed)throw new Error("Transport destroyed");const T=new PDFPageProxy(D,ie,this,this._params.pdfBug);return e(this,b).set(D,T),T});return e(this,d).set(D,z),z}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:D})}getFieldObjects(){return G(this,f,Ft).call(this,"GetFieldObjects")}hasJSActions(){return G(this,f,Ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return G(this,f,Ft).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",D=e(this,x).get(h);if(D)return D;const C=this.messageHandler.sendWithPromise(h,null).then(z=>{var ie,T;return{info:z[0],metadata:z[1]?new _metadata.Metadata(z[1]):null,contentDispositionFilename:((ie=this._fullReader)==null?void 0:ie.filename)??null,contentLength:((T=this._fullReader)==null?void 0:T.contentLength)??null}});return e(this,x).set(h,C),C}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const D of e(this,b).values())if(!D.cleanup())throw new Error(`startCleanup: Page ${D.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),e(this,x).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:D}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:D})}}x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakSet,Ft=function(h,D=null){const C=e(this,x).get(h);if(C)return C;const z=this.messageHandler.sendWithPromise(h,D);return e(this,x).set(h,z),z};class PDFObjects{constructor(){O(this,p);O(this,E,Object.create(null))}get(h,D=null){if(D){const z=G(this,p,Kt).call(this,h);return z.capability.promise.then(()=>D(z.data)),null}const C=e(this,E)[h];if(!(C!=null&&C.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return C.data}has(h){const D=e(this,E)[h];return(D==null?void 0:D.capability.settled)||!1}resolve(h,D=null){const C=G(this,p,Kt).call(this,h);C.data=D,C.capability.resolve()}clear(){var h;for(const D in e(this,E)){const{data:C}=e(this,E)[D];(h=C==null?void 0:C.bitmap)==null||h.close()}Z(this,E,Object.create(null))}}E=new WeakMap,p=new WeakSet,Kt=function(h){var D;return(D=e(this,E))[h]||(D[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){O(this,s,null);Z(this,s,h),this.onContinue=null}get promise(){return e(this,s).capability.promise}cancel(h=0){e(this,s).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=e(this,s).operatorList;if(!h)return!1;const{annotationCanvasMap:D}=e(this,s);return h.form||h.canvas&&(D==null?void 0:D.size)>0}}s=new WeakMap,exports.RenderTask=RenderTask;const S=class S{constructor({callback:h,params:D,objs:C,commonObjs:z,annotationCanvasMap:ie,operatorList:T,pageIndex:q,canvasFactory:J,filterFactory:Y,useRequestAnimationFrame:W=!1,pdfBug:le=!1,pageColors:$=null}){this.callback=h,this.params=D,this.objs=C,this.commonObjs=z,this.annotationCanvasMap=ie,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=q,this.canvasFactory=J,this.filterFactory=Y,this._pdfBug=le,this.pageColors=$,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=W===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:D}){var q,J;if(this.cancelled)return;if(this._canvas){if(e(S,i).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(S,i).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:C,viewport:z,transform:ie,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(C,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ie,viewport:z,transparency:h,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(h=null,D=0){var C;this.running=!1,this.cancelled=!0,(C=this.gfx)==null||C.endDrawing(),e(S,i).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,D))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(S,i).delete(this._canvas),this.callback())))}};i=new WeakMap,O(S,i,new WeakSet);let InternalRenderTask=S;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(U,t,F)=>{var l,r,R,Ji,b;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=F(1),g=F(4),V=F(8);const k=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=k;class M{constructor(){O(this,R);O(this,l,!1);O(this,r,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,f){const w=e(this,r).get(v);return w===void 0?f:Object.assign(f,w)}getRawValue(v){return e(this,r).get(v)}remove(v){if(e(this,r).delete(v),e(this,r).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of e(this,r).values())if(f instanceof g.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,f){const w=e(this,r).get(v);let E=!1;if(w!==void 0)for(const[p,y]of Object.entries(f))w[p]!==y&&(E=!0,w[p]=y);else E=!0,e(this,r).set(v,f);E&&G(this,R,Ji).call(this),f instanceof g.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(v){return e(this,r).has(v)}getAll(){return e(this,r).size>0?(0,n.objectFromMap)(e(this,r)):null}setAll(v){for(const[f,w]of Object.entries(v))this.setValue(f,w)}get size(){return e(this,r).size}resetModified(){e(this,l)&&(Z(this,l,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new A(this)}get serializable(){if(e(this,r).size===0)return k;const v=new Map,f=new V.MurmurHash3_64,w=[],E=Object.create(null);let p=!1;for(const[y,s]of e(this,r)){const i=s instanceof g.AnnotationEditor?s.serialize(!1,E):s;i&&(v.set(y,i),f.update(`${y}:${JSON.stringify(i)}`),p||(p=!!i.bitmap))}if(p)for(const y of v.values())y.bitmap&&w.push(y.bitmap);return v.size>0?{map:v,hash:f.hexdigest(),transfers:w}:k}}l=new WeakMap,r=new WeakMap,R=new WeakSet,Ji=function(){e(this,l)||(Z(this,l,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=M;class A extends M{constructor(f){super();O(this,b,void 0);const{map:w,hash:E,transfers:p}=f.serializable,y=structuredClone(w,p?{transfer:p}:null);Z(this,b,{map:y,hash:E,transfers:p})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,b)}}b=new WeakMap,t.PrintAnnotationStorage=A},(U,t,F)=>{var A,l,r,R,x,b,d,v,f,w,E,p,y,s,i,Qt,m,Zt,D,Jt,z,ei,T,en,J,tn,W,nn,$,ti,we,sn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=F(5),g=F(1),V=F(6);const a=class a{constructor(c){O(this,i);O(this,m);O(this,z);O(this,T);O(this,J);O(this,W);O(this,$);O(this,we);O(this,A,"");O(this,l,!1);O(this,r,null);O(this,R,null);O(this,x,null);O(this,b,!1);O(this,d,null);O(this,v,this.focusin.bind(this));O(this,f,this.focusout.bind(this));O(this,w,!1);O(this,E,!1);O(this,p,!1);tt(this,"_initialOptions",Object.create(null));tt(this,"_uiManager",null);tt(this,"_focusEventsAllowed",!0);tt(this,"_l10nPromise",null);O(this,y,!1);O(this,s,a._zIndex++);this.constructor===a&&(0,g.unreachable)("Cannot initialize AnnotationEditor."),this.parent=c.parent,this.id=c.id,this.width=this.height=null,this.pageIndex=c.parent.pageIndex,this.name=c.name,this.div=null,this._uiManager=c.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=c.isCentered,this._structTreeParentId=null;const{rotation:P,rawDims:{pageWidth:L,pageHeight:H,pageX:K,pageY:ne}}=this.parent.viewport;this.rotation=P,this.pageRotation=(360+P-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[L,H],this.pageTranslation=[K,ne];const[_e,pe]=this.parentDimensions;this.x=c.x/_e,this.y=c.y/pe,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,g.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(c){const P=new M({id:c.parent.getNextId(),parent:c.parent,uiManager:c._uiManager});P.annotationElementId=c.annotationElementId,P.deleted=!0,P._uiManager.addToAnnotationStorage(P)}static initialize(c,P=null){if(a._l10nPromise||(a._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(H=>[H,c.get(H)]))),P!=null&&P.strings)for(const H of P.strings)a._l10nPromise.set(H,c.get(H));if(a._borderLineWidth!==-1)return;const L=getComputedStyle(document.documentElement);a._borderLineWidth=parseFloat(L.getPropertyValue("--outline-width"))||0}static updateDefaultParams(c,P){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(c){return!1}static paste(c,P){(0,g.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,y)}set _isDraggable(c){var P;Z(this,y,c),(P=this.div)==null||P.classList.toggle("draggable",c)}center(){const[c,P]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*P/(c*2),this.y+=this.width*c/(P*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*P/(c*2),this.y-=this.width*c/(P*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(c){this._uiManager.addCommands(c)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,s)}setParent(c){c!==null&&(this.pageIndex=c.pageIndex,this.pageDimensions=c.pageDimensions),this.parent=c}focusin(c){this._focusEventsAllowed&&(e(this,w)?Z(this,w,!1):this.parent.setSelected(this))}focusout(c){var L;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const P=c.relatedTarget;P!=null&&P.closest(`#${this.id}`)||(c.preventDefault(),(L=this.parent)!=null&&L.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(c,P,L,H){const[K,ne]=this.parentDimensions;[L,H]=this.screenToPageTranslation(L,H),this.x=(c+L)/K,this.y=(P+H)/ne,this.fixAndSetPosition()}translate(c,P){G(this,i,Qt).call(this,this.parentDimensions,c,P)}translateInPage(c,P){G(this,i,Qt).call(this,this.pageDimensions,c,P),this.div.scrollIntoView({block:"nearest"})}drag(c,P){const[L,H]=this.parentDimensions;if(this.x+=c/L,this.y+=P/H,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Pe,y:se}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Pe,se)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:K,y:ne}=this;const[_e,pe]=G(this,m,Zt).call(this);K+=_e,ne+=pe,this.div.style.left=`${(100*K).toFixed(2)}%`,this.div.style.top=`${(100*ne).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[c,P]=this.pageDimensions;let{x:L,y:H,width:K,height:ne}=this;switch(K*=c,ne*=P,L*=c,H*=P,this.rotation){case 0:L=Math.max(0,Math.min(c-K,L)),H=Math.max(0,Math.min(P-ne,H));break;case 90:L=Math.max(0,Math.min(c-ne,L)),H=Math.min(P,Math.max(K,H));break;case 180:L=Math.min(c,Math.max(K,L)),H=Math.min(P,Math.max(ne,H));break;case 270:L=Math.min(c,Math.max(ne,L)),H=Math.max(0,Math.min(P-K,H));break}this.x=L/=c,this.y=H/=P;const[_e,pe]=G(this,m,Zt).call(this);L+=_e,H+=pe;const{style:Pe}=this.div;Pe.left=`${(100*L).toFixed(2)}%`,Pe.top=`${(100*H).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(c,P){var L;return G(L=a,D,Jt).call(L,c,P,this.parentRotation)}pageTranslationToScreen(c,P){var L;return G(L=a,D,Jt).call(L,c,P,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:c,pageDimensions:[P,L]}=this,H=P*c,K=L*c;return g.FeatureTest.isCSSRoundSupported?[Math.round(H),Math.round(K)]:[H,K]}setDims(c,P){var K;const[L,H]=this.parentDimensions;this.div.style.width=`${(100*c/L).toFixed(2)}%`,e(this,b)||(this.div.style.height=`${(100*P/H).toFixed(2)}%`),(K=e(this,r))==null||K.classList.toggle("small",c<a.SMALL_EDITOR_SIZE||P<a.SMALL_EDITOR_SIZE)}fixDims(){const{style:c}=this.div,{height:P,width:L}=c,H=L.endsWith("%"),K=!e(this,b)&&P.endsWith("%");if(H&&K)return;const[ne,_e]=this.parentDimensions;H||(c.width=`${(100*parseFloat(L)/ne).toFixed(2)}%`),!e(this,b)&&!K&&(c.height=`${(100*parseFloat(P)/_e).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,r))return;const c=Z(this,r,document.createElement("button"));c.className="altText";const P=await a._l10nPromise.get("editor_alt_text_button_label");c.textContent=P,c.setAttribute("aria-label",P),c.tabIndex="0",c.addEventListener("contextmenu",V.noContextMenu),c.addEventListener("pointerdown",L=>L.stopPropagation()),c.addEventListener("click",L=>{L.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),c.addEventListener("keydown",L=>{L.target===c&&L.key==="Enter"&&(L.preventDefault(),this._uiManager.editAltText(this))}),G(this,$,ti).call(this),this.div.append(c),a.SMALL_EDITOR_SIZE||(a.SMALL_EDITOR_SIZE=Math.min(128,Math.round(c.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,A),decorative:e(this,l)}}set altTextData({altText:c,decorative:P}){e(this,A)===c&&e(this,l)===P||(Z(this,A,c),Z(this,l,P),G(this,$,ti).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,v)),this.div.addEventListener("focusout",e(this,f));const[c,P]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*P/c).toFixed(2)}%`,this.div.style.maxHeight=`${(100*c/P).toFixed(2)}%`);const[L,H]=this.getInitialTranslation();return this.translate(L,H),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(c){const{isMac:P}=g.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&P){c.preventDefault();return}Z(this,w,!0),G(this,we,sn).call(this,c)}moveInDOM(){var c;(c=this.parent)==null||c.moveEditorInDOM(this)}_setParentAndPosition(c,P,L){c.changeParent(this),this.x=P,this.y=L,this.fixAndSetPosition()}getRect(c,P){const L=this.parentScale,[H,K]=this.pageDimensions,[ne,_e]=this.pageTranslation,pe=c/L,Pe=P/L,se=this.x*H,be=this.y*K,ge=this.width*H,Fe=this.height*K;switch(this.rotation){case 0:return[se+pe+ne,K-be-Pe-Fe+_e,se+pe+ge+ne,K-be-Pe+_e];case 90:return[se+Pe+ne,K-be+pe+_e,se+Pe+Fe+ne,K-be+pe+ge+_e];case 180:return[se-pe-ge+ne,K-be+Pe+_e,se-pe+ne,K-be+Pe+Fe+_e];case 270:return[se-Pe-Fe+ne,K-be-pe-ge+_e,se-Pe+ne,K-be-pe+_e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(c,P){const[L,H,K,ne]=c,_e=K-L,pe=ne-H;switch(this.rotation){case 0:return[L,P-ne,_e,pe];case 90:return[L,P-H,pe,_e];case 180:return[K,P-H,_e,pe];case 270:return[K,P-ne,pe,_e];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Z(this,p,!0)}disableEditMode(){Z(this,p,!1)}isInEditMode(){return e(this,p)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var c,P;(c=this.div)==null||c.addEventListener("focusin",e(this,v)),(P=this.div)==null||P.addEventListener("focusout",e(this,f))}serialize(c=!1,P=null){(0,g.unreachable)("An editor must be serializable")}static deserialize(c,P,L){const H=new this.prototype.constructor({parent:P,id:P.getNextId(),uiManager:L});H.rotation=c.rotation;const[K,ne]=H.pageDimensions,[_e,pe,Pe,se]=H.getRectInCurrentCoords(c.rect,ne);return H.x=_e/K,H.y=pe/ne,H.width=Pe/K,H.height=se/ne,H}remove(){var c;this.div.removeEventListener("focusin",e(this,v)),this.div.removeEventListener("focusout",e(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(c=e(this,r))==null||c.remove(),Z(this,r,null),Z(this,R,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(G(this,T,en).call(this),e(this,d).classList.remove("hidden"))}select(){var c;this.makeResizable(),(c=this.div)==null||c.classList.add("selectedEditor")}unselect(){var c,P,L;(c=e(this,d))==null||c.classList.add("hidden"),(P=this.div)==null||P.classList.remove("selectedEditor"),(L=this.div)!=null&&L.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(c,P){}disableEditing(){e(this,r)&&(e(this,r).hidden=!0)}enableEditing(){e(this,r)&&(e(this,r).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,E)}set isEditing(c){Z(this,E,c),this.parent&&(c?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(c,P){Z(this,b,!0);const L=c/P,{style:H}=this.div;H.aspectRatio=L,H.height="auto"}static get MIN_SIZE(){return 16}};A=new WeakMap,l=new WeakMap,r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,y=new WeakMap,s=new WeakMap,i=new WeakSet,Qt=function([c,P],L,H){[L,H]=this.screenToPageTranslation(L,H),this.x+=L/c,this.y+=H/P,this.fixAndSetPosition()},m=new WeakSet,Zt=function(){const[c,P]=this.parentDimensions,{_borderLineWidth:L}=a,H=L/c,K=L/P;switch(this.rotation){case 90:return[-H,K];case 180:return[H,K];case 270:return[H,-K];default:return[-H,-K]}},D=new WeakSet,Jt=function(c,P,L){switch(L){case 90:return[P,-c];case 180:return[-c,-P];case 270:return[-P,c];default:return[c,P]}},z=new WeakSet,ei=function(c){switch(c){case 90:{const[P,L]=this.pageDimensions;return[0,-P/L,L/P,0]}case 180:return[-1,0,0,-1];case 270:{const[P,L]=this.pageDimensions;return[0,P/L,-L/P,0]}default:return[1,0,0,1]}},T=new WeakSet,en=function(){if(e(this,d))return;Z(this,d,document.createElement("div")),e(this,d).classList.add("resizers");const c=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||c.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const P of c){const L=document.createElement("div");e(this,d).append(L),L.classList.add("resizer",P),L.addEventListener("pointerdown",G(this,J,tn).bind(this,P)),L.addEventListener("contextmenu",V.noContextMenu)}this.div.prepend(e(this,d))},J=new WeakSet,tn=function(c,P){P.preventDefault();const{isMac:L}=g.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&L)return;const H=G(this,W,nn).bind(this,c),K=this._isDraggable;this._isDraggable=!1;const ne={passive:!0,capture:!0};window.addEventListener("pointermove",H,ne);const _e=this.x,pe=this.y,Pe=this.width,se=this.height,be=this.parent.div.style.cursor,ge=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(P.target).cursor;const Fe=()=>{this._isDraggable=K,window.removeEventListener("pointerup",Fe),window.removeEventListener("blur",Fe),window.removeEventListener("pointermove",H,ne),this.parent.div.style.cursor=be,this.div.style.cursor=ge;const Re=this.x,xe=this.y,de=this.width,oe=this.height;Re===_e&&xe===pe&&de===Pe&&oe===se||this.addCommands({cmd:()=>{this.width=de,this.height=oe,this.x=Re,this.y=xe;const[te,ee]=this.parentDimensions;this.setDims(te*de,ee*oe),this.fixAndSetPosition()},undo:()=>{this.width=Pe,this.height=se,this.x=_e,this.y=pe;const[te,ee]=this.parentDimensions;this.setDims(te*Pe,ee*se),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Fe),window.addEventListener("blur",Fe)},W=new WeakSet,nn=function(c,P){const[L,H]=this.parentDimensions,K=this.x,ne=this.y,_e=this.width,pe=this.height,Pe=a.MIN_SIZE/L,se=a.MIN_SIZE/H,be=he=>Math.round(he*1e4)/1e4,ge=G(this,z,ei).call(this,this.rotation),Fe=(he,ae)=>[ge[0]*he+ge[2]*ae,ge[1]*he+ge[3]*ae],Re=G(this,z,ei).call(this,360-this.rotation),xe=(he,ae)=>[Re[0]*he+Re[2]*ae,Re[1]*he+Re[3]*ae];let de,oe,te=!1,ee=!1;switch(c){case"topLeft":te=!0,de=(he,ae)=>[0,0],oe=(he,ae)=>[he,ae];break;case"topMiddle":de=(he,ae)=>[he/2,0],oe=(he,ae)=>[he/2,ae];break;case"topRight":te=!0,de=(he,ae)=>[he,0],oe=(he,ae)=>[0,ae];break;case"middleRight":ee=!0,de=(he,ae)=>[he,ae/2],oe=(he,ae)=>[0,ae/2];break;case"bottomRight":te=!0,de=(he,ae)=>[he,ae],oe=(he,ae)=>[0,0];break;case"bottomMiddle":de=(he,ae)=>[he/2,ae],oe=(he,ae)=>[he/2,0];break;case"bottomLeft":te=!0,de=(he,ae)=>[0,ae],oe=(he,ae)=>[he,0];break;case"middleLeft":ee=!0,de=(he,ae)=>[0,ae/2],oe=(he,ae)=>[he,ae/2];break}const me=de(_e,pe),Te=oe(_e,pe);let Le=Fe(...Te);const Be=be(K+Le[0]),Ue=be(ne+Le[1]);let $e=1,Ge=1,[Ke,Xe]=this.screenToPageTranslation(P.movementX,P.movementY);if([Ke,Xe]=xe(Ke/L,Xe/H),te){const he=Math.hypot(_e,pe);$e=Ge=Math.max(Math.min(Math.hypot(Te[0]-me[0]-Ke,Te[1]-me[1]-Xe)/he,1/_e,1/pe),Pe/_e,se/pe)}else ee?$e=Math.max(Pe,Math.min(1,Math.abs(Te[0]-me[0]-Ke)))/_e:Ge=Math.max(se,Math.min(1,Math.abs(Te[1]-me[1]-Xe)))/pe;const Ze=be(_e*$e),Se=be(pe*Ge);Le=Fe(...oe(Ze,Se));const _=Be-Le[0],I=Ue-Le[1];this.width=Ze,this.height=Se,this.x=_,this.y=I,this.setDims(L*Ze,H*Se),this.fixAndSetPosition()},$=new WeakSet,ti=async function(){var L;const c=e(this,r);if(!c)return;if(!e(this,A)&&!e(this,l)){c.classList.remove("done"),(L=e(this,R))==null||L.remove();return}a._l10nPromise.get("editor_alt_text_edit_button_label").then(H=>{c.setAttribute("aria-label",H)});let P=e(this,R);if(!P){Z(this,R,P=document.createElement("span")),P.className="tooltip",P.setAttribute("role","tooltip");const H=P.id=`alt-text-tooltip-${this.id}`;c.setAttribute("aria-describedby",H);const K=100;c.addEventListener("mouseenter",()=>{Z(this,x,setTimeout(()=>{Z(this,x,null),e(this,R).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},K))}),c.addEventListener("mouseleave",()=>{var ne;clearTimeout(e(this,x)),Z(this,x,null),(ne=e(this,R))==null||ne.classList.remove("show")})}c.classList.add("done"),P.innerText=e(this,l)?await a._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,A),P.parentNode||c.append(P)},we=new WeakSet,sn=function(c){if(!this._isDraggable)return;const P=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let L,H;P&&(L={passive:!0,capture:!0},H=ne=>{const[_e,pe]=this.screenToPageTranslation(ne.movementX,ne.movementY);this._uiManager.dragSelectedEditors(_e,pe)},window.addEventListener("pointermove",H,L));const K=()=>{if(window.removeEventListener("pointerup",K),window.removeEventListener("blur",K),P&&window.removeEventListener("pointermove",H,L),Z(this,w,!1),!this._uiManager.endDragSession()){const{isMac:ne}=g.FeatureTest.platform;c.ctrlKey&&!ne||c.shiftKey||c.metaKey&&ne?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",K),window.addEventListener("blur",K)},O(a,D),tt(a,"_borderLineWidth",-1),tt(a,"_colorManager",new n.ColorManager),tt(a,"_zIndex",1),tt(a,"SMALL_EDITOR_SIZE",0);let k=a;t.AnnotationEditor=k;class M extends k{constructor(c){super(c),this.annotationElementId=c.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(U,t,F)=>{var b,d,v,f,w,ii,y,s,i,S,m,rn,C,z,ie,T,q,J,Y,W,le,$,Ee,we,N,a,u,c,P,L,H,K,ne,_e,pe,Pe,se,be,ge,Fe,Re,xe,de,oe,te,ee,me,an,Le,ni,Ue,si,Ge,Lt,Xe,ri,Se,ai,I,rt,ae,vt,ve,on,ce,ln,Ae,oi,Oe,bt,Ce,li;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=V,t.opacityToHex=k;var n=F(1),g=F(6);function V(Q,o,B){for(const X of B)o.addEventListener(X,Q[X].bind(Q))}function k(Q){return Math.round(Math.min(255,Math.max(1,255*Q))).toString(16).padStart(2,"0")}class M{constructor(){O(this,b,0)}getId(){return`${n.AnnotationEditorPrefix}${dt(this,b)._++}`}}b=new WeakMap;const p=class p{constructor(){O(this,w);O(this,d,(0,n.getUuid)());O(this,v,0);O(this,f,null)}static get _isSVGFittingCanvas(){const o='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',X=new OffscreenCanvas(1,3).getContext("2d"),re=new Image;re.src=o;const fe=re.decode().then(()=>(X.drawImage(re,0,0,1,1,0,0,1,3),new Uint32Array(X.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",fe)}async getFromFile(o){const{lastModified:B,name:X,size:re,type:fe}=o;return G(this,w,ii).call(this,`${B}_${X}_${re}_${fe}`,o)}async getFromUrl(o){return G(this,w,ii).call(this,o,o)}async getFromId(o){e(this,f)||Z(this,f,new Map);const B=e(this,f).get(o);return B?B.bitmap?(B.refCounter+=1,B):B.file?this.getFromFile(B.file):this.getFromUrl(B.url):null}getSvgUrl(o){const B=e(this,f).get(o);return B!=null&&B.isSvg?B.svgUrl:null}deleteId(o){e(this,f)||Z(this,f,new Map);const B=e(this,f).get(o);B&&(B.refCounter-=1,B.refCounter===0&&(B.bitmap=null))}isValidId(o){return o.startsWith(`image_${e(this,d)}_`)}};d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakSet,ii=async function(o,B){e(this,f)||Z(this,f,new Map);let X=e(this,f).get(o);if(X===null)return null;if(X!=null&&X.bitmap)return X.refCounter+=1,X;try{X||(X={bitmap:null,id:`image_${e(this,d)}_${dt(this,v)._++}`,refCounter:0,isSvg:!1});let re;if(typeof B=="string"){X.url=B;const fe=await fetch(B);if(!fe.ok)throw new Error(fe.statusText);re=await fe.blob()}else re=X.file=B;if(re.type==="image/svg+xml"){const fe=p._isSVGFittingCanvas,ye=new FileReader,De=new Image,Ne=new Promise((Ie,Qe)=>{De.onload=()=>{X.bitmap=De,X.isSvg=!0,Ie()},ye.onload=async()=>{const He=X.svgUrl=ye.result;De.src=await fe?`${He}#svgView(preserveAspectRatio(none))`:He},De.onerror=ye.onerror=Qe});ye.readAsDataURL(re),await Ne}else X.bitmap=await createImageBitmap(re);X.refCounter=1}catch(re){console.error(re),X=null}return e(this,f).set(o,X),X&&e(this,f).set(X.id,X),X};let A=p;class l{constructor(o=128){O(this,y,[]);O(this,s,!1);O(this,i,void 0);O(this,S,-1);Z(this,i,o)}add({cmd:o,undo:B,mustExec:X,type:re=NaN,overwriteIfSameType:fe=!1,keepUndo:ye=!1}){if(X&&o(),e(this,s))return;const De={cmd:o,undo:B,type:re};if(e(this,S)===-1){e(this,y).length>0&&(e(this,y).length=0),Z(this,S,0),e(this,y).push(De);return}if(fe&&e(this,y)[e(this,S)].type===re){ye&&(De.undo=e(this,y)[e(this,S)].undo),e(this,y)[e(this,S)]=De;return}const Ne=e(this,S)+1;Ne===e(this,i)?e(this,y).splice(0,1):(Z(this,S,Ne),Ne<e(this,y).length&&e(this,y).splice(Ne)),e(this,y).push(De)}undo(){e(this,S)!==-1&&(Z(this,s,!0),e(this,y)[e(this,S)].undo(),Z(this,s,!1),Z(this,S,e(this,S)-1))}redo(){e(this,S)<e(this,y).length-1&&(Z(this,S,e(this,S)+1),Z(this,s,!0),e(this,y)[e(this,S)].cmd(),Z(this,s,!1))}hasSomethingToUndo(){return e(this,S)!==-1}hasSomethingToRedo(){return e(this,S)<e(this,y).length-1}destroy(){Z(this,y,null)}}y=new WeakMap,s=new WeakMap,i=new WeakMap,S=new WeakMap,t.CommandManager=l;class r{constructor(o){O(this,m);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:B}=n.FeatureTest.platform;for(const[X,re,fe={}]of o)for(const ye of X){const De=ye.startsWith("mac+");B&&De?(this.callbacks.set(ye.slice(4),{callback:re,options:fe}),this.allKeys.add(ye.split("+").at(-1))):!B&&!De&&(this.callbacks.set(ye,{callback:re,options:fe}),this.allKeys.add(ye.split("+").at(-1)))}}exec(o,B){if(!this.allKeys.has(B.key))return;const X=this.callbacks.get(G(this,m,rn).call(this,B));if(!X)return;const{callback:re,options:{bubbles:fe=!1,args:ye=[],checker:De=null}}=X;De&&!De(o,B)||(re.bind(o,...ye)(),fe||(B.stopPropagation(),B.preventDefault()))}}m=new WeakSet,rn=function(o){o.altKey&&this.buffer.push("alt"),o.ctrlKey&&this.buffer.push("ctrl"),o.metaKey&&this.buffer.push("meta"),o.shiftKey&&this.buffer.push("shift"),this.buffer.push(o.key);const B=this.buffer.join("+");return this.buffer.length=0,B},t.KeyboardManager=r;const D=class D{get _colors(){const o=new Map([["CanvasText",null],["Canvas",null]]);return(0,g.getColorValues)(o),(0,n.shadow)(this,"_colors",o)}convert(o){const B=(0,g.getRGB)(o);if(!window.matchMedia("(forced-colors: active)").matches)return B;for(const[X,re]of this._colors)if(re.every((fe,ye)=>fe===B[ye]))return D._colorsMapping.get(X);return B}getHexCode(o){const B=this._colors.get(o);return B?n.Util.makeHexColor(...B):o}};tt(D,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let R=D;t.ColorManager=R;const Ve=class Ve{constructor(o,B,X,re,fe,ye){O(this,me);O(this,Le);O(this,Ue);O(this,Ge);O(this,Xe);O(this,Se);O(this,I);O(this,ae);O(this,ve);O(this,ce);O(this,Ae);O(this,Oe);O(this,Ce);O(this,C,null);O(this,z,new Map);O(this,ie,new Map);O(this,T,null);O(this,q,null);O(this,J,new l);O(this,Y,0);O(this,W,new Set);O(this,le,null);O(this,$,null);O(this,Ee,new Set);O(this,we,null);O(this,N,new M);O(this,a,!1);O(this,u,!1);O(this,c,null);O(this,P,n.AnnotationEditorType.NONE);O(this,L,new Set);O(this,H,null);O(this,K,this.blur.bind(this));O(this,ne,this.focus.bind(this));O(this,_e,this.copy.bind(this));O(this,pe,this.cut.bind(this));O(this,Pe,this.paste.bind(this));O(this,se,this.keydown.bind(this));O(this,be,this.onEditingAction.bind(this));O(this,ge,this.onPageChanging.bind(this));O(this,Fe,this.onScaleChanging.bind(this));O(this,Re,this.onRotationChanging.bind(this));O(this,xe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});O(this,de,[0,0]);O(this,oe,null);O(this,te,null);O(this,ee,null);Z(this,te,o),Z(this,ee,B),Z(this,T,X),this._eventBus=re,this._eventBus._on("editingaction",e(this,be)),this._eventBus._on("pagechanging",e(this,ge)),this._eventBus._on("scalechanging",e(this,Fe)),this._eventBus._on("rotationchanging",e(this,Re)),Z(this,q,fe.annotationStorage),Z(this,we,fe.filterFactory),Z(this,H,ye),this.viewParameters={realScale:g.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const o=Ve.prototype,B=fe=>{const{activeElement:ye}=document;return ye&&e(fe,te).contains(ye)&&fe.hasSomethingToControl()},X=this.TRANSLATE_SMALL,re=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r([[["ctrl+a","mac+meta+a"],o.selectAll],[["ctrl+z","mac+meta+z"],o.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],o.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],o.delete],[["Escape","mac+Escape"],o.unselectAll],[["ArrowLeft","mac+ArrowLeft"],o.translateSelectedEditors,{args:[-X,0],checker:B}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],o.translateSelectedEditors,{args:[-re,0],checker:B}],[["ArrowRight","mac+ArrowRight"],o.translateSelectedEditors,{args:[X,0],checker:B}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],o.translateSelectedEditors,{args:[re,0],checker:B}],[["ArrowUp","mac+ArrowUp"],o.translateSelectedEditors,{args:[0,-X],checker:B}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],o.translateSelectedEditors,{args:[0,-re],checker:B}],[["ArrowDown","mac+ArrowDown"],o.translateSelectedEditors,{args:[0,X],checker:B}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],o.translateSelectedEditors,{args:[0,re],checker:B}]]))}destroy(){G(this,Ge,Lt).call(this),G(this,Le,ni).call(this),this._eventBus._off("editingaction",e(this,be)),this._eventBus._off("pagechanging",e(this,ge)),this._eventBus._off("scalechanging",e(this,Fe)),this._eventBus._off("rotationchanging",e(this,Re));for(const o of e(this,ie).values())o.destroy();e(this,ie).clear(),e(this,z).clear(),e(this,Ee).clear(),Z(this,C,null),e(this,L).clear(),e(this,J).destroy(),e(this,T).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",e(this,H)?e(this,we).addHCMFilter(e(this,H).foreground,e(this,H).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(e(this,te)).direction)}editAltText(o){var B;(B=e(this,T))==null||B.editAltText(this,o)}onPageChanging({pageNumber:o}){Z(this,Y,o-1)}focusMainContainer(){e(this,te).focus()}findParent(o,B){for(const X of e(this,ie).values()){const{x:re,y:fe,width:ye,height:De}=X.div.getBoundingClientRect();if(o>=re&&o<=re+ye&&B>=fe&&B<=fe+De)return X}return null}disableUserSelect(o=!1){e(this,ee).classList.toggle("noUserSelect",o)}addShouldRescale(o){e(this,Ee).add(o)}removeShouldRescale(o){e(this,Ee).delete(o)}onScaleChanging({scale:o}){this.commitOrRemove(),this.viewParameters.realScale=o*g.PixelsPerInch.PDF_TO_CSS_UNITS;for(const B of e(this,Ee))B.onScaleChanging()}onRotationChanging({pagesRotation:o}){this.commitOrRemove(),this.viewParameters.rotation=o}addToAnnotationStorage(o){!o.isEmpty()&&e(this,q)&&!e(this,q).has(o.id)&&e(this,q).setValue(o.id,o)}blur(){if(!this.hasSelection)return;const{activeElement:o}=document;for(const B of e(this,L))if(B.div.contains(o)){Z(this,c,[B,o]),B._focusEventsAllowed=!1;break}}focus(){if(!e(this,c))return;const[o,B]=e(this,c);Z(this,c,null),B.addEventListener("focusin",()=>{o._focusEventsAllowed=!0},{once:!0}),B.focus()}addEditListeners(){G(this,Ue,si).call(this),G(this,Xe,ri).call(this)}removeEditListeners(){G(this,Ge,Lt).call(this),G(this,Se,ai).call(this)}copy(o){var X;if(o.preventDefault(),(X=e(this,C))==null||X.commitOrRemove(),!this.hasSelection)return;const B=[];for(const re of e(this,L)){const fe=re.serialize(!0);fe&&B.push(fe)}B.length!==0&&o.clipboardData.setData("application/pdfjs",JSON.stringify(B))}cut(o){this.copy(o),this.delete()}paste(o){o.preventDefault();const{clipboardData:B}=o;for(const fe of B.items)for(const ye of e(this,$))if(ye.isHandlingMimeForPasting(fe.type)){ye.paste(fe,this.currentLayer);return}let X=B.getData("application/pdfjs");if(!X)return;try{X=JSON.parse(X)}catch(fe){(0,n.warn)(`paste: "${fe.message}".`);return}if(!Array.isArray(X))return;this.unselectAll();const re=this.currentLayer;try{const fe=[];for(const Ne of X){const Ie=re.deserialize(Ne);if(!Ie)return;fe.push(Ie)}const ye=()=>{for(const Ne of fe)G(this,Ae,oi).call(this,Ne);G(this,Ce,li).call(this,fe)},De=()=>{for(const Ne of fe)Ne.remove()};this.addCommands({cmd:ye,undo:De,mustExec:!0})}catch(fe){(0,n.warn)(`paste: "${fe.message}".`)}}keydown(o){var B;(B=this.getActive())!=null&&B.shouldGetKeyboardEvents()||Ve._keyboardManager.exec(this,o)}onEditingAction(o){["undo","redo","delete","selectAll"].includes(o.name)&&this[o.name]()}setEditingState(o){o?(G(this,me,an).call(this),G(this,Ue,si).call(this),G(this,Xe,ri).call(this),G(this,I,rt).call(this,{isEditing:e(this,P)!==n.AnnotationEditorType.NONE,isEmpty:G(this,Oe,bt).call(this),hasSomethingToUndo:e(this,J).hasSomethingToUndo(),hasSomethingToRedo:e(this,J).hasSomethingToRedo(),hasSelectedEditor:!1})):(G(this,Le,ni).call(this),G(this,Ge,Lt).call(this),G(this,Se,ai).call(this),G(this,I,rt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(o){if(!e(this,$)){Z(this,$,o);for(const B of e(this,$))G(this,ae,vt).call(this,B.defaultPropertiesToUpdate)}}getId(){return e(this,N).getId()}get currentLayer(){return e(this,ie).get(e(this,Y))}getLayer(o){return e(this,ie).get(o)}get currentPageIndex(){return e(this,Y)}addLayer(o){e(this,ie).set(o.pageIndex,o),e(this,a)?o.enable():o.disable()}removeLayer(o){e(this,ie).delete(o.pageIndex)}updateMode(o,B=null){if(e(this,P)!==o){if(Z(this,P,o),o===n.AnnotationEditorType.NONE){this.setEditingState(!1),G(this,ce,ln).call(this);return}this.setEditingState(!0),G(this,ve,on).call(this),this.unselectAll();for(const X of e(this,ie).values())X.updateMode(o);if(B){for(const X of e(this,z).values())if(X.annotationElementId===B){this.setSelected(X),X.enterInEditMode();break}}}}updateToolbar(o){o!==e(this,P)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:o})}updateParams(o,B){if(e(this,$)){if(o===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(o);return}for(const X of e(this,L))X.updateParams(o,B);for(const X of e(this,$))X.updateDefaultParams(o,B)}}enableWaiting(o=!1){if(e(this,u)!==o){Z(this,u,o);for(const B of e(this,ie).values())o?B.disableClick():B.enableClick(),B.div.classList.toggle("waiting",o)}}getEditors(o){const B=[];for(const X of e(this,z).values())X.pageIndex===o&&B.push(X);return B}getEditor(o){return e(this,z).get(o)}addEditor(o){e(this,z).set(o.id,o)}removeEditor(o){var B;e(this,z).delete(o.id),this.unselect(o),(!o.annotationElementId||!e(this,W).has(o.annotationElementId))&&((B=e(this,q))==null||B.remove(o.id))}addDeletedAnnotationElement(o){e(this,W).add(o.annotationElementId),o.deleted=!0}isDeletedAnnotationElement(o){return e(this,W).has(o)}removeDeletedAnnotationElement(o){e(this,W).delete(o.annotationElementId),o.deleted=!1}setActiveEditor(o){e(this,C)!==o&&(Z(this,C,o),o&&G(this,ae,vt).call(this,o.propertiesToUpdate))}toggleSelected(o){if(e(this,L).has(o)){e(this,L).delete(o),o.unselect(),G(this,I,rt).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,L).add(o),o.select(),G(this,ae,vt).call(this,o.propertiesToUpdate),G(this,I,rt).call(this,{hasSelectedEditor:!0})}setSelected(o){for(const B of e(this,L))B!==o&&B.unselect();e(this,L).clear(),e(this,L).add(o),o.select(),G(this,ae,vt).call(this,o.propertiesToUpdate),G(this,I,rt).call(this,{hasSelectedEditor:!0})}isSelected(o){return e(this,L).has(o)}unselect(o){o.unselect(),e(this,L).delete(o),G(this,I,rt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,L).size!==0}undo(){e(this,J).undo(),G(this,I,rt).call(this,{hasSomethingToUndo:e(this,J).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:G(this,Oe,bt).call(this)})}redo(){e(this,J).redo(),G(this,I,rt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,J).hasSomethingToRedo(),isEmpty:G(this,Oe,bt).call(this)})}addCommands(o){e(this,J).add(o),G(this,I,rt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:G(this,Oe,bt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const o=[...e(this,L)],B=()=>{for(const re of o)re.remove()},X=()=>{for(const re of o)G(this,Ae,oi).call(this,re)};this.addCommands({cmd:B,undo:X,mustExec:!0})}commitOrRemove(){var o;(o=e(this,C))==null||o.commitOrRemove()}hasSomethingToControl(){return e(this,C)||this.hasSelection}selectAll(){for(const o of e(this,L))o.commit();G(this,Ce,li).call(this,e(this,z).values())}unselectAll(){if(e(this,C)){e(this,C).commitOrRemove();return}if(this.hasSelection){for(const o of e(this,L))o.unselect();e(this,L).clear(),G(this,I,rt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(o,B,X=!1){if(X||this.commitOrRemove(),!this.hasSelection)return;e(this,de)[0]+=o,e(this,de)[1]+=B;const[re,fe]=e(this,de),ye=[...e(this,L)],De=1e3;e(this,oe)&&clearTimeout(e(this,oe)),Z(this,oe,setTimeout(()=>{Z(this,oe,null),e(this,de)[0]=e(this,de)[1]=0,this.addCommands({cmd:()=>{for(const Ne of ye)e(this,z).has(Ne.id)&&Ne.translateInPage(re,fe)},undo:()=>{for(const Ne of ye)e(this,z).has(Ne.id)&&Ne.translateInPage(-re,-fe)},mustExec:!1})},De));for(const Ne of ye)Ne.translateInPage(o,B)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Z(this,le,new Map);for(const o of e(this,L))e(this,le).set(o,{savedX:o.x,savedY:o.y,savedPageIndex:o.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,le))return!1;this.disableUserSelect(!1);const o=e(this,le);Z(this,le,null);let B=!1;for(const[{x:re,y:fe,pageIndex:ye},De]of o)De.newX=re,De.newY=fe,De.newPageIndex=ye,B||(B=re!==De.savedX||fe!==De.savedY||ye!==De.savedPageIndex);if(!B)return!1;const X=(re,fe,ye,De)=>{if(e(this,z).has(re.id)){const Ne=e(this,ie).get(De);Ne?re._setParentAndPosition(Ne,fe,ye):(re.pageIndex=De,re.x=fe,re.y=ye)}};return this.addCommands({cmd:()=>{for(const[re,{newX:fe,newY:ye,newPageIndex:De}]of o)X(re,fe,ye,De)},undo:()=>{for(const[re,{savedX:fe,savedY:ye,savedPageIndex:De}]of o)X(re,fe,ye,De)},mustExec:!0}),!0}dragSelectedEditors(o,B){if(e(this,le))for(const X of e(this,le).keys())X.drag(o,B)}rebuild(o){if(o.parent===null){const B=this.getLayer(o.pageIndex);B?(B.changeParent(o),B.addOrRebuild(o)):(this.addEditor(o),this.addToAnnotationStorage(o),o.rebuild())}else o.parent.addOrRebuild(o)}isActive(o){return e(this,C)===o}getActive(){return e(this,C)}getMode(){return e(this,P)}get imageManager(){return(0,n.shadow)(this,"imageManager",new A)}};C=new WeakMap,z=new WeakMap,ie=new WeakMap,T=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,W=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,P=new WeakMap,L=new WeakMap,H=new WeakMap,K=new WeakMap,ne=new WeakMap,_e=new WeakMap,pe=new WeakMap,Pe=new WeakMap,se=new WeakMap,be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,Re=new WeakMap,xe=new WeakMap,de=new WeakMap,oe=new WeakMap,te=new WeakMap,ee=new WeakMap,me=new WeakSet,an=function(){window.addEventListener("focus",e(this,ne)),window.addEventListener("blur",e(this,K))},Le=new WeakSet,ni=function(){window.removeEventListener("focus",e(this,ne)),window.removeEventListener("blur",e(this,K))},Ue=new WeakSet,si=function(){window.addEventListener("keydown",e(this,se),{capture:!0})},Ge=new WeakSet,Lt=function(){window.removeEventListener("keydown",e(this,se),{capture:!0})},Xe=new WeakSet,ri=function(){document.addEventListener("copy",e(this,_e)),document.addEventListener("cut",e(this,pe)),document.addEventListener("paste",e(this,Pe))},Se=new WeakSet,ai=function(){document.removeEventListener("copy",e(this,_e)),document.removeEventListener("cut",e(this,pe)),document.removeEventListener("paste",e(this,Pe))},I=new WeakSet,rt=function(o){Object.entries(o).some(([X,re])=>e(this,xe)[X]!==re)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,xe),o)})},ae=new WeakSet,vt=function(o){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:o})},ve=new WeakSet,on=function(){if(!e(this,a)){Z(this,a,!0);for(const o of e(this,ie).values())o.enable()}},ce=new WeakSet,ln=function(){if(this.unselectAll(),e(this,a)){Z(this,a,!1);for(const o of e(this,ie).values())o.disable()}},Ae=new WeakSet,oi=function(o){const B=e(this,ie).get(o.pageIndex);B?B.addOrRebuild(o):this.addEditor(o)},Oe=new WeakSet,bt=function(){if(e(this,z).size===0)return!0;if(e(this,z).size===1)for(const o of e(this,z).values())return o.isEmpty();return!1},Ce=new WeakSet,li=function(o){e(this,L).clear();for(const B of o)B.isEmpty()||(e(this,L).add(B),B.select());G(this,I,rt).call(this,{hasSelectedEditor:!0})},tt(Ve,"TRANSLATE_SMALL",1),tt(Ve,"TRANSLATE_BIG",10);let x=Ve;t.AnnotationEditorUIManager=x},(U,t,F)=>{var Y,W,le,$,Ee,we,N,a,u,c,P,L,ft,K,pt,_e,ci,Pe,Dt,be,Rt,Fe,yt,xe,St;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=S,t.getColorValues=z,t.getCurrentTransform=ie,t.getCurrentTransformInverse=T,t.getFilenameFromUrl=w,t.getPdfFilenameFromUrl=E,t.getRGB=C,t.getXfaPageViewport=D,t.isDataScheme=v,t.isPdfFile=f,t.isValidFetchUrl=y,t.loadScript=i,t.noContextMenu=s,t.setLayerDimensions=q;var n=F(7),g=F(1);const V="http://www.w3.org/2000/svg",J=class J{};tt(J,"CSS",96),tt(J,"PDF",72),tt(J,"PDF_TO_CSS_UNITS",J.CSS/J.PDF);let k=J;t.PixelsPerInch=k;class M extends n.BaseFilterFactory{constructor({docId:ee,ownerDocument:me=globalThis.document}={}){super();O(this,L);O(this,K);O(this,_e);O(this,Pe);O(this,be);O(this,Fe);O(this,xe);O(this,Y,void 0);O(this,W,void 0);O(this,le,void 0);O(this,$,void 0);O(this,Ee,void 0);O(this,we,void 0);O(this,N,void 0);O(this,a,void 0);O(this,u,void 0);O(this,c,void 0);O(this,P,0);Z(this,le,ee),Z(this,$,me)}addFilter(ee){if(!ee)return"none";let me=e(this,L,ft).get(ee);if(me)return me;let Te,Le,Be,Ue;if(ee.length===1){const Xe=ee[0],Ze=new Array(256);for(let Se=0;Se<256;Se++)Ze[Se]=Xe[Se]/255;Ue=Te=Le=Be=Ze.join(",")}else{const[Xe,Ze,Se]=ee,_=new Array(256),I=new Array(256),he=new Array(256);for(let ae=0;ae<256;ae++)_[ae]=Xe[ae]/255,I[ae]=Ze[ae]/255,he[ae]=Se[ae]/255;Te=_.join(","),Le=I.join(","),Be=he.join(","),Ue=`${Te}${Le}${Be}`}if(me=e(this,L,ft).get(Ue),me)return e(this,L,ft).set(ee,me),me;const $e=`g_${e(this,le)}_transfer_map_${dt(this,P)._++}`,Ge=`url(#${$e})`;e(this,L,ft).set(ee,Ge),e(this,L,ft).set(Ue,Ge);const Ke=G(this,Pe,Dt).call(this,$e);return G(this,Fe,yt).call(this,Te,Le,Be,Ke),Ge}addHCMFilter(ee,me){var Ze;const Te=`${ee}-${me}`;if(e(this,we)===Te)return e(this,N);if(Z(this,we,Te),Z(this,N,"none"),(Ze=e(this,Ee))==null||Ze.remove(),!ee||!me)return e(this,N);const Le=G(this,xe,St).call(this,ee);ee=g.Util.makeHexColor(...Le);const Be=G(this,xe,St).call(this,me);if(me=g.Util.makeHexColor(...Be),e(this,K,pt).style.color="",ee==="#000000"&&me==="#ffffff"||ee===me)return e(this,N);const Ue=new Array(256);for(let Se=0;Se<=255;Se++){const _=Se/255;Ue[Se]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const $e=Ue.join(","),Ge=`g_${e(this,le)}_hcm_filter`,Ke=Z(this,a,G(this,Pe,Dt).call(this,Ge));G(this,Fe,yt).call(this,$e,$e,$e,Ke),G(this,_e,ci).call(this,Ke);const Xe=(Se,_)=>{const I=Le[Se]/255,he=Be[Se]/255,ae=new Array(_+1);for(let ue=0;ue<=_;ue++)ae[ue]=I+ue/_*(he-I);return ae.join(",")};return G(this,Fe,yt).call(this,Xe(0,5),Xe(1,5),Xe(2,5),Ke),Z(this,N,`url(#${Ge})`),e(this,N)}addHighlightHCMFilter(ee,me,Te,Le){var he;const Be=`${ee}-${me}-${Te}-${Le}`;if(e(this,u)===Be)return e(this,c);if(Z(this,u,Be),Z(this,c,"none"),(he=e(this,a))==null||he.remove(),!ee||!me)return e(this,c);const[Ue,$e]=[ee,me].map(G(this,xe,St).bind(this));let Ge=Math.round(.2126*Ue[0]+.7152*Ue[1]+.0722*Ue[2]),Ke=Math.round(.2126*$e[0]+.7152*$e[1]+.0722*$e[2]),[Xe,Ze]=[Te,Le].map(G(this,xe,St).bind(this));Ke<Ge&&([Ge,Ke,Xe,Ze]=[Ke,Ge,Ze,Xe]),e(this,K,pt).style.color="";const Se=(ae,ue,ve)=>{const j=new Array(256),ce=(Ke-Ge)/ve,Me=ae/255,Ae=(ue-ae)/(255*ve);let ke=0;for(let Oe=0;Oe<=ve;Oe++){const je=Math.round(Ge+Oe*ce),Ce=Me+Oe*Ae;for(let qe=ke;qe<=je;qe++)j[qe]=Ce;ke=je+1}for(let Oe=ke;Oe<256;Oe++)j[Oe]=j[ke-1];return j.join(",")},_=`g_${e(this,le)}_hcm_highlight_filter`,I=Z(this,a,G(this,Pe,Dt).call(this,_));return G(this,_e,ci).call(this,I),G(this,Fe,yt).call(this,Se(Xe[0],Ze[0],5),Se(Xe[1],Ze[1],5),Se(Xe[2],Ze[2],5),I),Z(this,c,`url(#${_})`),e(this,c)}destroy(ee=!1){ee&&(e(this,N)||e(this,c))||(e(this,W)&&(e(this,W).parentNode.parentNode.remove(),Z(this,W,null)),e(this,Y)&&(e(this,Y).clear(),Z(this,Y,null)),Z(this,P,0))}}Y=new WeakMap,W=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,P=new WeakMap,L=new WeakSet,ft=function(){return e(this,Y)||Z(this,Y,new Map)},K=new WeakSet,pt=function(){if(!e(this,W)){const ee=e(this,$).createElement("div"),{style:me}=ee;me.visibility="hidden",me.contain="strict",me.width=me.height=0,me.position="absolute",me.top=me.left=0,me.zIndex=-1;const Te=e(this,$).createElementNS(V,"svg");Te.setAttribute("width",0),Te.setAttribute("height",0),Z(this,W,e(this,$).createElementNS(V,"defs")),ee.append(Te),Te.append(e(this,W)),e(this,$).body.append(ee)}return e(this,W)},_e=new WeakSet,ci=function(ee){const me=e(this,$).createElementNS(V,"feColorMatrix");me.setAttribute("type","matrix"),me.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ee.append(me)},Pe=new WeakSet,Dt=function(ee){const me=e(this,$).createElementNS(V,"filter");return me.setAttribute("color-interpolation-filters","sRGB"),me.setAttribute("id",ee),e(this,K,pt).append(me),me},be=new WeakSet,Rt=function(ee,me,Te){const Le=e(this,$).createElementNS(V,me);Le.setAttribute("type","discrete"),Le.setAttribute("tableValues",Te),ee.append(Le)},Fe=new WeakSet,yt=function(ee,me,Te,Le){const Be=e(this,$).createElementNS(V,"feComponentTransfer");Le.append(Be),G(this,be,Rt).call(this,Be,"feFuncR",ee),G(this,be,Rt).call(this,Be,"feFuncG",me),G(this,be,Rt).call(this,Be,"feFuncB",Te)},xe=new WeakSet,St=function(ee){return e(this,K,pt).style.color=ee,C(getComputedStyle(e(this,K,pt)).getPropertyValue("color"))},t.DOMFilterFactory=M;class A extends n.BaseCanvasFactory{constructor({ownerDocument:te=globalThis.document}={}){super(),this._document=te}_createCanvas(te,ee){const me=this._document.createElement("canvas");return me.width=te,me.height=ee,me}}t.DOMCanvasFactory=A;async function l(oe,te=!1){if(y(oe,document.baseURI)){const ee=await fetch(oe);if(!ee.ok)throw new Error(ee.statusText);return te?new Uint8Array(await ee.arrayBuffer()):(0,g.stringToBytes)(await ee.text())}return new Promise((ee,me)=>{const Te=new XMLHttpRequest;Te.open("GET",oe,!0),te&&(Te.responseType="arraybuffer"),Te.onreadystatechange=()=>{if(Te.readyState===XMLHttpRequest.DONE){if(Te.status===200||Te.status===0){let Le;if(te&&Te.response?Le=new Uint8Array(Te.response):!te&&Te.responseText&&(Le=(0,g.stringToBytes)(Te.responseText)),Le){ee(Le);return}}me(new Error(Te.statusText))}},Te.send(null)})}class r extends n.BaseCMapReaderFactory{_fetchData(te,ee){return l(te,this.isCompressed).then(me=>({cMapData:me,compressionType:ee}))}}t.DOMCMapReaderFactory=r;class R extends n.BaseStandardFontDataFactory{_fetchData(te){return l(te,!0)}}t.DOMStandardFontDataFactory=R;class x extends n.BaseSVGFactory{_createSVG(te){return document.createElementNS(V,te)}}t.DOMSVGFactory=x;class b{constructor({viewBox:te,scale:ee,rotation:me,offsetX:Te=0,offsetY:Le=0,dontFlip:Be=!1}){this.viewBox=te,this.scale=ee,this.rotation=me,this.offsetX=Te,this.offsetY=Le;const Ue=(te[2]+te[0])/2,$e=(te[3]+te[1])/2;let Ge,Ke,Xe,Ze;switch(me%=360,me<0&&(me+=360),me){case 180:Ge=-1,Ke=0,Xe=0,Ze=1;break;case 90:Ge=0,Ke=1,Xe=1,Ze=0;break;case 270:Ge=0,Ke=-1,Xe=-1,Ze=0;break;case 0:Ge=1,Ke=0,Xe=0,Ze=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Be&&(Xe=-Xe,Ze=-Ze);let Se,_,I,he;Ge===0?(Se=Math.abs($e-te[1])*ee+Te,_=Math.abs(Ue-te[0])*ee+Le,I=(te[3]-te[1])*ee,he=(te[2]-te[0])*ee):(Se=Math.abs(Ue-te[0])*ee+Te,_=Math.abs($e-te[1])*ee+Le,I=(te[2]-te[0])*ee,he=(te[3]-te[1])*ee),this.transform=[Ge*ee,Ke*ee,Xe*ee,Ze*ee,Se-Ge*ee*Ue-Xe*ee*$e,_-Ke*ee*Ue-Ze*ee*$e],this.width=I,this.height=he}get rawDims(){const{viewBox:te}=this;return(0,g.shadow)(this,"rawDims",{pageWidth:te[2]-te[0],pageHeight:te[3]-te[1],pageX:te[0],pageY:te[1]})}clone({scale:te=this.scale,rotation:ee=this.rotation,offsetX:me=this.offsetX,offsetY:Te=this.offsetY,dontFlip:Le=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:te,rotation:ee,offsetX:me,offsetY:Te,dontFlip:Le})}convertToViewportPoint(te,ee){return g.Util.applyTransform([te,ee],this.transform)}convertToViewportRectangle(te){const ee=g.Util.applyTransform([te[0],te[1]],this.transform),me=g.Util.applyTransform([te[2],te[3]],this.transform);return[ee[0],ee[1],me[0],me[1]]}convertToPdfPoint(te,ee){return g.Util.applyInverseTransform([te,ee],this.transform)}}t.PageViewport=b;class d extends g.BaseException{constructor(te,ee=0){super(te,"RenderingCancelledException"),this.extraDelay=ee}}t.RenderingCancelledException=d;function v(oe){const te=oe.length;let ee=0;for(;ee<te&&oe[ee].trim()==="";)ee++;return oe.substring(ee,ee+5).toLowerCase()==="data:"}function f(oe){return typeof oe=="string"&&/\.pdf$/i.test(oe)}function w(oe,te=!1){return te||([oe]=oe.split(/[#?]/,1)),oe.substring(oe.lastIndexOf("/")+1)}function E(oe,te="document.pdf"){if(typeof oe!="string")return te;if(v(oe))return(0,g.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),te;const ee=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,me=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Te=ee.exec(oe);let Le=me.exec(Te[1])||me.exec(Te[2])||me.exec(Te[3]);if(Le&&(Le=Le[0],Le.includes("%")))try{Le=me.exec(decodeURIComponent(Le))[0]}catch{}return Le||te}class p{constructor(){tt(this,"started",Object.create(null));tt(this,"times",[])}time(te){te in this.started&&(0,g.warn)(`Timer is already running for ${te}`),this.started[te]=Date.now()}timeEnd(te){te in this.started||(0,g.warn)(`Timer has not been started for ${te}`),this.times.push({name:te,start:this.started[te],end:Date.now()}),delete this.started[te]}toString(){const te=[];let ee=0;for(const{name:me}of this.times)ee=Math.max(me.length,ee);for(const{name:me,start:Te,end:Le}of this.times)te.push(`${me.padEnd(ee)} ${Le-Te}ms
`);return te.join("")}}t.StatTimer=p;function y(oe,te){try{const{protocol:ee}=te?new URL(oe,te):new URL(oe);return ee==="http:"||ee==="https:"}catch{return!1}}function s(oe){oe.preventDefault()}function i(oe,te=!1){return new Promise((ee,me)=>{const Te=document.createElement("script");Te.src=oe,Te.onload=function(Le){te&&Te.remove(),ee(Le)},Te.onerror=function(){me(new Error(`Cannot load script at: ${Te.src}`))},(document.head||document.documentElement).append(Te)})}function S(oe){console.log("Deprecated API usage: "+oe)}let m;class h{static toDateObject(te){if(!te||typeof te!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ee=m.exec(te);if(!ee)return null;const me=parseInt(ee[1],10);let Te=parseInt(ee[2],10);Te=Te>=1&&Te<=12?Te-1:0;let Le=parseInt(ee[3],10);Le=Le>=1&&Le<=31?Le:1;let Be=parseInt(ee[4],10);Be=Be>=0&&Be<=23?Be:0;let Ue=parseInt(ee[5],10);Ue=Ue>=0&&Ue<=59?Ue:0;let $e=parseInt(ee[6],10);$e=$e>=0&&$e<=59?$e:0;const Ge=ee[7]||"Z";let Ke=parseInt(ee[8],10);Ke=Ke>=0&&Ke<=23?Ke:0;let Xe=parseInt(ee[9],10)||0;return Xe=Xe>=0&&Xe<=59?Xe:0,Ge==="-"?(Be+=Ke,Ue+=Xe):Ge==="+"&&(Be-=Ke,Ue-=Xe),new Date(Date.UTC(me,Te,Le,Be,Ue,$e))}}t.PDFDateString=h;function D(oe,{scale:te=1,rotation:ee=0}){const{width:me,height:Te}=oe.attributes.style,Le=[0,0,parseInt(me),parseInt(Te)];return new b({viewBox:Le,scale:te,rotation:ee})}function C(oe){if(oe.startsWith("#")){const te=parseInt(oe.slice(1),16);return[(te&16711680)>>16,(te&65280)>>8,te&255]}return oe.startsWith("rgb(")?oe.slice(4,-1).split(",").map(te=>parseInt(te)):oe.startsWith("rgba(")?oe.slice(5,-1).split(",").map(te=>parseInt(te)).slice(0,3):((0,g.warn)(`Not a valid color format: "${oe}"`),[0,0,0])}function z(oe){const te=document.createElement("span");te.style.visibility="hidden",document.body.append(te);for(const ee of oe.keys()){te.style.color=ee;const me=window.getComputedStyle(te).color;oe.set(ee,C(me))}te.remove()}function ie(oe){const{a:te,b:ee,c:me,d:Te,e:Le,f:Be}=oe.getTransform();return[te,ee,me,Te,Le,Be]}function T(oe){const{a:te,b:ee,c:me,d:Te,e:Le,f:Be}=oe.getTransform().invertSelf();return[te,ee,me,Te,Le,Be]}function q(oe,te,ee=!1,me=!0){if(te instanceof b){const{pageWidth:Te,pageHeight:Le}=te.rawDims,{style:Be}=oe,Ue=g.FeatureTest.isCSSRoundSupported,$e=`var(--scale-factor) * ${Te}px`,Ge=`var(--scale-factor) * ${Le}px`,Ke=Ue?`round(${$e}, 1px)`:`calc(${$e})`,Xe=Ue?`round(${Ge}, 1px)`:`calc(${Ge})`;!ee||te.rotation%180===0?(Be.width=Ke,Be.height=Xe):(Be.width=Xe,Be.height=Ke)}me&&oe.setAttribute("data-main-rotation",te.rotation)}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=F(1);class g{constructor(){this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(r){return"none"}addHCMFilter(r,R){return"none"}addHighlightHCMFilter(r,R,x,b){return"none"}destroy(r=!1){}}t.BaseFilterFactory=g;class V{constructor(){this.constructor===V&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(r,R){if(r<=0||R<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(r,R);return{canvas:x,context:x.getContext("2d")}}reset(r,R,x){if(!r.canvas)throw new Error("Canvas is not specified");if(R<=0||x<=0)throw new Error("Invalid canvas size");r.canvas.width=R,r.canvas.height=x}destroy(r){if(!r.canvas)throw new Error("Canvas is not specified");r.canvas.width=0,r.canvas.height=0,r.canvas=null,r.context=null}_createCanvas(r,R){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=V;class k{constructor({baseUrl:r=null,isCompressed:R=!0}){this.constructor===k&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=r,this.isCompressed=R}async fetch({name:r}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!r)throw new Error("CMap name must be specified.");const R=this.baseUrl+r+(this.isCompressed?".bcmap":""),x=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(R,x).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${R}`)})}_fetchData(r,R){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=k;class M{constructor({baseUrl:r=null}){this.constructor===M&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=r}async fetch({filename:r}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!r)throw new Error("Font filename must be specified.");const R=`${this.baseUrl}${r}`;return this._fetchData(R).catch(x=>{throw new Error(`Unable to load font data at: ${R}`)})}_fetchData(r){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=M;class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(r,R,x=!1){if(r<=0||R<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),x||(b.setAttribute("width",`${r}px`),b.setAttribute("height",`${R}px`)),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${r} ${R}`),b}createElement(r){if(typeof r!="string")throw new Error("Invalid SVG element type");return this._createSVG(r)}_createSVG(r){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=A},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=F(1);const g=3285377520,V=4294901760,k=65535;class M{constructor(l){this.h1=l?l&4294967295:g,this.h2=l?l&4294967295:g}update(l){let r,R;if(typeof l=="string"){r=new Uint8Array(l.length*2),R=0;for(let S=0,m=l.length;S<m;S++){const h=l.charCodeAt(S);h<=255?r[R++]=h:(r[R++]=h>>>8,r[R++]=h&255)}}else if((0,n.isArrayBuffer)(l))r=l.slice(),R=r.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=R>>2,b=R-x*4,d=new Uint32Array(r.buffer,0,x);let v=0,f=0,w=this.h1,E=this.h2;const p=3432918353,y=461845907,s=p&k,i=y&k;for(let S=0;S<x;S++)S&1?(v=d[S],v=v*p&V|v*s&k,v=v<<15|v>>>17,v=v*y&V|v*i&k,w^=v,w=w<<13|w>>>19,w=w*5+3864292196):(f=d[S],f=f*p&V|f*s&k,f=f<<15|f>>>17,f=f*y&V|f*i&k,E^=f,E=E<<13|E>>>19,E=E*5+3864292196);switch(v=0,b){case 3:v^=r[x*4+2]<<16;case 2:v^=r[x*4+1]<<8;case 1:v^=r[x*4],v=v*p&V|v*s&k,v=v<<15|v>>>17,v=v*y&V|v*i&k,x&1?w^=v:E^=v}this.h1=w,this.h2=E}hexdigest(){let l=this.h1,r=this.h2;return l^=r>>>1,l=l*3981806797&V|l*36045&k,r=r*4283543511&V|((r<<16|l>>>16)*2950163797&V)>>>16,l^=r>>>1,l=l*444984403&V|l*60499&k,r=r*3301882366&V|((r<<16|l>>>16)*3120437893&V)>>>16,l^=r>>>1,(l>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=M},(U,t,F)=>{var k;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=F(1);class g{constructor({ownerDocument:A=globalThis.document,styleElement:l=null}){O(this,k,new Set);this._document=A,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(A){this.nativeFontFaces.add(A),this._document.fonts.add(A)}removeNativeFontFace(A){this.nativeFontFaces.delete(A),this._document.fonts.delete(A)}insertRule(A){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const l=this.styleElement.sheet;l.insertRule(A,l.cssRules.length)}clear(){for(const A of this.nativeFontFaces)this._document.fonts.delete(A);this.nativeFontFaces.clear(),e(this,k).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(A){if(!(!A||e(this,k).has(A.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:l,src:r,style:R}=A,x=new FontFace(l,r,R);this.addNativeFontFace(x);try{await x.load(),e(this,k).add(l)}catch{(0,n.warn)(`Cannot load system font: ${A.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(x)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(A){if(A.attached||A.missingFile&&!A.systemFontInfo)return;if(A.attached=!0,A.systemFontInfo){await this.loadSystemFont(A.systemFontInfo);return}if(this.isFontLoadingAPISupported){const r=A.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(R){throw(0,n.warn)(`Failed to load font '${r.family}': '${R}'.`),A.disableFontFace=!0,R}}return}const l=A.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const R=this._queueLoadingCallback(r);this._prepareFontLoadEvent(A,R)})}}get isFontLoadingAPISupported(){var l;const A=!!((l=this._document)!=null&&l.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",A)}get isSyncFontLoadingSupported(){let A=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(A=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",A)}_queueLoadingCallback(A){function l(){for((0,n.assert)(!R.done,"completeRequest() cannot be called twice."),R.done=!0;r.length>0&&r[0].done;){const x=r.shift();setTimeout(x.callback,0)}}const{loadingRequests:r}=this,R={done:!1,complete:l,callback:A};return r.push(R),R}get _loadTestFont(){const A=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",A)}_prepareFontLoadEvent(A,l){function r(C,z){return C.charCodeAt(z)<<24|C.charCodeAt(z+1)<<16|C.charCodeAt(z+2)<<8|C.charCodeAt(z+3)&255}function R(C,z,ie,T){const q=C.substring(0,z),J=C.substring(z+ie);return q+T+J}let x,b;const d=this._document.createElement("canvas");d.width=1,d.height=1;const v=d.getContext("2d");let f=0;function w(C,z){if(++f>30){(0,n.warn)("Load test font never loaded."),z();return}if(v.font="30px "+C,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(w.bind(null,C,z))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=R(p,976,E.length,E);const s=16,i=1482184792;let S=r(p,s);for(x=0,b=E.length-3;x<b;x+=4)S=S-i+r(E,x)|0;x<E.length&&(S=S-i+r(E+"XXX",x)|0),p=R(p,s,4,(0,n.string32)(S));const m=`url(data:font/opentype;base64,${btoa(p)});`,h=`@font-face {font-family:"${E}";src:${m}}`;this.insertRule(h);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const C of[A.loadedName,E]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=C,D.append(z)}this._document.body.append(D),w(E,()=>{D.remove(),l.complete()})}}k=new WeakMap,t.FontLoader=g;class V{constructor(A,{isEvalSupported:l=!0,disableFontFace:r=!1,ignoreErrors:R=!1,inspectFont:x=null}){this.compiledGlyphs=Object.create(null);for(const b in A)this[b]=A[b];this.isEvalSupported=l!==!1,this.disableFontFace=r===!0,this.ignoreErrors=R===!0,this._inspectFont=x}createNativeFontFace(){var l;if(!this.data||this.disableFontFace)return null;let A;if(!this.cssFontInfo)A=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),A=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(l=this._inspectFont)==null||l.call(this,this),A}createFontFaceRule(){var R;if(!this.data||this.disableFontFace)return null;const A=(0,n.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(A)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let x=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(x+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${x}src:${l}}`}return(R=this._inspectFont)==null||R.call(this,this,l),r}getPathGenerator(A,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let r;try{r=A.get(this.loadedName+"_path_"+l)}catch(R){if(!this.ignoreErrors)throw R;return(0,n.warn)(`getPathGenerator - ignoring character: "${R}".`),this.compiledGlyphs[l]=function(x,b){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const R=[];for(const x of r){const b=x.args!==void 0?x.args.join(","):"";R.push("c.",x.cmd,"(",b,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",R.join(""))}return this.compiledGlyphs[l]=function(R,x){for(const b of r)b.cmd==="scale"&&(b.args=[x,-x]),R[b.cmd].apply(R,b.args)}}}t.FontFaceObject=V},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=F(7);F(1);const g=function(l){return new Promise((r,R)=>{require$$5.readFile(l,(b,d)=>{if(b||!d){R(new Error(b));return}r(new Uint8Array(d))})})};class V extends n.BaseFilterFactory{}t.NodeFilterFactory=V;class k extends n.BaseCanvasFactory{_createCanvas(r,R){return require$$5.createCanvas(r,R)}}t.NodeCanvasFactory=k;class M extends n.BaseCMapReaderFactory{_fetchData(r,R){return g(r).then(x=>({cMapData:x,compressionType:R}))}}t.NodeCMapReaderFactory=M;class A extends n.BaseStandardFontDataFactory{_fetchData(r){return g(r)}}t.NodeStandardFontDataFactory=A},(U,t,F)=>{var W,hi,$,di;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=F(1),g=F(6),V=F(12),k=F(13);const M=16,A=100,l=4096,r=15,R=10,x=1e3,b=16;function d(N,a){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){a.save(),this.__originalSave()},N.restore=function(){a.restore(),this.__originalRestore()},N.translate=function(c,P){a.translate(c,P),this.__originalTranslate(c,P)},N.scale=function(c,P){a.scale(c,P),this.__originalScale(c,P)},N.transform=function(c,P,L,H,K,ne){a.transform(c,P,L,H,K,ne),this.__originalTransform(c,P,L,H,K,ne)},N.setTransform=function(c,P,L,H,K,ne){a.setTransform(c,P,L,H,K,ne),this.__originalSetTransform(c,P,L,H,K,ne)},N.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},N.rotate=function(c){a.rotate(c),this.__originalRotate(c)},N.clip=function(c){a.clip(c),this.__originalClip(c)},N.moveTo=function(u,c){a.moveTo(u,c),this.__originalMoveTo(u,c)},N.lineTo=function(u,c){a.lineTo(u,c),this.__originalLineTo(u,c)},N.bezierCurveTo=function(u,c,P,L,H,K){a.bezierCurveTo(u,c,P,L,H,K),this.__originalBezierCurveTo(u,c,P,L,H,K)},N.rect=function(u,c,P,L){a.rect(u,c,P,L),this.__originalRect(u,c,P,L)},N.closePath=function(){a.closePath(),this.__originalClosePath()},N.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class v{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,u,c){let P;return this.cache[a]!==void 0?(P=this.cache[a],this.canvasFactory.reset(P,u,c)):(P=this.canvasFactory.create(u,c),this.cache[a]=P),P}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const u=this.cache[a];this.canvasFactory.destroy(u),delete this.cache[a]}}}function f(N,a,u,c,P,L,H,K,ne,_e){const[pe,Pe,se,be,ge,Fe]=(0,g.getCurrentTransform)(N);if(Pe===0&&se===0){const de=H*pe+ge,oe=Math.round(de),te=K*be+Fe,ee=Math.round(te),me=(H+ne)*pe+ge,Te=Math.abs(Math.round(me)-oe)||1,Le=(K+_e)*be+Fe,Be=Math.abs(Math.round(Le)-ee)||1;return N.setTransform(Math.sign(pe),0,0,Math.sign(be),oe,ee),N.drawImage(a,u,c,P,L,0,0,Te,Be),N.setTransform(pe,Pe,se,be,ge,Fe),[Te,Be]}if(pe===0&&be===0){const de=K*se+ge,oe=Math.round(de),te=H*Pe+Fe,ee=Math.round(te),me=(K+_e)*se+ge,Te=Math.abs(Math.round(me)-oe)||1,Le=(H+ne)*Pe+Fe,Be=Math.abs(Math.round(Le)-ee)||1;return N.setTransform(0,Math.sign(Pe),Math.sign(se),0,oe,ee),N.drawImage(a,u,c,P,L,0,0,Be,Te),N.setTransform(pe,Pe,se,be,ge,Fe),[Be,Te]}N.drawImage(a,u,c,P,L,H,K,ne,_e);const Re=Math.hypot(pe,Pe),xe=Math.hypot(se,be);return[Re*ne,xe*_e]}function w(N){const{width:a,height:u}=N;if(a>x||u>x)return null;const c=1e3,P=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=a+1;let H=new Uint8Array(L*(u+1)),K,ne,_e;const pe=a+7&-8;let Pe=new Uint8Array(pe*u),se=0;for(const xe of N.data){let de=128;for(;de>0;)Pe[se++]=xe&de?0:255,de>>=1}let be=0;for(se=0,Pe[se]!==0&&(H[0]=1,++be),ne=1;ne<a;ne++)Pe[se]!==Pe[se+1]&&(H[ne]=Pe[se]?2:1,++be),se++;for(Pe[se]!==0&&(H[ne]=2,++be),K=1;K<u;K++){se=K*pe,_e=K*L,Pe[se-pe]!==Pe[se]&&(H[_e]=Pe[se]?1:8,++be);let xe=(Pe[se]?4:0)+(Pe[se-pe]?8:0);for(ne=1;ne<a;ne++)xe=(xe>>2)+(Pe[se+1]?4:0)+(Pe[se-pe+1]?8:0),P[xe]&&(H[_e+ne]=P[xe],++be),se++;if(Pe[se-pe]!==Pe[se]&&(H[_e+ne]=Pe[se]?2:4,++be),be>c)return null}for(se=pe*(u-1),_e=K*L,Pe[se]!==0&&(H[_e]=8,++be),ne=1;ne<a;ne++)Pe[se]!==Pe[se+1]&&(H[_e+ne]=Pe[se]?4:8,++be),se++;if(Pe[se]!==0&&(H[_e+ne]=4,++be),be>c)return null;const ge=new Int32Array([0,L,-1,0,-L,0,0,0,1]),Fe=new Path2D;for(K=0;be&&K<=u;K++){let xe=K*L;const de=xe+a;for(;xe<de&&!H[xe];)xe++;if(xe===de)continue;Fe.moveTo(xe%L,K);const oe=xe;let te=H[xe];do{const ee=ge[te];do xe+=ee;while(!H[xe]);const me=H[xe];me!==5&&me!==10?(te=me,H[xe]=0):(te=me&51*te>>4,H[xe]&=te>>2|te<<2),Fe.lineTo(xe%L,xe/L|0),H[xe]||--be}while(oe!==xe);--K}return Pe=null,H=null,function(xe){xe.save(),xe.scale(1/a,-1/u),xe.translate(0,-u),xe.fill(Fe),xe.beginPath(),xe.restore()}}class E{constructor(a,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,u])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,u){this.x=a,this.y=u}updatePathMinMax(a,u,c){[u,c]=n.Util.applyTransform([u,c],a),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,c)}updateRectMinMax(a,u){const c=n.Util.applyTransform(u,a),P=n.Util.applyTransform(u.slice(2),a);this.minX=Math.min(this.minX,c[0],P[0]),this.minY=Math.min(this.minY,c[1],P[1]),this.maxX=Math.max(this.maxX,c[0],P[0]),this.maxY=Math.max(this.maxY,c[1],P[1])}updateScalingPathMinMax(a,u){n.Util.scaleMinMax(a,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(a,u,c,P,L,H,K,ne,_e,pe){const Pe=n.Util.bezierBoundingBox(u,c,P,L,H,K,ne,_e);if(pe){pe[0]=Math.min(pe[0],Pe[0],Pe[2]),pe[1]=Math.max(pe[1],Pe[0],Pe[2]),pe[2]=Math.min(pe[2],Pe[1],Pe[3]),pe[3]=Math.max(pe[3],Pe[1],Pe[3]);return}this.updateRectMinMax(a,Pe)}getPathBoundingBox(a=V.PathType.FILL,u=null){const c=[this.minX,this.minY,this.maxX,this.maxY];if(a===V.PathType.STROKE){u||(0,n.unreachable)("Stroke bounding box must include transform.");const P=n.Util.singularValueDecompose2dScale(u),L=P[0]*this.lineWidth/2,H=P[1]*this.lineWidth/2;c[0]-=L,c[1]-=H,c[2]+=L,c[3]+=H}return c}updateClipFromPath(){const a=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=V.PathType.FILL,u=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(a,u))}}function p(N,a){if(typeof ImageData<"u"&&a instanceof ImageData){N.putImageData(a,0,0);return}const u=a.height,c=a.width,P=u%b,L=(u-P)/b,H=P===0?L:L+1,K=N.createImageData(c,b);let ne=0,_e;const pe=a.data,Pe=K.data;let se,be,ge,Fe;if(a.kind===n.ImageKind.GRAYSCALE_1BPP){const Re=pe.byteLength,xe=new Uint32Array(Pe.buffer,0,Pe.byteLength>>2),de=xe.length,oe=c+7>>3,te=4294967295,ee=n.FeatureTest.isLittleEndian?4278190080:255;for(se=0;se<H;se++){for(ge=se<L?b:P,_e=0,be=0;be<ge;be++){const me=Re-ne;let Te=0;const Le=me>oe?c:me*8-7,Be=Le&-8;let Ue=0,$e=0;for(;Te<Be;Te+=8)$e=pe[ne++],xe[_e++]=$e&128?te:ee,xe[_e++]=$e&64?te:ee,xe[_e++]=$e&32?te:ee,xe[_e++]=$e&16?te:ee,xe[_e++]=$e&8?te:ee,xe[_e++]=$e&4?te:ee,xe[_e++]=$e&2?te:ee,xe[_e++]=$e&1?te:ee;for(;Te<Le;Te++)Ue===0&&($e=pe[ne++],Ue=128),xe[_e++]=$e&Ue?te:ee,Ue>>=1}for(;_e<de;)xe[_e++]=0;N.putImageData(K,0,se*b)}}else if(a.kind===n.ImageKind.RGBA_32BPP){for(be=0,Fe=c*b*4,se=0;se<L;se++)Pe.set(pe.subarray(ne,ne+Fe)),ne+=Fe,N.putImageData(K,0,be),be+=b;se<H&&(Fe=c*P*4,Pe.set(pe.subarray(ne,ne+Fe)),N.putImageData(K,0,be))}else if(a.kind===n.ImageKind.RGB_24BPP)for(ge=b,Fe=c*ge,se=0;se<H;se++){for(se>=L&&(ge=P,Fe=c*ge),_e=0,be=Fe;be--;)Pe[_e++]=pe[ne++],Pe[_e++]=pe[ne++],Pe[_e++]=pe[ne++],Pe[_e++]=255;N.putImageData(K,0,se*b)}else throw new Error(`bad image kind: ${a.kind}`)}function y(N,a){if(a.bitmap){N.drawImage(a.bitmap,0,0);return}const u=a.height,c=a.width,P=u%b,L=(u-P)/b,H=P===0?L:L+1,K=N.createImageData(c,b);let ne=0;const _e=a.data,pe=K.data;for(let Pe=0;Pe<H;Pe++){const se=Pe<L?b:P;({srcPos:ne}=(0,k.convertBlackAndWhiteToRGBA)({src:_e,srcPos:ne,dest:pe,width:c,height:se,nonBlackColor:0})),N.putImageData(K,0,Pe*b)}}function s(N,a){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const c of u)N[c]!==void 0&&(a[c]=N[c]);N.setLineDash!==void 0&&(a.setLineDash(N.getLineDash()),a.lineDashOffset=N.lineDashOffset)}function i(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!n.isNodeJS){const{filter:a}=N;a!=="none"&&a!==""&&(N.filter="none")}}function S(N,a,u,c){const P=N.length;for(let L=3;L<P;L+=4){const H=N[L];if(H===0)N[L-3]=a,N[L-2]=u,N[L-1]=c;else if(H<255){const K=255-H;N[L-3]=N[L-3]*H+a*K>>8,N[L-2]=N[L-2]*H+u*K>>8,N[L-1]=N[L-1]*H+c*K>>8}}}function m(N,a,u){const c=N.length,P=1/255;for(let L=3;L<c;L+=4){const H=u?u[N[L]]:N[L];a[L]=a[L]*H*P|0}}function h(N,a,u){const c=N.length;for(let P=3;P<c;P+=4){const L=N[P-3]*77+N[P-2]*152+N[P-1]*28;a[P]=u?a[P]*u[L>>8]>>8:a[P]*L>>16}}function D(N,a,u,c,P,L,H,K,ne,_e,pe){const Pe=!!L,se=Pe?L[0]:0,be=Pe?L[1]:0,ge=Pe?L[2]:0,Fe=P==="Luminosity"?h:m,xe=Math.min(c,Math.ceil(1048576/u));for(let de=0;de<c;de+=xe){const oe=Math.min(xe,c-de),te=N.getImageData(K-_e,de+(ne-pe),u,oe),ee=a.getImageData(K,de+ne,u,oe);Pe&&S(te.data,se,be,ge),Fe(te.data,ee.data,H),a.putImageData(ee,K,de+ne)}}function C(N,a,u,c){const P=c[0],L=c[1],H=c[2]-P,K=c[3]-L;H===0||K===0||(D(a.context,u,H,K,a.subtype,a.backdrop,a.transferMap,P,L,a.offsetX,a.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(u.canvas,0,0),N.restore())}function z(N,a){const u=n.Util.singularValueDecompose2dScale(N);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const c=Math.fround((globalThis.devicePixelRatio||1)*g.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:u[0]<=c||u[1]<=c}const ie=["butt","round","square"],T=["miter","round","bevel"],q={},J={},we=class we{constructor(a,u,c,P,L,{optionalContentConfig:H,markedContentStack:K=null},ne,_e){O(this,W);O(this,$);this.ctx=a,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=c,this.canvasFactory=P,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=H,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ne,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_e,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,u=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):u}beginDrawing({transform:a,viewport:u,transparency:c=!1,background:P=null}){const L=this.ctx.canvas.width,H=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=P||"#ffffff",this.ctx.fillRect(0,0,L,H),this.ctx.fillStyle=K,c){const ne=this.cachedCanvases.getCanvas("transparent",L,H);this.compositeCtx=this.ctx,this.transparentCanvas=ne.canvas,this.ctx=ne.context,this.ctx.save(),this.ctx.transform(...(0,g.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),i(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,g.getCurrentTransform)(this.ctx)}executeOperatorList(a,u,c,P){const L=a.argsArray,H=a.fnArray;let K=u||0;const ne=L.length;if(ne===K)return K;const _e=ne-K>R&&typeof c=="function",pe=_e?Date.now()+r:0;let Pe=0;const se=this.commonObjs,be=this.objs;let ge;for(;;){if(P!==void 0&&K===P.nextBreakPoint)return P.breakIt(K,c),K;if(ge=H[K],ge!==n.OPS.dependency)this[ge].apply(this,L[K]);else for(const Fe of L[K]){const Re=Fe.startsWith("g_")?se:be;if(!Re.has(Fe))return Re.get(Fe,c),K}if(K++,K===ne)return K;if(_e&&++Pe>R){if(Date.now()>pe)return c(),K;Pe=0}}}endDrawing(){G(this,W,hi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const u of a.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);a.clear()}this._cachedBitmapsMap.clear(),G(this,$,di).call(this)}_scaleImage(a,u){const c=a.width,P=a.height;let L=Math.max(Math.hypot(u[0],u[1]),1),H=Math.max(Math.hypot(u[2],u[3]),1),K=c,ne=P,_e="prescale1",pe,Pe;for(;L>2&&K>1||H>2&&ne>1;){let se=K,be=ne;L>2&&K>1&&(se=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),L/=K/se),H>2&&ne>1&&(be=ne>=16384?Math.floor(ne/2)-1||1:Math.ceil(ne)/2,H/=ne/be),pe=this.cachedCanvases.getCanvas(_e,se,be),Pe=pe.context,Pe.clearRect(0,0,se,be),Pe.drawImage(a,0,0,K,ne,0,0,se,be),a=pe.canvas,K=se,ne=be,_e=_e==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:K,paintHeight:ne}}_createMaskCanvas(a){const u=this.ctx,{width:c,height:P}=a,L=this.current.fillColor,H=this.current.patternFill,K=(0,g.getCurrentTransform)(u);let ne,_e,pe,Pe;if((a.bitmap||a.data)&&a.count>1){const Te=a.bitmap||a.data.buffer;_e=JSON.stringify(H?K:[K.slice(0,4),L]),ne=this._cachedBitmapsMap.get(Te),ne||(ne=new Map,this._cachedBitmapsMap.set(Te,ne));const Le=ne.get(_e);if(Le&&!H){const Be=Math.round(Math.min(K[0],K[2])+K[4]),Ue=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Le,offsetX:Be,offsetY:Ue}}pe=Le}pe||(Pe=this.cachedCanvases.getCanvas("maskCanvas",c,P),y(Pe.context,a));let se=n.Util.transform(K,[1/c,0,0,-1/P,0,0]);se=n.Util.transform(se,[1,0,0,1,0,-P]);const be=n.Util.applyTransform([0,0],se),ge=n.Util.applyTransform([c,P],se),Fe=n.Util.normalizeRect([be[0],be[1],ge[0],ge[1]]),Re=Math.round(Fe[2]-Fe[0])||1,xe=Math.round(Fe[3]-Fe[1])||1,de=this.cachedCanvases.getCanvas("fillCanvas",Re,xe),oe=de.context,te=Math.min(be[0],ge[0]),ee=Math.min(be[1],ge[1]);oe.translate(-te,-ee),oe.transform(...se),pe||(pe=this._scaleImage(Pe.canvas,(0,g.getCurrentTransformInverse)(oe)),pe=pe.img,ne&&H&&ne.set(_e,pe)),oe.imageSmoothingEnabled=z((0,g.getCurrentTransform)(oe),a.interpolate),f(oe,pe,0,0,pe.width,pe.height,0,0,c,P),oe.globalCompositeOperation="source-in";const me=n.Util.transform((0,g.getCurrentTransformInverse)(oe),[1,0,0,1,-te,-ee]);return oe.fillStyle=H?L.getPattern(u,this,me,V.PathType.FILL):L,oe.fillRect(0,0,c,P),ne&&!H&&(this.cachedCanvases.delete("fillCanvas"),ne.set(_e,de.canvas)),{canvas:de.canvas,offsetX:Math.round(te),offsetY:Math.round(ee)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ie[a]}setLineJoin(a){this.ctx.lineJoin=T[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,u){const c=this.ctx;c.setLineDash!==void 0&&(c.setLineDash(a),c.lineDashOffset=u)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[u,c]of a)switch(u){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c[0],c[1]);break;case"CA":this.current.strokeAlpha=c;break;case"ca":this.current.fillAlpha=c,this.ctx.globalAlpha=c;break;case"BM":this.ctx.globalCompositeOperation=c;break;case"SMask":this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,u=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,P=this.cachedCanvases.getCanvas(c,a,u);this.suspendedCtx=this.ctx,this.ctx=P.context;const L=this.ctx;L.setTransform(...(0,g.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,L),d(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,c=this.suspendedCtx;C(c,u,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,u,c,P,L,H){this.ctx.transform(a,u,c,P,L,H),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,u,c){const P=this.ctx,L=this.current;let H=L.x,K=L.y,ne,_e;const pe=(0,g.getCurrentTransform)(P),Pe=pe[0]===0&&pe[3]===0||pe[1]===0&&pe[2]===0,se=Pe?c.slice(0):null;for(let be=0,ge=0,Fe=a.length;be<Fe;be++)switch(a[be]|0){case n.OPS.rectangle:H=u[ge++],K=u[ge++];const Re=u[ge++],xe=u[ge++],de=H+Re,oe=K+xe;P.moveTo(H,K),Re===0||xe===0?P.lineTo(de,oe):(P.lineTo(de,K),P.lineTo(de,oe),P.lineTo(H,oe)),Pe||L.updateRectMinMax(pe,[H,K,de,oe]),P.closePath();break;case n.OPS.moveTo:H=u[ge++],K=u[ge++],P.moveTo(H,K),Pe||L.updatePathMinMax(pe,H,K);break;case n.OPS.lineTo:H=u[ge++],K=u[ge++],P.lineTo(H,K),Pe||L.updatePathMinMax(pe,H,K);break;case n.OPS.curveTo:ne=H,_e=K,H=u[ge+4],K=u[ge+5],P.bezierCurveTo(u[ge],u[ge+1],u[ge+2],u[ge+3],H,K),L.updateCurvePathMinMax(pe,ne,_e,u[ge],u[ge+1],u[ge+2],u[ge+3],H,K,se),ge+=6;break;case n.OPS.curveTo2:ne=H,_e=K,P.bezierCurveTo(H,K,u[ge],u[ge+1],u[ge+2],u[ge+3]),L.updateCurvePathMinMax(pe,ne,_e,H,K,u[ge],u[ge+1],u[ge+2],u[ge+3],se),H=u[ge+2],K=u[ge+3],ge+=4;break;case n.OPS.curveTo3:ne=H,_e=K,H=u[ge+2],K=u[ge+3],P.bezierCurveTo(u[ge],u[ge+1],H,K,H,K),L.updateCurvePathMinMax(pe,ne,_e,u[ge],u[ge+1],H,K,H,K,se),ge+=4;break;case n.OPS.closePath:P.closePath();break}Pe&&L.updateScalingPathMinMax(pe,se),L.setCurrentPoint(H,K)}closePath(){this.ctx.closePath()}stroke(a=!0){const u=this.ctx,c=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof c=="object"&&(c!=null&&c.getPattern)?(u.save(),u.strokeStyle=c.getPattern(u,this,(0,g.getCurrentTransformInverse)(u),V.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const u=this.ctx,c=this.current.fillColor,P=this.current.patternFill;let L=!1;P&&(u.save(),u.fillStyle=c.getPattern(u,this,(0,g.getCurrentTransformInverse)(u),V.PathType.FILL),L=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&H!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),L&&u.restore(),a&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,u=this.ctx;if(a===void 0){u.beginPath();return}u.save(),u.beginPath();for(const c of a)u.setTransform(...c.transform),u.translate(c.x,c.y),c.addToPath(u,c.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,u){var pe;const c=this.commonObjs.get(a),P=this.current;if(!c)throw new Error(`Can't find font for ${a}`);if(P.fontMatrix=c.fontMatrix||n.FONT_IDENTITY_MATRIX,(P.fontMatrix[0]===0||P.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+a),u<0?(u=-u,P.fontDirection=-1):P.fontDirection=1,this.current.font=c,this.current.fontSize=u,c.isType3Font)return;const L=c.loadedName||"sans-serif",H=((pe=c.systemFontInfo)==null?void 0:pe.css)||`"${L}", ${c.fallbackName}`;let K="normal";c.black?K="900":c.bold&&(K="bold");const ne=c.italic?"italic":"normal";let _e=u;u<M?_e=M:u>A&&(_e=A),this.current.fontSizeScale=u/_e,this.ctx.font=`${ne} ${K} ${_e}px ${H}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,u){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=u}setLeadingMoveText(a,u){this.setLeading(-u),this.moveText(a,u)}setTextMatrix(a,u,c,P,L,H){this.current.textMatrix=[a,u,c,P,L,H],this.current.textMatrixScale=Math.hypot(a,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,u,c,P){const L=this.ctx,H=this.current,K=H.font,ne=H.textRenderingMode,_e=H.fontSize/H.fontSizeScale,pe=ne&n.TextRenderingMode.FILL_STROKE_MASK,Pe=!!(ne&n.TextRenderingMode.ADD_TO_PATH_FLAG),se=H.patternFill&&!K.missingFile;let be;(K.disableFontFace||Pe||se)&&(be=K.getPathGenerator(this.commonObjs,a)),K.disableFontFace||se?(L.save(),L.translate(u,c),L.beginPath(),be(L,_e),P&&L.setTransform(...P),(pe===n.TextRenderingMode.FILL||pe===n.TextRenderingMode.FILL_STROKE)&&L.fill(),(pe===n.TextRenderingMode.STROKE||pe===n.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((pe===n.TextRenderingMode.FILL||pe===n.TextRenderingMode.FILL_STROKE)&&L.fillText(a,u,c),(pe===n.TextRenderingMode.STROKE||pe===n.TextRenderingMode.FILL_STROKE)&&L.strokeText(a,u,c)),Pe&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,g.getCurrentTransform)(L),x:u,y:c,fontSize:_e,addToPath:be})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const u=a.getImageData(0,0,10,10).data;let c=!1;for(let P=3;P<u.length;P+=4)if(u[P]>0&&u[P]<255){c=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",c)}showText(a){const u=this.current,c=u.font;if(c.isType3Font)return this.showType3Text(a);const P=u.fontSize;if(P===0)return;const L=this.ctx,H=u.fontSizeScale,K=u.charSpacing,ne=u.wordSpacing,_e=u.fontDirection,pe=u.textHScale*_e,Pe=a.length,se=c.vertical,be=se?1:-1,ge=c.defaultVMetrics,Fe=P*u.fontMatrix[0],Re=u.textRenderingMode===n.TextRenderingMode.FILL&&!c.disableFontFace&&!u.patternFill;L.save(),L.transform(...u.textMatrix),L.translate(u.x,u.y+u.textRise),_e>0?L.scale(pe,-1):L.scale(pe,1);let xe;if(u.patternFill){L.save();const me=u.fillColor.getPattern(L,this,(0,g.getCurrentTransformInverse)(L),V.PathType.FILL);xe=(0,g.getCurrentTransform)(L),L.restore(),L.fillStyle=me}let de=u.lineWidth;const oe=u.textMatrixScale;if(oe===0||de===0){const me=u.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(me===n.TextRenderingMode.STROKE||me===n.TextRenderingMode.FILL_STROKE)&&(de=this.getSinglePixelWidth())}else de/=oe;if(H!==1&&(L.scale(H,H),de/=H),L.lineWidth=de,c.isInvalidPDFjsFont){const me=[];let Te=0;for(const Le of a)me.push(Le.unicode),Te+=Le.width;L.fillText(me.join(""),0,0),u.x+=Te*Fe*pe,L.restore(),this.compose();return}let te=0,ee;for(ee=0;ee<Pe;++ee){const me=a[ee];if(typeof me=="number"){te+=be*me*P/1e3;continue}let Te=!1;const Le=(me.isSpace?ne:0)+K,Be=me.fontChar,Ue=me.accent;let $e,Ge,Ke=me.width;if(se){const Ze=me.vmetric||ge,Se=-(me.vmetric?Ze[1]:Ke*.5)*Fe,_=Ze[2]*Fe;Ke=Ze?-Ze[0]:Ke,$e=Se/H,Ge=(te+_)/H}else $e=te/H,Ge=0;if(c.remeasure&&Ke>0){const Ze=L.measureText(Be).width*1e3/P*H;if(Ke<Ze&&this.isFontSubpixelAAEnabled){const Se=Ke/Ze;Te=!0,L.save(),L.scale(Se,1),$e/=Se}else Ke!==Ze&&($e+=(Ke-Ze)/2e3*P/H)}if(this.contentVisible&&(me.isInFont||c.missingFile)){if(Re&&!Ue)L.fillText(Be,$e,Ge);else if(this.paintChar(Be,$e,Ge,xe),Ue){const Ze=$e+P*Ue.offset.x/H,Se=Ge-P*Ue.offset.y/H;this.paintChar(Ue.fontChar,Ze,Se,xe)}}const Xe=se?Ke*Fe-Le*_e:Ke*Fe+Le*_e;te+=Xe,Te&&L.restore()}se?u.y-=te:u.x+=te*pe,L.restore(),this.compose()}showType3Text(a){const u=this.ctx,c=this.current,P=c.font,L=c.fontSize,H=c.fontDirection,K=P.vertical?1:-1,ne=c.charSpacing,_e=c.wordSpacing,pe=c.textHScale*H,Pe=c.fontMatrix||n.FONT_IDENTITY_MATRIX,se=a.length,be=c.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ge,Fe,Re,xe;if(!(be||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...c.textMatrix),u.translate(c.x,c.y),u.scale(pe,H),ge=0;ge<se;++ge){if(Fe=a[ge],typeof Fe=="number"){xe=K*Fe*L/1e3,this.ctx.translate(xe,0),c.x+=xe*pe;continue}const de=(Fe.isSpace?_e:0)+ne,oe=P.charProcOperatorList[Fe.operatorListId];if(!oe){(0,n.warn)(`Type3 character "${Fe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Fe,this.save(),u.scale(L,L),u.transform(...Pe),this.executeOperatorList(oe),this.restore()),Re=n.Util.applyTransform([Fe.width,0],Pe)[0]*L+de,u.translate(Re,0),c.x+=Re*pe}u.restore(),this.processingType3=null}}setCharWidth(a,u){}setCharWidthAndBounds(a,u,c,P,L,H){this.ctx.rect(c,P,L-c,H-P),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let u;if(a[0]==="TilingPattern"){const c=a[1],P=this.baseTransform||(0,g.getCurrentTransform)(this.ctx),L={createCanvasGraphics:H=>new we(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};u=new V.TilingPattern(a,c,this.ctx,L,P)}else u=this._getPattern(a[1],a[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,u,c){const P=n.Util.makeHexColor(a,u,c);this.ctx.strokeStyle=P,this.current.strokeColor=P}setFillRGBColor(a,u,c){const P=n.Util.makeHexColor(a,u,c);this.ctx.fillStyle=P,this.current.fillColor=P,this.current.patternFill=!1}_getPattern(a,u=null){let c;return this.cachedPatterns.has(a)?c=this.cachedPatterns.get(a):(c=(0,V.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,c)),u&&(c.matrix=u),c}shadingFill(a){if(!this.contentVisible)return;const u=this.ctx;this.save();const c=this._getPattern(a);u.fillStyle=c.getPattern(u,this,(0,g.getCurrentTransformInverse)(u),V.PathType.SHADING);const P=(0,g.getCurrentTransformInverse)(u);if(P){const{width:L,height:H}=u.canvas,[K,ne,_e,pe]=n.Util.getAxialAlignedBoundingBox([0,0,L,H],P);this.ctx.fillRect(K,ne,_e-K,pe-ne)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,g.getCurrentTransform)(this.ctx),u)){const c=u[2]-u[0],P=u[3]-u[1];this.ctx.rect(u[0],u[1],c,P),this.current.updateRectMinMax((0,g.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;a.isolated||(0,n.info)("TODO: Support non-isolated groups."),a.knockout&&(0,n.warn)("Knockout groups not supported.");const c=(0,g.getCurrentTransform)(u);if(a.matrix&&u.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let P=n.Util.getAxialAlignedBoundingBox(a.bbox,(0,g.getCurrentTransform)(u));const L=[0,0,u.canvas.width,u.canvas.height];P=n.Util.intersect(P,L)||[0,0,0,0];const H=Math.floor(P[0]),K=Math.floor(P[1]);let ne=Math.max(Math.ceil(P[2])-H,1),_e=Math.max(Math.ceil(P[3])-K,1),pe=1,Pe=1;ne>l&&(pe=ne/l,ne=l),_e>l&&(Pe=_e/l,_e=l),this.current.startNewPathAndClipBox([0,0,ne,_e]);let se="groupAt"+this.groupLevel;a.smask&&(se+="_smask_"+this.smaskCounter++%2);const be=this.cachedCanvases.getCanvas(se,ne,_e),ge=be.context;ge.scale(1/pe,1/Pe),ge.translate(-H,-K),ge.transform(...c),a.smask?this.smaskStack.push({canvas:be.canvas,context:ge,offsetX:H,offsetY:K,scaleX:pe,scaleY:Pe,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(H,K),u.scale(pe,Pe),u.save()),s(u,ge),this.ctx=ge,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const P=(0,g.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...P);const L=n.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],P);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(a,u,c,P,L){if(G(this,W,hi).call(this),i(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const H=u[2]-u[0],K=u[3]-u[1];if(L&&this.annotationCanvasMap){c=c.slice(),c[4]-=u[0],c[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=H,u[3]=K;const[ne,_e]=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(this.ctx)),{viewportScale:pe}=this,Pe=Math.ceil(H*this.outputScaleX*pe),se=Math.ceil(K*this.outputScaleY*pe);this.annotationCanvas=this.canvasFactory.create(Pe,se);const{canvas:be,context:ge}=this.annotationCanvas;this.annotationCanvasMap.set(a,be),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ge,this.ctx.save(),this.ctx.setTransform(ne,0,0,-_e,0,K*_e),i(this.ctx)}else i(this.ctx),this.ctx.rect(u[0],u[1],H,K),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...c),this.transform(...P)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),G(this,$,di).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const u=a.count;a=this.getObject(a.data,a),a.count=u;const c=this.ctx,P=this.processingType3;if(P&&(P.compiled===void 0&&(P.compiled=w(a)),P.compiled)){P.compiled(c);return}const L=this._createMaskCanvas(a),H=L.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(H,L.offsetX,L.offsetY),c.restore(),this.compose()}paintImageMaskXObjectRepeat(a,u,c=0,P=0,L,H){if(!this.contentVisible)return;a=this.getObject(a.data,a);const K=this.ctx;K.save();const ne=(0,g.getCurrentTransform)(K);K.transform(u,c,P,L,0,0);const _e=this._createMaskCanvas(a);K.setTransform(1,0,0,1,_e.offsetX-ne[4],_e.offsetY-ne[5]);for(let pe=0,Pe=H.length;pe<Pe;pe+=2){const se=n.Util.transform(ne,[u,c,P,L,H[pe],H[pe+1]]),[be,ge]=n.Util.applyTransform([0,0],se);K.drawImage(_e.canvas,be,ge)}K.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const u=this.ctx,c=this.current.fillColor,P=this.current.patternFill;for(const L of a){const{data:H,width:K,height:ne,transform:_e}=L,pe=this.cachedCanvases.getCanvas("maskCanvas",K,ne),Pe=pe.context;Pe.save();const se=this.getObject(H,L);y(Pe,se),Pe.globalCompositeOperation="source-in",Pe.fillStyle=P?c.getPattern(Pe,this,(0,g.getCurrentTransformInverse)(u),V.PathType.FILL):c,Pe.fillRect(0,0,K,ne),Pe.restore(),u.save(),u.transform(..._e),u.scale(1,-1),f(u,pe.canvas,0,0,K,ne,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const u=this.getObject(a);if(!u){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(a,u,c,P){if(!this.contentVisible)return;const L=this.getObject(a);if(!L){(0,n.warn)("Dependent image isn't ready yet");return}const H=L.width,K=L.height,ne=[];for(let _e=0,pe=P.length;_e<pe;_e+=2)ne.push({transform:[u,0,0,c,P[_e],P[_e+1]],x:0,y:0,w:H,h:K});this.paintInlineImageXObjectGroup(L,ne)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:u,width:c,height:P}=a,L=this.cachedCanvases.getCanvas("inlineImage",c,P),H=L.context;return H.filter=this.current.transferMaps,H.drawImage(u,0,0),H.filter="none",L.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const u=a.width,c=a.height,P=this.ctx;if(this.save(),!n.isNodeJS){const{filter:K}=P;K!=="none"&&K!==""&&(P.filter="none")}P.scale(1/u,-1/c);let L;if(a.bitmap)L=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)L=a;else{const ne=this.cachedCanvases.getCanvas("inlineImage",u,c).context;p(ne,a),L=this.applyTransferMapsToCanvas(ne)}const H=this._scaleImage(L,(0,g.getCurrentTransformInverse)(P));P.imageSmoothingEnabled=z((0,g.getCurrentTransform)(P),a.interpolate),f(P,H.img,0,0,H.paintWidth,H.paintHeight,0,-c,u,c),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,u){if(!this.contentVisible)return;const c=this.ctx;let P;if(a.bitmap)P=a.bitmap;else{const L=a.width,H=a.height,ne=this.cachedCanvases.getCanvas("inlineImage",L,H).context;p(ne,a),P=this.applyTransferMapsToCanvas(ne)}for(const L of u)c.save(),c.transform(...L.transform),c.scale(1,-1),f(c,P,L.x,L.y,L.w,L.h,0,-1,1,1),c.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,u){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,u){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const c=this.ctx;this.pendingClip&&(u||(this.pendingClip===J?c.clip("evenodd"):c.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,g.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const u=Math.abs(a[0]*a[3]-a[2]*a[1]),c=Math.hypot(a[0],a[2]),P=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(c,P)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:u,b:c,c:P,d:L}=this.ctx.getTransform();let H,K;if(c===0&&P===0){const ne=Math.abs(u),_e=Math.abs(L);if(ne===_e)if(a===0)H=K=1/ne;else{const pe=ne*a;H=K=pe<1?1/pe:1}else if(a===0)H=1/ne,K=1/_e;else{const pe=ne*a,Pe=_e*a;H=pe<1?1/pe:1,K=Pe<1?1/Pe:1}}else{const ne=Math.abs(u*L-c*P),_e=Math.hypot(u,c),pe=Math.hypot(P,L);if(a===0)H=pe/ne,K=_e/ne;else{const Pe=a*ne;H=pe>Pe?pe/Pe:1,K=_e>Pe?_e/Pe:1}}this._cachedScaleForStroking[0]=H,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:u}=this,{lineWidth:c}=this.current,[P,L]=this.getScaleForStroking();if(u.lineWidth=c||1,P===1&&L===1){u.stroke();return}const H=u.getLineDash();if(a&&u.save(),u.scale(P,L),H.length>0){const K=Math.max(P,L);u.setLineDash(H.map(ne=>ne/K)),u.lineDashOffset/=K}u.stroke(),a&&u.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};W=new WeakSet,hi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$=new WeakSet,di=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const u=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=u}}};let Y=we;t.CanvasGraphics=Y;for(const N in n.OPS)Y.prototype[N]!==void 0&&(Y.prototype[n.OPS[N]]=Y.prototype[N])},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=b;var n=F(1),g=F(6);const V={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=V;function k(w,E){if(!E)return;const p=E[2]-E[0],y=E[3]-E[1],s=new Path2D;s.rect(E[0],E[1],p,y),w.clip(s)}class M{constructor(){this.constructor===M&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class A extends M{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let p;this._type==="axial"?p=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(p=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)p.addColorStop(y[0],y[1]);return p}getPattern(E,p,y,s){let i;if(s===V.STROKE||s===V.FILL){const S=p.current.getClippedPathBoundingBox(s,(0,g.getCurrentTransform)(E))||[0,0,0,0],m=Math.ceil(S[2]-S[0])||1,h=Math.ceil(S[3]-S[1])||1,D=p.cachedCanvases.getCanvas("pattern",m,h,!0),C=D.context;C.clearRect(0,0,C.canvas.width,C.canvas.height),C.beginPath(),C.rect(0,0,C.canvas.width,C.canvas.height),C.translate(-S[0],-S[1]),y=n.Util.transform(y,[1,0,0,1,S[0],S[1]]),C.transform(...p.baseTransform),this.matrix&&C.transform(...this.matrix),k(C,this._bbox),C.fillStyle=this._createGradient(C),C.fill(),i=E.createPattern(D.canvas,"no-repeat");const z=new DOMMatrix(y);i.setTransform(z)}else k(E,this._bbox),i=this._createGradient(E);return i}}function l(w,E,p,y,s,i,S,m){const h=E.coords,D=E.colors,C=w.data,z=w.width*4;let ie;h[p+1]>h[y+1]&&(ie=p,p=y,y=ie,ie=i,i=S,S=ie),h[y+1]>h[s+1]&&(ie=y,y=s,s=ie,ie=S,S=m,m=ie),h[p+1]>h[y+1]&&(ie=p,p=y,y=ie,ie=i,i=S,S=ie);const T=(h[p]+E.offsetX)*E.scaleX,q=(h[p+1]+E.offsetY)*E.scaleY,J=(h[y]+E.offsetX)*E.scaleX,Y=(h[y+1]+E.offsetY)*E.scaleY,W=(h[s]+E.offsetX)*E.scaleX,le=(h[s+1]+E.offsetY)*E.scaleY;if(q>=le)return;const $=D[i],Ee=D[i+1],we=D[i+2],N=D[S],a=D[S+1],u=D[S+2],c=D[m],P=D[m+1],L=D[m+2],H=Math.round(q),K=Math.round(le);let ne,_e,pe,Pe,se,be,ge,Fe;for(let Re=H;Re<=K;Re++){if(Re<Y){const ee=Re<q?0:(q-Re)/(q-Y);ne=T-(T-J)*ee,_e=$-($-N)*ee,pe=Ee-(Ee-a)*ee,Pe=we-(we-u)*ee}else{let ee;Re>le?ee=1:Y===le?ee=0:ee=(Y-Re)/(Y-le),ne=J-(J-W)*ee,_e=N-(N-c)*ee,pe=a-(a-P)*ee,Pe=u-(u-L)*ee}let xe;Re<q?xe=0:Re>le?xe=1:xe=(q-Re)/(q-le),se=T-(T-W)*xe,be=$-($-c)*xe,ge=Ee-(Ee-P)*xe,Fe=we-(we-L)*xe;const de=Math.round(Math.min(ne,se)),oe=Math.round(Math.max(ne,se));let te=z*Re+de*4;for(let ee=de;ee<=oe;ee++)xe=(ne-ee)/(ne-se),xe<0?xe=0:xe>1&&(xe=1),C[te++]=_e-(_e-be)*xe|0,C[te++]=pe-(pe-ge)*xe|0,C[te++]=Pe-(Pe-Fe)*xe|0,C[te++]=255}}function r(w,E,p){const y=E.coords,s=E.colors;let i,S;switch(E.type){case"lattice":const m=E.verticesPerRow,h=Math.floor(y.length/m)-1,D=m-1;for(i=0;i<h;i++){let C=i*m;for(let z=0;z<D;z++,C++)l(w,p,y[C],y[C+1],y[C+m],s[C],s[C+1],s[C+m]),l(w,p,y[C+m+1],y[C+1],y[C+m],s[C+m+1],s[C+1],s[C+m])}break;case"triangles":for(i=0,S=y.length;i<S;i+=3)l(w,p,y[i],y[i+1],y[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class R extends M{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,p,y){const m=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-m,C=Math.ceil(this._bounds[3])-h,z=Math.min(Math.ceil(Math.abs(D*E[0]*1.1)),3e3),ie=Math.min(Math.ceil(Math.abs(C*E[1]*1.1)),3e3),T=D/z,q=C/ie,J={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-h,scaleX:1/T,scaleY:1/q},Y=z+2*2,W=ie+2*2,le=y.getCanvas("mesh",Y,W,!1),$=le.context,Ee=$.createImageData(z,ie);if(p){const N=Ee.data;for(let a=0,u=N.length;a<u;a+=4)N[a]=p[0],N[a+1]=p[1],N[a+2]=p[2],N[a+3]=255}for(const N of this._figures)r(Ee,N,J);return $.putImageData(Ee,2,2),{canvas:le.canvas,offsetX:m-2*T,offsetY:h-2*q,scaleX:T,scaleY:q}}getPattern(E,p,y,s){k(E,this._bbox);let i;if(s===V.SHADING)i=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(E));else if(i=n.Util.singularValueDecompose2dScale(p.baseTransform),this.matrix){const m=n.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*m[0],i[1]*m[1]]}const S=this._createMeshCanvas(i,s===V.SHADING?null:this._background,p.cachedCanvases);return s!==V.SHADING&&(E.setTransform(...p.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(S.offsetX,S.offsetY),E.scale(S.scaleX,S.scaleY),E.createPattern(S.canvas,"no-repeat")}}class x extends M{getPattern(){return"hotpink"}}function b(w){switch(w[0]){case"RadialAxial":return new A(w);case"Mesh":return new R(w);case"Dummy":return new x}throw new Error(`Unknown IR type: ${w[0]}`)}const d={COLORED:1,UNCOLORED:2},f=class f{constructor(E,p,y,s,i){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=p,this.ctx=y,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(E){const p=this.operatorList,y=this.bbox,s=this.xstep,i=this.ystep,S=this.paintType,m=this.tilingType,h=this.color,D=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+m);const C=y[0],z=y[1],ie=y[2],T=y[3],q=n.Util.singularValueDecompose2dScale(this.matrix),J=n.Util.singularValueDecompose2dScale(this.baseTransform),Y=[q[0]*J[0],q[1]*J[1]],W=this.getSizeAndScale(s,this.ctx.canvas.width,Y[0]),le=this.getSizeAndScale(i,this.ctx.canvas.height,Y[1]),$=E.cachedCanvases.getCanvas("pattern",W.size,le.size,!0),Ee=$.context,we=D.createCanvasGraphics(Ee);we.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(we,S,h);let N=C,a=z,u=ie,c=T;return C<0&&(N=0,u+=Math.abs(C)),z<0&&(a=0,c+=Math.abs(z)),Ee.translate(-(W.scale*N),-(le.scale*a)),we.transform(W.scale,0,0,le.scale,0,0),Ee.save(),this.clipBbox(we,N,a,u,c),we.baseTransform=(0,g.getCurrentTransform)(we.ctx),we.executeOperatorList(p),we.endDrawing(),{canvas:$.canvas,scaleX:W.scale,scaleY:le.scale,offsetX:N,offsetY:a}}getSizeAndScale(E,p,y){E=Math.abs(E);const s=Math.max(f.MAX_PATTERN_SIZE,p);let i=Math.ceil(E*y);return i>=s?i=s:y=i/E,{scale:y,size:i}}clipBbox(E,p,y,s,i){const S=s-p,m=i-y;E.ctx.rect(p,y,S,m),E.current.updateRectMinMax((0,g.getCurrentTransform)(E.ctx),[p,y,s,i]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,p,y){const s=E.ctx,i=E.current;switch(p){case d.COLORED:const S=this.ctx;s.fillStyle=S.fillStyle,s.strokeStyle=S.strokeStyle,i.fillColor=S.fillStyle,i.strokeColor=S.strokeStyle;break;case d.UNCOLORED:const m=n.Util.makeHexColor(y[0],y[1],y[2]);s.fillStyle=m,s.strokeStyle=m,i.fillColor=m,i.strokeColor=m;break;default:throw new n.FormatError(`Unsupported paint type: ${p}`)}}getPattern(E,p,y,s){let i=y;s!==V.SHADING&&(i=n.Util.transform(i,p.baseTransform),this.matrix&&(i=n.Util.transform(i,this.matrix)));const S=this.createPatternCanvas(p);let m=new DOMMatrix(i);m=m.translate(S.offsetX,S.offsetY),m=m.scale(1/S.scaleX,1/S.scaleY);const h=E.createPattern(S.canvas,"repeat");return h.setTransform(m),h}};tt(f,"MAX_PATTERN_SIZE",3e3);let v=f;t.TilingPattern=v},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=V,t.convertToRGBA=g,t.grayToRGBA=M;var n=F(1);function g(A){switch(A.kind){case n.ImageKind.GRAYSCALE_1BPP:return V(A);case n.ImageKind.RGB_24BPP:return k(A)}return null}function V({src:A,srcPos:l=0,dest:r,width:R,height:x,nonBlackColor:b=4294967295,inverseDecode:d=!1}){const v=n.FeatureTest.isLittleEndian?4278190080:255,[f,w]=d?[b,v]:[v,b],E=R>>3,p=R&7,y=A.length;r=new Uint32Array(r.buffer);let s=0;for(let i=0;i<x;i++){for(const m=l+E;l<m;l++){const h=l<y?A[l]:255;r[s++]=h&128?w:f,r[s++]=h&64?w:f,r[s++]=h&32?w:f,r[s++]=h&16?w:f,r[s++]=h&8?w:f,r[s++]=h&4?w:f,r[s++]=h&2?w:f,r[s++]=h&1?w:f}if(p===0)continue;const S=l<y?A[l++]:255;for(let m=0;m<p;m++)r[s++]=S&1<<7-m?w:f}return{srcPos:l,destPos:s}}function k({src:A,srcPos:l=0,dest:r,destPos:R=0,width:x,height:b}){let d=0;const v=A.length>>2,f=new Uint32Array(A.buffer,l,v);if(n.FeatureTest.isLittleEndian){for(;d<v-2;d+=3,R+=4){const w=f[d],E=f[d+1],p=f[d+2];r[R]=w|4278190080,r[R+1]=w>>>24|E<<8|4278190080,r[R+2]=E>>>16|p<<16|4278190080,r[R+3]=p>>>8|4278190080}for(let w=d*4,E=A.length;w<E;w+=3)r[R++]=A[w]|A[w+1]<<8|A[w+2]<<16|4278190080}else{for(;d<v-2;d+=3,R+=4){const w=f[d],E=f[d+1],p=f[d+2];r[R]=w|255,r[R+1]=w<<24|E>>>8|255,r[R+2]=E<<16|p>>>16|255,r[R+3]=p<<8|255}for(let w=d*4,E=A.length;w<E;w+=3)r[R++]=A[w]<<24|A[w+1]<<16|A[w+2]<<8|255}return{srcPos:l,destPos:R}}function M(A,l){if(n.FeatureTest.isLittleEndian)for(let r=0,R=A.length;r<R;r++)l[r]=A[r]*65793|4278190080;else for(let r=0,R=A.length;r<R;r++)l[r]=A[r]*16843008|255}},(U,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const F=Object.create(null);t.GlobalWorkerOptions=F,F.workerPort=null,F.workerSrc=""},(U,t,F)=>{var A,cn,r,hn,x,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=F(1);const g={UNKNOWN:0,DATA:1,ERROR:2},V={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function k(d){switch(d instanceof Error||typeof d=="object"&&d!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new n.AbortException(d.message);case"MissingPDFException":return new n.MissingPDFException(d.message);case"PasswordException":return new n.PasswordException(d.message,d.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(d.message,d.status);case"UnknownErrorException":return new n.UnknownErrorException(d.message,d.details);default:return new n.UnknownErrorException(d.message,d.toString())}}class M{constructor(v,f,w){O(this,A);O(this,r);O(this,x);this.sourceName=v,this.targetName=f,this.comObj=w,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const p=E.data;if(p.targetName!==this.sourceName)return;if(p.stream){G(this,r,hn).call(this,p);return}if(p.callback){const s=p.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],p.callback===g.DATA)i.resolve(p.data);else if(p.callback===g.ERROR)i.reject(k(p.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[p.action];if(!y)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){const s=this.sourceName,i=p.sourceName;new Promise(function(S){S(y(p.data))}).then(function(S){w.postMessage({sourceName:s,targetName:i,callback:g.DATA,callbackId:p.callbackId,data:S})},function(S){w.postMessage({sourceName:s,targetName:i,callback:g.ERROR,callbackId:p.callbackId,reason:k(S)})});return}if(p.streamId){G(this,A,cn).call(this,p);return}y(p.data)},w.addEventListener("message",this._onComObjOnMessage)}on(v,f){const w=this.actionHandler;if(w[v])throw new Error(`There is already an actionName called "${v}"`);w[v]=f}send(v,f,w){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:f},w)}sendWithPromise(v,f,w){const E=this.callbackId++,p=new n.PromiseCapability;this.callbackCapabilities[E]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:E,data:f},w)}catch(y){p.reject(y)}return p.promise}sendWithStream(v,f,w,E){const p=this.streamId++,y=this.sourceName,s=this.targetName,i=this.comObj;return new ReadableStream({start:S=>{const m=new n.PromiseCapability;return this.streamControllers[p]={controller:S,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:y,targetName:s,action:v,streamId:p,data:f,desiredSize:S.desiredSize},E),m.promise},pull:S=>{const m=new n.PromiseCapability;return this.streamControllers[p].pullCall=m,i.postMessage({sourceName:y,targetName:s,stream:V.PULL,streamId:p,desiredSize:S.desiredSize}),m.promise},cancel:S=>{(0,n.assert)(S instanceof Error,"cancel must have a valid reason");const m=new n.PromiseCapability;return this.streamControllers[p].cancelCall=m,this.streamControllers[p].isClosed=!0,i.postMessage({sourceName:y,targetName:s,stream:V.CANCEL,streamId:p,reason:k(S)}),m.promise}},w)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}A=new WeakSet,cn=function(v){const f=v.streamId,w=this.sourceName,E=v.sourceName,p=this.comObj,y=this,s=this.actionHandler[v.action],i={enqueue(S,m=1,h){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=m,D>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:w,targetName:E,stream:V.ENQUEUE,streamId:f,chunk:S},h)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:w,targetName:E,stream:V.CLOSE,streamId:f}),delete y.streamSinks[f])},error(S){(0,n.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:w,targetName:E,stream:V.ERROR,streamId:f,reason:k(S)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[f]=i,new Promise(function(S){S(s(v.data,i))}).then(function(){p.postMessage({sourceName:w,targetName:E,stream:V.START_COMPLETE,streamId:f,success:!0})},function(S){p.postMessage({sourceName:w,targetName:E,stream:V.START_COMPLETE,streamId:f,reason:k(S)})})},r=new WeakSet,hn=function(v){const f=v.streamId,w=this.sourceName,E=v.sourceName,p=this.comObj,y=this.streamControllers[f],s=this.streamSinks[f];switch(v.stream){case V.START_COMPLETE:v.success?y.startCall.resolve():y.startCall.reject(k(v.reason));break;case V.PULL_COMPLETE:v.success?y.pullCall.resolve():y.pullCall.reject(k(v.reason));break;case V.PULL:if(!s){p.postMessage({sourceName:w,targetName:E,stream:V.PULL_COMPLETE,streamId:f,success:!0});break}s.desiredSize<=0&&v.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=v.desiredSize,new Promise(function(i){var S;i((S=s.onPull)==null?void 0:S.call(s))}).then(function(){p.postMessage({sourceName:w,targetName:E,stream:V.PULL_COMPLETE,streamId:f,success:!0})},function(i){p.postMessage({sourceName:w,targetName:E,stream:V.PULL_COMPLETE,streamId:f,reason:k(i)})});break;case V.ENQUEUE:if((0,n.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(v.chunk);break;case V.CLOSE:if((0,n.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),G(this,x,kt).call(this,y,f);break;case V.ERROR:(0,n.assert)(y,"error should have stream controller"),y.controller.error(k(v.reason)),G(this,x,kt).call(this,y,f);break;case V.CANCEL_COMPLETE:v.success?y.cancelCall.resolve():y.cancelCall.reject(k(v.reason)),G(this,x,kt).call(this,y,f);break;case V.CANCEL:if(!s)break;new Promise(function(i){var S;i((S=s.onCancel)==null?void 0:S.call(s,k(v.reason)))}).then(function(){p.postMessage({sourceName:w,targetName:E,stream:V.CANCEL_COMPLETE,streamId:f,success:!0})},function(i){p.postMessage({sourceName:w,targetName:E,stream:V.CANCEL_COMPLETE,streamId:f,reason:k(i)})}),s.sinkCapability.reject(k(v.reason)),s.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},x=new WeakSet,kt=async function(v,f){var w,E,p;await Promise.allSettled([(w=v.startCall)==null?void 0:w.promise,(E=v.pullCall)==null?void 0:E.promise,(p=v.cancelCall)==null?void 0:p.promise]),delete this.streamControllers[f]},t.MessageHandler=M},(U,t,F)=>{var V,k;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=F(1);class g{constructor({parsedData:A,rawData:l}){O(this,V,void 0);O(this,k,void 0);Z(this,V,A),Z(this,k,l)}getRaw(){return e(this,k)}get(A){return e(this,V).get(A)??null}getAll(){return(0,n.objectFromMap)(e(this,V))}has(A){return e(this,V).has(A)}}V=new WeakMap,k=new WeakMap,t.Metadata=g},(U,t,F)=>{var A,l,r,R,x,b,ui;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=F(1),g=F(8);const V=Symbol("INTERNAL");class k{constructor(f,w){O(this,A,!0);this.name=f,this.intent=w}get visible(){return e(this,A)}_setVisible(f,w){f!==V&&(0,n.unreachable)("Internal method `_setVisible` called."),Z(this,A,w)}}A=new WeakMap;class M{constructor(f){O(this,b);O(this,l,null);O(this,r,new Map);O(this,R,null);O(this,x,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,Z(this,x,f.order);for(const w of f.groups)e(this,r).set(w.id,new k(w.name,w.intent));if(f.baseState==="OFF")for(const w of e(this,r).values())w._setVisible(V,!1);for(const w of f.on)e(this,r).get(w)._setVisible(V,!0);for(const w of f.off)e(this,r).get(w)._setVisible(V,!1);Z(this,R,this.getHash())}}isVisible(f){if(e(this,r).size===0)return!0;if(!f)return(0,n.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return e(this,r).has(f.id)?e(this,r).get(f.id).visible:((0,n.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return G(this,b,ui).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const w of f.ids){if(!e(this,r).has(w))return(0,n.warn)(`Optional content group not found: ${w}`),!0;if(e(this,r).get(w).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const w of f.ids){if(!e(this,r).has(w))return(0,n.warn)(`Optional content group not found: ${w}`),!0;if(!e(this,r).get(w).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const w of f.ids){if(!e(this,r).has(w))return(0,n.warn)(`Optional content group not found: ${w}`),!0;if(!e(this,r).get(w).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const w of f.ids){if(!e(this,r).has(w))return(0,n.warn)(`Optional content group not found: ${w}`),!0;if(e(this,r).get(w).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,n.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,w=!0){if(!e(this,r).has(f)){(0,n.warn)(`Optional content group not found: ${f}`);return}e(this,r).get(f)._setVisible(V,!!w),Z(this,l,null)}get hasInitialVisibility(){return e(this,R)===null||this.getHash()===e(this,R)}getOrder(){return e(this,r).size?e(this,x)?e(this,x).slice():[...e(this,r).keys()]:null}getGroups(){return e(this,r).size>0?(0,n.objectFromMap)(e(this,r)):null}getGroup(f){return e(this,r).get(f)||null}getHash(){if(e(this,l)!==null)return e(this,l);const f=new g.MurmurHash3_64;for(const[w,E]of e(this,r))f.update(`${w}:${E.visible}`);return Z(this,l,f.hexdigest())}}l=new WeakMap,r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakSet,ui=function(f){const w=f.length;if(w<2)return!0;const E=f[0];for(let p=1;p<w;p++){const y=f[p];let s;if(Array.isArray(y))s=G(this,b,ui).call(this,y);else if(e(this,r).has(y))s=e(this,r).get(y).visible;else return(0,n.warn)(`Optional content group not found: ${y}`),!0;switch(E){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return E==="And"},t.OptionalContentConfig=M},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=F(1),g=F(6);class V{constructor({length:l,initialData:r,progressiveDone:R=!1,contentDispositionFilename:x=null,disableRange:b=!1,disableStream:d=!1},v){if((0,n.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=R,this._contentDispositionFilename=x,(r==null?void 0:r.length)>0){const f=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!d,this._isRangeSupported=!b,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,w)=>{this._onReceiveData({begin:f,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((f,w)=>{this._onProgress({loaded:f,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:l,chunk:r}){const R=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(l===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(R):this._queuedChunks.push(R);else{const x=this._rangeReaders.some(function(b){return b._begin!==l?!1:(b._enqueue(R),!0)});(0,n.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}_onProgress(l){var r,R,x,b;l.total===void 0?(R=(r=this._rangeReaders[0])==null?void 0:r.onProgress)==null||R.call(r,{loaded:l.loaded}):(b=(x=this._fullRequestReader)==null?void 0:x.onProgress)==null||b.call(x,{loaded:l.loaded,total:l.total})}_onProgressiveDone(){var l;(l=this._fullRequestReader)==null||l.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const r=this._rangeReaders.indexOf(l);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new k(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,r){if(r<=this._progressiveDataLength)return null;const R=new M(this,l,r);return this._pdfDataRangeTransport.requestDataRange(l,r),this._rangeReaders.push(R),R}cancelAllRequests(l){var r;(r=this._fullRequestReader)==null||r.cancel(l);for(const R of this._rangeReaders.slice(0))R.cancel(l);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=V;class k{constructor(l,r,R=!1,x=null){this._stream=l,this._done=R||!1,this._filename=(0,g.isPdfFile)(x)?x:null,this._queuedChunks=r||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=new n.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M{constructor(l,r,R){this._stream=l,this._begin=r,this._end=R,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const l=new n.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=F(1),g=F(20);function V(R,x,b){return{method:"GET",headers:R,signal:b.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function k(R){const x=new Headers;for(const b in R){const d=R[b];d!==void 0&&x.append(b,d)}return x}function M(R){return R instanceof Uint8Array?R.buffer:R instanceof ArrayBuffer?R:((0,n.warn)(`getArrayBuffer - unexpected data format: ${R}`),new Uint8Array(R).buffer)}class A{constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(x,b){if(b<=this._progressiveDataLength)return null;const d=new r(this,x,b);return this._rangeRequestReaders.push(d),d}cancelAllRequests(x){var b;(b=this._fullRequestReader)==null||b.cancel(x);for(const d of this._rangeRequestReaders.slice(0))d.cancel(x)}}t.PDFFetchStream=A;class l{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const b=x.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=new n.PromiseCapability,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=k(this._stream.httpHeaders);const d=b.url;fetch(d,V(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,g.validateResponseStatus)(v.status))throw(0,g.createResponseStatusError)(v.status,d);this._reader=v.body.getReader(),this._headersCapability.resolve();const f=p=>v.headers.get(p),{allowRangeRequests:w,suggestedLength:E}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=E||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._headersCapability.promise;const{value:x,done:b}=await this._reader.read();return b?{value:x,done:b}:(this._loaded+=x.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:M(x),done:!1})}cancel(x){var b;(b=this._reader)==null||b.cancel(x),this._abortController.abort()}}class r{constructor(x,b,d){this._stream=x,this._reader=null,this._loaded=0;const v=x.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=k(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${d-1}`);const f=v.url;fetch(f,V(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,g.validateResponseStatus)(w.status))throw(0,g.createResponseStatusError)(w.status,f);this._readCapability.resolve(),this._reader=w.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._readCapability.promise;const{value:x,done:b}=await this._reader.read();return b?{value:x,done:b}:(this._loaded+=x.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:M(x),done:!1})}cancel(x){var b;(b=this._reader)==null||b.cancel(x),this._abortController.abort()}}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=A,t.extractFilenameFromHeader=M,t.validateRangeRequestCapabilities=k,t.validateResponseStatus=l;var n=F(1),g=F(21),V=F(6);function k({getResponseHeader:r,isHttp:R,rangeChunkSize:x,disableRange:b}){const d={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(r("Content-Length"),10);return!Number.isInteger(v)||(d.suggestedLength=v,v<=2*x)||b||!R||r("Accept-Ranges")!=="bytes"||(r("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0),d}function M(r){const R=r("Content-Disposition");if(R){let x=(0,g.getFilenameFromContentDispositionHeader)(R);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,V.isPdfFile)(x))return x}return null}function A(r,R){return r===404||r===0&&R.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+R+'".'):new n.UnexpectedResponseException(`Unexpected server response (${r}) while retrieving PDF "${R}".`,r)}function l(r){return r===200||r===206}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=g;var n=F(1);function g(V){let k=!0,M=A("filename\\*","i").exec(V);if(M){M=M[1];let v=x(M);return v=unescape(v),v=b(v),v=d(v),r(v)}if(M=R(V),M){const v=d(M);return r(v)}if(M=A("filename","i").exec(V),M){M=M[1];let v=x(M);return v=d(v),r(v)}function A(v,f){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function l(v,f){if(v){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const w=new TextDecoder(v,{fatal:!0}),E=(0,n.stringToBytes)(f);f=w.decode(E),k=!1}catch{}}return f}function r(v){return k&&/[\x80-\xff]/.test(v)&&(v=l("utf-8",v),k&&(v=l("iso-8859-1",v))),v}function R(v){const f=[];let w;const E=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=E.exec(v))!==null;){let[,y,s,i]=w;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[s,i]}const p=[];for(let y=0;y<f.length&&y in f;++y){let[s,i]=f[y];i=x(i),s&&(i=unescape(i),y===0&&(i=b(i))),p.push(i)}return p.join("")}function x(v){if(v.startsWith('"')){const f=v.slice(1).split('\\"');for(let w=0;w<f.length;++w){const E=f[w].indexOf('"');E!==-1&&(f[w]=f[w].slice(0,E),f.length=w+1),f[w]=f[w].replaceAll(/\\(.)/g,"$1")}v=f.join('"')}return v}function b(v){const f=v.indexOf("'");if(f===-1)return v;const w=v.slice(0,f),p=v.slice(f+1).replace(/^[^']*'/,"");return l(w,p)}function d(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,w,E,p){if(E==="q"||E==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,s){return String.fromCharCode(parseInt(s,16))}),l(w,p);try{p=atob(p)}catch{}return l(w,p)})}return""}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=F(1),g=F(20);const V=200,k=206;function M(x){const b=x.response;return typeof b!="string"?b:(0,n.stringToBytes)(b).buffer}class A{constructor(b,d={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,d,v){const f={begin:b,end:d};for(const w in v)f[w]=v[w];return this.request(f)}requestFull(b){return this.request(b)}request(b){const d=new XMLHttpRequest,v=this.currXhrId++,f=this.pendingRequests[v]={xhr:d};d.open("GET",this.url),d.withCredentials=this.withCredentials;for(const w in this.httpHeaders){const E=this.httpHeaders[w];E!==void 0&&d.setRequestHeader(w,E)}return this.isHttp&&"begin"in b&&"end"in b?(d.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),f.expectedStatus=k):f.expectedStatus=V,d.responseType="arraybuffer",b.onError&&(d.onerror=function(w){b.onError(d.status)}),d.onreadystatechange=this.onStateChange.bind(this,v),d.onprogress=this.onProgress.bind(this,v),f.onHeadersReceived=b.onHeadersReceived,f.onDone=b.onDone,f.onError=b.onError,f.onProgress=b.onProgress,d.send(null),v}onProgress(b,d){var f;const v=this.pendingRequests[b];v&&((f=v.onProgress)==null||f.call(v,d))}onStateChange(b,d){var y,s,i;const v=this.pendingRequests[b];if(!v)return;const f=v.xhr;if(f.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),f.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],f.status===0&&this.isHttp){(y=v.onError)==null||y.call(v,f.status);return}const w=f.status||V;if(!(w===V&&v.expectedStatus===k)&&w!==v.expectedStatus){(s=v.onError)==null||s.call(v,f.status);return}const p=M(f);if(w===k){const S=f.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);v.onDone({begin:parseInt(m[1],10),chunk:p})}else p?v.onDone({begin:0,chunk:p}):(i=v.onError)==null||i.call(v,f.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const d=this.pendingRequests[b].xhr;delete this.pendingRequests[b],d.abort()}}class l{constructor(b){this._source=b,this._manager=new A(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const d=this._rangeRequestReaders.indexOf(b);d>=0&&this._rangeRequestReaders.splice(d,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new r(this._manager,this._source),this._fullRequestReader}getRangeReader(b,d){const v=new R(this._manager,b,d);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(b){var d;(d=this._fullRequestReader)==null||d.cancel(b);for(const v of this._rangeRequestReaders.slice(0))v.cancel(b)}}t.PDFNetworkStream=l;class r{constructor(b,d){this._manager=b;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._fullRequestId=b.requestFull(v),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=d.disableRange||!1,this._contentLength=d.length,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,d=this._manager.getRequestXhr(b),v=E=>d.getResponseHeader(E),{allowRangeRequests:f,suggestedLength:w}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=w||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,g.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){var d;(d=this.onProgress)==null||d.call(this,{loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R{constructor(b,d,v){this._manager=b;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(d,v,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var b;(b=this.onClosed)==null||b.call(this,this)}_onDone(b){const d=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,g.createResponseStatusError)(b,this._url);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){var d;this.isStreamingSupported||(d=this.onProgress)==null||d.call(this,{loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=F(1),g=F(20);const V=/^file:\/\/\/[a-zA-Z]:\//;function k(v){const f=require$$5,w=f.parse(v);return w.protocol==="file:"||w.host?w:/^[a-z]:[/\\]/i.test(v)?f.parse(`file:///${v}`):(w.host||(w.protocol="file:"),w)}class M{constructor(f){this.source=f,this.url=k(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new R(this),this._fullRequestReader}getRangeReader(f,w){if(w<=this._progressiveDataLength)return null;const E=this.isFsUrl?new d(this,f,w):new x(this,f,w);return this._rangeRequestReaders.push(E),E}cancelAllRequests(f){var w;(w=this._fullRequestReader)==null||w.cancel(f);for(const E of this._rangeRequestReaders.slice(0))E.cancel(f)}}t.PDFNodeStream=M;class A{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const w=f.source;this._contentLength=w.length,this._loaded=0,this._filename=null,this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=f.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",w=>{this._error(w)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class l{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const w=f.source;this._isStreamingSupported=!w.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=f.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",w=>{this._error(w)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function r(v,f){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:f}}class R extends A{constructor(f){super(f);const w=E=>{if(E.statusCode===404){const i=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i,this._headersCapability.reject(i);return}this._headersCapability.resolve(),this._setReadableStream(E);const p=i=>this._readableStream.headers[i.toLowerCase()],{allowRangeRequests:y,suggestedLength:s}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=s||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(p)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(r(this._url,f.httpHeaders),w)}else{const E=require$$5;this._request=E.request(r(this._url,f.httpHeaders),w)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class x extends l{constructor(f,w,E){super(f),this._httpHeaders={};for(const y in f.httpHeaders){const s=f.httpHeaders[y];s!==void 0&&(this._httpHeaders[y]=s)}this._httpHeaders.Range=`bytes=${w}-${E-1}`;const p=y=>{if(y.statusCode===404){const s=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=s;return}this._setReadableStream(y)};if(this._request=null,this._url.protocol==="http:"){const y=require$$5;this._request=y.request(r(this._url,this._httpHeaders),p)}else{const y=require$$5;this._request=y.request(r(this._url,this._httpHeaders),p)}this._request.on("error",y=>{this._storedError=y}),this._request.end()}}class b extends A{constructor(f){super(f);let w=decodeURIComponent(this._url.path);V.test(this._url.href)&&(w=w.replace(/^\//,""));const E=require$$5;E.lstat(w,(p,y)=>{if(p){p.code==="ENOENT"&&(p=new n.MissingPDFException(`Missing PDF "${w}".`)),this._storedError=p,this._headersCapability.reject(p);return}this._contentLength=y.size,this._setReadableStream(E.createReadStream(w)),this._headersCapability.resolve()})}}class d extends l{constructor(f,w,E){super(f);let p=decodeURIComponent(this._url.path);V.test(this._url.href)&&(p=p.replace(/^\//,""));const y=require$$5;this._setReadableStream(y.createReadStream(p,{start:w,end:E-1}))}}},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=F(6),g=F(1);const V={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},k="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/1999/xlink",A=["butt","round","square"],l=["miter","round","bevel"],r=function(y,s="",i=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!i)return URL.createObjectURL(new Blob([y],{type:s}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m=`data:${s};base64,`;for(let h=0,D=y.length;h<D;h+=3){const C=y[h]&255,z=y[h+1]&255,ie=y[h+2]&255,T=C>>2,q=(C&3)<<4|z>>4,J=h+1<D?(z&15)<<2|ie>>6:64,Y=h+2<D?ie&63:64;m+=S[T]+S[q]+S[J]+S[Y]}return m},R=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,i=new Int32Array(256);for(let ie=0;ie<256;ie++){let T=ie;for(let q=0;q<8;q++)T=T&1?3988292384^T>>1&2147483647:T>>1&2147483647;i[ie]=T}function S(ie,T,q){let J=-1;for(let Y=T;Y<q;Y++){const W=(J^ie[Y])&255,le=i[W];J=J>>>8^le}return J^-1}function m(ie,T,q,J){let Y=J;const W=T.length;q[Y]=W>>24&255,q[Y+1]=W>>16&255,q[Y+2]=W>>8&255,q[Y+3]=W&255,Y+=4,q[Y]=ie.charCodeAt(0)&255,q[Y+1]=ie.charCodeAt(1)&255,q[Y+2]=ie.charCodeAt(2)&255,q[Y+3]=ie.charCodeAt(3)&255,Y+=4,q.set(T,Y),Y+=T.length;const le=S(q,J+4,Y);q[Y]=le>>24&255,q[Y+1]=le>>16&255,q[Y+2]=le>>8&255,q[Y+3]=le&255}function h(ie,T,q){let J=1,Y=0;for(let W=T;W<q;++W)J=(J+(ie[W]&255))%65521,Y=(Y+J)%65521;return Y<<16|J}function D(ie){if(!g.isNodeJS)return C(ie);try{const T=parseInt(process.versions.node)>=8?ie:Buffer.from(ie),q=require$$5.deflateSync(T,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(T){(0,g.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+T)}return C(ie)}function C(ie){let T=ie.length;const q=65535,J=Math.ceil(T/q),Y=new Uint8Array(2+T+J*5+4);let W=0;Y[W++]=120,Y[W++]=156;let le=0;for(;T>q;)Y[W++]=0,Y[W++]=255,Y[W++]=255,Y[W++]=0,Y[W++]=0,Y.set(ie.subarray(le,le+q),W),W+=q,le+=q,T-=q;Y[W++]=1,Y[W++]=T&255,Y[W++]=T>>8&255,Y[W++]=~T&65535&255,Y[W++]=(~T&65535)>>8&255,Y.set(ie.subarray(le),W),W+=ie.length-le;const $=h(ie,0,ie.length);return Y[W++]=$>>24&255,Y[W++]=$>>16&255,Y[W++]=$>>8&255,Y[W++]=$&255,Y}function z(ie,T,q,J){const Y=ie.width,W=ie.height;let le,$,Ee;const we=ie.data;switch(T){case g.ImageKind.GRAYSCALE_1BPP:$=0,le=1,Ee=Y+7>>3;break;case g.ImageKind.RGB_24BPP:$=2,le=8,Ee=Y*3;break;case g.ImageKind.RGBA_32BPP:$=6,le=8,Ee=Y*4;break;default:throw new Error("invalid format")}const N=new Uint8Array((1+Ee)*W);let a=0,u=0;for(let ne=0;ne<W;++ne)N[a++]=0,N.set(we.subarray(u,u+Ee),a),u+=Ee,a+=Ee;if(T===g.ImageKind.GRAYSCALE_1BPP&&J){a=0;for(let ne=0;ne<W;ne++){a++;for(let _e=0;_e<Ee;_e++)N[a++]^=255}}const c=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,W>>24&255,W>>16&255,W>>8&255,W&255,le,$,0,0,0]),P=D(N),L=y.length+s*3+c.length+P.length,H=new Uint8Array(L);let K=0;return H.set(y,K),K+=y.length,m("IHDR",c,H,K),K+=s+c.length,m("IDATA",P,H,K),K+=s+P.length,m("IEND",new Uint8Array(0),H,K),r(H,"image/png",q)}return function(T,q,J){const Y=T.kind===void 0?g.ImageKind.GRAYSCALE_1BPP:T.kind;return z(T,Y,q,J)}}();class x{constructor(){this.fontSizeScale=1,this.fontWeight=V.fontWeight,this.fontSize=0,this.textMatrix=g.IDENTITY_MATRIX,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=g.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=V.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,i){this.x=s,this.y=i}}function b(y){let s=[];const i=[];for(const S of y){if(S.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),i.push(s),s=s.at(-1).items;continue}S.fn==="restore"?s=i.pop():s.push(S)}return s}function d(y){if(Number.isInteger(y))return y.toString();const s=y.toFixed(10);let i=s.length-1;if(s[i]!=="0")return s;do i--;while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1)}function v(y){if(y[4]===0&&y[5]===0){if(y[1]===0&&y[2]===0)return y[0]===1&&y[3]===1?"":`scale(${d(y[0])} ${d(y[3])})`;if(y[0]===y[3]&&y[1]===-y[2]){const s=Math.acos(y[0])*180/Math.PI;return`rotate(${d(s)})`}}else if(y[0]===1&&y[1]===0&&y[2]===0&&y[3]===1)return`translate(${d(y[4])} ${d(y[5])})`;return`matrix(${d(y[0])} ${d(y[1])} ${d(y[2])} ${d(y[3])} ${d(y[4])} ${d(y[5])})`}let f=0,w=0,E=0;class p{constructor(s,i,S=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new x,this.transformMatrix=g.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!S,this._operatorIdMapping=[];for(const m in g.OPS)this._operatorIdMapping[g.OPS[m]]=m}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const i=s.fnArray,S=s.argsArray;for(let m=0,h=i.length;m<h;m++)if(i[m]===g.OPS.dependency)for(const D of S[m]){const C=D.startsWith("g_")?this.commonObjs:this.objs,z=new Promise(ie=>{C.get(D,ie)});this.current.dependencies.push(z)}return Promise.all(this.current.dependencies)}transform(s,i,S,m,h,D){const C=[s,i,S,m,h,D];this.transformMatrix=g.Util.transform(this.transformMatrix,C),this.tgrp=null}getSVG(s,i){this.viewport=i;const S=this._initialize(i);return this.loadDependencies(s).then(()=>(this.transformMatrix=g.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),S))}convertOpList(s){const i=this._operatorIdMapping,S=s.argsArray,m=s.fnArray,h=[];for(let D=0,C=m.length;D<C;D++){const z=m[D];h.push({fnId:z,fn:i[z],args:S[D]})}return b(h)}executeOpTree(s){for(const i of s){const S=i.fn,m=i.fnId,h=i.args;switch(m|0){case g.OPS.beginText:this.beginText();break;case g.OPS.dependency:break;case g.OPS.setLeading:this.setLeading(h);break;case g.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case g.OPS.setFont:this.setFont(h);break;case g.OPS.showText:this.showText(h[0]);break;case g.OPS.showSpacedText:this.showText(h[0]);break;case g.OPS.endText:this.endText();break;case g.OPS.moveText:this.moveText(h[0],h[1]);break;case g.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case g.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case g.OPS.setHScale:this.setHScale(h[0]);break;case g.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case g.OPS.setTextRise:this.setTextRise(h[0]);break;case g.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case g.OPS.setLineWidth:this.setLineWidth(h[0]);break;case g.OPS.setLineJoin:this.setLineJoin(h[0]);break;case g.OPS.setLineCap:this.setLineCap(h[0]);break;case g.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case g.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case g.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case g.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case g.OPS.setFillColorN:this.setFillColorN(h);break;case g.OPS.shadingFill:this.shadingFill(h[0]);break;case g.OPS.setDash:this.setDash(h[0],h[1]);break;case g.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case g.OPS.setFlatness:this.setFlatness(h[0]);break;case g.OPS.setGState:this.setGState(h[0]);break;case g.OPS.fill:this.fill();break;case g.OPS.eoFill:this.eoFill();break;case g.OPS.stroke:this.stroke();break;case g.OPS.fillStroke:this.fillStroke();break;case g.OPS.eoFillStroke:this.eoFillStroke();break;case g.OPS.clip:this.clip("nonzero");break;case g.OPS.eoClip:this.clip("evenodd");break;case g.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case g.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case g.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case g.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case g.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.OPS.closePath:this.closePath();break;case g.OPS.closeStroke:this.closeStroke();break;case g.OPS.closeFillStroke:this.closeFillStroke();break;case g.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case g.OPS.nextLine:this.nextLine();break;case g.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case g.OPS.constructPath:this.constructPath(h[0],h[1]);break;case g.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,g.warn)(`Unimplemented operator ${S}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,i,S,m,h,D){const C=this.current;C.textMatrix=C.lineMatrix=[s,i,S,m,h,D],C.textMatrixScale=Math.hypot(s,i),C.x=C.lineX=0,C.y=C.lineY=0,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${d(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",d(-C.y)),C.txtElement=this.svgFactory.createElement("svg:text"),C.txtElement.append(C.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=g.IDENTITY_MATRIX,s.lineMatrix=g.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,i){const S=this.current;S.x=S.lineX+=s,S.y=S.lineY+=i,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${d(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",d(-S.y))}showText(s){const i=this.current,S=i.font,m=i.fontSize;if(m===0)return;const h=i.fontSizeScale,D=i.charSpacing,C=i.wordSpacing,z=i.fontDirection,ie=i.textHScale*z,T=S.vertical,q=T?1:-1,J=S.defaultVMetrics,Y=m*i.fontMatrix[0];let W=0;for(const Ee of s){if(Ee===null){W+=z*C;continue}else if(typeof Ee=="number"){W+=q*Ee*m/1e3;continue}const we=(Ee.isSpace?C:0)+D,N=Ee.fontChar;let a,u,c=Ee.width;if(T){let L;const H=Ee.vmetric||J;L=Ee.vmetric?H[1]:c*.5,L=-L*Y;const K=H[2]*Y;c=H?-H[0]:c,a=L/h,u=(W+K)/h}else a=W/h,u=0;(Ee.isInFont||S.missingFile)&&(i.xcoords.push(i.x+a),T&&i.ycoords.push(-i.y+u),i.tspan.textContent+=N);const P=T?c*Y-we*z:c*Y+we*z;W+=P}i.tspan.setAttributeNS(null,"x",i.xcoords.map(d).join(" ")),T?i.tspan.setAttributeNS(null,"y",i.ycoords.map(d).join(" ")):i.tspan.setAttributeNS(null,"y",d(-i.y)),T?i.y-=W:i.x+=W*ie,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${d(i.fontSize)}px`),i.fontStyle!==V.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==V.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const le=i.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;if(le===g.TextRenderingMode.FILL||le===g.TextRenderingMode.FILL_STROKE?(i.fillColor!==V.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===g.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),le===g.TextRenderingMode.STROKE||le===g.TextRenderingMode.FILL_STROKE){const Ee=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,Ee)}let $=i.textMatrix;i.textRise!==0&&($=$.slice(),$[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${v($)} scale(${d(ie)}, -1)`),i.txtElement.setAttributeNS(k,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=r(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${i}); }
`}setFont(s){const i=this.current,S=this.commonObjs.get(s[0]);let m=s[1];i.font=S,this.embedFonts&&!S.missingFile&&!this.embeddedFonts[S.loadedName]&&(this.addFontStyle(S),this.embeddedFonts[S.loadedName]=S),i.fontMatrix=S.fontMatrix||g.FONT_IDENTITY_MATRIX;let h="normal";S.black?h="900":S.bold&&(h="bold");const D=S.italic?"italic":"normal";m<0?(m=-m,i.fontDirection=-1):i.fontDirection=1,i.fontSize=m,i.fontFamily=S.loadedName,i.fontWeight=h,i.fontStyle=D,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",d(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const s=this.current;s.textRenderingMode&g.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=s.txtElement)!=null&&i.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=A[s]}setLineJoin(s){this.current.lineJoin=l[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,i,S){this.current.strokeColor=g.Util.makeHexColor(s,i,S)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,i,S){this.current.fillColor=g.Util.makeHexColor(s,i,S),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const{width:i,height:S}=this.viewport,m=g.Util.inverseTransform(this.transformMatrix),[h,D,C,z]=g.Util.getAxialAlignedBoundingBox([0,0,i,S],m),ie=this.svgFactory.createElement("svg:rect");ie.setAttributeNS(null,"x",h),ie.setAttributeNS(null,"y",D),ie.setAttributeNS(null,"width",C-h),ie.setAttributeNS(null,"height",z-D),ie.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&ie.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ie)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const i=s[1],S=s[2],m=s[3]||g.IDENTITY_MATRIX,[h,D,C,z]=s[4],ie=s[5],T=s[6],q=s[7],J=`shading${E++}`,[Y,W,le,$]=g.Util.normalizeRect([...g.Util.applyTransform([h,D],m),...g.Util.applyTransform([C,z],m)]),[Ee,we]=g.Util.singularValueDecompose2dScale(m),N=ie*Ee,a=T*we,u=this.svgFactory.createElement("svg:pattern");u.setAttributeNS(null,"id",J),u.setAttributeNS(null,"patternUnits","userSpaceOnUse"),u.setAttributeNS(null,"width",N),u.setAttributeNS(null,"height",a),u.setAttributeNS(null,"x",`${Y}`),u.setAttributeNS(null,"y",`${W}`);const c=this.svg,P=this.transformMatrix,L=this.current.fillColor,H=this.current.strokeColor,K=this.svgFactory.create(le-Y,$-W);if(this.svg=K,this.transformMatrix=m,q===2){const ne=g.Util.makeHexColor(...i);this.current.fillColor=ne,this.current.strokeColor=ne}return this.executeOpTree(this.convertOpList(S)),this.svg=c,this.transformMatrix=P,this.current.fillColor=L,this.current.strokeColor=H,u.append(K.childNodes[0]),this.defs.append(u),`url(#${J})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const i=`shading${E++}`,S=s[3];let m;switch(s[1]){case"axial":const h=s[4],D=s[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",h[0]),m.setAttributeNS(null,"y1",h[1]),m.setAttributeNS(null,"x2",D[0]),m.setAttributeNS(null,"y2",D[1]);break;case"radial":const C=s[4],z=s[5],ie=s[6],T=s[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",z[0]),m.setAttributeNS(null,"cy",z[1]),m.setAttributeNS(null,"r",T),m.setAttributeNS(null,"fx",C[0]),m.setAttributeNS(null,"fy",C[1]),m.setAttributeNS(null,"fr",ie);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const h of S){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",h[0]),D.setAttributeNS(null,"stop-color",h[1]),m.append(D)}return this.defs.append(m),`url(#${i})`;case"Mesh":return(0,g.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,i){this.current.dashArray=s,this.current.dashPhase=i}constructPath(s,i){const S=this.current;let m=S.x,h=S.y,D=[],C=0;for(const z of s)switch(z|0){case g.OPS.rectangle:m=i[C++],h=i[C++];const ie=i[C++],T=i[C++],q=m+ie,J=h+T;D.push("M",d(m),d(h),"L",d(q),d(h),"L",d(q),d(J),"L",d(m),d(J),"Z");break;case g.OPS.moveTo:m=i[C++],h=i[C++],D.push("M",d(m),d(h));break;case g.OPS.lineTo:m=i[C++],h=i[C++],D.push("L",d(m),d(h));break;case g.OPS.curveTo:m=i[C+4],h=i[C+5],D.push("C",d(i[C]),d(i[C+1]),d(i[C+2]),d(i[C+3]),d(m),d(h)),C+=6;break;case g.OPS.curveTo2:D.push("C",d(m),d(h),d(i[C]),d(i[C+1]),d(i[C+2]),d(i[C+3])),m=i[C+2],h=i[C+3],C+=4;break;case g.OPS.curveTo3:m=i[C+2],h=i[C+3],D.push("C",d(i[C]),d(i[C+1]),d(m),d(h),d(m),d(h)),C+=4;break;case g.OPS.closePath:D.push("Z");break}D=D.join(" "),S.path&&s.length>0&&s[0]!==g.OPS.rectangle&&s[0]!==g.OPS.moveTo?D=S.path.getAttributeNS(null,"d")+D:(S.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(S.path)),S.path.setAttributeNS(null,"d",D),S.path.setAttributeNS(null,"fill","none"),S.element=S.path,S.setCurrentPoint(m,h)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const i=`clippath${f++}`,S=this.svgFactory.createElement("svg:clipPath");S.setAttributeNS(null,"id",i),S.setAttributeNS(null,"transform",v(this.transformMatrix));const m=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?m.setAttributeNS(null,"clip-rule","evenodd"):m.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,S.append(m),this.defs.append(S),s.activeClipUrl){s.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;S.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const i=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",i)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,S]of s)switch(i){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S);break;case"CA":this.setStrokeAlpha(S);break;case"ca":this.setFillAlpha(S);break;default:(0,g.warn)(`Unimplemented graphic state operator ${i}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,i=1){const S=this.current;let m=S.dashArray;i!==1&&m.length>0&&(m=m.map(function(h){return i*h})),s.setAttributeNS(null,"stroke",S.strokeColor),s.setAttributeNS(null,"stroke-opacity",S.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",d(S.miterLimit)),s.setAttributeNS(null,"stroke-linecap",S.lineCap),s.setAttributeNS(null,"stroke-linejoin",S.lineJoin),s.setAttributeNS(null,"stroke-width",d(i*S.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",m.map(d).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",d(i*S.dashPhase)+"px")}eoFill(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(s)}paintImageXObject(s){const i=this.getObject(s);if(!i){(0,g.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(i)}paintInlineImageXObject(s,i){const S=s.width,m=s.height,h=R(s,this.forceDataSchema,!!i),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",d(S)),D.setAttributeNS(null,"height",d(m)),this.current.element=D,this.clip("nonzero");const C=this.svgFactory.createElement("svg:image");C.setAttributeNS(M,"xlink:href",h),C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y",d(-m)),C.setAttributeNS(null,"width",d(S)+"px"),C.setAttributeNS(null,"height",d(m)+"px"),C.setAttributeNS(null,"transform",`scale(${d(1/S)} ${d(-1/m)})`),i?i.append(C):this._ensureTransformGroup().append(C)}paintImageMaskXObject(s){const i=this.getObject(s.data,s);if(i.bitmap){(0,g.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const S=this.current,m=i.width,h=i.height,D=S.fillColor;S.maskId=`mask${w++}`;const C=this.svgFactory.createElement("svg:mask");C.setAttributeNS(null,"id",S.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",d(m)),z.setAttributeNS(null,"height",d(h)),z.setAttributeNS(null,"fill",D),z.setAttributeNS(null,"mask",`url(#${S.maskId})`),this.defs.append(C),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(i,C)}paintFormXObjectBegin(s,i){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),i){const S=i[2]-i[0],m=i[3]-i[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",i[0]),h.setAttributeNS(null,"y",i[1]),h.setAttributeNS(null,"width",d(S)),h.setAttributeNS(null,"height",d(m)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const i=this.svgFactory.create(s.width,s.height),S=this.svgFactory.createElement("svg:defs");i.append(S),this.defs=S;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",v(s.transform)),i.append(m),this.svg=m,i}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=p},(U,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class F{static textContent(g){const V=[],k={items:V,styles:Object.create(null)};function M(A){var R;if(!A)return;let l=null;const r=A.name;if(r==="#text")l=A.value;else if(F.shouldBuildText(r))(R=A==null?void 0:A.attributes)!=null&&R.textContent?l=A.attributes.textContent:A.value&&(l=A.value);else return;if(l!==null&&V.push({str:l}),!!A.children)for(const x of A.children)M(x)}return M(g),k}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}t.XfaText=F},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=v,t.updateTextLayer=f;var n=F(1),g=F(6);const V=1e5,k=30,M=.8,A=new Map;function l(w,E){let p;if(E&&n.FeatureTest.isOffscreenCanvasSupported)p=new OffscreenCanvas(w,w).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=w,p=y.getContext("2d",{alpha:!1})}return p}function r(w,E){const p=A.get(w);if(p)return p;const y=l(k,E);y.font=`${k}px ${w}`;const s=y.measureText("");let i=s.fontBoundingBoxAscent,S=Math.abs(s.fontBoundingBoxDescent);if(i){const h=i/(i+S);return A.set(w,h),y.canvas.width=y.canvas.height=0,h}y.strokeStyle="red",y.clearRect(0,0,k,k),y.strokeText("g",0,0);let m=y.getImageData(0,0,k,k).data;S=0;for(let h=m.length-1-3;h>=0;h-=4)if(m[h]>0){S=Math.ceil(h/4/k);break}y.clearRect(0,0,k,k),y.strokeText("A",0,k),m=y.getImageData(0,0,k,k).data,i=0;for(let h=0,D=m.length;h<D;h+=4)if(m[h]>0){i=k-Math.floor(h/4/k);break}if(y.canvas.width=y.canvas.height=0,i){const h=i/(i+S);return A.set(w,h),h}return A.set(w,M),M}function R(w,E,p){const y=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};w._textDivs.push(y);const i=n.Util.transform(w._transform,E.transform);let S=Math.atan2(i[1],i[0]);const m=p[E.fontName];m.vertical&&(S+=Math.PI/2);const h=Math.hypot(i[2],i[3]),D=h*r(m.fontFamily,w._isOffscreenCanvasSupported);let C,z;S===0?(C=i[4],z=i[5]-D):(C=i[4]+D*Math.sin(S),z=i[5]-D*Math.cos(S));const ie="calc(var(--scale-factor)*",T=y.style;w._container===w._rootContainer?(T.left=`${(100*C/w._pageWidth).toFixed(2)}%`,T.top=`${(100*z/w._pageHeight).toFixed(2)}%`):(T.left=`${ie}${C.toFixed(2)}px)`,T.top=`${ie}${z.toFixed(2)}px)`),T.fontSize=`${ie}${h.toFixed(2)}px)`,T.fontFamily=m.fontFamily,s.fontSize=h,y.setAttribute("role","presentation"),y.textContent=E.str,y.dir=E.dir,w._fontInspectorEnabled&&(y.dataset.fontName=E.fontName),S!==0&&(s.angle=S*(180/Math.PI));let q=!1;if(E.str.length>1)q=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const J=Math.abs(E.transform[0]),Y=Math.abs(E.transform[3]);J!==Y&&Math.max(J,Y)/Math.min(J,Y)>1.5&&(q=!0)}q&&(s.canvasWidth=m.vertical?E.height:E.width),w._textDivProperties.set(y,s),w._isReadableStream&&w._layoutText(y)}function x(w){const{div:E,scale:p,properties:y,ctx:s,prevFontSize:i,prevFontFamily:S}=w,{style:m}=E;let h="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:D}=m,{canvasWidth:C,fontSize:z}=y;(i!==z||S!==D)&&(s.font=`${z*p}px ${D}`,w.prevFontSize=z,w.prevFontFamily=D);const{width:ie}=s.measureText(E.textContent);ie>0&&(h=`scaleX(${C*p/ie})`)}y.angle!==0&&(h=`rotate(${y.angle}deg) ${h}`),h.length>0&&(m.transform=h)}function b(w){if(w._canceled)return;const E=w._textDivs,p=w._capability;if(E.length>V){p.resolve();return}if(!w._isReadableStream)for(const s of E)w._layoutText(s);p.resolve()}class d{constructor({textContentSource:E,container:p,viewport:y,textDivs:s,textDivProperties:i,textContentItemsStr:S,isOffscreenCanvasSupported:m}){var ie;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=p,this._textDivs=s||[],this._textContentItemsStr=S||[],this._isOffscreenCanvasSupported=m,this._fontInspectorEnabled=!!((ie=globalThis.FontInspector)!=null&&ie.enabled),this._reader=null,this._textDivProperties=i||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,m)};const{pageWidth:h,pageHeight:D,pageX:C,pageY:z}=y.rawDims;this._transform=[1,0,0,-1,-C,z+D],this._pageWidth=h,this._pageHeight=D,(0,g.setLayerDimensions)(p,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(E,p){for(const y of E){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const s=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id",`${y.id}`),s.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),R(this,y,p)}}_layoutText(E){const p=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,x(this._layoutTextParams),p.hasText&&this._container.append(E),p.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const E=new n.PromiseCapability;let p=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:s,done:i})=>{if(i){E.resolve();return}Object.assign(p,s.styles),this._processItems(s.items,p),y()},E.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:s}=this._textContentSource;this._processItems(y,s),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{p=null,b(this)},this._capability.reject)}}t.TextLayerRenderTask=d;function v(w){!w.textContentSource&&(w.textContent||w.textContentStream)&&((0,g.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),w.textContentSource=w.textContent||w.textContentStream);const{container:E,viewport:p}=w,y=getComputedStyle(E),s=y.getPropertyValue("visibility"),i=parseFloat(y.getPropertyValue("--scale-factor"));s==="visible"&&(!i||Math.abs(i-p.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const S=new d(w);return S._render(),S}function f({container:w,viewport:E,textDivs:p,textDivProperties:y,isOffscreenCanvasSupported:s,mustRotate:i=!0,mustRescale:S=!0}){if(i&&(0,g.setLayerDimensions)(w,{rotation:E.rotation}),S){const m=l(0,s),D={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m};for(const C of p)D.properties=y.get(C),D.div=C,x(D)}}},(U,t,F)=>{var r,R,x,b,d,v,f,w,E,p,y,fi,i,It,m,pi,D,gi;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=F(1),g=F(4),V=F(28),k=F(33),M=F(6),A=F(34);const z=class z{constructor({uiManager:T,pageIndex:q,div:J,accessibilityManager:Y,annotationLayer:W,viewport:le,l10n:$}){O(this,y);O(this,i);O(this,m);O(this,D);O(this,r,void 0);O(this,R,!1);O(this,x,null);O(this,b,this.pointerup.bind(this));O(this,d,this.pointerdown.bind(this));O(this,v,new Map);O(this,f,!1);O(this,w,!1);O(this,E,!1);O(this,p,void 0);const Ee=[V.FreeTextEditor,k.InkEditor,A.StampEditor];if(!z._initialized){z._initialized=!0;for(const we of Ee)we.initialize($)}T.registerEditorTypes(Ee),Z(this,p,T),this.pageIndex=q,this.div=J,Z(this,r,Y),Z(this,x,W),this.viewport=le,e(this,p).addLayer(this)}get isEmpty(){return e(this,v).size===0}updateToolbar(T){e(this,p).updateToolbar(T)}updateMode(T=e(this,p).getMode()){G(this,D,gi).call(this),T===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),T!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",T===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",T===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",T===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(T){if(!T&&e(this,p).getMode()!==n.AnnotationEditorType.INK)return;if(!T){for(const J of e(this,v).values())if(J.isEmpty()){J.setInBackground();return}}G(this,i,It).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(T){e(this,p).setEditingState(T)}addCommands(T){e(this,p).addCommands(T)}enable(){this.div.style.pointerEvents="auto";const T=new Set;for(const J of e(this,v).values())J.enableEditing(),J.annotationElementId&&T.add(J.annotationElementId);if(!e(this,x))return;const q=e(this,x).getEditableAnnotations();for(const J of q){if(J.hide(),e(this,p).isDeletedAnnotationElement(J.data.id)||T.has(J.data.id))continue;const Y=this.deserialize(J);Y&&(this.addOrRebuild(Y),Y.enableEditing())}}disable(){var q;Z(this,E,!0),this.div.style.pointerEvents="none";const T=new Set;for(const J of e(this,v).values()){if(J.disableEditing(),!J.annotationElementId||J.serialize()!==null){T.add(J.annotationElementId);continue}(q=this.getEditableAnnotation(J.annotationElementId))==null||q.show(),J.remove()}if(e(this,x)){const J=e(this,x).getEditableAnnotations();for(const Y of J){const{id:W}=Y.data;T.has(W)||e(this,p).isDeletedAnnotationElement(W)||Y.show()}}G(this,D,gi).call(this),this.isEmpty&&(this.div.hidden=!0),Z(this,E,!1)}getEditableAnnotation(T){var q;return((q=e(this,x))==null?void 0:q.getEditableAnnotation(T))||null}setActiveEditor(T){e(this,p).getActive()!==T&&e(this,p).setActiveEditor(T)}enableClick(){this.div.addEventListener("pointerdown",e(this,d)),this.div.addEventListener("pointerup",e(this,b))}disableClick(){this.div.removeEventListener("pointerdown",e(this,d)),this.div.removeEventListener("pointerup",e(this,b))}attach(T){e(this,v).set(T.id,T);const{annotationElementId:q}=T;q&&e(this,p).isDeletedAnnotationElement(q)&&e(this,p).removeDeletedAnnotationElement(T)}detach(T){var q;e(this,v).delete(T.id),(q=e(this,r))==null||q.removePointerInTextLayer(T.contentDiv),!e(this,E)&&T.annotationElementId&&e(this,p).addDeletedAnnotationElement(T)}remove(T){this.detach(T),e(this,p).removeEditor(T),T.div.contains(document.activeElement)&&setTimeout(()=>{e(this,p).focusMainContainer()},0),T.div.remove(),T.isAttachedToDOM=!1,e(this,w)||this.addInkEditorIfNeeded(!1)}changeParent(T){var q;T.parent!==this&&(T.annotationElementId&&(e(this,p).addDeletedAnnotationElement(T.annotationElementId),g.AnnotationEditor.deleteAnnotationElement(T),T.annotationElementId=null),this.attach(T),(q=T.parent)==null||q.detach(T),T.setParent(this),T.div&&T.isAttachedToDOM&&(T.div.remove(),this.div.append(T.div)))}add(T){if(this.changeParent(T),e(this,p).addEditor(T),this.attach(T),!T.isAttachedToDOM){const q=T.render();this.div.append(q),T.isAttachedToDOM=!0}T.fixAndSetPosition(),T.onceAdded(),e(this,p).addToAnnotationStorage(T)}moveEditorInDOM(T){var J;if(!T.isAttachedToDOM)return;const{activeElement:q}=document;T.div.contains(q)&&(T._focusEventsAllowed=!1,setTimeout(()=>{T.div.contains(document.activeElement)?T._focusEventsAllowed=!0:(T.div.addEventListener("focusin",()=>{T._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),T._structTreeParentId=(J=e(this,r))==null?void 0:J.moveElementInDOM(this.div,T.div,T.contentDiv,!0)}addOrRebuild(T){T.needsToBeRebuilt()?T.rebuild():this.add(T)}addUndoableEditor(T){const q=()=>T._uiManager.rebuild(T),J=()=>{T.remove()};this.addCommands({cmd:q,undo:J,mustExec:!1})}getNextId(){return e(this,p).getId()}pasteEditor(T,q){e(this,p).updateToolbar(T),e(this,p).updateMode(T);const{offsetX:J,offsetY:Y}=G(this,m,pi).call(this),W=this.getNextId(),le=G(this,y,fi).call(this,{parent:this,id:W,x:J,y:Y,uiManager:e(this,p),isCentered:!0,...q});le&&this.add(le)}deserialize(T){switch(T.annotationType??T.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return V.FreeTextEditor.deserialize(T,this,e(this,p));case n.AnnotationEditorType.INK:return k.InkEditor.deserialize(T,this,e(this,p));case n.AnnotationEditorType.STAMP:return A.StampEditor.deserialize(T,this,e(this,p))}return null}addNewEditor(){G(this,i,It).call(this,G(this,m,pi).call(this),!0)}setSelected(T){e(this,p).setSelected(T)}toggleSelected(T){e(this,p).toggleSelected(T)}isSelected(T){return e(this,p).isSelected(T)}unselect(T){e(this,p).unselect(T)}pointerup(T){const{isMac:q}=n.FeatureTest.platform;if(!(T.button!==0||T.ctrlKey&&q)&&T.target===this.div&&e(this,f)){if(Z(this,f,!1),!e(this,R)){Z(this,R,!0);return}if(e(this,p).getMode()===n.AnnotationEditorType.STAMP){e(this,p).unselectAll();return}G(this,i,It).call(this,T,!1)}}pointerdown(T){if(e(this,f)){Z(this,f,!1);return}const{isMac:q}=n.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&q||T.target!==this.div)return;Z(this,f,!0);const J=e(this,p).getActive();Z(this,R,!J||J.isEmpty())}findNewParent(T,q,J){const Y=e(this,p).findParent(q,J);return Y===null||Y===this?!1:(Y.changeParent(T),!0)}destroy(){var T,q;((T=e(this,p).getActive())==null?void 0:T.parent)===this&&(e(this,p).commitOrRemove(),e(this,p).setActiveEditor(null));for(const J of e(this,v).values())(q=e(this,r))==null||q.removePointerInTextLayer(J.contentDiv),J.setParent(null),J.isAttachedToDOM=!1,J.div.remove();this.div=null,e(this,v).clear(),e(this,p).removeLayer(this)}render({viewport:T}){this.viewport=T,(0,M.setLayerDimensions)(this.div,T);for(const q of e(this,p).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:T}){e(this,p).commitOrRemove(),this.viewport=T,(0,M.setLayerDimensions)(this.div,{rotation:T.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:T,pageHeight:q}=this.viewport.rawDims;return[T,q]}};r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,y=new WeakSet,fi=function(T){switch(e(this,p).getMode()){case n.AnnotationEditorType.FREETEXT:return new V.FreeTextEditor(T);case n.AnnotationEditorType.INK:return new k.InkEditor(T);case n.AnnotationEditorType.STAMP:return new A.StampEditor(T)}return null},i=new WeakSet,It=function(T,q){const J=this.getNextId(),Y=G(this,y,fi).call(this,{parent:this,id:J,x:T.offsetX,y:T.offsetY,uiManager:e(this,p),isCentered:q});return Y&&this.add(Y),Y},m=new WeakSet,pi=function(){const{x:T,y:q,width:J,height:Y}=this.div.getBoundingClientRect(),W=Math.max(0,T),le=Math.max(0,q),$=Math.min(window.innerWidth,T+J),Ee=Math.min(window.innerHeight,q+Y),we=(W+$)/2-T,N=(le+Ee)/2-q,[a,u]=this.viewport.rotation%180===0?[we,N]:[N,we];return{offsetX:a,offsetY:u}},D=new WeakSet,gi=function(){Z(this,w,!0);for(const T of e(this,v).values())T.isEmpty()&&T.remove();Z(this,w,!1)},tt(z,"_initialized",!1);let l=z;t.AnnotationEditorLayer=l},(U,t,F)=>{var A,l,r,R,x,b,d,v,f,w,dn,p,un,s,fn,S,Pt,h,mi,C,pn,ie,_i;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=F(1),g=F(5),V=F(4),k=F(29);const q=class q extends V.AnnotationEditor{constructor(W){super({...W,name:"freeTextEditor"});O(this,w);O(this,p);O(this,s);O(this,S);O(this,h);O(this,C);O(this,ie);O(this,A,this.editorDivBlur.bind(this));O(this,l,this.editorDivFocus.bind(this));O(this,r,this.editorDivInput.bind(this));O(this,R,this.editorDivKeydown.bind(this));O(this,x,void 0);O(this,b,"");O(this,d,`${this.id}-editor`);O(this,v,void 0);O(this,f,null);Z(this,x,W.color||q._defaultColor||V.AnnotationEditor._defaultLineColor),Z(this,v,W.fontSize||q._defaultFontSize)}static get _keyboardManager(){const W=q.prototype,le=we=>we.isEmpty(),$=g.AnnotationEditorUIManager.TRANSLATE_SMALL,Ee=g.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new g.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],W.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],W.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],W._translateEmpty,{args:[-$,0],checker:le}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],W._translateEmpty,{args:[-Ee,0],checker:le}],[["ArrowRight","mac+ArrowRight"],W._translateEmpty,{args:[$,0],checker:le}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],W._translateEmpty,{args:[Ee,0],checker:le}],[["ArrowUp","mac+ArrowUp"],W._translateEmpty,{args:[0,-$],checker:le}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],W._translateEmpty,{args:[0,-Ee],checker:le}],[["ArrowDown","mac+ArrowDown"],W._translateEmpty,{args:[0,$],checker:le}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],W._translateEmpty,{args:[0,Ee],checker:le}]]))}static initialize(W){V.AnnotationEditor.initialize(W,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const le=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(le.getPropertyValue("--freetext-padding"))}static updateDefaultParams(W,le){switch(W){case n.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=le;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=le;break}}updateParams(W,le){switch(W){case n.AnnotationEditorParamsType.FREETEXT_SIZE:G(this,w,dn).call(this,le);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:G(this,p,un).call(this,le);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||V.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,v)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,x)]]}_translateEmpty(W,le){this._uiManager.translateSelectedEditors(W,le,!0)}getInitialTranslation(){const W=this.parentScale;return[-q._internalPadding*W,-(q._internalPadding+e(this,v))*W]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,R)),this.editorDiv.addEventListener("focus",e(this,l)),this.editorDiv.addEventListener("blur",e(this,A)),this.editorDiv.addEventListener("input",e(this,r)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,d)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,R)),this.editorDiv.removeEventListener("focus",e(this,l)),this.editorDiv.removeEventListener("blur",e(this,A)),this.editorDiv.removeEventListener("input",e(this,r)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(W){this._focusEventsAllowed&&(super.focusin(W),W.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var W;if(this.width){G(this,ie,_i).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(W=this._initialOptions)!=null&&W.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const W=e(this,b),le=Z(this,b,G(this,s,fn).call(this).trimEnd());if(W===le)return;const $=Ee=>{if(Z(this,b,Ee),!Ee){this.remove();return}G(this,h,mi).call(this),this._uiManager.rebuild(this),G(this,S,Pt).call(this)};this.addCommands({cmd:()=>{$(le)},undo:()=>{$(W)},mustExec:!1}),G(this,S,Pt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(W){this.enterInEditMode()}keydown(W){W.target===this.div&&W.key==="Enter"&&(this.enterInEditMode(),W.preventDefault())}editorDivKeydown(W){q._keyboardManager.exec(this,W)}editorDivFocus(W){this.isEditing=!0}editorDivBlur(W){this.isEditing=!1}editorDivInput(W){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let W,le;this.width&&(W=this.x,le=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,d)),this.enableEditing(),V.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ee=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("aria-label",Ee)}),V.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ee=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("default-content",Ee)}),this.editorDiv.contentEditable=!0;const{style:$}=this.editorDiv;if($.fontSize=`calc(${e(this,v)}px * var(--scale-factor))`,$.color=e(this,x),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,g.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ee,we]=this.parentDimensions;if(this.annotationElementId){const{position:N}=e(this,f);let[a,u]=this.getInitialTranslation();[a,u]=this.pageTranslationToScreen(a,u);const[c,P]=this.pageDimensions,[L,H]=this.pageTranslation;let K,ne;switch(this.rotation){case 0:K=W+(N[0]-L)/c,ne=le+this.height-(N[1]-H)/P;break;case 90:K=W+(N[0]-L)/c,ne=le-(N[1]-H)/P,[a,u]=[u,-a];break;case 180:K=W-this.width+(N[0]-L)/c,ne=le-(N[1]-H)/P,[a,u]=[-a,-u];break;case 270:K=W+(N[0]-L-this.height*P)/c,ne=le+(N[1]-H-this.width*c)/P,[a,u]=[-u,a];break}this.setAt(K*Ee,ne*we,a,u)}else this.setAt(W*Ee,le*we,this.width*Ee,this.height*we);G(this,h,mi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(W,le,$){let Ee=null;if(W instanceof k.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:N,fontColor:a},rect:u,rotation:c,id:P},textContent:L,textPosition:H,parent:{page:{pageNumber:K}}}=W;if(!L||L.length===0)return null;Ee=W={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:N,value:L.join(`
`),position:H,pageIndex:K-1,rect:u,rotation:c,id:P,deleted:!1}}const we=super.deserialize(W,le,$);return Z(we,v,W.fontSize),Z(we,x,n.Util.makeHexColor(...W.color)),Z(we,b,W.value),we.annotationElementId=W.id||null,Z(we,f,Ee),we}serialize(W=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const le=q._internalPadding*this.parentScale,$=this.getRect(le,le),Ee=V.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,x)),we={annotationType:n.AnnotationEditorType.FREETEXT,color:Ee,fontSize:e(this,v),value:e(this,b),pageIndex:this.pageIndex,rect:$,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return W?we:this.annotationElementId&&!G(this,C,pn).call(this,we)?null:(we.id=this.annotationElementId,we)}};A=new WeakMap,l=new WeakMap,r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakSet,dn=function(W){const le=Ee=>{this.editorDiv.style.fontSize=`calc(${Ee}px * var(--scale-factor))`,this.translate(0,-(Ee-e(this,v))*this.parentScale),Z(this,v,Ee),G(this,S,Pt).call(this)},$=e(this,v);this.addCommands({cmd:()=>{le(W)},undo:()=>{le($)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,un=function(W){const le=e(this,x);this.addCommands({cmd:()=>{Z(this,x,this.editorDiv.style.color=W)},undo:()=>{Z(this,x,this.editorDiv.style.color=le)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,fn=function(){const W=this.editorDiv.getElementsByTagName("div");if(W.length===0)return this.editorDiv.innerText;const le=[];for(const $ of W)le.push($.innerText.replace(/\r\n?|\n/,""));return le.join(`
`)},S=new WeakSet,Pt=function(){const[W,le]=this.parentDimensions;let $;if(this.isAttachedToDOM)$=this.div.getBoundingClientRect();else{const{currentLayer:Ee,div:we}=this,N=we.style.display;we.style.display="hidden",Ee.div.append(this.div),$=we.getBoundingClientRect(),we.remove(),we.style.display=N}this.rotation%180===this.parentRotation%180?(this.width=$.width/W,this.height=$.height/le):(this.width=$.height/W,this.height=$.width/le),this.fixAndSetPosition()},h=new WeakSet,mi=function(){if(this.editorDiv.replaceChildren(),!!e(this,b))for(const W of e(this,b).split(`
`)){const le=document.createElement("div");le.append(W?document.createTextNode(W):document.createElement("br")),this.editorDiv.append(le)}},C=new WeakSet,pn=function(W){const{value:le,fontSize:$,color:Ee,rect:we,pageIndex:N}=e(this,f);return W.value!==le||W.fontSize!==$||W.rect.some((a,u)=>Math.abs(a-we[u])>=1)||W.color.some((a,u)=>a!==Ee[u])||W.pageIndex!==N},ie=new WeakSet,_i=function(W=!1){if(!this.annotationElementId)return;if(G(this,S,Pt).call(this),!W&&(this.width===0||this.height===0)){setTimeout(()=>G(this,ie,_i).call(this,!0),0);return}const le=q._internalPadding*this.parentScale;e(this,f).rect=this.getRect(le,le)},tt(q,"_freeTextDefaultContent",""),tt(q,"_internalPadding",0),tt(q,"_defaultColor",null),tt(q,"_defaultFontSize",10),tt(q,"_type","freetext");let M=q;t.FreeTextEditor=M},(U,t,F)=>{var u,P,ht,H,gn,ne,_e,pe,Pe,se,be,ge,Fe,Re,xe,de,oe,te,ee,me,Te,Le,Be,mn,$e,Ot,Ke,vi,Ze,bi,_,I,he,ae,ue,ve,j,yi,Me,Ae,ke,Oe,_n,Ce,Si;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=F(1),g=F(6),V=F(3),k=F(30),M=F(31),A=F(32);const l=1e3,r=9,R=new WeakSet;function x(Ve){return{width:Ve[2]-Ve[0],height:Ve[3]-Ve[1]}}class b{static create(Q){switch(Q.data.annotationType){case n.AnnotationType.LINK:return new v(Q);case n.AnnotationType.TEXT:return new f(Q);case n.AnnotationType.WIDGET:switch(Q.data.fieldType){case"Tx":return new E(Q);case"Btn":return Q.data.radioButton?new s(Q):Q.data.checkBox?new y(Q):new i(Q);case"Ch":return new S(Q);case"Sig":return new p(Q)}return new w(Q);case n.AnnotationType.POPUP:return new m(Q);case n.AnnotationType.FREETEXT:return new D(Q);case n.AnnotationType.LINE:return new C(Q);case n.AnnotationType.SQUARE:return new z(Q);case n.AnnotationType.CIRCLE:return new ie(Q);case n.AnnotationType.POLYLINE:return new T(Q);case n.AnnotationType.CARET:return new J(Q);case n.AnnotationType.INK:return new Y(Q);case n.AnnotationType.POLYGON:return new q(Q);case n.AnnotationType.HIGHLIGHT:return new W(Q);case n.AnnotationType.UNDERLINE:return new le(Q);case n.AnnotationType.SQUIGGLY:return new $(Q);case n.AnnotationType.STRIKEOUT:return new Ee(Q);case n.AnnotationType.STAMP:return new we(Q);case n.AnnotationType.FILEATTACHMENT:return new N(Q);default:return new d(Q)}}}const c=class c{constructor(Q,{isRenderable:o=!1,ignoreBorder:B=!1,createQuadrilaterals:X=!1}={}){O(this,u,!1);this.isRenderable=o,this.data=Q.data,this.layer=Q.layer,this.linkService=Q.linkService,this.downloadManager=Q.downloadManager,this.imageResourcesPath=Q.imageResourcesPath,this.renderForms=Q.renderForms,this.svgFactory=Q.svgFactory,this.annotationStorage=Q.annotationStorage,this.enableScripting=Q.enableScripting,this.hasJSActions=Q.hasJSActions,this._fieldObjects=Q.fieldObjects,this.parent=Q.parent,o&&(this.container=this._createContainer(B)),X&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Q,contentsObj:o,richText:B}){return!!(Q!=null&&Q.str||o!=null&&o.str||B!=null&&B.str)}get hasPopupData(){return c._hasPopupData(this.data)}_createContainer(Q){const{data:o,parent:{page:B,viewport:X}}=this,re=document.createElement("section");re.setAttribute("data-annotation-id",o.id),this instanceof w||(re.tabIndex=l),re.style.zIndex=this.parent.zIndex++,this.data.popupRef&&re.setAttribute("aria-haspopup","dialog"),o.noRotate&&re.classList.add("norotate");const{pageWidth:fe,pageHeight:ye,pageX:De,pageY:Ne}=X.rawDims;if(!o.rect||this instanceof m){const{rotation:ze}=o;return!o.hasOwnCanvas&&ze!==0&&this.setRotation(ze,re),re}const{width:Ie,height:Qe}=x(o.rect),He=n.Util.normalizeRect([o.rect[0],B.view[3]-o.rect[1]+B.view[1],o.rect[2],B.view[3]-o.rect[3]+B.view[1]]);if(!Q&&o.borderStyle.width>0){re.style.borderWidth=`${o.borderStyle.width}px`;const ze=o.borderStyle.horizontalCornerRadius,Ye=o.borderStyle.verticalCornerRadius;if(ze>0||Ye>0){const et=`calc(${ze}px * var(--scale-factor)) / calc(${Ye}px * var(--scale-factor))`;re.style.borderRadius=et}else if(this instanceof s){const et=`calc(${Ie}px * var(--scale-factor)) / calc(${Qe}px * var(--scale-factor))`;re.style.borderRadius=et}switch(o.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:re.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:re.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:re.style.borderBottomStyle="solid";break}const Je=o.borderColor||null;Je?(Z(this,u,!0),re.style.borderColor=n.Util.makeHexColor(Je[0]|0,Je[1]|0,Je[2]|0)):re.style.borderWidth=0}re.style.left=`${100*(He[0]-De)/fe}%`,re.style.top=`${100*(He[1]-Ne)/ye}%`;const{rotation:We}=o;return o.hasOwnCanvas||We===0?(re.style.width=`${100*Ie/fe}%`,re.style.height=`${100*Qe/ye}%`):this.setRotation(We,re),re}setRotation(Q,o=this.container){if(!this.data.rect)return;const{pageWidth:B,pageHeight:X}=this.parent.viewport.rawDims,{width:re,height:fe}=x(this.data.rect);let ye,De;Q%180===0?(ye=100*re/B,De=100*fe/X):(ye=100*fe/B,De=100*re/X),o.style.width=`${ye}%`,o.style.height=`${De}%`,o.setAttribute("data-main-rotation",(360-Q)%360)}get _commonActions(){const Q=(o,B,X)=>{const re=X.detail[o],fe=re[0],ye=re.slice(1);X.target.style[B]=k.ColorConverters[`${fe}_HTML`](ye),this.annotationStorage.setValue(this.data.id,{[B]:k.ColorConverters[`${fe}_rgb`](ye)})};return(0,n.shadow)(this,"_commonActions",{display:o=>{const{display:B}=o.detail,X=B%2===1;this.container.style.visibility=X?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:X,noPrint:B===1||B===2})},print:o=>{this.annotationStorage.setValue(this.data.id,{noPrint:!o.detail.print})},hidden:o=>{const{hidden:B}=o.detail;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:B,noView:B})},focus:o=>{setTimeout(()=>o.target.focus({preventScroll:!1}),0)},userName:o=>{o.target.title=o.detail.userName},readonly:o=>{o.target.disabled=o.detail.readonly},required:o=>{this._setRequired(o.target,o.detail.required)},bgColor:o=>{Q("bgColor","backgroundColor",o)},fillColor:o=>{Q("fillColor","backgroundColor",o)},fgColor:o=>{Q("fgColor","color",o)},textColor:o=>{Q("textColor","color",o)},borderColor:o=>{Q("borderColor","borderColor",o)},strokeColor:o=>{Q("strokeColor","borderColor",o)},rotation:o=>{const B=o.detail.rotation;this.setRotation(B),this.annotationStorage.setValue(this.data.id,{rotation:B})}})}_dispatchEventFromSandbox(Q,o){const B=this._commonActions;for(const X of Object.keys(o.detail)){const re=Q[X]||B[X];re==null||re(o)}}_setDefaultPropertiesFromJS(Q){if(!this.enableScripting)return;const o=this.annotationStorage.getRawValue(this.data.id);if(!o)return;const B=this._commonActions;for(const[X,re]of Object.entries(o)){const fe=B[X];if(fe){const ye={detail:{[X]:re},target:Q};fe(ye),delete o[X]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Q}=this.data;if(!Q)return;const[o,B,X,re]=this.data.rect;if(Q.length===1){const[,{x:Ye,y:Je},{x:et,y:nt}]=Q[0];if(X===Ye&&re===Je&&o===et&&B===nt)return}const{style:fe}=this.container;let ye;if(e(this,u)){const{borderColor:Ye,borderWidth:Je}=fe;fe.borderWidth=0,ye=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ye}" stroke-width="${Je}">`],this.container.classList.add("hasBorder")}const De=X-o,Ne=re-B,{svgFactory:Ie}=this,Qe=Ie.createElement("svg");Qe.classList.add("quadrilateralsContainer"),Qe.setAttribute("width",0),Qe.setAttribute("height",0);const He=Ie.createElement("defs");Qe.append(He);const We=Ie.createElement("clipPath"),ze=`clippath_${this.data.id}`;We.setAttribute("id",ze),We.setAttribute("clipPathUnits","objectBoundingBox"),He.append(We);for(const[,{x:Ye,y:Je},{x:et,y:nt}]of Q){const it=Ie.createElement("rect"),st=(et-o)/De,lt=(re-Je)/Ne,ct=(Ye-et)/De,Zi=(Je-nt)/Ne;it.setAttribute("x",st),it.setAttribute("y",lt),it.setAttribute("width",ct),it.setAttribute("height",Zi),We.append(it),ye==null||ye.push(`<rect vector-effect="non-scaling-stroke" x="${st}" y="${lt}" width="${ct}" height="${Zi}"/>`)}e(this,u)&&(ye.push("</g></svg>')"),fe.backgroundImage=ye.join("")),this.container.append(Qe),this.container.style.clipPath=`url(#${ze})`}_createPopup(){const{container:Q,data:o}=this;Q.setAttribute("aria-haspopup","dialog");const B=new m({data:{color:o.color,titleObj:o.titleObj,modificationDate:o.modificationDate,contentsObj:o.contentsObj,richText:o.richText,parentRect:o.rect,borderStyle:0,id:`popup_${o.id}`,rotation:o.rotation},parent:this.parent,elements:[this]});this.parent.div.append(B.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Q,o=null){const B=[];if(this._fieldObjects){const X=this._fieldObjects[Q];if(X)for(const{page:re,id:fe,exportValues:ye}of X){if(re===-1||fe===o)continue;const De=typeof ye=="string"?ye:null,Ne=document.querySelector(`[data-element-id="${fe}"]`);if(Ne&&!R.has(Ne)){(0,n.warn)(`_getElementsByName - element not allowed: ${fe}`);continue}B.push({id:fe,exportValue:De,domElement:Ne})}return B}for(const X of document.getElementsByName(Q)){const{exportValue:re}=X,fe=X.getAttribute("data-element-id");fe!==o&&R.has(X)&&B.push({id:fe,exportValue:re,domElement:X})}return B}show(){var Q;this.container&&(this.container.hidden=!1),(Q=this.popup)==null||Q.maybeShow()}hide(){var Q;this.container&&(this.container.hidden=!0),(Q=this.popup)==null||Q.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Q=this.getElementsToTriggerPopup();if(Array.isArray(Q))for(const o of Q)o.classList.add("highlightArea");else Q.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Q,data:{id:o}}=this;this.container.addEventListener("dblclick",()=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("switchannotationeditormode",{source:this,mode:Q,editId:o})})}};u=new WeakMap;let d=c;class v extends d{constructor(o,B=null){super(o,{isRenderable:!0,ignoreBorder:!!(B!=null&&B.ignoreBorder),createQuadrilaterals:!0});O(this,P);O(this,H);this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:B}=this,X=document.createElement("a");X.setAttribute("data-element-id",o.id);let re=!1;return o.url?(B.addLinkAttributes(X,o.url,o.newWindow),re=!0):o.action?(this._bindNamedAction(X,o.action),re=!0):o.attachment?(this._bindAttachment(X,o.attachment),re=!0):o.setOCGState?(G(this,H,gn).call(this,X,o.setOCGState),re=!0):o.dest?(this._bindLink(X,o.dest),re=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(X,o),re=!0),o.resetForm?(this._bindResetFormAction(X,o.resetForm),re=!0):this.isTooltipOnly&&!re&&(this._bindLink(X,""),re=!0)),this.container.classList.add("linkAnnotation"),re&&this.container.append(X),this.container}_bindLink(o,B){o.href=this.linkService.getDestinationHash(B),o.onclick=()=>(B&&this.linkService.goToDestination(B),!1),(B||B==="")&&G(this,P,ht).call(this)}_bindNamedAction(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(B),!1),G(this,P,ht).call(this)}_bindAttachment(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>{var X;return(X=this.downloadManager)==null||X.openOrDownloadData(this.container,B.content,B.filename),!1},G(this,P,ht).call(this)}_bindJSAction(o,B){o.href=this.linkService.getAnchorUrl("");const X=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const re of Object.keys(B.actions)){const fe=X.get(re);fe&&(o[fe]=()=>{var ye;return(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B.id,name:re}}),!1})}o.onclick||(o.onclick=()=>!1),G(this,P,ht).call(this)}_bindResetFormAction(o,B){const X=o.onclick;if(X||(o.href=this.linkService.getAnchorUrl("")),G(this,P,ht).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),X||(o.onclick=()=>!1);return}o.onclick=()=>{var Qe;X==null||X();const{fields:re,refs:fe,include:ye}=B,De=[];if(re.length!==0||fe.length!==0){const He=new Set(fe);for(const We of re){const ze=this._fieldObjects[We]||[];for(const{id:Ye}of ze)He.add(Ye)}for(const We of Object.values(this._fieldObjects))for(const ze of We)He.has(ze.id)===ye&&De.push(ze)}else for(const He of Object.values(this._fieldObjects))De.push(...He);const Ne=this.annotationStorage,Ie=[];for(const He of De){const{id:We}=He;switch(Ie.push(We),He.type){case"text":{const Ye=He.defaultValue||"";Ne.setValue(We,{value:Ye});break}case"checkbox":case"radiobutton":{const Ye=He.defaultValue===He.exportValues;Ne.setValue(We,{value:Ye});break}case"combobox":case"listbox":{const Ye=He.defaultValue||"";Ne.setValue(We,{value:Ye});break}default:continue}const ze=document.querySelector(`[data-element-id="${We}"]`);if(ze){if(!R.has(ze)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${We}`);continue}}else continue;ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qe=this.linkService.eventBus)==null||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ie,name:"ResetForm"}})),!1}}}P=new WeakSet,ht=function(){this.container.setAttribute("data-internal-link","")},H=new WeakSet,gn=function(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(B),!1),G(this,P,ht).call(this)};class f extends d{constructor(Q){super(Q,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Q=document.createElement("img");return Q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Q.alt="[{{type}} Annotation]",Q.dataset.l10nId="text_annotation_type",Q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Q),this.container}}class w extends d{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Q){var o;this.data.hasOwnCanvas&&(((o=Q.previousSibling)==null?void 0:o.nodeName)==="CANVAS"&&(Q.previousSibling.hidden=!0),Q.hidden=!1)}_getKeyModifier(Q){const{isWin:o,isMac:B}=n.FeatureTest.platform;return o&&Q.ctrlKey||B&&Q.metaKey}_setEventListener(Q,o,B,X,re){B.includes("mouse")?Q.addEventListener(B,fe=>{var ye;(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:X,value:re(fe),shift:fe.shiftKey,modifier:this._getKeyModifier(fe)}})}):Q.addEventListener(B,fe=>{var ye;if(B==="blur"){if(!o.focused||!fe.relatedTarget)return;o.focused=!1}else if(B==="focus"){if(o.focused)return;o.focused=!0}re&&((ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:X,value:re(fe)}}))})}_setEventListeners(Q,o,B,X){var re,fe,ye;for(const[De,Ne]of B)(Ne==="Action"||(re=this.data.actions)!=null&&re[Ne])&&((Ne==="Focus"||Ne==="Blur")&&(o||(o={focused:!1})),this._setEventListener(Q,o,De,Ne,X),Ne==="Focus"&&!((fe=this.data.actions)!=null&&fe.Blur)?this._setEventListener(Q,o,"blur","Blur",null):Ne==="Blur"&&!((ye=this.data.actions)!=null&&ye.Focus)&&this._setEventListener(Q,o,"focus","Focus",null))}_setBackgroundColor(Q){const o=this.data.backgroundColor||null;Q.style.backgroundColor=o===null?"transparent":n.Util.makeHexColor(o[0],o[1],o[2])}_setTextStyle(Q){const o=["left","center","right"],{fontColor:B}=this.data.defaultAppearanceData,X=this.data.defaultAppearanceData.fontSize||r,re=Q.style;let fe;const ye=2,De=Ne=>Math.round(10*Ne)/10;if(this.data.multiLine){const Ne=Math.abs(this.data.rect[3]-this.data.rect[1]-ye),Ie=Math.round(Ne/(n.LINE_FACTOR*X))||1,Qe=Ne/Ie;fe=Math.min(X,De(Qe/n.LINE_FACTOR))}else{const Ne=Math.abs(this.data.rect[3]-this.data.rect[1]-ye);fe=Math.min(X,De(Ne/n.LINE_FACTOR))}re.fontSize=`calc(${fe}px * var(--scale-factor))`,re.color=n.Util.makeHexColor(B[0],B[1],B[2]),this.data.textAlignment!==null&&(re.textAlign=o[this.data.textAlignment])}_setRequired(Q,o){o?Q.setAttribute("required",!0):Q.removeAttribute("required"),Q.setAttribute("aria-required",o)}}class E extends w{constructor(Q){const o=Q.renderForms||!Q.data.hasAppearance&&!!Q.data.fieldValue;super(Q,{isRenderable:o})}setPropertyOnSiblings(Q,o,B,X){const re=this.annotationStorage;for(const fe of this._getElementsByName(Q.name,Q.id))fe.domElement&&(fe.domElement[o]=B),re.setValue(fe.id,{[X]:B})}render(){var X,re;const Q=this.annotationStorage,o=this.data.id;this.container.classList.add("textWidgetAnnotation");let B=null;if(this.renderForms){const fe=Q.getValue(o,{value:this.data.fieldValue});let ye=fe.value||"";const De=Q.getValue(o,{charLimit:this.data.maxLen}).charLimit;De&&ye.length>De&&(ye=ye.slice(0,De));let Ne=fe.formattedValue||((X=this.data.textContent)==null?void 0:X.join(`
`))||null;Ne&&this.data.comb&&(Ne=Ne.replaceAll(/\s+/g,""));const Ie={userValue:ye,formattedValue:Ne,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(B=document.createElement("textarea"),B.textContent=Ne??ye,this.data.doNotScroll&&(B.style.overflowY="hidden")):(B=document.createElement("input"),B.type="text",B.setAttribute("value",Ne??ye),this.data.doNotScroll&&(B.style.overflowX="hidden")),this.data.hasOwnCanvas&&(B.hidden=!0),R.add(B),B.setAttribute("data-element-id",o),B.disabled=this.data.readOnly,B.name=this.data.fieldName,B.tabIndex=l,this._setRequired(B,this.data.required),De&&(B.maxLength=De),B.addEventListener("input",He=>{Q.setValue(o,{value:He.target.value}),this.setPropertyOnSiblings(B,"value",He.target.value,"value"),Ie.formattedValue=null}),B.addEventListener("resetform",He=>{const We=this.data.defaultFieldValue??"";B.value=Ie.userValue=We,Ie.formattedValue=null});let Qe=He=>{const{formattedValue:We}=Ie;We!=null&&(He.target.value=We),He.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){B.addEventListener("focus",We=>{if(Ie.focused)return;const{target:ze}=We;Ie.userValue&&(ze.value=Ie.userValue),Ie.lastCommittedValue=ze.value,Ie.commitKey=1,Ie.focused=!0}),B.addEventListener("updatefromsandbox",We=>{this.showElementAndHideCanvas(We.target);const ze={value(Ye){Ie.userValue=Ye.detail.value??"",Q.setValue(o,{value:Ie.userValue.toString()}),Ye.target.value=Ie.userValue},formattedValue(Ye){const{formattedValue:Je}=Ye.detail;Ie.formattedValue=Je,Je!=null&&Ye.target!==document.activeElement&&(Ye.target.value=Je),Q.setValue(o,{formattedValue:Je})},selRange(Ye){Ye.target.setSelectionRange(...Ye.detail.selRange)},charLimit:Ye=>{var it;const{charLimit:Je}=Ye.detail,{target:et}=Ye;if(Je===0){et.removeAttribute("maxLength");return}et.setAttribute("maxLength",Je);let nt=Ie.userValue;!nt||nt.length<=Je||(nt=nt.slice(0,Je),et.value=Ie.userValue=nt,Q.setValue(o,{value:nt}),(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:nt,willCommit:!0,commitKey:1,selStart:et.selectionStart,selEnd:et.selectionEnd}}))}};this._dispatchEventFromSandbox(ze,We)}),B.addEventListener("keydown",We=>{var Je;Ie.commitKey=1;let ze=-1;if(We.key==="Escape"?ze=0:We.key==="Enter"&&!this.data.multiLine?ze=2:We.key==="Tab"&&(Ie.commitKey=3),ze===-1)return;const{value:Ye}=We.target;Ie.lastCommittedValue!==Ye&&(Ie.lastCommittedValue=Ye,Ie.userValue=Ye,(Je=this.linkService.eventBus)==null||Je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Ye,willCommit:!0,commitKey:ze,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}}))});const He=Qe;Qe=null,B.addEventListener("blur",We=>{var Ye;if(!Ie.focused||!We.relatedTarget)return;Ie.focused=!1;const{value:ze}=We.target;Ie.userValue=ze,Ie.lastCommittedValue!==ze&&((Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:ze,willCommit:!0,commitKey:Ie.commitKey,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}})),He(We)}),(re=this.data.actions)!=null&&re.Keystroke&&B.addEventListener("beforeinput",We=>{var lt;Ie.lastCommittedValue=null;const{data:ze,target:Ye}=We,{value:Je,selectionStart:et,selectionEnd:nt}=Ye;let it=et,st=nt;switch(We.inputType){case"deleteWordBackward":{const ct=Je.substring(0,et).match(/\w*[^\w]*$/);ct&&(it-=ct[0].length);break}case"deleteWordForward":{const ct=Je.substring(et).match(/^[^\w]*\w*/);ct&&(st+=ct[0].length);break}case"deleteContentBackward":et===nt&&(it-=1);break;case"deleteContentForward":et===nt&&(st+=1);break}We.preventDefault(),(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Je,change:ze||"",willCommit:!1,selStart:it,selEnd:st}})}),this._setEventListeners(B,Ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],We=>We.target.value)}if(Qe&&B.addEventListener("blur",Qe),this.data.comb){const We=(this.data.rect[2]-this.data.rect[0])/De;B.classList.add("comb"),B.style.letterSpacing=`calc(${We}px * var(--scale-factor) - 1ch)`}}else B=document.createElement("div"),B.textContent=this.data.fieldValue,B.style.verticalAlign="middle",B.style.display="table-cell";return this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class p extends w{constructor(Q){super(Q,{isRenderable:!!Q.data.hasOwnCanvas})}}class y extends w{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){const Q=this.annotationStorage,o=this.data,B=o.id;let X=Q.getValue(B,{value:o.exportValue===o.fieldValue}).value;typeof X=="string"&&(X=X!=="Off",Q.setValue(B,{value:X})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const re=document.createElement("input");return R.add(re),re.setAttribute("data-element-id",B),re.disabled=o.readOnly,this._setRequired(re,this.data.required),re.type="checkbox",re.name=o.fieldName,X&&re.setAttribute("checked",!0),re.setAttribute("exportValue",o.exportValue),re.tabIndex=l,re.addEventListener("change",fe=>{const{name:ye,checked:De}=fe.target;for(const Ne of this._getElementsByName(ye,B)){const Ie=De&&Ne.exportValue===o.exportValue;Ne.domElement&&(Ne.domElement.checked=Ie),Q.setValue(Ne.id,{value:Ie})}Q.setValue(B,{value:De})}),re.addEventListener("resetform",fe=>{const ye=o.defaultFieldValue||"Off";fe.target.checked=ye===o.exportValue}),this.enableScripting&&this.hasJSActions&&(re.addEventListener("updatefromsandbox",fe=>{const ye={value(De){De.target.checked=De.detail.value!=="Off",Q.setValue(B,{value:De.target.checked})}};this._dispatchEventFromSandbox(ye,fe)}),this._setEventListeners(re,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)),this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class s extends w{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Q=this.annotationStorage,o=this.data,B=o.id;let X=Q.getValue(B,{value:o.fieldValue===o.buttonValue}).value;typeof X=="string"&&(X=X!==o.buttonValue,Q.setValue(B,{value:X}));const re=document.createElement("input");if(R.add(re),re.setAttribute("data-element-id",B),re.disabled=o.readOnly,this._setRequired(re,this.data.required),re.type="radio",re.name=o.fieldName,X&&re.setAttribute("checked",!0),re.tabIndex=l,re.addEventListener("change",fe=>{const{name:ye,checked:De}=fe.target;for(const Ne of this._getElementsByName(ye,B))Q.setValue(Ne.id,{value:!1});Q.setValue(B,{value:De})}),re.addEventListener("resetform",fe=>{const ye=o.defaultFieldValue;fe.target.checked=ye!=null&&ye===o.buttonValue}),this.enableScripting&&this.hasJSActions){const fe=o.buttonValue;re.addEventListener("updatefromsandbox",ye=>{const De={value:Ne=>{const Ie=fe===Ne.detail.value;for(const Qe of this._getElementsByName(Ne.target.name)){const He=Ie&&Qe.id===B;Qe.domElement&&(Qe.domElement.checked=He),Q.setValue(Qe.id,{value:He})}}};this._dispatchEventFromSandbox(De,ye)}),this._setEventListeners(re,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ye=>ye.target.checked)}return this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class i extends v{constructor(Q){super(Q,{ignoreBorder:Q.data.hasAppearance})}render(){const Q=super.render();Q.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Q.title=this.data.alternativeText);const o=Q.lastChild;return this.enableScripting&&this.hasJSActions&&o&&(this._setDefaultPropertiesFromJS(o),o.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({},B)})),Q}}class S extends w{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Q=this.annotationStorage,o=this.data.id,B=Q.getValue(o,{value:this.data.fieldValue}),X=document.createElement("select");R.add(X),X.setAttribute("data-element-id",o),X.disabled=this.data.readOnly,this._setRequired(X,this.data.required),X.name=this.data.fieldName,X.tabIndex=l;let re=this.data.combo&&this.data.options.length>0;this.data.combo||(X.size=this.data.options.length,this.data.multiSelect&&(X.multiple=!0)),X.addEventListener("resetform",Ie=>{const Qe=this.data.defaultFieldValue;for(const He of X.options)He.selected=He.value===Qe});for(const Ie of this.data.options){const Qe=document.createElement("option");Qe.textContent=Ie.displayValue,Qe.value=Ie.exportValue,B.value.includes(Ie.exportValue)&&(Qe.setAttribute("selected",!0),re=!1),X.append(Qe)}let fe=null;if(re){const Ie=document.createElement("option");Ie.value=" ",Ie.setAttribute("hidden",!0),Ie.setAttribute("selected",!0),X.prepend(Ie),fe=()=>{Ie.remove(),X.removeEventListener("input",fe),fe=null},X.addEventListener("input",fe)}const ye=Ie=>{const Qe=Ie?"value":"textContent",{options:He,multiple:We}=X;return We?Array.prototype.filter.call(He,ze=>ze.selected).map(ze=>ze[Qe]):He.selectedIndex===-1?null:He[He.selectedIndex][Qe]};let De=ye(!1);const Ne=Ie=>{const Qe=Ie.target.options;return Array.prototype.map.call(Qe,He=>({displayValue:He.textContent,exportValue:He.value}))};return this.enableScripting&&this.hasJSActions?(X.addEventListener("updatefromsandbox",Ie=>{const Qe={value(He){fe==null||fe();const We=He.detail.value,ze=new Set(Array.isArray(We)?We:[We]);for(const Ye of X.options)Ye.selected=ze.has(Ye.value);Q.setValue(o,{value:ye(!0)}),De=ye(!1)},multipleSelection(He){X.multiple=!0},remove(He){const We=X.options,ze=He.detail.remove;We[ze].selected=!1,X.remove(ze),We.length>0&&Array.prototype.findIndex.call(We,Je=>Je.selected)===-1&&(We[0].selected=!0),Q.setValue(o,{value:ye(!0),items:Ne(He)}),De=ye(!1)},clear(He){for(;X.length!==0;)X.remove(0);Q.setValue(o,{value:null,items:[]}),De=ye(!1)},insert(He){const{index:We,displayValue:ze,exportValue:Ye}=He.detail.insert,Je=X.children[We],et=document.createElement("option");et.textContent=ze,et.value=Ye,Je?Je.before(et):X.append(et),Q.setValue(o,{value:ye(!0),items:Ne(He)}),De=ye(!1)},items(He){const{items:We}=He.detail;for(;X.length!==0;)X.remove(0);for(const ze of We){const{displayValue:Ye,exportValue:Je}=ze,et=document.createElement("option");et.textContent=Ye,et.value=Je,X.append(et)}X.options.length>0&&(X.options[0].selected=!0),Q.setValue(o,{value:ye(!0),items:Ne(He)}),De=ye(!1)},indices(He){const We=new Set(He.detail.indices);for(const ze of He.target.options)ze.selected=We.has(ze.index);Q.setValue(o,{value:ye(!0)}),De=ye(!1)},editable(He){He.target.disabled=!He.detail.editable}};this._dispatchEventFromSandbox(Qe,Ie)}),X.addEventListener("input",Ie=>{var He;const Qe=ye(!0);Q.setValue(o,{value:Qe}),Ie.preventDefault(),(He=this.linkService.eventBus)==null||He.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:De,changeEx:Qe,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(X,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ie=>Ie.target.value)):X.addEventListener("input",function(Ie){Q.setValue(o,{value:ye(!0)})}),this.data.combo&&this._setTextStyle(X),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class m extends d{constructor(Q){const{data:o,elements:B}=Q;super(Q,{isRenderable:d._hasPopupData(o)}),this.elements=B}render(){this.container.classList.add("popupAnnotation");const Q=new h({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),o=[];for(const B of this.elements)B.popup=Q,o.push(B.data.id),B.addHighlightArea();return this.container.setAttribute("aria-controls",o.map(B=>`${n.AnnotationPrefix}${B}`).join(",")),this.container}}class h{constructor({container:Q,color:o,elements:B,titleObj:X,modificationDate:re,contentsObj:fe,richText:ye,parent:De,rect:Ne,parentRect:Ie,open:Qe}){O(this,Be);O(this,$e);O(this,Ke);O(this,Ze);O(this,ne,null);O(this,_e,G(this,Be,mn).bind(this));O(this,pe,G(this,Ze,bi).bind(this));O(this,Pe,G(this,Ke,vi).bind(this));O(this,se,G(this,$e,Ot).bind(this));O(this,be,null);O(this,ge,null);O(this,Fe,null);O(this,Re,null);O(this,xe,null);O(this,de,null);O(this,oe,!1);O(this,te,null);O(this,ee,null);O(this,me,null);O(this,Te,null);O(this,Le,!1);var We;Z(this,ge,Q),Z(this,Te,X),Z(this,Fe,fe),Z(this,me,ye),Z(this,xe,De),Z(this,be,o),Z(this,ee,Ne),Z(this,de,Ie),Z(this,Re,B);const He=g.PDFDateString.toDateObject(re);He&&Z(this,ne,De.l10n.get("annotation_date_string",{date:He.toLocaleDateString(),time:He.toLocaleTimeString()})),this.trigger=B.flatMap(ze=>ze.getElementsToTriggerPopup());for(const ze of this.trigger)ze.addEventListener("click",e(this,se)),ze.addEventListener("mouseenter",e(this,Pe)),ze.addEventListener("mouseleave",e(this,pe)),ze.classList.add("popupTriggerArea");for(const ze of B)(We=ze.container)==null||We.addEventListener("keydown",e(this,_e));e(this,ge).hidden=!0,Qe&&G(this,$e,Ot).call(this)}render(){if(e(this,te))return;const{page:{view:Q},viewport:{rawDims:{pageWidth:o,pageHeight:B,pageX:X,pageY:re}}}=e(this,xe),fe=Z(this,te,document.createElement("div"));if(fe.className="popup",e(this,be)){const it=fe.style.outlineColor=n.Util.makeHexColor(...e(this,be));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?fe.style.backgroundColor=`color-mix(in srgb, ${it} 30%, white)`:fe.style.backgroundColor=n.Util.makeHexColor(...e(this,be).map(lt=>Math.floor(.7*(255-lt)+lt)))}const ye=document.createElement("span");ye.className="header";const De=document.createElement("h1");if(ye.append(De),{dir:De.dir,str:De.textContent}=e(this,Te),fe.append(ye),e(this,ne)){const it=document.createElement("span");it.classList.add("popupDate"),e(this,ne).then(st=>{it.textContent=st}),ye.append(it)}const Ne=e(this,Fe),Ie=e(this,me);if(Ie!=null&&Ie.str&&(!(Ne!=null&&Ne.str)||Ne.str===Ie.str))A.XfaLayer.render({xfaHtml:Ie.html,intent:"richText",div:fe}),fe.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents(Ne);fe.append(it)}let Qe=!!e(this,de),He=Qe?e(this,de):e(this,ee);for(const it of e(this,Re))if(!He||n.Util.intersect(it.data.rect,He)!==null){He=it.data.rect,Qe=!0;break}const We=n.Util.normalizeRect([He[0],Q[3]-He[1]+Q[1],He[2],Q[3]-He[3]+Q[1]]),Ye=Qe?He[2]-He[0]+5:0,Je=We[0]+Ye,et=We[1],{style:nt}=e(this,ge);nt.left=`${100*(Je-X)/o}%`,nt.top=`${100*(et-re)/B}%`,e(this,ge).append(fe)}_formatContents({str:Q,dir:o}){const B=document.createElement("p");B.classList.add("popupContent"),B.dir=o;const X=Q.split(/(?:\r\n?|\n)/);for(let re=0,fe=X.length;re<fe;++re){const ye=X[re];B.append(document.createTextNode(ye)),re<fe-1&&B.append(document.createElement("br"))}return B}forceHide(){Z(this,Le,this.isVisible),e(this,Le)&&(e(this,ge).hidden=!0)}maybeShow(){e(this,Le)&&(Z(this,Le,!1),e(this,ge).hidden=!1)}get isVisible(){return e(this,ge).hidden===!1}}ne=new WeakMap,_e=new WeakMap,pe=new WeakMap,Pe=new WeakMap,se=new WeakMap,be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,Re=new WeakMap,xe=new WeakMap,de=new WeakMap,oe=new WeakMap,te=new WeakMap,ee=new WeakMap,me=new WeakMap,Te=new WeakMap,Le=new WeakMap,Be=new WeakSet,mn=function(Q){Q.altKey||Q.shiftKey||Q.ctrlKey||Q.metaKey||(Q.key==="Enter"||Q.key==="Escape"&&e(this,oe))&&G(this,$e,Ot).call(this)},$e=new WeakSet,Ot=function(){Z(this,oe,!e(this,oe)),e(this,oe)?(G(this,Ke,vi).call(this),e(this,ge).addEventListener("click",e(this,se)),e(this,ge).addEventListener("keydown",e(this,_e))):(G(this,Ze,bi).call(this),e(this,ge).removeEventListener("click",e(this,se)),e(this,ge).removeEventListener("keydown",e(this,_e)))},Ke=new WeakSet,vi=function(){e(this,te)||this.render(),this.isVisible?e(this,oe)&&e(this,ge).classList.add("focused"):(e(this,ge).hidden=!1,e(this,ge).style.zIndex=parseInt(e(this,ge).style.zIndex)+1e3)},Ze=new WeakSet,bi=function(){e(this,ge).classList.remove("focused"),!(e(this,oe)||!this.isVisible)&&(e(this,ge).hidden=!0,e(this,ge).style.zIndex=parseInt(e(this,ge).style.zIndex)-1e3)};class D extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Q.data.textContent,this.textPosition=Q.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Q=document.createElement("div");Q.classList.add("annotationTextContent"),Q.setAttribute("role","comment");for(const o of this.textContent){const B=document.createElement("span");B.textContent=o,Q.append(B)}this.container.append(Q)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=D;class C extends d{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});O(this,_,null)}render(){this.container.classList.add("lineAnnotation");const o=this.data,{width:B,height:X}=x(o.rect),re=this.svgFactory.create(B,X,!0),fe=Z(this,_,this.svgFactory.createElement("svg:line"));return fe.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),fe.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),fe.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),fe.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),fe.setAttribute("stroke-width",o.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),re.append(fe),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,_)}addHighlightArea(){this.container.classList.add("highlightArea")}}_=new WeakMap;class z extends d{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});O(this,I,null)}render(){this.container.classList.add("squareAnnotation");const o=this.data,{width:B,height:X}=x(o.rect),re=this.svgFactory.create(B,X,!0),fe=o.borderStyle.width,ye=Z(this,I,this.svgFactory.createElement("svg:rect"));return ye.setAttribute("x",fe/2),ye.setAttribute("y",fe/2),ye.setAttribute("width",B-fe),ye.setAttribute("height",X-fe),ye.setAttribute("stroke-width",fe||1),ye.setAttribute("stroke","transparent"),ye.setAttribute("fill","transparent"),re.append(ye),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,I)}addHighlightArea(){this.container.classList.add("highlightArea")}}I=new WeakMap;class ie extends d{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});O(this,he,null)}render(){this.container.classList.add("circleAnnotation");const o=this.data,{width:B,height:X}=x(o.rect),re=this.svgFactory.create(B,X,!0),fe=o.borderStyle.width,ye=Z(this,he,this.svgFactory.createElement("svg:ellipse"));return ye.setAttribute("cx",B/2),ye.setAttribute("cy",X/2),ye.setAttribute("rx",B/2-fe/2),ye.setAttribute("ry",X/2-fe/2),ye.setAttribute("stroke-width",fe||1),ye.setAttribute("stroke","transparent"),ye.setAttribute("fill","transparent"),re.append(ye),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,he)}addHighlightArea(){this.container.classList.add("highlightArea")}}he=new WeakMap;class T extends d{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});O(this,ae,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:B,height:X}=x(o.rect),re=this.svgFactory.create(B,X,!0);let fe=[];for(const De of o.vertices){const Ne=De.x-o.rect[0],Ie=o.rect[3]-De.y;fe.push(Ne+","+Ie)}fe=fe.join(" ");const ye=Z(this,ae,this.svgFactory.createElement(this.svgElementName));return ye.setAttribute("points",fe),ye.setAttribute("stroke-width",o.borderStyle.width||1),ye.setAttribute("stroke","transparent"),ye.setAttribute("fill","transparent"),re.append(ye),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}ae=new WeakMap;class q extends T{constructor(Q){super(Q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Y extends d{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});O(this,ue,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:B,height:X}=x(o.rect),re=this.svgFactory.create(B,X,!0);for(const fe of o.inkLists){let ye=[];for(const Ne of fe){const Ie=Ne.x-o.rect[0],Qe=o.rect[3]-Ne.y;ye.push(`${Ie},${Qe}`)}ye=ye.join(" ");const De=this.svgFactory.createElement(this.svgElementName);e(this,ue).push(De),De.setAttribute("points",ye),De.setAttribute("stroke-width",o.borderStyle.width||1),De.setAttribute("stroke","transparent"),De.setAttribute("fill","transparent"),!o.popupRef&&this.hasPopupData&&this._createPopup(),re.append(De)}return this.container.append(re),this.container}getElementsToTriggerPopup(){return e(this,ue)}addHighlightArea(){this.container.classList.add("highlightArea")}}ue=new WeakMap,t.InkAnnotationElement=Y;class W extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class le extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $ extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ee extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class we extends d{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=we;class N extends d{constructor(o){var re;super(o,{isRenderable:!0});O(this,j);O(this,ve,null);const{filename:B,content:X}=this.data.file;this.filename=(0,g.getFilenameFromUrl)(B,!0),this.content=X,(re=this.linkService.eventBus)==null||re.dispatch("fileattachmentannotation",{source:this,filename:B,content:X})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:o,data:B}=this;let X;B.hasAppearance||B.fillAlpha===0?X=document.createElement("div"):(X=document.createElement("img"),X.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(B.name)?"paperclip":"pushpin"}.svg`,B.fillAlpha&&B.fillAlpha<1&&(X.style=`filter: opacity(${Math.round(B.fillAlpha*100)}%);`)),X.addEventListener("dblclick",G(this,j,yi).bind(this)),Z(this,ve,X);const{isMac:re}=n.FeatureTest.platform;return o.addEventListener("keydown",fe=>{fe.key==="Enter"&&(re?fe.metaKey:fe.ctrlKey)&&G(this,j,yi).call(this)}),!B.popupRef&&this.hasPopupData?this._createPopup():X.classList.add("popupTriggerArea"),o.append(X),o}getElementsToTriggerPopup(){return e(this,ve)}addHighlightArea(){this.container.classList.add("highlightArea")}}ve=new WeakMap,j=new WeakSet,yi=function(){var o;(o=this.downloadManager)==null||o.openOrDownloadData(this.container,this.content,this.filename)};class a{constructor({div:Q,accessibilityManager:o,annotationCanvasMap:B,l10n:X,page:re,viewport:fe}){O(this,Oe);O(this,Ce);O(this,Me,null);O(this,Ae,null);O(this,ke,new Map);this.div=Q,Z(this,Me,o),Z(this,Ae,B),this.l10n=X,this.page=re,this.viewport=fe,this.zIndex=0,this.l10n||(this.l10n=M.NullL10n)}async render(Q){const{annotations:o}=Q,B=this.div;(0,g.setLayerDimensions)(B,this.viewport);const X=new Map,re={data:null,layer:B,linkService:Q.linkService,downloadManager:Q.downloadManager,imageResourcesPath:Q.imageResourcesPath||"",renderForms:Q.renderForms!==!1,svgFactory:new g.DOMSVGFactory,annotationStorage:Q.annotationStorage||new V.AnnotationStorage,enableScripting:Q.enableScripting===!0,hasJSActions:Q.hasJSActions,fieldObjects:Q.fieldObjects,parent:this,elements:null};for(const fe of o){if(fe.noHTML)continue;const ye=fe.annotationType===n.AnnotationType.POPUP;if(ye){const Ie=X.get(fe.id);if(!Ie)continue;re.elements=Ie}else{const{width:Ie,height:Qe}=x(fe.rect);if(Ie<=0||Qe<=0)continue}re.data=fe;const De=b.create(re);if(!De.isRenderable)continue;if(!ye&&fe.popupRef){const Ie=X.get(fe.popupRef);Ie?Ie.push(De):X.set(fe.popupRef,[De])}De.annotationEditorType>0&&e(this,ke).set(De.data.id,De);const Ne=De.render();fe.hidden&&(Ne.style.visibility="hidden"),G(this,Oe,_n).call(this,Ne,fe.id)}G(this,Ce,Si).call(this),await this.l10n.translate(B)}update({viewport:Q}){const o=this.div;this.viewport=Q,(0,g.setLayerDimensions)(o,{rotation:Q.rotation}),G(this,Ce,Si).call(this),o.hidden=!1}getEditableAnnotations(){return Array.from(e(this,ke).values())}getEditableAnnotation(Q){return e(this,ke).get(Q)}}Me=new WeakMap,Ae=new WeakMap,ke=new WeakMap,Oe=new WeakSet,_n=function(Q,o){var X;const B=Q.firstChild||Q;B.id=`${n.AnnotationPrefix}${o}`,this.div.append(Q),(X=e(this,Me))==null||X.moveElementInDOM(this.div,Q,B,!1)},Ce=new WeakSet,Si=function(){if(!e(this,Ae))return;const Q=this.div;for(const[o,B]of e(this,Ae)){const X=Q.querySelector(`[data-annotation-id="${o}"]`);if(!X)continue;const{firstChild:re}=X;re?re.nodeName==="CANVAS"?re.replaceWith(B):re.before(B):X.append(B)}e(this,Ae).clear()},t.AnnotationLayer=a},(U,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function F(V){return Math.floor(Math.max(0,Math.min(1,V))*255).toString(16).padStart(2,"0")}function n(V){return Math.max(0,Math.min(255,255*V))}class g{static CMYK_G([k,M,A,l]){return["G",1-Math.min(1,.3*k+.59*A+.11*M+l)]}static G_CMYK([k]){return["CMYK",0,0,0,1-k]}static G_RGB([k]){return["RGB",k,k,k]}static G_rgb([k]){return k=n(k),[k,k,k]}static G_HTML([k]){const M=F(k);return`#${M}${M}${M}`}static RGB_G([k,M,A]){return["G",.3*k+.59*M+.11*A]}static RGB_rgb(k){return k.map(n)}static RGB_HTML(k){return`#${k.map(F).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([k,M,A,l]){return["RGB",1-Math.min(1,k+l),1-Math.min(1,A+l),1-Math.min(1,M+l)]}static CMYK_rgb([k,M,A,l]){return[n(1-Math.min(1,k+l)),n(1-Math.min(1,A+l)),n(1-Math.min(1,M+l))]}static CMYK_HTML(k){const M=this.CMYK_RGB(k).slice(1);return this.RGB_HTML(M)}static RGB_CMYK([k,M,A]){const l=1-k,r=1-M,R=1-A,x=Math.min(l,r,R);return["CMYK",l,r,R,x]}}t.ColorConverters=g},(U,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const F={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};F.print_progress_percent="{{progress}}%";function n(k,M){switch(k){case"find_match_count":k=`find_match_count[${M.total===1?"one":"other"}]`;break;case"find_match_count_limit":k=`find_match_count_limit[${M.limit===1?"one":"other"}]`;break}return F[k]||""}function g(k,M){return M?k.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(A,l)=>l in M?M[l]:"{{"+l+"}}"):k}const V={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(k,M=null,A=n(k,M)){return g(A,M)},async translate(k){}};t.NullL10n=V},(U,t,F)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=F(25);class g{static setupStorage(k,M,A,l,r){const R=l.getValue(M,{value:null});switch(A.name){case"textarea":if(R.value!==null&&(k.textContent=R.value),r==="print")break;k.addEventListener("input",x=>{l.setValue(M,{value:x.target.value})});break;case"input":if(A.attributes.type==="radio"||A.attributes.type==="checkbox"){if(R.value===A.attributes.xfaOn?k.setAttribute("checked",!0):R.value===A.attributes.xfaOff&&k.removeAttribute("checked"),r==="print")break;k.addEventListener("change",x=>{l.setValue(M,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(R.value!==null&&k.setAttribute("value",R.value),r==="print")break;k.addEventListener("input",x=>{l.setValue(M,{value:x.target.value})})}break;case"select":if(R.value!==null){k.setAttribute("value",R.value);for(const x of A.children)x.attributes.value===R.value?x.attributes.selected=!0:x.attributes.hasOwnProperty("selected")&&delete x.attributes.selected}k.addEventListener("input",x=>{const b=x.target.options,d=b.selectedIndex===-1?"":b[b.selectedIndex].value;l.setValue(M,{value:d})});break}}static setAttributes({html:k,element:M,storage:A=null,intent:l,linkService:r}){const{attributes:R}=M,x=k instanceof HTMLAnchorElement;R.type==="radio"&&(R.name=`${R.name}-${l}`);for(const[b,d]of Object.entries(R))if(d!=null)switch(b){case"class":d.length&&k.setAttribute(b,d.join(" "));break;case"dataId":break;case"id":k.setAttribute("data-element-id",d);break;case"style":Object.assign(k.style,d);break;case"textContent":k.textContent=d;break;default:(!x||b!=="href"&&b!=="newWindow")&&k.setAttribute(b,d)}x&&r.addLinkAttributes(k,R.href,R.newWindow),A&&R.dataId&&this.setupStorage(k,R.dataId,M,A)}static render(k){var v;const M=k.annotationStorage,A=k.linkService,l=k.xfaHtml,r=k.intent||"display",R=document.createElement(l.name);l.attributes&&this.setAttributes({html:R,element:l,intent:r,linkService:A});const x=[[l,-1,R]],b=k.div;if(b.append(R),k.viewport){const f=`matrix(${k.viewport.transform.join(",")})`;b.style.transform=f}r!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const d=[];for(;x.length>0;){const[f,w,E]=x.at(-1);if(w+1===f.children.length){x.pop();continue}const p=f.children[++x.at(-1)[1]];if(p===null)continue;const{name:y}=p;if(y==="#text"){const i=document.createTextNode(p.value);d.push(i),E.append(i);continue}const s=(v=p==null?void 0:p.attributes)!=null&&v.xmlns?document.createElementNS(p.attributes.xmlns,y):document.createElement(y);if(E.append(s),p.attributes&&this.setAttributes({html:s,element:p,storage:M,intent:r,linkService:A}),p.children&&p.children.length>0)x.push([p,-1,s]);else if(p.value){const i=document.createTextNode(p.value);n.XfaText.shouldBuildText(y)&&d.push(i),s.append(i)}}for(const f of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:d}}static update(k){const M=`matrix(${k.viewport.transform.join(",")})`;k.div.style.transform=M,k.div.hidden=!1}}t.XfaLayer=g},(U,t,F)=>{var l,r,R,x,b,d,v,f,w,E,p,y,s,i,S,vn,h,bn,C,yn,ie,Sn,q,Pi,Y,Pn,le,Ai,Ee,An,N,En,u,wn,P,Cn,H,Tn,ne,at,pe,Ei,se,Nt,ge,Bt,Re,gt,de,wi,te,Vt,me,Mn,Le,Ci,Ue,xn,Ge,Fn,Xe,Ti,Se,Ut,I,mt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=F(1),g=F(4),V=F(29),k=F(6),M=F(5);const ae=class ae extends g.AnnotationEditor{constructor(j){super({...j,name:"inkEditor"});O(this,S);O(this,h);O(this,C);O(this,ie);O(this,q);O(this,Y);O(this,le);O(this,Ee);O(this,N);O(this,u);O(this,P);O(this,H);O(this,ne);O(this,pe);O(this,se);O(this,ge);O(this,Re);O(this,de);O(this,te);O(this,Ge);O(this,Xe);O(this,Se);O(this,I);O(this,l,0);O(this,r,0);O(this,R,this.canvasPointermove.bind(this));O(this,x,this.canvasPointerleave.bind(this));O(this,b,this.canvasPointerup.bind(this));O(this,d,this.canvasPointerdown.bind(this));O(this,v,new Path2D);O(this,f,!1);O(this,w,!1);O(this,E,!1);O(this,p,null);O(this,y,0);O(this,s,0);O(this,i,null);this.color=j.color||null,this.thickness=j.thickness||null,this.opacity=j.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(j){g.AnnotationEditor.initialize(j,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(j,ce){switch(j){case n.AnnotationEditorParamsType.INK_THICKNESS:ae._defaultThickness=ce;break;case n.AnnotationEditorParamsType.INK_COLOR:ae._defaultColor=ce;break;case n.AnnotationEditorParamsType.INK_OPACITY:ae._defaultOpacity=ce/100;break}}updateParams(j,ce){switch(j){case n.AnnotationEditorParamsType.INK_THICKNESS:G(this,S,vn).call(this,ce);break;case n.AnnotationEditorParamsType.INK_COLOR:G(this,h,bn).call(this,ce);break;case n.AnnotationEditorParamsType.INK_OPACITY:G(this,C,yn).call(this,ce);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ae._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ae._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ae._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ae._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ae._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(G(this,se,Nt).call(this),G(this,ge,Bt).call(this)),this.isAttachedToDOM||(this.parent.add(this),G(this,Re,gt).call(this)),G(this,I,mt).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,p).disconnect(),Z(this,p,null),super.remove())}setParent(j){!this.parent&&j?this._uiManager.removeShouldRescale(this):this.parent&&j===null&&this._uiManager.addShouldRescale(this),super.setParent(j)}onScaleChanging(){const[j,ce]=this.parentDimensions,Me=this.width*j,Ae=this.height*ce;this.setDimensions(Me,Ae)}enableEditMode(){e(this,f)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,d)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,d)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Z(this,f,!0),this.div.classList.add("disabled"),G(this,I,mt).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(j){this._focusEventsAllowed&&(super.focusin(j),this.enableEditMode())}canvasPointerdown(j){j.button!==0||!this.isInEditMode()||e(this,f)||(this.setInForeground(),j.preventDefault(),j.type!=="mouse"&&this.div.focus(),G(this,Y,Pn).call(this,j.offsetX,j.offsetY))}canvasPointermove(j){j.preventDefault(),G(this,le,Ai).call(this,j.offsetX,j.offsetY)}canvasPointerup(j){j.preventDefault(),G(this,pe,Ei).call(this,j)}canvasPointerleave(j){G(this,pe,Ei).call(this,j)}get isResizable(){return!this.isEmpty()&&e(this,f)}render(){if(this.div)return this.div;let j,ce;this.width&&(j=this.x,ce=this.y),super.render(),g.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(je=>{var Ce;return(Ce=this.div)==null?void 0:Ce.setAttribute("aria-label",je)});const[Me,Ae,ke,Oe]=G(this,ie,Sn).call(this);if(this.setAt(Me,Ae,0,0),this.setDims(ke,Oe),G(this,se,Nt).call(this),this.width){const[je,Ce]=this.parentDimensions;this.setAspectRatio(this.width*je,this.height*Ce),this.setAt(j*je,ce*Ce,this.width*je,this.height*Ce),Z(this,E,!0),G(this,Re,gt).call(this),this.setDims(this.width*je,this.height*Ce),G(this,ne,at).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return G(this,ge,Bt).call(this),this.div}setDimensions(j,ce){const Me=Math.round(j),Ae=Math.round(ce);if(e(this,y)===Me&&e(this,s)===Ae)return;Z(this,y,Me),Z(this,s,Ae),this.canvas.style.visibility="hidden";const[ke,Oe]=this.parentDimensions;this.width=j/ke,this.height=ce/Oe,this.fixAndSetPosition(),e(this,f)&&G(this,de,wi).call(this,j,ce),G(this,Re,gt).call(this),G(this,ne,at).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(j,ce,Me){var re,fe,ye;if(j instanceof V.InkAnnotationElement)return null;const Ae=super.deserialize(j,ce,Me);Ae.thickness=j.thickness,Ae.color=n.Util.makeHexColor(...j.color),Ae.opacity=j.opacity;const[ke,Oe]=Ae.pageDimensions,je=Ae.width*ke,Ce=Ae.height*Oe,qe=Ae.parentScale,Ve=j.thickness/2;Z(Ae,f,!0),Z(Ae,y,Math.round(je)),Z(Ae,s,Math.round(Ce));const{paths:Q,rect:o,rotation:B}=j;for(let{bezier:De}of Q){De=G(re=ae,Ue,xn).call(re,De,o,B);const Ne=[];Ae.paths.push(Ne);let Ie=qe*(De[0]-Ve),Qe=qe*(De[1]-Ve);for(let We=2,ze=De.length;We<ze;We+=6){const Ye=qe*(De[We]-Ve),Je=qe*(De[We+1]-Ve),et=qe*(De[We+2]-Ve),nt=qe*(De[We+3]-Ve),it=qe*(De[We+4]-Ve),st=qe*(De[We+5]-Ve);Ne.push([[Ie,Qe],[Ye,Je],[et,nt],[it,st]]),Ie=it,Qe=st}const He=G(this,me,Mn).call(this,Ne);Ae.bezierPath2D.push(He)}const X=G(fe=Ae,Xe,Ti).call(fe);return Z(Ae,r,Math.max(g.AnnotationEditor.MIN_SIZE,X[2]-X[0])),Z(Ae,l,Math.max(g.AnnotationEditor.MIN_SIZE,X[3]-X[1])),G(ye=Ae,de,wi).call(ye,je,Ce),Ae}serialize(){if(this.isEmpty())return null;const j=this.getRect(0,0),ce=g.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ce,thickness:this.thickness,opacity:this.opacity,paths:G(this,Ge,Fn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,j),pageIndex:this.pageIndex,rect:j,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};l=new WeakMap,r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,y=new WeakMap,s=new WeakMap,i=new WeakMap,S=new WeakSet,vn=function(j){const ce=this.thickness;this.addCommands({cmd:()=>{this.thickness=j,G(this,I,mt).call(this)},undo:()=>{this.thickness=ce,G(this,I,mt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,bn=function(j){const ce=this.color;this.addCommands({cmd:()=>{this.color=j,G(this,ne,at).call(this)},undo:()=>{this.color=ce,G(this,ne,at).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},C=new WeakSet,yn=function(j){j/=100;const ce=this.opacity;this.addCommands({cmd:()=>{this.opacity=j,G(this,ne,at).call(this)},undo:()=>{this.opacity=ce,G(this,ne,at).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ie=new WeakSet,Sn=function(){const{parentRotation:j,parentDimensions:[ce,Me]}=this;switch(j){case 90:return[0,Me,Me,ce];case 180:return[ce,Me,ce,Me];case 270:return[ce,0,Me,ce];default:return[0,0,ce,Me]}},q=new WeakSet,Pi=function(){const{ctx:j,color:ce,opacity:Me,thickness:Ae,parentScale:ke,scaleFactor:Oe}=this;j.lineWidth=Ae*ke/Oe,j.lineCap="round",j.lineJoin="round",j.miterLimit=10,j.strokeStyle=`${ce}${(0,M.opacityToHex)(Me)}`},Y=new WeakSet,Pn=function(j,ce){this.canvas.addEventListener("contextmenu",k.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,x)),this.canvas.addEventListener("pointermove",e(this,R)),this.canvas.addEventListener("pointerup",e(this,b)),this.canvas.removeEventListener("pointerdown",e(this,d)),this.isEditing=!0,e(this,E)||(Z(this,E,!0),G(this,Re,gt).call(this),this.thickness||(this.thickness=ae._defaultThickness),this.color||(this.color=ae._defaultColor||g.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ae._defaultOpacity)),this.currentPath.push([j,ce]),Z(this,w,!1),G(this,q,Pi).call(this),Z(this,i,()=>{G(this,u,wn).call(this),e(this,i)&&window.requestAnimationFrame(e(this,i))}),window.requestAnimationFrame(e(this,i))},le=new WeakSet,Ai=function(j,ce){const[Me,Ae]=this.currentPath.at(-1);if(this.currentPath.length>1&&j===Me&&ce===Ae)return;const ke=this.currentPath;let Oe=e(this,v);if(ke.push([j,ce]),Z(this,w,!0),ke.length<=2){Oe.moveTo(...ke[0]),Oe.lineTo(j,ce);return}ke.length===3&&(Z(this,v,Oe=new Path2D),Oe.moveTo(...ke[0])),G(this,P,Cn).call(this,Oe,...ke.at(-3),...ke.at(-2),j,ce)},Ee=new WeakSet,An=function(){if(this.currentPath.length===0)return;const j=this.currentPath.at(-1);e(this,v).lineTo(...j)},N=new WeakSet,En=function(j,ce){Z(this,i,null),j=Math.min(Math.max(j,0),this.canvas.width),ce=Math.min(Math.max(ce,0),this.canvas.height),G(this,le,Ai).call(this,j,ce),G(this,Ee,An).call(this);let Me;if(this.currentPath.length!==1)Me=G(this,H,Tn).call(this);else{const Ce=[j,ce];Me=[[Ce,Ce.slice(),Ce.slice(),Ce]]}const Ae=e(this,v),ke=this.currentPath;this.currentPath=[],Z(this,v,new Path2D);const Oe=()=>{this.allRawPaths.push(ke),this.paths.push(Me),this.bezierPath2D.push(Ae),this.rebuild()},je=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(G(this,se,Nt).call(this),G(this,ge,Bt).call(this)),G(this,I,mt).call(this))};this.addCommands({cmd:Oe,undo:je,mustExec:!0})},u=new WeakSet,wn=function(){if(!e(this,w))return;Z(this,w,!1);const j=Math.ceil(this.thickness*this.parentScale),ce=this.currentPath.slice(-3),Me=ce.map(Oe=>Oe[0]),Ae=ce.map(Oe=>Oe[1]);Math.min(...Me)-j,Math.max(...Me)+j,Math.min(...Ae)-j,Math.max(...Ae)+j;const{ctx:ke}=this;ke.save(),ke.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Oe of this.bezierPath2D)ke.stroke(Oe);ke.stroke(e(this,v)),ke.restore()},P=new WeakSet,Cn=function(j,ce,Me,Ae,ke,Oe,je){const Ce=(ce+Ae)/2,qe=(Me+ke)/2,Ve=(Ae+Oe)/2,Q=(ke+je)/2;j.bezierCurveTo(Ce+2*(Ae-Ce)/3,qe+2*(ke-qe)/3,Ve+2*(Ae-Ve)/3,Q+2*(ke-Q)/3,Ve,Q)},H=new WeakSet,Tn=function(){const j=this.currentPath;if(j.length<=2)return[[j[0],j[0],j.at(-1),j.at(-1)]];const ce=[];let Me,[Ae,ke]=j[0];for(Me=1;Me<j.length-2;Me++){const[o,B]=j[Me],[X,re]=j[Me+1],fe=(o+X)/2,ye=(B+re)/2,De=[Ae+2*(o-Ae)/3,ke+2*(B-ke)/3],Ne=[fe+2*(o-fe)/3,ye+2*(B-ye)/3];ce.push([[Ae,ke],De,Ne,[fe,ye]]),[Ae,ke]=[fe,ye]}const[Oe,je]=j[Me],[Ce,qe]=j[Me+1],Ve=[Ae+2*(Oe-Ae)/3,ke+2*(je-ke)/3],Q=[Ce+2*(Oe-Ce)/3,qe+2*(je-qe)/3];return ce.push([[Ae,ke],Ve,Q,[Ce,qe]]),ce},ne=new WeakSet,at=function(){if(this.isEmpty()){G(this,te,Vt).call(this);return}G(this,q,Pi).call(this);const{canvas:j,ctx:ce}=this;ce.setTransform(1,0,0,1,0,0),ce.clearRect(0,0,j.width,j.height),G(this,te,Vt).call(this);for(const Me of this.bezierPath2D)ce.stroke(Me)},pe=new WeakSet,Ei=function(j){this.canvas.removeEventListener("pointerleave",e(this,x)),this.canvas.removeEventListener("pointermove",e(this,R)),this.canvas.removeEventListener("pointerup",e(this,b)),this.canvas.addEventListener("pointerdown",e(this,d)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",k.noContextMenu)},10),G(this,N,En).call(this,j.offsetX,j.offsetY),this.addToAnnotationStorage(),this.setInBackground()},se=new WeakSet,Nt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",g.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(j=>{var ce;return(ce=this.canvas)==null?void 0:ce.setAttribute("aria-label",j)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ge=new WeakSet,Bt=function(){Z(this,p,new ResizeObserver(j=>{const ce=j[0].contentRect;ce.width&&ce.height&&this.setDimensions(ce.width,ce.height)})),e(this,p).observe(this.div)},Re=new WeakSet,gt=function(){if(!e(this,E))return;const[j,ce]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*j),this.canvas.height=Math.ceil(this.height*ce),G(this,te,Vt).call(this)},de=new WeakSet,wi=function(j,ce){const Me=G(this,Se,Ut).call(this),Ae=(j-Me)/e(this,r),ke=(ce-Me)/e(this,l);this.scaleFactor=Math.min(Ae,ke)},te=new WeakSet,Vt=function(){const j=G(this,Se,Ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+j,this.translationY*this.scaleFactor+j)},me=new WeakSet,Mn=function(j){const ce=new Path2D;for(let Me=0,Ae=j.length;Me<Ae;Me++){const[ke,Oe,je,Ce]=j[Me];Me===0&&ce.moveTo(...ke),ce.bezierCurveTo(Oe[0],Oe[1],je[0],je[1],Ce[0],Ce[1])}return ce},Le=new WeakSet,Ci=function(j,ce,Me){const[Ae,ke,Oe,je]=ce;switch(Me){case 0:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2)j[Ce]+=Ae,j[Ce+1]=je-j[Ce+1];break;case 90:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2){const Ve=j[Ce];j[Ce]=j[Ce+1]+Ae,j[Ce+1]=Ve+ke}break;case 180:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2)j[Ce]=Oe-j[Ce],j[Ce+1]+=ke;break;case 270:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2){const Ve=j[Ce];j[Ce]=Oe-j[Ce+1],j[Ce+1]=je-Ve}break;default:throw new Error("Invalid rotation")}return j},Ue=new WeakSet,xn=function(j,ce,Me){const[Ae,ke,Oe,je]=ce;switch(Me){case 0:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2)j[Ce]-=Ae,j[Ce+1]=je-j[Ce+1];break;case 90:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2){const Ve=j[Ce];j[Ce]=j[Ce+1]-ke,j[Ce+1]=Ve-Ae}break;case 180:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2)j[Ce]=Oe-j[Ce],j[Ce+1]-=ke;break;case 270:for(let Ce=0,qe=j.length;Ce<qe;Ce+=2){const Ve=j[Ce];j[Ce]=je-j[Ce+1],j[Ce+1]=Oe-Ve}break;default:throw new Error("Invalid rotation")}return j},Ge=new WeakSet,Fn=function(j,ce,Me,Ae){var qe,Ve;const ke=[],Oe=this.thickness/2,je=j*ce+Oe,Ce=j*Me+Oe;for(const Q of this.paths){const o=[],B=[];for(let X=0,re=Q.length;X<re;X++){const[fe,ye,De,Ne]=Q[X],Ie=j*fe[0]+je,Qe=j*fe[1]+Ce,He=j*ye[0]+je,We=j*ye[1]+Ce,ze=j*De[0]+je,Ye=j*De[1]+Ce,Je=j*Ne[0]+je,et=j*Ne[1]+Ce;X===0&&(o.push(Ie,Qe),B.push(Ie,Qe)),o.push(He,We,ze,Ye,Je,et),B.push(He,We),X===re-1&&B.push(Je,et)}ke.push({bezier:G(qe=ae,Le,Ci).call(qe,o,Ae,this.rotation),points:G(Ve=ae,Le,Ci).call(Ve,B,Ae,this.rotation)})}return ke},Xe=new WeakSet,Ti=function(){let j=1/0,ce=-1/0,Me=1/0,Ae=-1/0;for(const ke of this.paths)for(const[Oe,je,Ce,qe]of ke){const Ve=n.Util.bezierBoundingBox(...Oe,...je,...Ce,...qe);j=Math.min(j,Ve[0]),Me=Math.min(Me,Ve[1]),ce=Math.max(ce,Ve[2]),Ae=Math.max(Ae,Ve[3])}return[j,Me,ce,Ae]},Se=new WeakSet,Ut=function(){return e(this,f)?Math.ceil(this.thickness*this.parentScale):0},I=new WeakSet,mt=function(j=!1){if(this.isEmpty())return;if(!e(this,f)){G(this,ne,at).call(this);return}const ce=G(this,Xe,Ti).call(this),Me=G(this,Se,Ut).call(this);Z(this,r,Math.max(g.AnnotationEditor.MIN_SIZE,ce[2]-ce[0])),Z(this,l,Math.max(g.AnnotationEditor.MIN_SIZE,ce[3]-ce[1]));const Ae=Math.ceil(Me+e(this,r)*this.scaleFactor),ke=Math.ceil(Me+e(this,l)*this.scaleFactor),[Oe,je]=this.parentDimensions;this.width=Ae/Oe,this.height=ke/je,this.setAspectRatio(Ae,ke);const Ce=this.translationX,qe=this.translationY;this.translationX=-ce[0],this.translationY=-ce[1],G(this,Re,gt).call(this),G(this,ne,at).call(this),Z(this,y,Ae),Z(this,s,ke),this.setDims(Ae,ke);const Ve=j?Me/this.scaleFactor/2:0;this.translate(Ce-this.translationX-Ve,qe-this.translationY-Ve)},O(ae,me),O(ae,Le),O(ae,Ue),tt(ae,"_defaultColor",null),tt(ae,"_defaultOpacity",1),tt(ae,"_defaultThickness",1),tt(ae,"_type","ink");let A=ae;t.InkEditor=A},(U,t,F)=>{var A,l,r,R,x,b,d,v,f,w,E,At,y,Et,i,Ht,m,Mi,D,Ln,z,Dn,T,xi,J,Wt,W,Rn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=F(1),g=F(4),V=F(6),k=F(29);const $=class $ extends g.AnnotationEditor{constructor(N){super({...N,name:"stampEditor"});O(this,E);O(this,y);O(this,i);O(this,m);O(this,D);O(this,z);O(this,T);O(this,J);O(this,W);O(this,A,null);O(this,l,null);O(this,r,null);O(this,R,null);O(this,x,null);O(this,b,null);O(this,d,null);O(this,v,null);O(this,f,!1);O(this,w,!1);Z(this,R,N.bitmapUrl),Z(this,x,N.bitmapFile)}static initialize(N){g.AnnotationEditor.initialize(N)}static get supportedTypes(){const N=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",N.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(N){return this.supportedTypes.includes(N)}static paste(N,a){a.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:N.getAsFile()})}remove(){var N,a;e(this,l)&&(Z(this,A,null),this._uiManager.imageManager.deleteId(e(this,l)),(N=e(this,b))==null||N.remove(),Z(this,b,null),(a=e(this,d))==null||a.disconnect(),Z(this,d,null)),super.remove()}rebuild(){if(!this.parent){e(this,l)&&G(this,i,Ht).call(this);return}super.rebuild(),this.div!==null&&(e(this,l)&&G(this,i,Ht).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,r)||e(this,A)||e(this,R)||e(this,x))}get isResizable(){return!0}render(){if(this.div)return this.div;let N,a;if(this.width&&(N=this.x,a=this.y),super.render(),this.div.hidden=!0,e(this,A)?G(this,m,Mi).call(this):G(this,i,Ht).call(this),this.width){const[u,c]=this.parentDimensions;this.setAt(N*u,a*c,this.width*u,this.height*c)}return this.div}static deserialize(N,a,u){if(N instanceof k.StampAnnotationElement)return null;const c=super.deserialize(N,a,u),{rect:P,bitmapUrl:L,bitmapId:H,isSvg:K,accessibilityData:ne}=N;H&&u.imageManager.isValidId(H)?Z(c,l,H):Z(c,R,L),Z(c,f,K);const[_e,pe]=c.pageDimensions;return c.width=(P[2]-P[0])/_e,c.height=(P[3]-P[1])/pe,ne&&(c.altTextData=ne),c}serialize(N=!1,a=null){if(this.isEmpty())return null;const u={annotationType:n.AnnotationEditorType.STAMP,bitmapId:e(this,l),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,f),structTreeParentId:this._structTreeParentId};if(N)return u.bitmapUrl=G(this,J,Wt).call(this,!0),u.accessibilityData=this.altTextData,u;const{decorative:c,altText:P}=this.altTextData;if(!c&&P&&(u.accessibilityData={type:"Figure",alt:P}),a===null)return u;a.stamps||(a.stamps=new Map);const L=e(this,f)?(u.rect[2]-u.rect[0])*(u.rect[3]-u.rect[1]):null;if(!a.stamps.has(e(this,l)))a.stamps.set(e(this,l),{area:L,serialized:u}),u.bitmap=G(this,J,Wt).call(this,!1);else if(e(this,f)){const H=a.stamps.get(e(this,l));L>H.area&&(H.area=L,H.serialized.bitmap.close(),H.serialized.bitmap=G(this,J,Wt).call(this,!1))}return u}};A=new WeakMap,l=new WeakMap,r=new WeakMap,R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,E=new WeakSet,At=function(N,a=!1){if(!N){this.remove();return}Z(this,A,N.bitmap),a||(Z(this,l,N.id),Z(this,f,N.isSvg)),G(this,m,Mi).call(this)},y=new WeakSet,Et=function(){Z(this,r,null),this._uiManager.enableWaiting(!1),e(this,b)&&this.div.focus()},i=new WeakSet,Ht=function(){if(e(this,l)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,l)).then(a=>G(this,E,At).call(this,a,!0)).finally(()=>G(this,y,Et).call(this));return}if(e(this,R)){const a=e(this,R);Z(this,R,null),this._uiManager.enableWaiting(!0),Z(this,r,this._uiManager.imageManager.getFromUrl(a).then(u=>G(this,E,At).call(this,u)).finally(()=>G(this,y,Et).call(this)));return}if(e(this,x)){const a=e(this,x);Z(this,x,null),this._uiManager.enableWaiting(!0),Z(this,r,this._uiManager.imageManager.getFromFile(a).then(u=>G(this,E,At).call(this,u)).finally(()=>G(this,y,Et).call(this)));return}const N=document.createElement("input");N.type="file",N.accept=$.supportedTypesStr,Z(this,r,new Promise(a=>{N.addEventListener("change",async()=>{if(!N.files||N.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const u=await this._uiManager.imageManager.getFromFile(N.files[0]);G(this,E,At).call(this,u)}a()}),N.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>G(this,y,Et).call(this))),N.click()},m=new WeakSet,Mi=function(){const{div:N}=this;let{width:a,height:u}=e(this,A);const[c,P]=this.pageDimensions,L=.75;if(this.width)a=this.width*c,u=this.height*P;else if(a>L*c||u>L*P){const _e=Math.min(L*c/a,L*P/u);a*=_e,u*=_e}const[H,K]=this.parentDimensions;this.setDims(a*H/c,u*K/P),this._uiManager.enableWaiting(!1);const ne=Z(this,b,document.createElement("canvas"));N.append(ne),N.hidden=!1,G(this,T,xi).call(this,a,u),G(this,W,Rn).call(this),e(this,w)||(this.parent.addUndoableEditor(this),Z(this,w,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},D=new WeakSet,Ln=function(N,a){var L;const[u,c]=this.parentDimensions;this.width=N/u,this.height=a/c,this.setDims(N,a),(L=this._initialOptions)!=null&&L.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,v)!==null&&clearTimeout(e(this,v)),Z(this,v,setTimeout(()=>{Z(this,v,null),G(this,T,xi).call(this,N,a)},200))},z=new WeakSet,Dn=function(N,a){const{width:u,height:c}=e(this,A);let P=u,L=c,H=e(this,A);for(;P>2*N||L>2*a;){const K=P,ne=L;P>2*N&&(P=P>=16384?Math.floor(P/2)-1:Math.ceil(P/2)),L>2*a&&(L=L>=16384?Math.floor(L/2)-1:Math.ceil(L/2));const _e=new OffscreenCanvas(P,L);_e.getContext("2d").drawImage(H,0,0,K,ne,0,0,P,L),H=_e.transferToImageBitmap()}return H},T=new WeakSet,xi=function(N,a){N=Math.ceil(N),a=Math.ceil(a);const u=e(this,b);if(!u||u.width===N&&u.height===a)return;u.width=N,u.height=a;const c=e(this,f)?e(this,A):G(this,z,Dn).call(this,N,a),P=u.getContext("2d");P.filter=this._uiManager.hcmFilter,P.drawImage(c,0,0,c.width,c.height,0,0,N,a)},J=new WeakSet,Wt=function(N){if(N){if(e(this,f)){const c=this._uiManager.imageManager.getSvgUrl(e(this,l));if(c)return c}const a=document.createElement("canvas");return{width:a.width,height:a.height}=e(this,A),a.getContext("2d").drawImage(e(this,A),0,0),a.toDataURL()}if(e(this,f)){const[a,u]=this.pageDimensions,c=Math.round(this.width*a*V.PixelsPerInch.PDF_TO_CSS_UNITS),P=Math.round(this.height*u*V.PixelsPerInch.PDF_TO_CSS_UNITS),L=new OffscreenCanvas(c,P);return L.getContext("2d").drawImage(e(this,A),0,0,e(this,A).width,e(this,A).height,0,0,c,P),L.transferToImageBitmap()}return structuredClone(e(this,A))},W=new WeakSet,Rn=function(){Z(this,d,new ResizeObserver(N=>{const a=N[0].contentRect;a.width&&a.height&&G(this,D,Ln).call(this,a.width,a.height)})),e(this,d).observe(this.div)},tt($,"_type","stamp");let M=$;t.StampEditor=M}],__webpack_module_cache__={};function __w_pdfjs_require__(U){var t=__webpack_module_cache__[U];if(t!==void 0)return t.exports;var F=__webpack_module_cache__[U]={exports:{}};return __webpack_modules__[U](F,F.exports,__w_pdfjs_require__),F.exports}var __webpack_exports__={};return(()=>{var U=__webpack_exports__;Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(U,"AnnotationEditorLayer",{enumerable:!0,get:function(){return V.AnnotationEditorLayer}}),Object.defineProperty(U,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(U,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(U,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return k.AnnotationEditorUIManager}}),Object.defineProperty(U,"AnnotationLayer",{enumerable:!0,get:function(){return M.AnnotationLayer}}),Object.defineProperty(U,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(U,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(U,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(U,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(U,"GlobalWorkerOptions",{enumerable:!0,get:function(){return A.GlobalWorkerOptions}}),Object.defineProperty(U,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(U,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(U,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(U,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(U,"PDFDataRangeTransport",{enumerable:!0,get:function(){return F.PDFDataRangeTransport}}),Object.defineProperty(U,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(U,"PDFWorker",{enumerable:!0,get:function(){return F.PDFWorker}}),Object.defineProperty(U,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(U,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(U,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(U,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(U,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(U,"SVGGraphics",{enumerable:!0,get:function(){return F.SVGGraphics}}),Object.defineProperty(U,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(U,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(U,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(U,"XfaLayer",{enumerable:!0,get:function(){return l.XfaLayer}}),Object.defineProperty(U,"build",{enumerable:!0,get:function(){return F.build}}),Object.defineProperty(U,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(U,"getDocument",{enumerable:!0,get:function(){return F.getDocument}}),Object.defineProperty(U,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(U,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(U,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(U,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(U,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(U,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(U,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(U,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(U,"renderTextLayer",{enumerable:!0,get:function(){return g.renderTextLayer}}),Object.defineProperty(U,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(U,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(U,"updateTextLayer",{enumerable:!0,get:function(){return g.updateTextLayer}}),Object.defineProperty(U,"version",{enumerable:!0,get:function(){return F.version}});var t=__w_pdfjs_require__(1),F=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),g=__w_pdfjs_require__(26),V=__w_pdfjs_require__(27),k=__w_pdfjs_require__(5),M=__w_pdfjs_require__(29),A=__w_pdfjs_require__(14),l=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,pdf_viewer={exports:{}};(function(U,t){(function(n,g){U.exports=n.pdfjsViewer=g()})(globalThis,()=>(()=>{var F=[,(k,M,A)=>{var J,Y,W,le,kn,Ee,Fi,N,Li,u,In,P,On,H,Nn,ne,Di,pe,Bn,se,Vn,ge,jt,Re,wt,de,_t,te,Un,me,Ri,Le,ki,Ue,Gt,Ge,Hn,Xe,Ii,Se,Oi,I,Ct;Object.defineProperty(M,"__esModule",{value:!0}),M.PDFFindController=M.FindState=void 0;var l=A(2),r=A(3),R=A(4);const x={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};M.FindState=x;const b=250,d=-50,v=-400,f={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},w=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let E;const p=new RegExp("\\p{M}+","gu"),y=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),s=new RegExp("([^\\p{M}])\\p{M}*$","u"),i=new RegExp("^\\p{M}*([^\\p{M}])","u"),S=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,m=new Map,h="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",D=new Map;let C=null,z=null;function ie(ae){const ue=[];let ve;for(;(ve=S.exec(ae))!==null;){let{index:Q}=ve;for(const o of ve[0]){let B=m.get(o);B||(B=o.normalize("NFD").length,m.set(o,B)),ue.push([B,Q++])}}let j;if(ue.length===0&&C)j=C;else if(ue.length>0&&z)j=z;else{const Q=Object.keys(f).join(""),o=(0,r.getNormalizeWithNFKC)(),re=`([${Q}])|([${o}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;ue.length===0?j=C=new RegExp(re+"|(\\u0000)","gum"):j=z=new RegExp(re+`|(${h})`,"gum")}const ce=[];for(;(ve=p.exec(ae))!==null;)ce.push([ve[0].length,ve.index]);let Me=ae.normalize("NFD");const Ae=[[0,0]];let ke=0,Oe=0,je=0,Ce=0,qe=0,Ve=!1;return Me=Me.replace(j,(Q,o,B,X,re,fe,ye,De,Ne,Ie)=>{var Qe,He,We;if(Ie-=Ce,o){const ze=f[o],Ye=ze.length;for(let Je=1;Je<Ye;Je++)Ae.push([Ie-je+Je,je-Je]);return je-=Ye-1,ze}if(B){let ze=D.get(B);ze||(ze=B.normalize("NFKC"),D.set(B,ze));const Ye=ze.length;for(let Je=1;Je<Ye;Je++)Ae.push([Ie-je+Je,je-Je]);return je-=Ye-1,ze}if(X)return Ve=!0,Ie+qe===((Qe=ce[ke])==null?void 0:Qe[1])?++ke:(Ae.push([Ie-1-je+1,je-1]),je-=1,Ce+=1),Ae.push([Ie-je+1,je]),Ce+=1,qe+=1,X.charAt(0);if(re){const ze=re.endsWith(`
`),Ye=ze?re.length-2:re.length;Ve=!0;let Je=Ye;Ie+qe===((He=ce[ke])==null?void 0:He[1])&&(Je-=ce[ke][0],++ke);for(let et=1;et<=Je;et++)Ae.push([Ie-1-je+et,je-et]);return je-=Je,Ce+=Je,ze?(Ie+=Ye-1,Ae.push([Ie-je+1,1+je]),je+=1,Ce+=1,qe+=1,re.slice(0,Ye)):re}if(fe){const ze=fe.length-2;return Ae.push([Ie-je+ze,1+je]),je+=1,Ce+=1,qe+=1,fe.slice(0,-2)}if(ye){const ze=ye.length-1;return Ae.push([Ie-je+ze,je]),Ce+=1,qe+=1,ye.slice(0,-1)}if(De)return Ae.push([Ie-je+1,je-1]),je-=1,Ce+=1,qe+=1," ";if(Ie+qe===((We=ue[Oe])==null?void 0:We[1])){const ze=ue[Oe][0]-1;++Oe;for(let Ye=1;Ye<=ze;Ye++)Ae.push([Ie-(je-Ye),je-Ye]);je-=ze,Ce+=ze}return Ne}),Ae.push([Me.length,je]),[Me,Ae,Ve]}function T(ae,ue,ve){if(!ae)return[ue,ve];const j=ue,ce=ue+ve-1;let Me=(0,l.binarySearchFirstItem)(ae,Ce=>Ce[0]>=j);ae[Me][0]>j&&--Me;let Ae=(0,l.binarySearchFirstItem)(ae,Ce=>Ce[0]>=ce,Me);ae[Ae][0]>ce&&--Ae;const ke=j+ae[Me][1],je=ce+ae[Ae][1]+1-ke;return[ke,je]}class q{constructor({linkService:ue,eventBus:ve,updateMatchesCountOnProgress:j=!0}){O(this,le);O(this,Ee);O(this,N);O(this,u);O(this,P);O(this,H);O(this,ne);O(this,pe);O(this,se);O(this,ge);O(this,Re);O(this,de);O(this,te);O(this,me);O(this,Le);O(this,Ue);O(this,Ge);O(this,Xe);O(this,Se);O(this,I);O(this,J,null);O(this,Y,!0);O(this,W,0);this._linkService=ue,this._eventBus=ve,Z(this,Y,j),this.onIsPageVisible=null,G(this,Ee,Fi).call(this),ve._on("find",G(this,le,kn).bind(this)),ve._on("findbarclose",G(this,Ge,Hn).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return e(this,J)}setDocument(ue){this._pdfDocument&&G(this,Ee,Fi).call(this),ue&&(this._pdfDocument=ue,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ue=null,selectedLeft:ve=0,pageIndex:j=-1,matchIndex:ce=-1}){if(!this._scrollMatches||!ue)return;if(ce===-1||ce!==this._selected.matchIdx)return;if(j===-1||j!==this._selected.pageIdx)return;this._scrollMatches=!1;const Me={top:d,left:ve+v};(0,l.scrollIntoView)(ue,Me,!0)}}J=new WeakMap,Y=new WeakMap,W=new WeakMap,le=new WeakSet,kn=function(ue){if(!ue)return;ue.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof ue.query=="string"&&(ue.query=ue.query.match(/\S+/g)));const ve=this._pdfDocument,{type:j}=ue;(e(this,J)===null||G(this,u,In).call(this,ue))&&(this._dirtyMatch=!0),Z(this,J,ue),j!=="highlightallchange"&&G(this,I,Ct).call(this,x.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ve&&this._pdfDocument!==ve)return;G(this,se,Vn).call(this);const ce=!this._highlightMatches,Me=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),j?this._dirtyMatch?G(this,de,_t).call(this):j==="again"?(G(this,de,_t).call(this),ce&&e(this,J).highlightAll&&G(this,Re,wt).call(this)):j==="highlightallchange"?(Me?G(this,de,_t).call(this):this._highlightMatches=!0,G(this,Re,wt).call(this)):G(this,de,_t).call(this):this._findTimeout=setTimeout(()=>{G(this,de,_t).call(this),this._findTimeout=null},b)})},Ee=new WeakSet,Fi=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],Z(this,W,0),Z(this,J,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new R.PromiseCapability},N=new WeakSet,Li=function(){const{query:ue}=e(this,J);return typeof ue=="string"?(ue!==this._rawQuery&&(this._rawQuery=ue,[this._normalizedQuery]=ie(ue)),this._normalizedQuery):(ue||[]).filter(ve=>!!ve).map(ve=>ie(ve)[0])},u=new WeakSet,In=function(ue){var Ae;const ve=ue.query,j=e(this,J).query,ce=typeof ve;if(ce!==typeof j)return!0;if(ce==="string"){if(ve!==j)return!0}else if(JSON.stringify(ve)!==JSON.stringify(j))return!0;switch(ue.type){case"again":const ke=this._selected.pageIdx+1,Oe=this._linkService;return ke>=1&&ke<=Oe.pagesCount&&ke!==Oe.page&&!(((Ae=this.onIsPageVisible)==null?void 0:Ae.call(this,ke))??!0);case"highlightallchange":return!1}return!0},P=new WeakSet,On=function(ue,ve,j){let ce=ue.slice(0,ve).match(s);if(ce){const Me=ue.charCodeAt(ve),Ae=ce[1].charCodeAt(0);if((0,r.getCharacterType)(Me)===(0,r.getCharacterType)(Ae))return!1}if(ce=ue.slice(ve+j).match(i),ce){const Me=ue.charCodeAt(ve+j-1),Ae=ce[1].charCodeAt(0);if((0,r.getCharacterType)(Me)===(0,r.getCharacterType)(Ae))return!1}return!0},H=new WeakSet,Nn=function(ue,ve,j,ce){const Me=this._pageMatches[j]=[],Ae=this._pageMatchesLength[j]=[];if(!ue)return;const ke=this._pageDiffs[j];let Oe;for(;(Oe=ue.exec(ce))!==null;){if(ve&&!G(this,P,On).call(this,ce,Oe.index,Oe[0].length))continue;const[je,Ce]=T(ke,Oe.index,Oe[0].length);Ce&&(Me.push(je),Ae.push(Ce))}},ne=new WeakSet,Di=function(ue,ve){const{matchDiacritics:j}=e(this,J);let ce=!1;ue=ue.replaceAll(y,(Ae,ke,Oe,je,Ce,qe)=>ke?`[ ]*\\${ke}[ ]*`:Oe?`[ ]*${Oe}[ ]*`:je?"[ ]+":j?Ce||qe:Ce?w.has(Ce.charCodeAt(0))?Ce:"":ve?(ce=!0,`${qe}\\p{M}*`):qe);const Me="[ ]*";return ue.endsWith(Me)&&(ue=ue.slice(0,ue.length-Me.length)),j&&ve&&(E||(E=String.fromCharCode(...w)),ce=!0,ue=`${ue}(?=[${E}]|[^\\p{M}]|$)`),[ce,ue]},pe=new WeakSet,Bn=function(ue){let ve=e(this,N,Li);if(ve.length===0)return;const{caseSensitive:j,entireWord:ce}=e(this,J),Me=this._pageContents[ue],Ae=this._hasDiacritics[ue];let ke=!1;typeof ve=="string"?[ke,ve]=G(this,ne,Di).call(this,ve,Ae):ve=ve.sort().reverse().map(Ce=>{const[qe,Ve]=G(this,ne,Di).call(this,Ce,Ae);return ke||(ke=qe),`(${Ve})`}).join("|");const Oe=`g${ke?"u":""}${j?"":"i"}`;ve=ve?new RegExp(ve,Oe):null,G(this,H,Nn).call(this,ve,ce,ue,Me),e(this,J).highlightAll&&G(this,ge,jt).call(this,ue),this._resumePageIdx===ue&&(this._resumePageIdx=null,G(this,me,Ri).call(this));const je=this._pageMatches[ue].length;this._matchesCountTotal+=je,e(this,Y)?je>0&&G(this,Se,Oi).call(this):++dt(this,W)._===this._linkService.pagesCount&&G(this,Se,Oi).call(this)},se=new WeakSet,Vn=function(){if(this._extractTextPromises.length>0)return;let ue=Promise.resolve();const ve={disableNormalization:!0};for(let j=0,ce=this._linkService.pagesCount;j<ce;j++){const Me=new R.PromiseCapability;this._extractTextPromises[j]=Me.promise,ue=ue.then(()=>this._pdfDocument.getPage(j+1).then(Ae=>Ae.getTextContent(ve)).then(Ae=>{const ke=[];for(const Oe of Ae.items)ke.push(Oe.str),Oe.hasEOL&&ke.push(`
`);[this._pageContents[j],this._pageDiffs[j],this._hasDiacritics[j]]=ie(ke.join("")),Me.resolve()},Ae=>{console.error(`Unable to get text content for page ${j+1}`,Ae),this._pageContents[j]="",this._pageDiffs[j]=null,this._hasDiacritics[j]=!1,Me.resolve()}))}},ge=new WeakSet,jt=function(ue){this._scrollMatches&&this._selected.pageIdx===ue&&(this._linkService.page=ue+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ue})},Re=new WeakSet,wt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},de=new WeakSet,_t=function(){const ue=e(this,J).findPrevious,ve=this._linkService.page-1,j=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ve,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,Z(this,W,0),this._matchesCountTotal=0,G(this,Re,wt).call(this);for(let Ae=0;Ae<j;Ae++)this._pendingFindMatches.has(Ae)||(this._pendingFindMatches.add(Ae),this._extractTextPromises[Ae].then(()=>{this._pendingFindMatches.delete(Ae),G(this,pe,Bn).call(this,Ae)}))}if(e(this,N,Li).length===0){G(this,I,Ct).call(this,x.FOUND);return}if(this._resumePageIdx)return;const Me=this._offset;if(this._pagesToSearch=j,Me.matchIdx!==null){const Ae=this._pageMatches[Me.pageIdx].length;if(!ue&&Me.matchIdx+1<Ae||ue&&Me.matchIdx>0){Me.matchIdx=ue?Me.matchIdx-1:Me.matchIdx+1,G(this,Ue,Gt).call(this,!0);return}G(this,Le,ki).call(this,ue)}G(this,me,Ri).call(this)},te=new WeakSet,Un=function(ue){const ve=this._offset,j=ue.length,ce=e(this,J).findPrevious;return j?(ve.matchIdx=ce?j-1:0,G(this,Ue,Gt).call(this,!0),!0):(G(this,Le,ki).call(this,ce),ve.wrapped&&(ve.matchIdx=null,this._pagesToSearch<0)?(G(this,Ue,Gt).call(this,!1),!0):!1)},me=new WeakSet,Ri=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let ue=null;do{const ve=this._offset.pageIdx;if(ue=this._pageMatches[ve],!ue){this._resumePageIdx=ve;break}}while(!G(this,te,Un).call(this,ue))},Le=new WeakSet,ki=function(ue){const ve=this._offset,j=this._linkService.pagesCount;ve.pageIdx=ue?ve.pageIdx-1:ve.pageIdx+1,ve.matchIdx=null,this._pagesToSearch--,(ve.pageIdx>=j||ve.pageIdx<0)&&(ve.pageIdx=ue?j-1:0,ve.wrapped=!0)},Ue=new WeakSet,Gt=function(ue=!1){let ve=x.NOT_FOUND;const j=this._offset.wrapped;if(this._offset.wrapped=!1,ue){const ce=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ve=j?x.WRAPPED:x.FOUND,ce!==-1&&ce!==this._selected.pageIdx&&G(this,ge,jt).call(this,ce)}G(this,I,Ct).call(this,ve,e(this,J).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,G(this,ge,jt).call(this,this._selected.pageIdx))},Ge=new WeakSet,Hn=function(ue){const ve=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ve&&this._pdfDocument!==ve||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),G(this,I,Ct).call(this,x.FOUND),this._highlightMatches=!1,G(this,Re,wt).call(this))})},Xe=new WeakSet,Ii=function(){var Me;const{pageIdx:ue,matchIdx:ve}=this._selected;let j=0,ce=this._matchesCountTotal;if(ve!==-1){for(let Ae=0;Ae<ue;Ae++)j+=((Me=this._pageMatches[Ae])==null?void 0:Me.length)||0;j+=ve+1}return(j<1||j>ce)&&(j=ce=0),{current:j,total:ce}},Se=new WeakSet,Oi=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:G(this,Xe,Ii).call(this)})},I=new WeakSet,Ct=function(ue,ve=!1){var j;!e(this,Y)&&(e(this,W)!==this._linkService.pagesCount||ue===x.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ue,previous:ve,matchesCount:G(this,Xe,Ii).call(this),rawQuery:((j=e(this,J))==null?void 0:j.query)??null})},M.PDFFindController=q},(k,M)=>{var be,ge,Fe,Re,xe;Object.defineProperty(M,"__esModule",{value:!0}),M.animationStarted=M.VERTICAL_PADDING=M.UNKNOWN_SCALE=M.TextLayerMode=M.SpreadMode=M.SidebarView=M.ScrollMode=M.SCROLLBAR_PADDING=M.RenderingStates=M.ProgressBar=M.PresentationModeState=M.OutputScale=M.MIN_SCALE=M.MAX_SCALE=M.MAX_AUTO_SCALE=M.DEFAULT_SCALE_VALUE=M.DEFAULT_SCALE_DELTA=M.DEFAULT_SCALE=M.CursorTool=M.AutoPrintRegExp=void 0,M.apiPageLayoutToViewerModes=_e,M.apiPageModeToSidebarView=pe,M.approximateFraction=J,M.backtrackBeforeAllVisibleElements=le,M.binarySearchFirstItem=q,M.docStyle=void 0,M.getActiveOrFocusedElement=ne,M.getPageSizeInches=W,M.getVisibleElements=$,M.isPortraitOrientation=c,M.isValidRotation=N,M.isValidScrollMode=a,M.isValidSpreadMode=u,M.normalizeWheelEventDelta=we,M.normalizeWheelEventDirection=Ee,M.parseQueryString=z,M.removeNullCharacters=T,M.roundToDivide=Y,M.scrollIntoView=D,M.toggleCheckedBtn=Pe,M.toggleExpandedBtn=se,M.watchScroll=C;const A="auto";M.DEFAULT_SCALE_VALUE=A;const l=1;M.DEFAULT_SCALE=l;const r=1.1;M.DEFAULT_SCALE_DELTA=r;const R=.1;M.MIN_SCALE=R;const x=10;M.MAX_SCALE=x;const b=0;M.UNKNOWN_SCALE=b;const d=1.25;M.MAX_AUTO_SCALE=d;const v=40;M.SCROLLBAR_PADDING=v;const f=5;M.VERTICAL_PADDING=f;const w={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};M.RenderingStates=w;const E={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};M.PresentationModeState=E;const p={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};M.SidebarView=p;const y={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};M.TextLayerMode=y;const s={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};M.ScrollMode=s;const i={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};M.SpreadMode=i;const S={SELECT:0,HAND:1,ZOOM:2};M.CursorTool=S;const m=/\bprint\s*\(/;M.AutoPrintRegExp=m;class h{constructor(){const oe=window.devicePixelRatio||1;this.sx=oe,this.sy=oe}get scaled(){return this.sx!==1||this.sy!==1}}M.OutputScale=h;function D(de,oe,te=!1){let ee=de.offsetParent;if(!ee){console.error("offsetParent is not set -- cannot scroll");return}let me=de.offsetTop+de.clientTop,Te=de.offsetLeft+de.clientLeft;for(;ee.clientHeight===ee.scrollHeight&&ee.clientWidth===ee.scrollWidth||te&&(ee.classList.contains("markedContent")||getComputedStyle(ee).overflow==="hidden");)if(me+=ee.offsetTop,Te+=ee.offsetLeft,ee=ee.offsetParent,!ee)return;oe&&(oe.top!==void 0&&(me+=oe.top),oe.left!==void 0&&(Te+=oe.left,ee.scrollLeft=Te)),ee.scrollTop=me}function C(de,oe){const te=function(Te){me||(me=window.requestAnimationFrame(function(){me=null;const Be=de.scrollLeft,Ue=ee.lastX;Be!==Ue&&(ee.right=Be>Ue),ee.lastX=Be;const $e=de.scrollTop,Ge=ee.lastY;$e!==Ge&&(ee.down=$e>Ge),ee.lastY=$e,oe(ee)}))},ee={right:!0,down:!0,lastX:de.scrollLeft,lastY:de.scrollTop,_eventHandler:te};let me=null;return de.addEventListener("scroll",te,!0),ee}function z(de){const oe=new Map;for(const[te,ee]of new URLSearchParams(de))oe.set(te.toLowerCase(),ee);return oe}const ie=/[\x01-\x1F]/g;function T(de,oe=!1){return typeof de!="string"?(console.error("The argument must be a string."),de):(oe&&(de=de.replaceAll(ie," ")),de.replaceAll("\0",""))}function q(de,oe,te=0){let ee=te,me=de.length-1;if(me<0||!oe(de[me]))return de.length;if(oe(de[ee]))return ee;for(;ee<me;){const Te=ee+me>>1,Le=de[Te];oe(Le)?me=Te:ee=Te+1}return ee}function J(de){if(Math.floor(de)===de)return[de,1];const oe=1/de,te=8;if(oe>te)return[1,te];if(Math.floor(oe)===oe)return[1,oe];const ee=de>1?oe:de;let me=0,Te=1,Le=1,Be=1;for(;;){const $e=me+Le,Ge=Te+Be;if(Ge>te)break;ee<=$e/Ge?(Le=$e,Be=Ge):(me=$e,Te=Ge)}let Ue;return ee-me/Te<Le/Be-ee?Ue=ee===de?[me,Te]:[Te,me]:Ue=ee===de?[Le,Be]:[Be,Le],Ue}function Y(de,oe){const te=de%oe;return te===0?de:Math.round(de-te+oe)}function W({view:de,userUnit:oe,rotate:te}){const[ee,me,Te,Le]=de,Be=te%180!==0,Ue=(Te-ee)/72*oe,$e=(Le-me)/72*oe;return{width:Be?$e:Ue,height:Be?Ue:$e}}function le(de,oe,te){if(de<2)return de;let ee=oe[de].div,me=ee.offsetTop+ee.clientTop;me>=te&&(ee=oe[de-1].div,me=ee.offsetTop+ee.clientTop);for(let Te=de-2;Te>=0&&(ee=oe[Te].div,!(ee.offsetTop+ee.clientTop+ee.clientHeight<=me));--Te)de=Te;return de}function $({scrollEl:de,views:oe,sortByVisibility:te=!1,horizontal:ee=!1,rtl:me=!1}){const Te=de.scrollTop,Le=Te+de.clientHeight,Be=de.scrollLeft,Ue=Be+de.clientWidth;function $e(ae){const ue=ae.div;return ue.offsetTop+ue.clientTop+ue.clientHeight>Te}function Ge(ae){const ue=ae.div,ve=ue.offsetLeft+ue.clientLeft,j=ve+ue.clientWidth;return me?ve<Ue:j>Be}const Ke=[],Xe=new Set,Ze=oe.length;let Se=q(oe,ee?Ge:$e);Se>0&&Se<Ze&&!ee&&(Se=le(Se,oe,Te));let _=ee?Ue:-1;for(let ae=Se;ae<Ze;ae++){const ue=oe[ae],ve=ue.div,j=ve.offsetLeft+ve.clientLeft,ce=ve.offsetTop+ve.clientTop,Me=ve.clientWidth,Ae=ve.clientHeight,ke=j+Me,Oe=ce+Ae;if(_===-1)Oe>=Le&&(_=Oe);else if((ee?j:ce)>_)break;if(Oe<=Te||ce>=Le||ke<=Be||j>=Ue)continue;const je=Math.max(0,Te-ce)+Math.max(0,Oe-Le),Ce=Math.max(0,Be-j)+Math.max(0,ke-Ue),qe=(Ae-je)/Ae,Ve=(Me-Ce)/Me,Q=qe*Ve*100|0;Ke.push({id:ue.id,x:j,y:ce,view:ue,percent:Q,widthPercent:Ve*100|0}),Xe.add(ue.id)}const I=Ke[0],he=Ke.at(-1);return te&&Ke.sort(function(ae,ue){const ve=ae.percent-ue.percent;return Math.abs(ve)>.001?-ve:ae.id-ue.id}),{first:I,last:he,views:Ke,ids:Xe}}function Ee(de){let oe=Math.hypot(de.deltaX,de.deltaY);const te=Math.atan2(de.deltaY,de.deltaX);return-.25*Math.PI<te&&te<.75*Math.PI&&(oe=-oe),oe}function we(de){const oe=de.deltaMode;let te=Ee(de);const ee=30,me=30;return oe===WheelEvent.DOM_DELTA_PIXEL?te/=ee*me:oe===WheelEvent.DOM_DELTA_LINE&&(te/=me),te}function N(de){return Number.isInteger(de)&&de%90===0}function a(de){return Number.isInteger(de)&&Object.values(s).includes(de)&&de!==s.UNKNOWN}function u(de){return Number.isInteger(de)&&Object.values(i).includes(de)&&de!==i.UNKNOWN}function c(de){return de.width<=de.height}const P=new Promise(function(de){window.requestAnimationFrame(de)});M.animationStarted=P;const L=document.documentElement.style;M.docStyle=L;function H(de,oe,te){return Math.min(Math.max(de,oe),te)}class K{constructor(oe){O(this,be,null);O(this,ge,null);O(this,Fe,0);O(this,Re,null);O(this,xe,!0);Z(this,be,oe.classList),Z(this,Re,oe.style)}get percent(){return e(this,Fe)}set percent(oe){if(Z(this,Fe,H(oe,0,100)),isNaN(oe)){e(this,be).add("indeterminate");return}e(this,be).remove("indeterminate"),e(this,Re).setProperty("--progressBar-percent",`${e(this,Fe)}%`)}setWidth(oe){if(!oe)return;const ee=oe.parentNode.offsetWidth-oe.offsetWidth;ee>0&&e(this,Re).setProperty("--progressBar-end-offset",`${ee}px`)}setDisableAutoFetch(oe=5e3){isNaN(e(this,Fe))||(e(this,ge)&&clearTimeout(e(this,ge)),this.show(),Z(this,ge,setTimeout(()=>{Z(this,ge,null),this.hide()},oe)))}hide(){e(this,xe)&&(Z(this,xe,!1),e(this,be).add("hidden"))}show(){e(this,xe)||(Z(this,xe,!0),e(this,be).remove("hidden"))}}be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,Re=new WeakMap,xe=new WeakMap,M.ProgressBar=K;function ne(){let de=document,oe=de.activeElement||de.querySelector(":focus");for(;oe!=null&&oe.shadowRoot;)de=oe.shadowRoot,oe=de.activeElement||de.querySelector(":focus");return oe}function _e(de){let oe=s.VERTICAL,te=i.NONE;switch(de){case"SinglePage":oe=s.PAGE;break;case"OneColumn":break;case"TwoPageLeft":oe=s.PAGE;case"TwoColumnLeft":te=i.ODD;break;case"TwoPageRight":oe=s.PAGE;case"TwoColumnRight":te=i.EVEN;break}return{scrollMode:oe,spreadMode:te}}function pe(de){switch(de){case"UseNone":return p.NONE;case"UseThumbs":return p.THUMBS;case"UseOutlines":return p.OUTLINE;case"UseAttachments":return p.ATTACHMENTS;case"UseOC":return p.LAYERS}return p.NONE}function Pe(de,oe,te=null){de.classList.toggle("toggled",oe),de.setAttribute("aria-checked",oe),te==null||te.classList.toggle("hidden",!oe)}function se(de,oe,te=null){de.classList.toggle("toggled",oe),de.setAttribute("aria-expanded",oe),te==null||te.classList.toggle("hidden",!oe)}},(k,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.CharacterType=void 0,M.getCharacterType=p,M.getNormalizeWithNFKC=s;const A={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};M.CharacterType=A;function l(i){return i<11904}function r(i){return(i&65408)===0}function R(i){return i>=97&&i<=122||i>=65&&i<=90}function x(i){return i>=48&&i<=57}function b(i){return i===32||i===9||i===13||i===10}function d(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}function v(i){return i>=12448&&i<=12543}function f(i){return i>=12352&&i<=12447}function w(i){return i>=65376&&i<=65439}function E(i){return(i&65408)===3584}function p(i){return l(i)?r(i)?b(i)?A.SPACE:R(i)||x(i)||i===95?A.ALPHA_LETTER:A.PUNCT:E(i)?A.THAI_LETTER:i===160?A.SPACE:A.ALPHA_LETTER:d(i)?A.HAN_LETTER:v(i)?A.KATAKANA_LETTER:f(i)?A.HIRAGANA_LETTER:w(i)?A.HALFWIDTH_KATAKANA_LETTER:A.ALPHA_LETTER}let y;function s(){return y||(y=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),y}},k=>{k.exports=globalThis.pdfjsLib},(k,M,A)=>{var v,f,Ni,E,Wn;Object.defineProperty(M,"__esModule",{value:!0}),M.SimpleLinkService=M.PDFLinkService=M.LinkTarget=void 0;var l=A(2);const r="noopener noreferrer nofollow",R={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};M.LinkTarget=R;function x(s,{url:i,target:S,rel:m,enabled:h=!0}={}){if(!i||typeof i!="string")throw new Error('A valid "url" parameter must provided.');h?s.href=s.title=i:(s.href="",s.title=`Disabled: ${i}`,s.onclick=()=>!1);let D="";switch(S){case R.NONE:break;case R.SELF:D="_self";break;case R.BLANK:D="_blank";break;case R.PARENT:D="_parent";break;case R.TOP:D="_top";break}s.target=D,s.rel=typeof m=="string"?m:r}const y=class y{constructor({eventBus:i,externalLinkTarget:S=null,externalLinkRel:m=null,ignoreDestinationZoom:h=!1}={}){O(this,f);O(this,v,new Map);this.eventBus=i,this.externalLinkTarget=S,this.externalLinkRel=m,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=h,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(i,S=null){this.baseUrl=S,this.pdfDocument=i,e(this,v).clear()}setViewer(i){this.pdfViewer=i}setHistory(i){this.pdfHistory=i}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(i){this.pdfViewer.currentPageNumber=i}get rotation(){return this.pdfViewer.pagesRotation}set rotation(i){this.pdfViewer.pagesRotation=i}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(i){if(!this.pdfDocument)return;let S,m;if(typeof i=="string"?(S=i,m=await this.pdfDocument.getDestination(i)):(S=null,m=await i),!Array.isArray(m)){console.error(`PDFLinkService.goToDestination: "${m}" is not a valid destination array, for dest="${i}".`);return}G(this,f,Ni).call(this,i,S,m)}goToPage(i){if(!this.pdfDocument)return;const S=typeof i=="string"&&this.pdfViewer.pageLabelToPageNumber(i)||i|0;if(!(Number.isInteger(S)&&S>0&&S<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${i}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(S)),this.pdfViewer.scrollPageIntoView({pageNumber:S})}addLinkAttributes(i,S,m=!1){x(i,{url:S,target:m?R.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(i){if(typeof i=="string"){if(i.length>0)return this.getAnchorUrl("#"+escape(i))}else if(Array.isArray(i)){const S=JSON.stringify(i);if(S.length>0)return this.getAnchorUrl("#"+escape(S))}return this.getAnchorUrl("")}getAnchorUrl(i){return this.baseUrl?this.baseUrl+i:i}setHash(i){var h;if(!this.pdfDocument)return;let S,m;if(i.includes("=")){const D=(0,l.parseQueryString)(i);if(D.has("search")){const C=D.get("search").replaceAll('"',""),z=D.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:z?C:C.match(/\S+/g)})}if(D.has("page")&&(S=D.get("page")|0||1),D.has("zoom")){const C=D.get("zoom").split(","),z=C[0],ie=parseFloat(z);z.includes("Fit")?z==="Fit"||z==="FitB"?m=[null,{name:z}]:z==="FitH"||z==="FitBH"||z==="FitV"||z==="FitBV"?m=[null,{name:z},C.length>1?C[1]|0:null]:z==="FitR"?C.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):m=[null,{name:z},C[1]|0,C[2]|0,C[3]|0,C[4]|0]:console.error(`PDFLinkService.setHash: "${z}" is not a valid zoom value.`):m=[null,{name:"XYZ"},C.length>1?C[1]|0:null,C.length>2?C[2]|0:null,ie?ie/100:z]}m?this.pdfViewer.scrollPageIntoView({pageNumber:S||this.page,destArray:m,allowNegativeOffset:!0}):S&&(this.page=S),D.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:D.get("pagemode")}),D.has("nameddest")&&this.goToDestination(D.get("nameddest"))}else{m=unescape(i);try{m=JSON.parse(m),Array.isArray(m)||(m=m.toString())}catch{}if(typeof m=="string"||G(h=y,E,Wn).call(h,m)){this.goToDestination(m);return}console.error(`PDFLinkService.setHash: "${unescape(i)}" is not a valid destination.`)}}executeNamedAction(i){var S,m;switch(i){case"GoBack":(S=this.pdfHistory)==null||S.back();break;case"GoForward":(m=this.pdfHistory)==null||m.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:i})}async executeSetOCGState(i){const S=this.pdfDocument,m=await this.pdfViewer.optionalContentConfigPromise;if(S!==this.pdfDocument)return;let h;for(const D of i.state){switch(D){case"ON":case"OFF":case"Toggle":h=D;continue}switch(h){case"ON":m.setVisibility(D,!0);break;case"OFF":m.setVisibility(D,!1);break;case"Toggle":const C=m.getGroup(D);C&&m.setVisibility(D,!C.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(m)}cachePageRef(i,S){if(!S)return;const m=S.gen===0?`${S.num}R`:`${S.num}R${S.gen}`;e(this,v).set(m,i)}_cachedPageNumber(i){if(!i)return null;const S=i.gen===0?`${i.num}R`:`${i.num}R${i.gen}`;return e(this,v).get(S)||null}};v=new WeakMap,f=new WeakSet,Ni=function(i,S=null,m){const h=m[0];let D;if(typeof h=="object"&&h!==null){if(D=this._cachedPageNumber(h),!D){this.pdfDocument.getPageIndex(h).then(C=>{this.cachePageRef(C+1,h),G(this,f,Ni).call(this,i,S,m)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid page reference, for dest="${i}".`)});return}}else if(Number.isInteger(h))D=h+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid destination reference, for dest="${i}".`);return}if(!D||D<1||D>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${D}" is not a valid page number, for dest="${i}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:S,explicitDest:m,pageNumber:D})),this.pdfViewer.scrollPageIntoView({pageNumber:D,destArray:m,ignoreDestinationZoom:this._ignoreDestinationZoom})},E=new WeakSet,Wn=function(i){if(!Array.isArray(i))return!1;const S=i.length;if(S<2)return!1;const m=i[0];if(!(typeof m=="object"&&Number.isInteger(m.num)&&Number.isInteger(m.gen))&&!(Number.isInteger(m)&&m>=0))return!1;const h=i[1];if(!(typeof h=="object"&&typeof h.name=="string"))return!1;let D=!0;switch(h.name){case"XYZ":if(S!==5)return!1;break;case"Fit":case"FitB":return S===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(S!==3)return!1;break;case"FitR":if(S!==6)return!1;D=!1;break;default:return!1}for(let C=2;C<S;C++){const z=i[C];if(!(typeof z=="number"||D&&z===null))return!1}return!0},O(y,E);let b=y;M.PDFLinkService=b;class d{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(i){}get rotation(){return 0}set rotation(i){}get isInPresentationMode(){return!1}async goToDestination(i){}goToPage(i){}addLinkAttributes(i,S,m=!1){x(i,{url:S,enabled:this.externalLinkEnabled})}getDestinationHash(i){return"#"}getAnchorUrl(i){return"#"}setHash(i){}executeNamedAction(i){}executeSetOCGState(i){}cachePageRef(i,S){}}M.SimpleLinkService=d},(k,M,A)=>{var b,d,Bi;Object.defineProperty(M,"__esModule",{value:!0}),M.AnnotationLayerBuilder=void 0;var l=A(4),r=A(7),R=A(2);class x{constructor({pageDiv:w,pdfPage:E,linkService:p,downloadManager:y,annotationStorage:s=null,imageResourcesPath:i="",renderForms:S=!0,l10n:m=r.NullL10n,enableScripting:h=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:C=null,annotationCanvasMap:z=null,accessibilityManager:ie=null}){O(this,d);O(this,b,null);this.pageDiv=w,this.pdfPage=E,this.linkService=p,this.downloadManager=y,this.imageResourcesPath=i,this.renderForms=S,this.l10n=m,this.annotationStorage=s,this.enableScripting=h,this._hasJSActionsPromise=D||Promise.resolve(!1),this._fieldObjectsPromise=C||Promise.resolve(null),this._annotationCanvasMap=z,this._accessibilityManager=ie,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=p.eventBus}async render(w,E="display"){var S;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:w.clone({dontFlip:!0})});return}const[p,y,s]=await Promise.all([this.pdfPage.getAnnotations({intent:E}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const i=this.div=document.createElement("div");if(i.className="annotationLayer",this.pageDiv.append(i),p.length===0){this.hide();return}this.annotationLayer=new l.AnnotationLayer({div:i,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:w.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:p,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:y,fieldObjects:s}),this.linkService.isInPresentationMode&&G(this,d,Bi).call(this,R.PresentationModeState.FULLSCREEN),e(this,b)||(Z(this,b,m=>{G(this,d,Bi).call(this,m.state)}),(S=this._eventBus)==null||S._on("presentationmodechanged",e(this,b)))}cancel(){var w;this._cancelled=!0,e(this,b)&&((w=this._eventBus)==null||w._off("presentationmodechanged",e(this,b)),Z(this,b,null))}hide(){this.div&&(this.div.hidden=!0)}}b=new WeakMap,d=new WeakSet,Bi=function(w){if(!this.div)return;let E=!1;switch(w){case R.PresentationModeState.FULLSCREEN:E=!0;break;case R.PresentationModeState.NORMAL:break;default:return}for(const p of this.div.childNodes)p.hasAttribute("data-internal-link")||(p.inert=E)},M.AnnotationLayerBuilder=x},(k,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.NullL10n=void 0,M.getL10nFallback=l;const A={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};A.print_progress_percent="{{progress}}%";function l(x,b){switch(x){case"find_match_count":x=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":x=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return A[x]||""}function r(x,b){return b?x.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(d,v)=>v in b?b[v]:"{{"+v+"}}"):x}const R={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(x,b=null,d=l(x,b)){return r(d,b)},async translate(x){}};M.NullL10n=R},(k,M,A)=>{var x;Object.defineProperty(M,"__esModule",{value:!0}),M.DownloadManager=void 0;var l=A(4);function r(b,d){const v=document.createElement("a");if(!v.click)throw new Error('DownloadManager: "a.click()" is not supported.');v.href=b,v.target="_parent","download"in v&&(v.download=d),(document.body||document.documentElement).append(v),v.click(),v.remove()}class R{constructor(){O(this,x,new WeakMap)}downloadUrl(d,v,f){if(!(0,l.createValidAbsoluteUrl)(d,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${d}`);return}r(d+"#pdfjs.action=download",v)}downloadData(d,v,f){const w=URL.createObjectURL(new Blob([d],{type:f}));r(w,v)}openOrDownloadData(d,v,f){const E=(0,l.isPdfFile)(f)?"application/pdf":"";return this.downloadData(v,f,E),!1}download(d,v,f,w){const E=URL.createObjectURL(d);r(E,f)}}x=new WeakMap,M.DownloadManager=R},(k,M)=>{var x;Object.defineProperty(M,"__esModule",{value:!0}),M.WaitOnType=M.EventBus=M.AutomationEventBus=void 0,M.waitOnEventOrTimeout=l;const A={EVENT:"event",TIMEOUT:"timeout"};M.WaitOnType=A;function l({target:b,name:d,delay:v=0}){return new Promise(function(f,w){if(typeof b!="object"||!(d&&typeof d=="string")||!(Number.isInteger(v)&&v>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function E(i){b instanceof r?b._off(d,p):b.removeEventListener(d,p),s&&clearTimeout(s),f(i)}const p=E.bind(null,A.EVENT);b instanceof r?b._on(d,p):b.addEventListener(d,p);const y=E.bind(null,A.TIMEOUT),s=setTimeout(y,v)})}class r{constructor(){O(this,x,Object.create(null))}on(d,v,f=null){this._on(d,v,{external:!0,once:f==null?void 0:f.once})}off(d,v,f=null){this._off(d,v,{external:!0,once:f==null?void 0:f.once})}dispatch(d,v){const f=e(this,x)[d];if(!f||f.length===0)return;let w;for(const{listener:E,external:p,once:y}of f.slice(0)){if(y&&this._off(d,E),p){(w||(w=[])).push(E);continue}E(v)}if(w){for(const E of w)E(v);w=null}}_on(d,v,f=null){var E;((E=e(this,x))[d]||(E[d]=[])).push({listener:v,external:(f==null?void 0:f.external)===!0,once:(f==null?void 0:f.once)===!0})}_off(d,v,f=null){const w=e(this,x)[d];if(w){for(let E=0,p=w.length;E<p;E++)if(w[E].listener===v){w.splice(E,1);return}}}}x=new WeakMap,M.EventBus=r;class R extends r{dispatch(d,v){throw new Error("Not implemented: AutomationEventBus.dispatch")}}M.AutomationEventBus=R},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.GenericL10n=void 0,A(11);var l=A(7);const r={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function R(b){return r[b==null?void 0:b.toLowerCase()]||b}class x{constructor(d){const{webL10n:v}=document;this._lang=d,this._ready=new Promise((f,w)=>{v.setLanguage(R(d),()=>{f(v)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(d,v=null,f=(0,l.getL10nFallback)(d,v)){return(await this._ready).get(d,v,f)}async translate(d){return(await this._ready).translate(d)}}M.GenericL10n=x},()=>{document.webL10n=function(k,M){var A={},l="",r="textContent",R="",x={},b="loading",d=!0;function v(){return M.querySelectorAll('link[type="application/l10n"]')}function f(){var T=M.querySelector('script[type="application/l10n"]');return T?JSON.parse(T.innerHTML):null}function w(T){return T?T.querySelectorAll("*[data-l10n-id]"):[]}function E(T){if(!T)return{};var q=T.getAttribute("data-l10n-id"),J=T.getAttribute("data-l10n-args"),Y={};if(J)try{Y=JSON.parse(J)}catch{console.warn("could not parse arguments for #"+q)}return{id:q,args:Y}}function p(T,q,J){q=q||function(le){},J=J||function(){};var Y=new XMLHttpRequest;Y.open("GET",T,d),Y.overrideMimeType&&Y.overrideMimeType("text/plain; charset=utf-8"),Y.onreadystatechange=function(){Y.readyState==4&&(Y.status==200||Y.status===0?q(Y.responseText):J())},Y.onerror=J,Y.ontimeout=J;try{Y.send(null)}catch{J()}}function y(T,q,J,Y){var W=T.replace(/[^\/]*$/,"")||"./";function le(Ee){return Ee.lastIndexOf("\\")<0?Ee:Ee.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function $(Ee,we){var N={},a=/^\s*|\s*$/,u=/^\s*#|^\s*$/,c=/^\s*\[(.*)\]\s*$/,P=/^\s*@import\s+url\((.*)\)\s*$/i,L=/^([^=\s]*)\s*=\s*(.+)$/;function H(ne,_e,pe){var Pe=ne.replace(a,"").split(/[\r\n]+/),se="*",be=q.split("-",1)[0],ge=!1,Fe="";function Re(){for(;;){if(!Pe.length){pe();return}var xe=Pe.shift();if(!u.test(xe)){if(_e){if(Fe=c.exec(xe),Fe){se=Fe[1].toLowerCase(),ge=se!=="*"&&se!==q&&se!==be;continue}else if(ge)continue;if(Fe=P.exec(xe),Fe){K(W+Fe[1],Re);return}}var de=xe.match(L);de&&de.length==3&&(N[de[1]]=le(de[2]))}}}Re()}function K(ne,_e){p(ne,function(pe){H(pe,!1,_e)},function(){console.warn(ne+" not found."),_e()})}H(Ee,!0,function(){we(N)})}p(T,function(Ee){l+=Ee,$(Ee,function(we){for(var N in we){var a,u,c=N.lastIndexOf(".");c>0?(a=N.substring(0,c),u=N.substring(c+1)):(a=N,u=r),A[a]||(A[a]={}),A[a][u]=we[N]}J&&J()})},Y)}function s(T,q){T&&(T=T.toLowerCase()),q=q||function(){},i(),R=T;var J=v(),Y=J.length;if(Y===0){var W=f();if(W&&W.locales&&W.default_locale){if(console.log("using the embedded JSON directory, early way out"),A=W.locales[T],!A){var le=W.default_locale.toLowerCase();for(var $ in W.locales)if($=$.toLowerCase(),$===T){A=W.locales[T];break}else $===le&&(A=W.locales[le])}q()}else console.log("no resource to load, early way out");b="complete";return}var Ee=null,we=0;Ee=function(){we++,we>=Y&&(q(),b="complete")};function N(c){var P=c.href;this.load=function(L,H){y(P,L,H,function(){console.warn(P+" not found."),console.warn('"'+L+'" resource not found'),R="",H()})}}for(var a=0;a<Y;a++){var u=new N(J[a]);u.load(T,Ee)}}function i(){A={},l="",R=""}function S(T){var q={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function J($,Ee){return Ee.indexOf($)!==-1}function Y($,Ee,we){return Ee<=$&&$<=we}var W={0:function($){return"other"},1:function($){return Y($%100,3,10)?"few":$===0?"zero":Y($%100,11,99)?"many":$==2?"two":$==1?"one":"other"},2:function($){return $!==0&&$%10===0?"many":$==2?"two":$==1?"one":"other"},3:function($){return $==1?"one":"other"},4:function($){return Y($,0,1)?"one":"other"},5:function($){return Y($,0,2)&&$!=2?"one":"other"},6:function($){return $===0?"zero":$%10==1&&$%100!=11?"one":"other"},7:function($){return $==2?"two":$==1?"one":"other"},8:function($){return Y($,3,6)?"few":Y($,7,10)?"many":$==2?"two":$==1?"one":"other"},9:function($){return $===0||$!=1&&Y($%100,1,19)?"few":$==1?"one":"other"},10:function($){return Y($%10,2,9)&&!Y($%100,11,19)?"few":$%10==1&&!Y($%100,11,19)?"one":"other"},11:function($){return Y($%10,2,4)&&!Y($%100,12,14)?"few":$%10===0||Y($%10,5,9)||Y($%100,11,14)?"many":$%10==1&&$%100!=11?"one":"other"},12:function($){return Y($,2,4)?"few":$==1?"one":"other"},13:function($){return Y($%10,2,4)&&!Y($%100,12,14)?"few":$!=1&&Y($%10,0,1)||Y($%10,5,9)||Y($%100,12,14)?"many":$==1?"one":"other"},14:function($){return Y($%100,3,4)?"few":$%100==2?"two":$%100==1?"one":"other"},15:function($){return $===0||Y($%100,2,10)?"few":Y($%100,11,19)?"many":$==1?"one":"other"},16:function($){return $%10==1&&$!=11?"one":"other"},17:function($){return $==3?"few":$===0?"zero":$==6?"many":$==2?"two":$==1?"one":"other"},18:function($){return $===0?"zero":Y($,0,2)&&$!==0&&$!=2?"one":"other"},19:function($){return Y($,2,10)?"few":Y($,0,1)?"one":"other"},20:function($){return(Y($%10,3,4)||$%10==9)&&!(Y($%100,10,19)||Y($%100,70,79)||Y($%100,90,99))?"few":$%1e6===0&&$!==0?"many":$%10==2&&!J($%100,[12,72,92])?"two":$%10==1&&!J($%100,[11,71,91])?"one":"other"},21:function($){return $===0?"zero":$==1?"one":"other"},22:function($){return Y($,0,1)||Y($,11,99)?"one":"other"},23:function($){return Y($%10,1,2)||$%20===0?"one":"other"},24:function($){return Y($,3,10)||Y($,13,19)?"few":J($,[2,12])?"two":J($,[1,11])?"one":"other"}},le=q[T.replace(/-.*$/,"")];return le in W?W[le]:(console.warn("plural form unknown for ["+T+"]"),function(){return"other"})}x.plural=function(T,q,J,Y){var W=parseFloat(q);if(isNaN(W)||Y!=r)return T;x._pluralRules||(x._pluralRules=S(R));var le="["+x._pluralRules(W)+"]";return W===0&&J+"[zero]"in A?T=A[J+"[zero]"][Y]:W==1&&J+"[one]"in A?T=A[J+"[one]"][Y]:W==2&&J+"[two]"in A?T=A[J+"[two]"][Y]:J+le in A?T=A[J+le][Y]:J+"[other]"in A&&(T=A[J+"[other]"][Y]),T};function m(T,q,J){var Y=A[T];if(!Y){if(console.warn("#"+T+" is undefined."),!J)return null;Y=J}var W={};for(var le in Y){var $=Y[le];$=h($,q,T,le),$=D($,q,T),W[le]=$}return W}function h(T,q,J,Y){var W=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,le=W.exec(T);if(!le||!le.length)return T;var $=le[1],Ee=le[2],we;if(q&&Ee in q?we=q[Ee]:Ee in A&&(we=A[Ee]),$ in x){var N=x[$];T=N(T,we,J,Y)}return T}function D(T,q,J){var Y=/\{\{\s*(.+?)\s*\}\}/g;return T.replace(Y,function(W,le){return q&&le in q?q[le]:le in A?A[le]:(console.log("argument {{"+le+"}} for #"+J+" is undefined."),W)})}function C(T){var q=E(T);if(q.id){var J=m(q.id,q.args);if(!J){console.warn("#"+q.id+" is undefined.");return}if(J[r]){if(z(T)===0)T[r]=J[r];else{for(var Y=T.childNodes,W=!1,le=0,$=Y.length;le<$;le++)Y[le].nodeType===3&&/\S/.test(Y[le].nodeValue)&&(W?Y[le].nodeValue="":(Y[le].nodeValue=J[r],W=!0));if(!W){var Ee=M.createTextNode(J[r]);T.prepend(Ee)}}delete J[r]}for(var we in J)T[we]=J[we]}}function z(T){if(T.children)return T.children.length;if(typeof T.childElementCount<"u")return T.childElementCount;for(var q=0,J=0;J<T.childNodes.length;J++)q+=T.nodeType===1?1:0;return q}function ie(T){T=T||M.documentElement;for(var q=w(T),J=q.length,Y=0;Y<J;Y++)C(q[Y]);C(T)}return{get:function(T,q,J){var Y=T.lastIndexOf("."),W=r;Y>0&&(W=T.substring(Y+1),T=T.substring(0,Y));var le;J&&(le={},le[W]=J);var $=m(T,q,le);return $&&W in $?$[W]:"{{"+T+"}}"},getData:function(){return A},getText:function(){return l},getLanguage:function(){return R},setLanguage:function(T,q){s(T,function(){q&&q()})},getDirection:function(){var T=["ar","he","fa","ps","ur"],q=R.split("-",1)[0];return T.indexOf(q)>=0?"rtl":"ltr"},translate:ie,getReadyState:function(){return b},ready:function(T){if(T)b=="complete"||b=="interactive"?k.setTimeout(function(){T()}):M.addEventListener&&M.addEventListener("localized",function q(){M.removeEventListener("localized",q),T()});else return}}}(window,document)},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFHistory=void 0,M.isDestArraysEqual=w,M.isDestHashesEqual=f;var l=A(2),r=A(9);const R=1e3,x=50,b=1e3;function d(){return document.location.hash}class v{constructor({linkService:p,eventBus:y}){this.linkService=p,this.eventBus=y,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",s=>{this._isPagesLoaded=!!s.pagesCount},{once:!0})})}initialize({fingerprint:p,resetHistory:y=!1,updateUrl:s=!1}){if(!p||typeof p!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const i=this._fingerprint!==""&&this._fingerprint!==p;this._fingerprint=p,this._updateUrl=s===!0,this._initialized=!0,this._bindEvents();const S=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=d(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(S,!0)||y){const{hash:h,page:D,rotation:C}=this._parseCurrentHash(!0);if(!h||i||y){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:h,page:D,rotation:C},!0);return}const m=S.destination;this._updateInternalState(m,S.uid,!0),m.rotation!==void 0&&(this._initialRotation=m.rotation),m.dest?(this._initialBookmark=JSON.stringify(m.dest),this._destination.page=null):m.hash?this._initialBookmark=m.hash:m.page&&(this._initialBookmark=`page=${m.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:p=null,explicitDest:y,pageNumber:s}){if(!this._initialized)return;if(p&&typeof p!="string"){console.error(`PDFHistory.push: "${p}" is not a valid namedDest parameter.`);return}else if(Array.isArray(y)){if(!this._isValidPage(s)&&(s!==null||this._destination)){console.error(`PDFHistory.push: "${s}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${y}" is not a valid explicitDest parameter.`);return}const i=p||JSON.stringify(y);if(!i)return;let S=!1;if(this._destination&&(f(this._destination.hash,i)||w(this._destination.dest,y))){if(this._destination.page)return;S=!0}this._popStateInProgress&&!S||(this._pushOrReplaceState({dest:y,hash:i,page:s,rotation:this.linkService.rotation},S),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(p){var y;if(this._initialized){if(!this._isValidPage(p)){console.error(`PDFHistory.pushPage: "${p}" is not a valid page number.`);return}((y=this._destination)==null?void 0:y.page)!==p&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${p}`,page:p,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const p=window.history.state;this._isValidState(p)&&p.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const p=window.history.state;this._isValidState(p)&&p.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(p,y=!1){const s=y||!this._destination,i={fingerprint:this._fingerprint,uid:s?this._uid:this._uid+1,destination:p};this._updateInternalState(p,i.uid);let S;if(this._updateUrl&&(p!=null&&p.hash)){const m=document.location.href.split("#")[0];m.startsWith("file://")||(S=`${m}#${p.hash}`)}s?window.history.replaceState(i,"",S):window.history.pushState(i,"",S)}_tryPushCurrentPosition(p=!1){if(!this._position)return;let y=this._position;if(p&&(y=Object.assign(Object.create(null),this._position),y.temporary=!0),!this._destination){this._pushOrReplaceState(y);return}if(this._destination.temporary){this._pushOrReplaceState(y,!0);return}if(this._destination.hash===y.hash||!this._destination.page&&this._numPositionUpdates<=x)return;let s=!1;if(this._destination.page>=y.first&&this._destination.page<=y.page){if(this._destination.dest!==void 0||!this._destination.first)return;s=!0}this._pushOrReplaceState(y,s)}_isValidPage(p){return Number.isInteger(p)&&p>0&&p<=this.linkService.pagesCount}_isValidState(p,y=!1){if(!p)return!1;if(p.fingerprint!==this._fingerprint)if(y){if(typeof p.fingerprint!="string"||p.fingerprint.length!==this._fingerprint.length)return!1;const[s]=performance.getEntriesByType("navigation");if((s==null?void 0:s.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(p.uid)||p.uid<0||p.destination===null||typeof p.destination!="object")}_updateInternalState(p,y,s=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),s&&(p!=null&&p.temporary)&&delete p.temporary,this._destination=p,this._uid=y,this._maxUid=Math.max(this._maxUid,y),this._numPositionUpdates=0}_parseCurrentHash(p=!1){const y=unescape(d()).substring(1),s=(0,l.parseQueryString)(y),i=s.get("nameddest")||"";let S=s.get("page")|0;return(!this._isValidPage(S)||p&&i.length>0)&&(S=null),{hash:y,page:S,rotation:this.linkService.rotation}}_updateViewarea({location:p}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:p.pdfOpenParams.substring(1),page:this.linkService.page,first:p.pageNumber,rotation:p.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},b))}_popState({state:p}){const y=d(),s=this._currentHash!==y;if(this._currentHash=y,!p){this._uid++;const{hash:S,page:m,rotation:h}=this._parseCurrentHash();this._pushOrReplaceState({hash:S,page:m,rotation:h},!0);return}if(!this._isValidState(p))return;this._popStateInProgress=!0,s&&(this._blockHashChange++,(0,r.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:R}).then(()=>{this._blockHashChange--}));const i=p.destination;this._updateInternalState(i,p.uid,!0),(0,l.isValidRotation)(i.rotation)&&(this.linkService.rotation=i.rotation),i.dest?this.linkService.goToDestination(i.dest):i.hash?this.linkService.setHash(i.hash):i.page&&(this.linkService.page=i.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}M.PDFHistory=v;function f(E,p){return typeof E!="string"||typeof p!="string"?!1:E===p||(0,l.parseQueryString)(E).get("nameddest")===p}function w(E,p){function y(s,i){if(typeof s!=typeof i||Array.isArray(s)||Array.isArray(i))return!1;if(s!==null&&typeof s=="object"&&i!==null){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const S in s)if(!y(s[S],i[S]))return!1;return!0}return s===i||Number.isNaN(s)&&Number.isNaN(i)}if(!(Array.isArray(E)&&Array.isArray(p))||E.length!==p.length)return!1;for(let s=0,i=E.length;s<i;s++)if(!y(E[s],p[s]))return!1;return!0}},(k,M,A)=>{var m,h,D,C,z,ie,T,q,J,Y,W,zt,$,Vi,we,Ui,a,Hi,c,Wi,L,jn,K,Gn,_e,ji;Object.defineProperty(M,"__esModule",{value:!0}),M.PDFPageView=void 0;var l=A(4),r=A(2),R=A(14),x=A(6),b=A(15),d=A(7),v=A(5),f=A(16),w=A(17),E=A(18),p=A(19),y=A(20);const s=b.compatibilityParams.maxCanvasPixels||16777216,i=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new v.SimpleLinkService}});class S{constructor(se){O(this,W);O(this,$);O(this,we);O(this,a);O(this,c);O(this,L);O(this,K);O(this,_e);O(this,m,l.AnnotationMode.ENABLE_FORMS);O(this,h,!1);O(this,D,null);O(this,C,null);O(this,z,null);O(this,ie,null);O(this,T,r.RenderingStates.INITIAL);O(this,q,r.TextLayerMode.ENABLE);O(this,J,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});O(this,Y,new WeakMap);var Re;const be=se.container,ge=se.defaultViewport;this.id=se.id,this.renderingId="page"+this.id,Z(this,D,se.layerProperties||i),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=se.scale||r.DEFAULT_SCALE,this.viewport=ge,this.pdfPageRotate=ge.rotation,this._optionalContentConfigPromise=se.optionalContentConfigPromise||null,Z(this,q,se.textLayerMode??r.TextLayerMode.ENABLE),Z(this,m,se.annotationMode??l.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=se.imageResourcesPath||"",this.isOffscreenCanvasSupported=se.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=se.maxCanvasPixels??s,this.pageColors=se.pageColors||null,this.eventBus=se.eventBus,this.renderingQueue=se.renderingQueue,this.l10n=se.l10n||d.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((Re=this.renderingQueue)!=null&&Re.hasViewer()),this._container=be,se.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const Fe=document.createElement("div");if(Fe.className="page",Fe.setAttribute("data-page-number",this.id),Fe.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(xe=>{Fe.setAttribute("aria-label",xe)}),this.div=Fe,G(this,W,zt).call(this),be==null||be.append(Fe),this._isStandalone){be==null||be.style.setProperty("--scale-factor",this.scale*l.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:xe}=se;xe&&xe.then(de=>{xe===this._optionalContentConfigPromise&&(e(this,J).initialOptionalContent=de.hasInitialVisibility)})}}get renderingState(){return e(this,T)}set renderingState(se){if(se!==e(this,T))switch(Z(this,T,se),e(this,C)&&(clearTimeout(e(this,C)),Z(this,C,null)),se){case r.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case r.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),Z(this,C,setTimeout(()=>{this.div.classList.add("loading"),Z(this,C,null)},0));break;case r.RenderingStates.INITIAL:case r.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(se){var ge,Fe,Re;this._isStandalone&&(((ge=this.pageColors)==null?void 0:ge.foreground)==="CanvasText"||((Fe=this.pageColors)==null?void 0:Fe.background)==="Canvas")&&((Re=this._container)==null||Re.style.setProperty("--hcm-highligh-filter",se.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=se,this.pdfPageRotate=se.rotate;const be=(this.rotation+this.pdfPageRotate)%360;this.viewport=se.getViewport({scale:this.scale*l.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:be}),G(this,W,zt).call(this),this.reset()}destroy(){var se;this.reset(),(se=this.pdfPage)==null||se.cleanup()}get _textHighlighter(){return(0,l.shadow)(this,"_textHighlighter",new E.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:e(this,D).call(this).findController}))}_resetZoomLayer(se=!1){if(!this.zoomLayer)return;const be=this.zoomLayer.firstChild;e(this,Y).delete(be),be.width=0,be.height=0,se&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:se=!1,keepAnnotationLayer:be=!1,keepAnnotationEditorLayer:ge=!1,keepXfaLayer:Fe=!1,keepTextLayer:Re=!1}={}){var Le,Be,Ue,$e,Ge;this.cancelRendering({keepAnnotationLayer:be,keepAnnotationEditorLayer:ge,keepXfaLayer:Fe,keepTextLayer:Re}),this.renderingState=r.RenderingStates.INITIAL;const xe=this.div,de=xe.childNodes,oe=se&&this.zoomLayer||null,te=be&&((Le=this.annotationLayer)==null?void 0:Le.div)||null,ee=ge&&((Be=this.annotationEditorLayer)==null?void 0:Be.div)||null,me=Fe&&((Ue=this.xfaLayer)==null?void 0:Ue.div)||null,Te=Re&&(($e=this.textLayer)==null?void 0:$e.div)||null;for(let Ke=de.length-1;Ke>=0;Ke--){const Xe=de[Ke];switch(Xe){case oe:case te:case ee:case me:case Te:continue}Xe.remove()}xe.removeAttribute("data-loaded"),te&&this.annotationLayer.hide(),ee&&this.annotationEditorLayer.hide(),me&&this.xfaLayer.hide(),Te&&this.textLayer.hide(),(Ge=this.structTreeLayer)==null||Ge.hide(),oe||(this.canvas&&(e(this,Y).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:se=0,rotation:be=null,optionalContentConfigPromise:ge=null,drawingDelay:Fe=-1}){var xe;this.scale=se||this.scale,typeof be=="number"&&(this.rotation=be),ge instanceof Promise&&(this._optionalContentConfigPromise=ge,ge.then(de=>{ge===this._optionalContentConfigPromise&&(e(this,J).initialOptionalContent=de.hasInitialVisibility)})),e(this,J).directDrawing=!0;const Re=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*l.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Re}),G(this,W,zt).call(this),this._isStandalone&&((xe=this._container)==null||xe.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let de=!1;if(e(this,h)){if(this.maxCanvasPixels===0)de=!0;else if(this.maxCanvasPixels>0){const{width:te,height:ee}=this.viewport,{sx:me,sy:Te}=this.outputScale;de=(Math.floor(te)*me|0)*(Math.floor(ee)*Te|0)>this.maxCanvasPixels}}const oe=!de&&Fe>=0&&Fe<1e3;if(oe||de){if(oe&&this.renderingState!==r.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:Fe}),this.renderingState=r.RenderingStates.FINISHED,e(this,J).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!oe,hideTextLayer:oe}),oe)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:e(this,ie)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:se=!1,keepAnnotationEditorLayer:be=!1,keepXfaLayer:ge=!1,keepTextLayer:Fe=!1,cancelExtraDelay:Re=0}={}){var xe;this.renderTask&&(this.renderTask.cancel(Re),this.renderTask=null),this.resume=null,this.textLayer&&(!Fe||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!se||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!be||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!ge||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(xe=this._textHighlighter)==null||xe.disable())}cssTransform({target:se,redrawAnnotationLayer:be=!1,redrawAnnotationEditorLayer:ge=!1,redrawXfaLayer:Fe=!1,redrawTextLayer:Re=!1,hideTextLayer:xe=!1}){var oe;if(!se.hasAttribute("zooming")){se.setAttribute("zooming",!0);const{style:te}=se;te.width=te.height=""}const de=e(this,Y).get(se);if(this.viewport!==de){const te=this.viewport.rotation-de.rotation,ee=Math.abs(te);let me=1,Te=1;if(ee===90||ee===270){const{width:Le,height:Be}=this.viewport;me=Be/Le,Te=Le/Be}se.style.transform=`rotate(${te}deg) scale(${me}, ${Te})`}be&&this.annotationLayer&&G(this,$,Vi).call(this),ge&&this.annotationEditorLayer&&G(this,we,Ui).call(this),Fe&&this.xfaLayer&&G(this,a,Hi).call(this),this.textLayer&&(xe?(this.textLayer.hide(),(oe=this.structTreeLayer)==null||oe.hide()):Re&&G(this,c,Wi).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(se,be){return this.viewport.convertToPdfPoint(se,be)}async draw(){this.renderingState!==r.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:se,l10n:be,pageColors:ge,pdfPage:Fe,viewport:Re}=this;if(!Fe)throw this.renderingState=r.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=r.RenderingStates.RUNNING;const xe=document.createElement("div");if(xe.classList.add("canvasWrapper"),se.append(xe),!this.textLayer&&e(this,q)!==r.TextLayerMode.DISABLE&&!Fe.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new w.TextAccessibilityManager),this.textLayer=new p.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:e(this,q)===r.TextLayerMode.ENABLE_PERMISSIONS}),se.append(this.textLayer.div)),!this.annotationLayer&&e(this,m)!==l.AnnotationMode.DISABLE){const{annotationStorage:_,downloadManager:I,enableScripting:he,fieldObjectsPromise:ae,hasJSActionsPromise:ue,linkService:ve}=e(this,D).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new x.AnnotationLayerBuilder({pageDiv:se,pdfPage:Fe,annotationStorage:_,imageResourcesPath:this.imageResourcesPath,renderForms:e(this,m)===l.AnnotationMode.ENABLE_FORMS,linkService:ve,downloadManager:I,l10n:be,enableScripting:he,hasJSActionsPromise:ue,fieldObjectsPromise:ae,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const de=_=>{if(Te==null||Te(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=r.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=r.RenderingStates.RUNNING,_()};return}_()},{width:oe,height:te}=Re,ee=document.createElement("canvas");ee.setAttribute("role","presentation"),ee.hidden=!0;const me=!!(ge!=null&&ge.background&&(ge!=null&&ge.foreground));let Te=_=>{(!me||_)&&(ee.hidden=!1,Te=null)};xe.append(ee),this.canvas=ee;const Le=ee.getContext("2d",{alpha:!1}),Be=this.outputScale=new r.OutputScale;if(this.maxCanvasPixels===0){const _=1/this.scale;Be.sx*=_,Be.sy*=_,Z(this,h,!0)}else if(this.maxCanvasPixels>0){const _=oe*te,I=Math.sqrt(this.maxCanvasPixels/_);Be.sx>I||Be.sy>I?(Be.sx=I,Be.sy=I,Z(this,h,!0)):Z(this,h,!1)}const Ue=(0,r.approximateFraction)(Be.sx),$e=(0,r.approximateFraction)(Be.sy);ee.width=(0,r.roundToDivide)(oe*Be.sx,Ue[0]),ee.height=(0,r.roundToDivide)(te*Be.sy,$e[0]);const{style:Ge}=ee;Ge.width=(0,r.roundToDivide)(oe,Ue[1])+"px",Ge.height=(0,r.roundToDivide)(te,$e[1])+"px",e(this,Y).set(ee,Re);const Ke=Be.scaled?[Be.sx,0,0,Be.sy,0,0]:null,Xe={canvasContext:Le,transform:Ke,viewport:Re,annotationMode:e(this,m),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:ge},Ze=this.renderTask=this.pdfPage.render(Xe);Ze.onContinue=de;const Se=Ze.promise.then(async()=>{var _;if(Te==null||Te(!0),await G(this,_e,ji).call(this,Ze),G(this,c,Wi).call(this),this.annotationLayer&&await G(this,$,Vi).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:I}=e(this,D).call(this);if(!I)return;this.annotationEditorLayer=new R.AnnotationEditorLayerBuilder({uiManager:I,pageDiv:se,pdfPage:Fe,l10n:be,accessibilityManager:this._accessibilityManager,annotationLayer:(_=this.annotationLayer)==null?void 0:_.annotationLayer})}G(this,we,Ui).call(this)},_=>(_ instanceof l.RenderingCancelledException||Te==null||Te(!0),G(this,_e,ji).call(this,Ze,_)));if(Fe.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&se.append(this.xfaLayer.div);else{const{annotationStorage:_,linkService:I}=e(this,D).call(this);this.xfaLayer=new y.XfaLayerBuilder({pageDiv:se,pdfPage:Fe,annotationStorage:_,linkService:I})}G(this,a,Hi).call(this)}return se.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Se}setPageLabel(se){this.pageLabel=typeof se=="string"?se:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:se,initialOptionalContent:be,regularAnnotations:ge}=e(this,J);return se&&be&&ge?this.canvas:null}}m=new WeakMap,h=new WeakMap,D=new WeakMap,C=new WeakMap,z=new WeakMap,ie=new WeakMap,T=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,W=new WeakSet,zt=function(){const{viewport:se}=this;if(this.pdfPage){if(e(this,z)===se.rotation)return;Z(this,z,se.rotation)}(0,l.setLayerDimensions)(this.div,se,!0,!1)},$=new WeakSet,Vi=async function(){let se=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(be){console.error(`#renderAnnotationLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:se})}},we=new WeakSet,Ui=async function(){let se=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(be){console.error(`#renderAnnotationEditorLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:se})}},a=new WeakSet,Hi=async function(){let se=null;try{const be=await this.xfaLayer.render(this.viewport,"display");be!=null&&be.textDivs&&this._textHighlighter&&G(this,K,Gn).call(this,be.textDivs)}catch(be){console.error(`#renderXfaLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:se})}},c=new WeakSet,Wi=async function(){const{pdfPage:se,textLayer:be,viewport:ge}=this;if(!be)return;let Fe=null;try{if(!be.renderingDone){const Re=se.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});be.setTextContentSource(Re)}await be.render(ge)}catch(Re){if(Re instanceof l.AbortException)return;console.error(`#renderTextLayer: "${Re}".`),Fe=Re}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:be.numTextDivs,error:Fe}),G(this,L,jn).call(this)},L=new WeakSet,jn=async function(){var ge,Fe,Re;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new f.StructTreeLayerBuilder);const se=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),be=(ge=this.structTreeLayer)==null?void 0:ge.render(se);be&&((Fe=this.canvas)==null||Fe.append(be)),(Re=this.structTreeLayer)==null||Re.show()},K=new WeakSet,Gn=async function(se){const be=await this.pdfPage.getTextContent(),ge=[];for(const Fe of be.items)ge.push(Fe.str);this._textHighlighter.setTextMapping(se,ge),this._textHighlighter.enable()},_e=new WeakSet,ji=async function(se,be=null){if(se===this.renderTask&&(this.renderTask=null),be instanceof l.RenderingCancelledException){Z(this,ie,null);return}if(Z(this,ie,be),this.renderingState=r.RenderingStates.FINISHED,this._resetZoomLayer(!0),e(this,J).regularAnnotations=!se.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:e(this,ie)}),be)throw be},M.PDFPageView=S},(k,M,A)=>{var x,b;Object.defineProperty(M,"__esModule",{value:!0}),M.AnnotationEditorLayerBuilder=void 0;var l=A(4),r=A(7);class R{constructor(v){O(this,x,null);O(this,b,void 0);this.pageDiv=v.pageDiv,this.pdfPage=v.pdfPage,this.accessibilityManager=v.accessibilityManager,this.l10n=v.l10n||r.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,Z(this,b,v.uiManager),Z(this,x,v.annotationLayer||null)}async render(v,f="display"){if(f!=="display"||this._cancelled)return;const w=v.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:w}),this.show();return}const E=this.div=document.createElement("div");E.className="annotationEditorLayer",E.tabIndex=0,E.hidden=!0,E.dir=e(this,b).direction,this.pageDiv.append(E),this.annotationEditorLayer=new l.AnnotationEditorLayer({uiManager:e(this,b),div:E,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:w,annotationLayer:e(this,x)});const p={viewport:w,div:E,annotations:null,intent:f};this.annotationEditorLayer.render(p),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}x=new WeakMap,b=new WeakMap,M.AnnotationEditorLayerBuilder=R},(k,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.compatibilityParams=M.OptionKind=M.AppOptions=void 0;const A=Object.create(null);M.compatibilityParams=A;{const b=navigator.userAgent||"",d=navigator.platform||"",v=navigator.maxTouchPoints||1,f=/Android/.test(b),w=/\b(iPad|iPhone|iPod)(?=;)/.test(b)||d==="MacIntel"&&v>1;(function(){(w||f)&&(A.maxCanvasPixels=5242880)})()}const l={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};M.OptionKind=l;const r={annotationEditorMode:{value:0,kind:l.VIEWER+l.PREFERENCE},annotationMode:{value:2,kind:l.VIEWER+l.PREFERENCE},cursorToolOnLoad:{value:0,kind:l.VIEWER+l.PREFERENCE},defaultZoomDelay:{value:400,kind:l.VIEWER+l.PREFERENCE},defaultZoomValue:{value:"",kind:l.VIEWER+l.PREFERENCE},disableHistory:{value:!1,kind:l.VIEWER},disablePageLabels:{value:!1,kind:l.VIEWER+l.PREFERENCE},enablePermissions:{value:!1,kind:l.VIEWER+l.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:l.VIEWER+l.PREFERENCE},enableScripting:{value:!0,kind:l.VIEWER+l.PREFERENCE},enableStampEditor:{value:!0,kind:l.VIEWER+l.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:l.VIEWER},externalLinkTarget:{value:0,kind:l.VIEWER+l.PREFERENCE},historyUpdateUrl:{value:!1,kind:l.VIEWER+l.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:l.VIEWER+l.PREFERENCE},imageResourcesPath:{value:"./images/",kind:l.VIEWER},maxCanvasPixels:{value:16777216,kind:l.VIEWER},forcePageColors:{value:!1,kind:l.VIEWER+l.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:l.VIEWER+l.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:l.VIEWER+l.PREFERENCE},pdfBugEnabled:{value:!1,kind:l.VIEWER+l.PREFERENCE},printResolution:{value:150,kind:l.VIEWER},sidebarViewOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},scrollModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},spreadModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},textLayerMode:{value:1,kind:l.VIEWER+l.PREFERENCE},viewerCssTheme:{value:0,kind:l.VIEWER+l.PREFERENCE},viewOnLoad:{value:0,kind:l.VIEWER+l.PREFERENCE},cMapPacked:{value:!0,kind:l.API},cMapUrl:{value:"../web/cmaps/",kind:l.API},disableAutoFetch:{value:!1,kind:l.API+l.PREFERENCE},disableFontFace:{value:!1,kind:l.API+l.PREFERENCE},disableRange:{value:!1,kind:l.API+l.PREFERENCE},disableStream:{value:!1,kind:l.API+l.PREFERENCE},docBaseUrl:{value:"",kind:l.API},enableXfa:{value:!0,kind:l.API+l.PREFERENCE},fontExtraProperties:{value:!1,kind:l.API},isEvalSupported:{value:!0,kind:l.API},isOffscreenCanvasSupported:{value:!0,kind:l.API},maxImageSize:{value:-1,kind:l.API},pdfBug:{value:!1,kind:l.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:l.API},verbosity:{value:1,kind:l.API},workerPort:{value:null,kind:l.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:l.WORKER}};r.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:l.VIEWER},r.disablePreferences={value:!1,kind:l.VIEWER},r.locale={value:navigator.language||"en-US",kind:l.VIEWER},r.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:l.VIEWER};const R=Object.create(null);class x{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(d){const v=R[d];if(v!==void 0)return v;const f=r[d];if(f!==void 0)return A[d]??f.value}static getAll(d=null){const v=Object.create(null);for(const f in r){const w=r[f];if(d){if(!(d&w.kind))continue;if(d===l.PREFERENCE){const p=w.value,y=typeof p;if(y==="boolean"||y==="string"||y==="number"&&Number.isInteger(p)){v[f]=p;continue}throw new Error(`Invalid type for preference: ${f}`)}}const E=R[f];v[f]=E!==void 0?E:A[f]??w.value}return v}static set(d,v){R[d]=v}static setAll(d){for(const v in d)R[v]=d[v]}static remove(d){delete R[d]}}M.AppOptions=x,x._hasUserOptions=function(){return Object.keys(R).length>0}},(k,M,A)=>{var b,d,Gi,f,zi;Object.defineProperty(M,"__esModule",{value:!0}),M.StructTreeLayerBuilder=void 0;var l=A(2);const r={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},R=/^H(\d+)$/;class x{constructor(){O(this,d);O(this,f);O(this,b,void 0)}get renderingDone(){return e(this,b)!==void 0}render(p){if(e(this,b)!==void 0)return e(this,b);const y=G(this,f,zi).call(this,p);return y==null||y.classList.add("structTree"),Z(this,b,y)}hide(){e(this,b)&&!e(this,b).hidden&&(e(this,b).hidden=!0)}show(){var p;(p=e(this,b))!=null&&p.hidden&&(e(this,b).hidden=!1)}}b=new WeakMap,d=new WeakSet,Gi=function(p,y){const{alt:s,id:i,lang:S}=p;s!==void 0&&y.setAttribute("aria-label",(0,l.removeNullCharacters)(s)),i!==void 0&&y.setAttribute("aria-owns",i),S!==void 0&&y.setAttribute("lang",(0,l.removeNullCharacters)(S,!0))},f=new WeakSet,zi=function(p){if(!p)return null;const y=document.createElement("span");if("role"in p){const{role:s}=p,i=s.match(R);i?(y.setAttribute("role","heading"),y.setAttribute("aria-level",i[1])):r[s]&&y.setAttribute("role",r[s])}if(G(this,d,Gi).call(this,p,y),p.children)if(p.children.length===1&&"id"in p.children[0])G(this,d,Gi).call(this,p.children[0],y);else for(const s of p.children)y.append(G(this,f,zi).call(this,s));return y},M.StructTreeLayerBuilder=x},(k,M,A)=>{var R,x,b,d,v,$t,w,$i;Object.defineProperty(M,"__esModule",{value:!0}),M.TextAccessibilityManager=void 0;var l=A(2);const p=class p{constructor(){O(this,w);O(this,R,!1);O(this,x,null);O(this,b,new Map);O(this,d,new Map)}setTextMapping(s){Z(this,x,s)}enable(){if(e(this,R))throw new Error("TextAccessibilityManager is already enabled.");if(!e(this,x))throw new Error("Text divs and strings have not been set.");if(Z(this,R,!0),Z(this,x,e(this,x).slice()),e(this,x).sort(G(p,v,$t)),e(this,b).size>0){const s=e(this,x);for(const[i,S]of e(this,b)){if(!document.getElementById(i)){e(this,b).delete(i);continue}G(this,w,$i).call(this,i,s[S])}}for(const[s,i]of e(this,d))this.addPointerInTextLayer(s,i);e(this,d).clear()}disable(){e(this,R)&&(e(this,d).clear(),Z(this,x,null),Z(this,R,!1))}removePointerInTextLayer(s){if(!e(this,R)){e(this,d).delete(s);return}const i=e(this,x);if(!i||i.length===0)return;const{id:S}=s,m=e(this,b).get(S);if(m===void 0)return;const h=i[m];e(this,b).delete(S);let D=h.getAttribute("aria-owns");D!=null&&D.includes(S)&&(D=D.split(" ").filter(C=>C!==S).join(" "),D?h.setAttribute("aria-owns",D):(h.removeAttribute("aria-owns"),h.setAttribute("role","presentation")))}addPointerInTextLayer(s,i){const{id:S}=s;if(!S)return null;if(!e(this,R))return e(this,d).set(s,i),null;i&&this.removePointerInTextLayer(s);const m=e(this,x);if(!m||m.length===0)return null;const h=(0,l.binarySearchFirstItem)(m,ie=>{var T;return G(T=p,v,$t).call(T,s,ie)<0}),D=Math.max(0,h-1),C=m[D];G(this,w,$i).call(this,S,C),e(this,b).set(S,D);const z=C.parentNode;return z!=null&&z.classList.contains("markedContent")?z.id:null}moveElementInDOM(s,i,S,m){const h=this.addPointerInTextLayer(S,m);if(!s.hasChildNodes())return s.append(i),h;const D=Array.from(s.childNodes).filter(ie=>ie!==i);if(D.length===0)return h;const C=S||i,z=(0,l.binarySearchFirstItem)(D,ie=>{var T;return G(T=p,v,$t).call(T,C,ie)<0});return z===0?D[0].before(i):D[z-1].after(i),h}};R=new WeakMap,x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakSet,$t=function(s,i){const S=s.getBoundingClientRect(),m=i.getBoundingClientRect();if(S.width===0&&S.height===0)return 1;if(m.width===0&&m.height===0)return-1;const h=S.y,D=S.y+S.height,C=S.y+S.height/2,z=m.y,ie=m.y+m.height,T=m.y+m.height/2;if(C<=z&&T>=D)return-1;if(T<=h&&C>=ie)return 1;const q=S.x+S.width/2,J=m.x+m.width/2;return q-J},w=new WeakSet,$i=function(s,i){const S=i.getAttribute("aria-owns");S!=null&&S.includes(s)||i.setAttribute("aria-owns",S?`${S} ${s}`:s),i.removeAttribute("role")},O(p,v);let r=p;M.TextAccessibilityManager=r},(k,M)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.TextHighlighter=void 0;class A{constructor({findController:r,eventBus:R,pageIndex:x}){this.findController=r,this.matches=[],this.eventBus=R,this.pageIdx=x,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(r,R){this.textDivs=r,this.textContentItemsStr=R}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=r=>{(r.pageIndex===this.pageIdx||r.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(r,R){if(!r)return[];const{textContentItemsStr:x}=this;let b=0,d=0;const v=x.length-1,f=[];for(let w=0,E=r.length;w<E;w++){let p=r[w];for(;b!==v&&p>=d+x[b].length;)d+=x[b].length,b++;b===x.length&&console.error("Could not find a matching mapping");const y={begin:{divIdx:b,offset:p-d}};for(p+=R[w];b!==v&&p>d+x[b].length;)d+=x[b].length,b++;y.end={divIdx:b,offset:p-d},f.push(y)}return f}_renderMatches(r){if(r.length===0)return;const{findController:R,pageIdx:x}=this,{textContentItemsStr:b,textDivs:d}=this,v=x===R.selected.pageIdx,f=R.selected.matchIdx,w=R.state.highlightAll;let E=null;const p={divIdx:-1,offset:void 0};function y(D,C){const z=D.divIdx;return d[z].textContent="",s(z,0,D.offset,C)}function s(D,C,z,ie){let T=d[D];if(T.nodeType===Node.TEXT_NODE){const Y=document.createElement("span");T.before(Y),Y.append(T),d[D]=Y,T=Y}const q=b[D].substring(C,z),J=document.createTextNode(q);if(ie){const Y=document.createElement("span");return Y.className=`${ie} appended`,Y.append(J),T.append(Y),ie.includes("selected")?Y.offsetLeft:0}return T.append(J),0}let i=f,S=i+1;if(w)i=0,S=r.length;else if(!v)return;let m=-1,h=-1;for(let D=i;D<S;D++){const C=r[D],z=C.begin;if(z.divIdx===m&&z.offset===h)continue;m=z.divIdx,h=z.offset;const ie=C.end,T=v&&D===f,q=T?" selected":"";let J=0;if(!E||z.divIdx!==E.divIdx?(E!==null&&s(E.divIdx,E.offset,p.offset),y(z)):s(E.divIdx,E.offset,z.offset),z.divIdx===ie.divIdx)J=s(z.divIdx,z.offset,ie.offset,"highlight"+q);else{J=s(z.divIdx,z.offset,p.offset,"highlight begin"+q);for(let Y=z.divIdx+1,W=ie.divIdx;Y<W;Y++)d[Y].className="highlight middle"+q;y(ie,"highlight end"+q)}E=ie,T&&R.scrollMatchIntoView({element:d[z.divIdx],selectedLeft:J,pageIndex:x,matchIndex:f})}E&&s(E.divIdx,E.offset,p.offset)}_updateMatches(r=!1){if(!this.enabled&&!r)return;const{findController:R,matches:x,pageIdx:b}=this,{textContentItemsStr:d,textDivs:v}=this;let f=-1;for(const p of x){const y=Math.max(f,p.begin.divIdx);for(let s=y,i=p.end.divIdx;s<=i;s++){const S=v[s];S.textContent=d[s],S.className=""}f=p.end.divIdx+1}if(!(R!=null&&R.highlightMatches)||r)return;const w=R.pageMatches[b]||null,E=R.pageMatchesLength[b]||null;this.matches=this._convertMatches(w,E),this._renderMatches(this.matches)}}M.TextHighlighter=A},(k,M,A)=>{var x,b,d,v,f,zn,E,$n;Object.defineProperty(M,"__esModule",{value:!0}),M.TextLayerBuilder=void 0;var l=A(4),r=A(2);class R{constructor({highlighter:s=null,accessibilityManager:i=null,isOffscreenCanvasSupported:S=!0,enablePermissions:m=!1}){O(this,f);O(this,E);O(this,x,!1);O(this,b,0);O(this,d,0);O(this,v,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=s,this.accessibilityManager=i,this.isOffscreenCanvasSupported=S,Z(this,x,m===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(s){var m,h,D;if(!e(this,v))throw new Error('No "textContentSource" parameter specified.');const i=s.scale*(globalThis.devicePixelRatio||1),{rotation:S}=s;if(this.renderingDone){const C=S!==e(this,b),z=i!==e(this,d);(C||z)&&(this.hide(),(0,l.updateTextLayer)({container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:z,mustRotate:C}),Z(this,d,i),Z(this,b,S)),this.show();return}this.cancel(),(m=this.highlighter)==null||m.setTextMapping(this.textDivs,this.textContentItemsStr),(h=this.accessibilityManager)==null||h.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,l.renderTextLayer)({textContentSource:e(this,v),container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,G(this,f,zn).call(this),Z(this,d,i),Z(this,b,S),this.show(),(D=this.accessibilityManager)==null||D.enable()}hide(){var s;this.div.hidden||((s=this.highlighter)==null||s.disable(),this.div.hidden=!0)}show(){var s;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(s=this.highlighter)==null||s.enable())}cancel(){var s,i;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(s=this.highlighter)==null||s.disable(),(i=this.accessibilityManager)==null||i.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(s){this.cancel(),Z(this,v,s)}}x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakSet,zn=function(){this.renderingDone=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),G(this,E,$n).call(this)},E=new WeakSet,$n=function(){const{div:s}=this;s.addEventListener("mousedown",i=>{const S=s.querySelector(".endOfContent");if(!S)return;let m=i.target!==s;if(m&&(m=getComputedStyle(S).getPropertyValue("-moz-user-select")!=="none"),m){const h=s.getBoundingClientRect(),D=Math.max(0,(i.pageY-h.top)/h.height);S.style.top=(D*100).toFixed(2)+"%"}S.classList.add("active")}),s.addEventListener("mouseup",()=>{const i=s.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}),s.addEventListener("copy",i=>{if(!e(this,x)){const S=document.getSelection();i.clipboardData.setData("text/plain",(0,r.removeNullCharacters)((0,l.normalizeUnicode)(S.toString())))}i.preventDefault(),i.stopPropagation()})},M.TextLayerBuilder=R},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.XfaLayerBuilder=void 0;var l=A(4);class r{constructor({pageDiv:x,pdfPage:b,annotationStorage:d=null,linkService:v,xfaHtml:f=null}){this.pageDiv=x,this.pdfPage=b,this.annotationStorage=d,this.linkService=v,this.xfaHtml=f,this.div=null,this._cancelled=!1}async render(x,b="display"){if(b==="print"){const f={viewport:x.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b},w=document.createElement("div");return this.pageDiv.append(w),f.div=w,l.XfaLayer.render(f)}const d=await this.pdfPage.getXfa();if(this._cancelled||!d)return{textDivs:[]};const v={viewport:x.clone({dontFlip:!0}),div:this.div,xfaHtml:d,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b};return this.div?l.XfaLayer.update(v):(this.div=document.createElement("div"),this.pageDiv.append(this.div),v.div=this.div,l.XfaLayer.render(v))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}M.XfaLayerBuilder=r},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFScriptingManager=void 0;var l=A(22),r=A(23);class R extends r.PDFScriptingManager{constructor(b){b.externalServices||window.addEventListener("updatefromsandbox",d=>{b.eventBus.dispatch("updatefromsandbox",{source:window,detail:d.detail})}),b.externalServices||(b.externalServices={createScripting:({sandboxBundleSrc:d})=>new l.GenericScripting(d)}),b.docProperties||(b.docProperties=d=>(0,l.docProperties)(d)),super(b)}}M.PDFScriptingManager=R},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.GenericScripting=void 0,M.docProperties=r;var l=A(4);async function r(x){const b="",d=b.split("#")[0];let{info:v,metadata:f,contentDispositionFilename:w,contentLength:E}=await x.getMetadata();if(!E){const{length:p}=await x.getDownloadInfo();E=p}return{...v,baseURL:d,filesize:E,filename:w||(0,l.getPdfFilenameFromUrl)(b),metadata:f==null?void 0:f.getRaw(),authors:f==null?void 0:f.get("dc:creator"),numPages:x.numPages,URL:b}}class R{constructor(b){this._ready=(0,l.loadScript)(b,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(b){(await this._ready).create(b)}async dispatchEventInSandbox(b){const d=await this._ready;setTimeout(()=>d.dispatchEvent(b),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}M.GenericScripting=R},(k,M,A)=>{var x,b,d,v,f,w,E,p,y,s,i,S,Xn,h,Xt,C,Xi,ie,qn,q,Tt;Object.defineProperty(M,"__esModule",{value:!0}),M.PDFScriptingManager=void 0;var l=A(2),r=A(4);class R{constructor({eventBus:W,sandboxBundleSrc:le=null,externalServices:$=null,docProperties:Ee=null}){O(this,S);O(this,h);O(this,C);O(this,ie);O(this,q);O(this,x,null);O(this,b,null);O(this,d,null);O(this,v,null);O(this,f,null);O(this,w,null);O(this,E,null);O(this,p,!1);O(this,y,null);O(this,s,null);O(this,i,null);Z(this,v,W),Z(this,y,le),Z(this,f,$),Z(this,d,Ee)}setViewer(W){Z(this,E,W)}async setDocument(W){var we;if(e(this,w)&&await G(this,q,Tt).call(this),Z(this,w,W),!W)return;const[le,$,Ee]=await Promise.all([W.getFieldObjects(),W.getCalculationOrderIds(),W.getJSActions()]);if(!le&&!Ee){await G(this,q,Tt).call(this);return}if(W===e(this,w)){try{Z(this,s,G(this,ie,qn).call(this))}catch(N){console.error(`setDocument: "${N.message}".`),await G(this,q,Tt).call(this);return}this._internalEvents.set("updatefromsandbox",N=>{(N==null?void 0:N.source)===window&&G(this,S,Xn).call(this,N.detail)}),this._internalEvents.set("dispatcheventinsandbox",N=>{var a;(a=e(this,s))==null||a.dispatchEventInSandbox(N.detail)}),this._internalEvents.set("pagechanging",({pageNumber:N,previous:a})=>{N!==a&&(G(this,C,Xi).call(this,a),G(this,h,Xt).call(this,N))}),this._internalEvents.set("pagerendered",({pageNumber:N})=>{this._pageOpenPending.has(N)&&N===e(this,E).currentPageNumber&&G(this,h,Xt).call(this,N)}),this._internalEvents.set("pagesdestroy",async()=>{var N,a;await G(this,C,Xi).call(this,e(this,E).currentPageNumber),await((N=e(this,s))==null?void 0:N.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(a=e(this,x))==null||a.resolve()});for(const[N,a]of this._internalEvents)e(this,v)._on(N,a);try{const N=await e(this,d).call(this,W);if(W!==e(this,w))return;await e(this,s).createSandbox({objects:le,calculationOrder:$,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...N,actions:Ee}}),e(this,v).dispatch("sandboxcreated",{source:this})}catch(N){console.error(`setDocument: "${N.message}".`),await G(this,q,Tt).call(this);return}await((we=e(this,s))==null?void 0:we.dispatchEventInSandbox({id:"doc",name:"Open"})),await G(this,h,Xt).call(this,e(this,E).currentPageNumber,!0),Promise.resolve().then(()=>{W===e(this,w)&&Z(this,p,!0)})}}async dispatchWillSave(){var W;return(W=e(this,s))==null?void 0:W.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var W;return(W=e(this,s))==null?void 0:W.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var W;if(e(this,s)){await((W=e(this,i))==null?void 0:W.promise),Z(this,i,new r.PromiseCapability);try{await e(this,s).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(le){throw e(this,i).resolve(),Z(this,i,null),le}await e(this,i).promise}}async dispatchDidPrint(){var W;return(W=e(this,s))==null?void 0:W.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var W;return((W=e(this,b))==null?void 0:W.promise)||null}get ready(){return e(this,p)}get _internalEvents(){return(0,r.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,r.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,r.shadow)(this,"_visitedPages",new Map)}}x=new WeakMap,b=new WeakMap,d=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,E=new WeakMap,p=new WeakMap,y=new WeakMap,s=new WeakMap,i=new WeakMap,S=new WeakSet,Xn=async function(W){var c,P;const le=e(this,E),$=le.isInPresentationMode||le.isChangingPresentationMode,{id:Ee,siblings:we,command:N,value:a}=W;if(!Ee){switch(N){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(!$){const L=(0,l.apiPageLayoutToViewerModes)(a);le.spreadMode=L.spreadMode}break;case"page-num":le.currentPageNumber=a+1;break;case"print":await le.pagesPromise,e(this,v).dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":$||(le.currentScaleValue=a);break;case"SaveAs":e(this,v).dispatch("download",{source:this});break;case"FirstPage":le.currentPageNumber=1;break;case"LastPage":le.currentPageNumber=le.pagesCount;break;case"NextPage":le.nextPage();break;case"PrevPage":le.previousPage();break;case"ZoomViewIn":$||le.increaseScale();break;case"ZoomViewOut":$||le.decreaseScale();break;case"WillPrintFinished":(c=e(this,i))==null||c.resolve(),Z(this,i,null);break}return}if($&&W.focus)return;delete W.id,delete W.siblings;const u=we?[Ee,...we]:[Ee];for(const L of u){const H=document.querySelector(`[data-element-id="${L}"]`);H?H.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:W})):(P=e(this,w))==null||P.annotationStorage.setValue(L,W)}},h=new WeakSet,Xt=async function(W,le=!1){const $=e(this,w),Ee=this._visitedPages;if(le&&Z(this,x,new r.PromiseCapability),!e(this,x))return;const we=e(this,E).getPageView(W-1);if((we==null?void 0:we.renderingState)!==l.RenderingStates.FINISHED){this._pageOpenPending.add(W);return}this._pageOpenPending.delete(W);const N=(async()=>{var u,c;const a=await(Ee.has(W)?null:(u=we.pdfPage)==null?void 0:u.getJSActions());$===e(this,w)&&await((c=e(this,s))==null?void 0:c.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:W,actions:a}))})();Ee.set(W,N)},C=new WeakSet,Xi=async function(W){var we;const le=e(this,w),$=this._visitedPages;if(!e(this,x)||this._pageOpenPending.has(W))return;const Ee=$.get(W);Ee&&($.set(W,null),await Ee,le===e(this,w)&&await((we=e(this,s))==null?void 0:we.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:W})))},ie=new WeakSet,qn=function(){if(Z(this,b,new r.PromiseCapability),e(this,s))throw new Error("#initScripting: Scripting already exists.");return e(this,f).createScripting({sandboxBundleSrc:e(this,y)})},q=new WeakSet,Tt=async function(){var W,le,$;if(!e(this,s)){Z(this,w,null),(W=e(this,b))==null||W.resolve();return}e(this,x)&&(await Promise.race([e(this,x).promise,new Promise(Ee=>{setTimeout(Ee,1e3)})]).catch(()=>{}),Z(this,x,null)),Z(this,w,null);try{await e(this,s).destroySandbox()}catch{}(le=e(this,i))==null||le.reject(new Error("Scripting destroyed.")),Z(this,i,null);for(const[Ee,we]of this._internalEvents)e(this,v)._off(Ee,we);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),Z(this,s,null),Z(this,p,!1),($=e(this,b))==null||$.resolve()},M.PDFScriptingManager=R},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFSinglePageViewer=void 0;var l=A(2),r=A(25);class R extends r.PDFViewer{_resetView(){super._resetView(),this._scrollMode=l.ScrollMode.PAGE,this._spreadMode=l.SpreadMode.NONE}set scrollMode(b){}_updateScrollMode(){}set spreadMode(b){}_updateSpreadMode(){}}M.PDFSinglePageViewer=R},(k,M,A)=>{var y,s,i,qi,m,h,D,C,z,ie,T,q,J,Y,W,le,$,Ee,we,N,a,u,Yn,P,Kn,H,Qn,ne,Zn,pe,Mt,se,qt,ge,Jn,Re,Yi,de,es,te,ot,me,Ki,Le,ts,Ue,is,Ge,Qi,Xe,ns;Object.defineProperty(M,"__esModule",{value:!0}),M.PagesCountLimit=M.PDFViewer=M.PDFPageViewBuffer=void 0;var l=A(4),r=A(2),R=A(7),x=A(13),b=A(26),d=A(5);const v=10,f={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};M.PagesCountLimit=f;function w(Se){return Object.values(l.AnnotationEditorType).includes(Se)&&Se!==l.AnnotationEditorType.DISABLE}class E{constructor(_){O(this,i);O(this,y,new Set);O(this,s,0);Z(this,s,_)}push(_){const I=e(this,y);I.has(_)&&I.delete(_),I.add(_),I.size>e(this,s)&&G(this,i,qi).call(this)}resize(_,I=null){Z(this,s,_);const he=e(this,y);if(I){const ae=he.size;let ue=1;for(const ve of he)if(I.has(ve.id)&&(he.delete(ve),he.add(ve)),++ue>ae)break}for(;he.size>e(this,s);)G(this,i,qi).call(this)}has(_){return e(this,y).has(_)}[Symbol.iterator](){return e(this,y).keys()}}y=new WeakMap,s=new WeakMap,i=new WeakSet,qi=function(){const _=e(this,y).keys().next().value;_==null||_.destroy(),e(this,y).delete(_)},M.PDFPageViewBuffer=E;class p{constructor(_){O(this,u);O(this,P);O(this,H);O(this,ne);O(this,pe);O(this,se);O(this,ge);O(this,Re);O(this,de);O(this,te);O(this,me);O(this,Le);O(this,Ue);O(this,Ge);O(this,Xe);O(this,m,null);O(this,h,null);O(this,D,l.AnnotationEditorType.NONE);O(this,C,null);O(this,z,l.AnnotationMode.ENABLE_FORMS);O(this,ie,null);O(this,T,null);O(this,q,!1);O(this,J,!1);O(this,Y,null);O(this,W,!1);O(this,le,0);O(this,$,new ResizeObserver(G(this,Xe,ns).bind(this)));O(this,Ee,null);O(this,we,null);O(this,N,null);O(this,a,r.TextLayerMode.ENABLE);var he,ae;const I="3.11.174";if(l.version!==I)throw new Error(`The API version "${l.version}" does not match the Viewer version "${I}".`);if(this.container=_.container,this.viewer=_.viewer||_.container.firstElementChild,((he=this.container)==null?void 0:he.tagName)!=="DIV"||((ae=this.viewer)==null?void 0:ae.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");e(this,$).observe(this.container),this.eventBus=_.eventBus,this.linkService=_.linkService||new d.SimpleLinkService,this.downloadManager=_.downloadManager||null,this.findController=_.findController||null,Z(this,h,_.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=ue=>this._getVisiblePages().ids.has(ue)),this._scriptingManager=_.scriptingManager||null,Z(this,a,_.textLayerMode??r.TextLayerMode.ENABLE),Z(this,z,_.annotationMode??l.AnnotationMode.ENABLE_FORMS),Z(this,D,_.annotationEditorMode??l.AnnotationEditorType.NONE),this.imageResourcesPath=_.imageResourcesPath||"",this.enablePrintAutoRotate=_.enablePrintAutoRotate||!1,this.removePageBorders=_.removePageBorders||!1,_.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),_.maxCanvasPixels=0),this.isOffscreenCanvasSupported=_.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=_.maxCanvasPixels,this.l10n=_.l10n||R.NullL10n,Z(this,q,_.enablePermissions||!1),this.pageColors=_.pageColors||null,this.defaultRenderingQueue=!_.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new b.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=_.renderingQueue,this.scroll=(0,r.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=r.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),G(this,Ge,Qi).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:ue,pdfPage:ve})=>{const j=this._pages[ue-1];e(this,m).has(j)||ve==null||ve.cleanup()})}get pagesCount(){return this._pages.length}getPageView(_){return this._pages[_]}getCachedPageViews(){return new Set(e(this,m))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(_=>_==null?void 0:_.pdfPage)}get renderForms(){return e(this,z)===l.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(_){if(!Number.isInteger(_))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(_,!0)||console.error(`currentPageNumber: "${_}" is not a valid page.`))}_setCurrentPageNumber(_,I=!1){var ae;if(this._currentPageNumber===_)return I&&G(this,me,Ki).call(this),!0;if(!(0<_&&_<=this.pagesCount))return!1;const he=this._currentPageNumber;return this._currentPageNumber=_,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:_,pageLabel:((ae=this._pageLabels)==null?void 0:ae[_-1])??null,previous:he}),I&&G(this,me,Ki).call(this),!0}get currentPageLabel(){var _;return((_=this._pageLabels)==null?void 0:_[this._currentPageNumber-1])??null}set currentPageLabel(_){if(!this.pdfDocument)return;let I=_|0;if(this._pageLabels){const he=this._pageLabels.indexOf(_);he>=0&&(I=he+1)}this._setCurrentPageNumber(I,!0)||console.error(`currentPageLabel: "${_}" is not a valid page.`)}get currentScale(){return this._currentScale!==r.UNKNOWN_SCALE?this._currentScale:r.DEFAULT_SCALE}set currentScale(_){if(isNaN(_))throw new Error("Invalid numeric scale.");this.pdfDocument&&G(this,te,ot).call(this,_,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(_){this.pdfDocument&&G(this,te,ot).call(this,_,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(_){if(!(0,r.isValidRotation)(_))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(_%=360,_<0&&(_+=360),this._pagesRotation===_))return;this._pagesRotation=_;const I=this._currentPageNumber;this.refresh(!0,{rotation:_}),this._currentScaleValue&&G(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:_,pageNumber:I}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const _=[],I=[];for(let he=1,ae=this.pdfDocument.numPages;he<=ae;++he){if(e(this,W))return null;I.length=0;const ue=await this.pdfDocument.getPage(he),{items:ve}=await ue.getTextContent();for(const j of ve)j.str&&I.push(j.str),j.hasEOL&&I.push(`
`);_.push((0,r.removeNullCharacters)(I.join("")))}return _.join(`
`)}setDocument(_){var ve,j;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(ve=this.findController)==null||ve.setDocument(null),(j=this._scriptingManager)==null||j.setDocument(null),e(this,C)&&(e(this,C).destroy(),Z(this,C,null))),this.pdfDocument=_,!_)return;const I=_.numPages,he=_.getPage(1),ae=_.getOptionalContentConfig(),ue=e(this,q)?_.getPermissions():Promise.resolve();if(I>f.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ce=this._scrollMode=r.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ce})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:I})},()=>{}),this._onBeforeDraw=ce=>{const Me=this._pages[ce.pageNumber-1];Me&&e(this,m).push(Me)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ce=>{ce.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ce.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,e(this,we)&&(document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([he,ue]).then(([ce,Me])=>{var o,B;if(_!==this.pdfDocument)return;this._firstPageCapability.resolve(ce),this._optionalContentConfigPromise=ae;const{annotationEditorMode:Ae,annotationMode:ke,textLayerMode:Oe}=G(this,P,Kn).call(this,Me);if(Oe!==r.TextLayerMode.DISABLE){const X=Z(this,Y,document.createElement("div"));X.id="hiddenCopyElement",this.viewer.before(X)}if(Ae!==l.AnnotationEditorType.DISABLE){const X=Ae;_.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):w(X)?(Z(this,C,new l.AnnotationEditorUIManager(this.container,this.viewer,e(this,h),this.eventBus,_,this.pageColors)),X!==l.AnnotationEditorType.NONE&&e(this,C).updateMode(X)):console.error(`Invalid AnnotationEditor mode: ${X}`)}const je=G(this,u,Yn).bind(this),Ce=this._scrollMode===r.ScrollMode.PAGE?null:this.viewer,qe=this.currentScale,Ve=ce.getViewport({scale:qe*l.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ve.scale),(((o=this.pageColors)==null?void 0:o.foreground)==="CanvasText"||((B=this.pageColors)==null?void 0:B.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",_.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let X=1;X<=I;++X){const re=new x.PDFPageView({container:Ce,eventBus:this.eventBus,id:X,scale:qe,defaultViewport:Ve.clone(),optionalContentConfigPromise:ae,renderingQueue:this.renderingQueue,textLayerMode:Oe,annotationMode:ke,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:je});this._pages.push(re)}const Q=this._pages[0];Q&&(Q.setPdfPage(ce),this.linkService.cachePageRef(1,ce.ref)),this._scrollMode===r.ScrollMode.PAGE?G(this,pe,Mt).call(this):this._spreadMode!==r.SpreadMode.NONE&&this._updateSpreadMode(),G(this,H,Qn).call(this).then(async()=>{var re,fe;if((re=this.findController)==null||re.setDocument(_),(fe=this._scriptingManager)==null||fe.setDocument(_),e(this,Y)&&(Z(this,T,G(this,ne,Zn).bind(this,Oe)),document.addEventListener("copy",e(this,T))),e(this,C)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e(this,D)}),_.loadingParams.disableAutoFetch||I>f.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let X=I-1;if(X<=0){this._pagesCapability.resolve();return}for(let ye=2;ye<=I;++ye){const De=_.getPage(ye).then(Ne=>{const Ie=this._pages[ye-1];Ie.pdfPage||Ie.setPdfPage(Ne),this.linkService.cachePageRef(ye,Ne.ref),--X===0&&this._pagesCapability.resolve()},Ne=>{console.error(`Unable to get page ${ye} to initialize viewer`,Ne),--X===0&&this._pagesCapability.resolve()});ye%f.PAUSE_EAGER_PAGE_INIT===0&&await De}}),this.eventBus.dispatch("pagesinit",{source:this}),_.getMetadata().then(({info:X})=>{_===this.pdfDocument&&X.Language&&(this.viewer.lang=X.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ce=>{console.error("Unable to initialize viewer",ce),this._pagesCapability.reject(ce)})}setPageLabels(_){var I;if(this.pdfDocument){_?Array.isArray(_)&&this.pdfDocument.numPages===_.length?this._pageLabels=_:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let he=0,ae=this._pages.length;he<ae;he++)this._pages[he].setPageLabel(((I=this._pageLabels)==null?void 0:I[he])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=r.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Z(this,m,new E(v)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new l.PromiseCapability,this._onePageRenderedCapability=new l.PromiseCapability,this._pagesCapability=new l.PromiseCapability,this._scrollMode=r.ScrollMode.VERTICAL,this._previousScrollMode=r.ScrollMode.UNKNOWN,this._spreadMode=r.SpreadMode.NONE,Z(this,Ee,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),e(this,we)&&(document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),e(this,Y)&&(document.removeEventListener("copy",e(this,T)),Z(this,T,null),e(this,Y).remove(),Z(this,Y,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(_){if(!this._pageLabels)return null;const I=this._pageLabels.indexOf(_);return I<0?null:I+1}scrollPageIntoView({pageNumber:_,destArray:I=null,allowNegativeOffset:he=!1,ignoreDestinationZoom:ae=!1}){if(!this.pdfDocument)return;const ue=Number.isInteger(_)&&this._pages[_-1];if(!ue){console.error(`scrollPageIntoView: "${_}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!I){this._setCurrentPageNumber(_,!0);return}let ve=0,j=0,ce=0,Me=0,Ae,ke;const Oe=ue.rotation%180!==0,je=(Oe?ue.height:ue.width)/ue.scale/l.PixelsPerInch.PDF_TO_CSS_UNITS,Ce=(Oe?ue.width:ue.height)/ue.scale/l.PixelsPerInch.PDF_TO_CSS_UNITS;let qe=0;switch(I[1].name){case"XYZ":ve=I[2],j=I[3],qe=I[4],ve=ve!==null?ve:0,j=j!==null?j:Ce;break;case"Fit":case"FitB":qe="page-fit";break;case"FitH":case"FitBH":j=I[2],qe="page-width",j===null&&this._location?(ve=this._location.left,j=this._location.top):(typeof j!="number"||j<0)&&(j=Ce);break;case"FitV":case"FitBV":ve=I[2],ce=je,Me=Ce,qe="page-height";break;case"FitR":ve=I[2],j=I[3],ce=I[4]-ve,Me=I[5]-j;let B=r.SCROLLBAR_PADDING,X=r.VERTICAL_PADDING;this.removePageBorders&&(B=X=0),Ae=(this.container.clientWidth-B)/ce/l.PixelsPerInch.PDF_TO_CSS_UNITS,ke=(this.container.clientHeight-X)/Me/l.PixelsPerInch.PDF_TO_CSS_UNITS,qe=Math.min(Math.abs(Ae),Math.abs(ke));break;default:console.error(`scrollPageIntoView: "${I[1].name}" is not a valid destination type.`);return}if(ae||(qe&&qe!==this._currentScale?this.currentScaleValue=qe:this._currentScale===r.UNKNOWN_SCALE&&(this.currentScaleValue=r.DEFAULT_SCALE_VALUE)),qe==="page-fit"&&!I[4]){G(this,se,qt).call(this,ue);return}const Ve=[ue.viewport.convertToViewportPoint(ve,j),ue.viewport.convertToViewportPoint(ve+ce,j+Me)];let Q=Math.min(Ve[0][0],Ve[1][0]),o=Math.min(Ve[0][1],Ve[1][1]);he||(Q=Math.max(Q,0),o=Math.max(o,0)),G(this,se,qt).call(this,ue,{left:Q,top:o})}_updateLocation(_){const I=this._currentScale,he=this._currentScaleValue,ae=parseFloat(he)===I?Math.round(I*1e4)/100:he,ue=_.id,ve=this._pages[ue-1],j=this.container,ce=ve.getPagePoint(j.scrollLeft-_.x,j.scrollTop-_.y),Me=Math.round(ce[0]),Ae=Math.round(ce[1]);let ke=`#page=${ue}`;this.isInPresentationMode||(ke+=`&zoom=${ae},${Me},${Ae}`),this._location={pageNumber:ue,scale:ae,top:Ae,left:Me,rotation:this._pagesRotation,pdfOpenParams:ke}}update(){const _=this._getVisiblePages(),I=_.views,he=I.length;if(he===0)return;const ae=Math.max(v,2*he+1);e(this,m).resize(ae,_.ids),this.renderingQueue.renderHighestPriority(_);const ue=this._spreadMode===r.SpreadMode.NONE&&(this._scrollMode===r.ScrollMode.PAGE||this._scrollMode===r.ScrollMode.VERTICAL),ve=this._currentPageNumber;let j=!1;for(const ce of I){if(ce.percent<100)break;if(ce.id===ve&&ue){j=!0;break}}this._setCurrentPageNumber(j?ve:I[0].id),this._updateLocation(_.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(_){return this.container.contains(_)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===r.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===r.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const _=this._scrollMode===r.ScrollMode.PAGE?e(this,Ee).pages:this._pages,I=this._scrollMode===r.ScrollMode.HORIZONTAL,he=I&&this._isContainerRtl;return(0,r.getVisibleElements)({scrollEl:this.container,views:_,sortByVisibility:!0,horizontal:I,rtl:he})}cleanup(){for(const _ of this._pages)_.renderingState!==r.RenderingStates.FINISHED&&_.reset()}_cancelRendering(){for(const _ of this._pages)_.cancelRendering()}forceRendering(_){const I=_||this._getVisiblePages(),he=G(this,Ue,is).call(this,I),ae=this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL,ue=this.renderingQueue.getHighestPriority(I,this._pages,he,ae);return ue?(G(this,Le,ts).call(this,ue).then(()=>{this.renderingQueue.renderView(ue)}),!0):!1}get hasEqualPageSizes(){const _=this._pages[0];for(let I=1,he=this._pages.length;I<he;++I){const ae=this._pages[I];if(ae.width!==_.width||ae.height!==_.height)return!1}return!0}getPagesOverview(){let _;return this._pages.map(I=>{const he=I.pdfPage.getViewport({scale:1}),ae=(0,r.isPortraitOrientation)(he);if(_===void 0)_=ae;else if(this.enablePrintAutoRotate&&ae!==_)return{width:he.height,height:he.width,rotation:(he.rotation-90)%360};return{width:he.width,height:he.height,rotation:he.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(_){if(!(_ instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${_}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=_,this.refresh(!1,{optionalContentConfigPromise:_}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:_}))}get scrollMode(){return this._scrollMode}set scrollMode(_){if(this._scrollMode!==_){if(!(0,r.isValidScrollMode)(_))throw new Error(`Invalid scroll mode: ${_}`);this.pagesCount>f.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=_,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(_=null){const I=this._scrollMode,he=this.viewer;he.classList.toggle("scrollHorizontal",I===r.ScrollMode.HORIZONTAL),he.classList.toggle("scrollWrapped",I===r.ScrollMode.WRAPPED),!(!this.pdfDocument||!_)&&(I===r.ScrollMode.PAGE?G(this,pe,Mt).call(this):this._previousScrollMode===r.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&G(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(_){if(this._spreadMode!==_){if(!(0,r.isValidSpreadMode)(_))throw new Error(`Invalid spread mode: ${_}`);this._spreadMode=_,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:_}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(_=null){if(!this.pdfDocument)return;const I=this.viewer,he=this._pages;if(this._scrollMode===r.ScrollMode.PAGE)G(this,pe,Mt).call(this);else if(I.textContent="",this._spreadMode===r.SpreadMode.NONE)for(const ae of this._pages)I.append(ae.div);else{const ae=this._spreadMode-1;let ue=null;for(let ve=0,j=he.length;ve<j;++ve)ue===null?(ue=document.createElement("div"),ue.className="spread",I.append(ue)):ve%2===ae&&(ue=ue.cloneNode(!1),I.append(ue)),ue.append(he[ve].div)}_&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&G(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}_getPageAdvance(_,I=!1){switch(this._scrollMode){case r.ScrollMode.WRAPPED:{const{views:he}=this._getVisiblePages(),ae=new Map;for(const{id:ue,y:ve,percent:j,widthPercent:ce}of he){if(j===0||ce<100)continue;let Me=ae.get(ve);Me||ae.set(ve,Me||(Me=[])),Me.push(ue)}for(const ue of ae.values()){const ve=ue.indexOf(_);if(ve===-1)continue;const j=ue.length;if(j===1)break;if(I)for(let ce=ve-1,Me=0;ce>=Me;ce--){const Ae=ue[ce],ke=ue[ce+1]-1;if(Ae<ke)return _-ke}else for(let ce=ve+1,Me=j;ce<Me;ce++){const Ae=ue[ce],ke=ue[ce-1]+1;if(Ae>ke)return ke-_}if(I){const ce=ue[0];if(ce<_)return _-ce+1}else{const ce=ue[j-1];if(ce>_)return ce-_+1}break}break}case r.ScrollMode.HORIZONTAL:break;case r.ScrollMode.PAGE:case r.ScrollMode.VERTICAL:{if(this._spreadMode===r.SpreadMode.NONE)break;const he=this._spreadMode-1;if(I&&_%2!==he)break;if(!I&&_%2===he)break;const{views:ae}=this._getVisiblePages(),ue=I?_-1:_+1;for(const{id:ve,percent:j,widthPercent:ce}of ae)if(ve===ue){if(j>0&&ce===100)return 2;break}break}}return 1}nextPage(){const _=this._currentPageNumber,I=this.pagesCount;if(_>=I)return!1;const he=this._getPageAdvance(_,!1)||1;return this.currentPageNumber=Math.min(_+he,I),!0}previousPage(){const _=this._currentPageNumber;if(_<=1)return!1;const I=this._getPageAdvance(_,!0)||1;return this.currentPageNumber=Math.max(_-I,1),!0}increaseScale({drawingDelay:_,scaleFactor:I,steps:he}={}){if(!this.pdfDocument)return;let ae=this._currentScale;if(I>1)ae=Math.round(ae*I*100)/100;else{he??(he=1);do ae=Math.ceil((ae*r.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&ae<r.MAX_SCALE)}G(this,te,ot).call(this,Math.min(r.MAX_SCALE,ae),{noScroll:!1,drawingDelay:_})}decreaseScale({drawingDelay:_,scaleFactor:I,steps:he}={}){if(!this.pdfDocument)return;let ae=this._currentScale;if(I>0&&I<1)ae=Math.round(ae*I*100)/100;else{he??(he=1);do ae=Math.floor((ae/r.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&ae>r.MIN_SCALE)}G(this,te,ot).call(this,Math.max(r.MIN_SCALE,ae),{noScroll:!1,drawingDelay:_})}get containerTopLeft(){return e(this,ie)||Z(this,ie,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return e(this,C)?e(this,D):l.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:_,editId:I=null}){if(!e(this,C))throw new Error("The AnnotationEditor is not enabled.");if(e(this,D)!==_){if(!w(_))throw new Error(`Invalid AnnotationEditor mode: ${_}`);this.pdfDocument&&(Z(this,D,_),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:_}),e(this,C).updateMode(_,I))}}set annotationEditorParams({type:_,value:I}){if(!e(this,C))throw new Error("The AnnotationEditor is not enabled.");e(this,C).updateParams(_,I)}refresh(_=!1,I=Object.create(null)){if(this.pdfDocument){for(const he of this._pages)he.update(I);e(this,N)!==null&&(clearTimeout(e(this,N)),Z(this,N,null)),_||this.update()}}}m=new WeakMap,h=new WeakMap,D=new WeakMap,C=new WeakMap,z=new WeakMap,ie=new WeakMap,T=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,W=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,u=new WeakSet,Yn=function(){const _=this;return{get annotationEditorUIManager(){return e(_,C)},get annotationStorage(){var I;return(I=_.pdfDocument)==null?void 0:I.annotationStorage},get downloadManager(){return _.downloadManager},get enableScripting(){return!!_._scriptingManager},get fieldObjectsPromise(){var I;return(I=_.pdfDocument)==null?void 0:I.getFieldObjects()},get findController(){return _.findController},get hasJSActionsPromise(){var I;return(I=_.pdfDocument)==null?void 0:I.hasJSActions()},get linkService(){return _.linkService}}},P=new WeakSet,Kn=function(_){const I={annotationEditorMode:e(this,D),annotationMode:e(this,z),textLayerMode:e(this,a)};return _&&(!_.includes(l.PermissionFlag.COPY)&&e(this,a)===r.TextLayerMode.ENABLE&&(I.textLayerMode=r.TextLayerMode.ENABLE_PERMISSIONS),_.includes(l.PermissionFlag.MODIFY_CONTENTS)||(I.annotationEditorMode=l.AnnotationEditorType.DISABLE),!_.includes(l.PermissionFlag.MODIFY_ANNOTATIONS)&&!_.includes(l.PermissionFlag.FILL_INTERACTIVE_FORMS)&&e(this,z)===l.AnnotationMode.ENABLE_FORMS&&(I.annotationMode=l.AnnotationMode.ENABLE)),I},H=new WeakSet,Qn=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const _=new Promise(I=>{Z(this,we,()=>{document.visibilityState==="hidden"&&(I(),document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null))}),document.addEventListener("visibilitychange",e(this,we))});return Promise.race([this._onePageRenderedCapability.promise,_])},ne=new WeakSet,Zn=function(_,I){const he=document.getSelection(),{focusNode:ae,anchorNode:ue}=he;if(ue&&ae&&he.containsNode(e(this,Y))){if(e(this,J)||_===r.TextLayerMode.ENABLE_PERMISSIONS){I.preventDefault(),I.stopPropagation();return}Z(this,J,!0);const ve=this.container.style.cursor;this.container.style.cursor="wait";const j=ce=>Z(this,W,ce.key==="Escape");window.addEventListener("keydown",j),this.getAllText().then(async ce=>{ce!==null&&await navigator.clipboard.writeText(ce)}).catch(ce=>{console.warn(`Something goes wrong when extracting the text: ${ce.message}`)}).finally(()=>{Z(this,J,!1),Z(this,W,!1),window.removeEventListener("keydown",j),this.container.style.cursor=ve}),I.preventDefault(),I.stopPropagation()}},pe=new WeakSet,Mt=function(){if(this._scrollMode!==r.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const _=this._currentPageNumber,I=e(this,Ee),he=this.viewer;if(he.textContent="",I.pages.length=0,this._spreadMode===r.SpreadMode.NONE&&!this.isInPresentationMode){const ae=this._pages[_-1];he.append(ae.div),I.pages.push(ae)}else{const ae=new Set,ue=this._spreadMode-1;ue===-1?ae.add(_-1):_%2!==ue?(ae.add(_-1),ae.add(_)):(ae.add(_-2),ae.add(_-1));const ve=document.createElement("div");if(ve.className="spread",this.isInPresentationMode){const j=document.createElement("div");j.className="dummyPage",ve.append(j)}for(const j of ae){const ce=this._pages[j];ce&&(ve.append(ce.div),I.pages.push(ce))}he.append(ve)}I.scrollDown=_>=I.previousPageNumber,I.previousPageNumber=_},se=new WeakSet,qt=function(_,I=null){const{div:he,id:ae}=_;if(this._currentPageNumber!==ae&&this._setCurrentPageNumber(ae),this._scrollMode===r.ScrollMode.PAGE&&(G(this,pe,Mt).call(this),this.update()),!I&&!this.isInPresentationMode){const ue=he.offsetLeft+he.clientLeft,ve=ue+he.clientWidth,{scrollLeft:j,clientWidth:ce}=this.container;(this._scrollMode===r.ScrollMode.HORIZONTAL||ue<j||ve>j+ce)&&(I={left:0,top:0})}(0,r.scrollIntoView)(he,I),!this._currentScaleValue&&this._location&&(this._location=null)},ge=new WeakSet,Jn=function(_){return _===this._currentScale||Math.abs(_-this._currentScale)<1e-15},Re=new WeakSet,Yi=function(_,I,{noScroll:he=!1,preset:ae=!1,drawingDelay:ue=-1}){if(this._currentScaleValue=I.toString(),G(this,ge,Jn).call(this,_)){ae&&this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:I});return}this.viewer.style.setProperty("--scale-factor",_*l.PixelsPerInch.PDF_TO_CSS_UNITS);const ve=ue>=0&&ue<1e3;if(this.refresh(!0,{scale:_,drawingDelay:ve?ue:-1}),ve&&Z(this,N,setTimeout(()=>{Z(this,N,null),this.refresh()},ue)),this._currentScale=_,!he){let j=this._currentPageNumber,ce;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(j=this._location.pageNumber,ce=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:j,destArray:ce,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:ae?I:void 0}),this.defaultRenderingQueue&&this.update()},de=new WeakSet,es=function(){return this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL?2:1},te=new WeakSet,ot=function(_,I){let he=parseFloat(_);if(he>0)I.preset=!1,G(this,Re,Yi).call(this,he,_,I);else{const ae=this._pages[this._currentPageNumber-1];if(!ae)return;let ue=r.SCROLLBAR_PADDING,ve=r.VERTICAL_PADDING;this.isInPresentationMode?(ue=ve=4,this._spreadMode!==r.SpreadMode.NONE&&(ue*=2)):this.removePageBorders?ue=ve=0:this._scrollMode===r.ScrollMode.HORIZONTAL&&([ue,ve]=[ve,ue]);const j=(this.container.clientWidth-ue)/ae.width*ae.scale/e(this,de,es),ce=(this.container.clientHeight-ve)/ae.height*ae.scale;switch(_){case"page-actual":he=1;break;case"page-width":he=j;break;case"page-height":he=ce;break;case"page-fit":he=Math.min(j,ce);break;case"auto":const Me=(0,r.isPortraitOrientation)(ae)?j:Math.min(ce,j);he=Math.min(r.MAX_AUTO_SCALE,Me);break;default:console.error(`#setScale: "${_}" is an unknown zoom value.`);return}I.preset=!0,G(this,Re,Yi).call(this,he,_,I)}},me=new WeakSet,Ki=function(){const _=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&G(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),G(this,se,qt).call(this,_)},Le=new WeakSet,ts=async function(_){var I,he;if(_.pdfPage)return _.pdfPage;try{const ae=await this.pdfDocument.getPage(_.id);return _.pdfPage||_.setPdfPage(ae),(he=(I=this.linkService)._cachedPageNumber)!=null&&he.call(I,ae.ref)||this.linkService.cachePageRef(_.id,ae.ref),ae}catch(ae){return console.error("Unable to get page for page view",ae),null}},Ue=new WeakSet,is=function(_){var I,he;if(((I=_.first)==null?void 0:I.id)===1)return!0;if(((he=_.last)==null?void 0:he.id)===this.pagesCount)return!1;switch(this._scrollMode){case r.ScrollMode.PAGE:return e(this,Ee).scrollDown;case r.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ge=new WeakSet,Qi=function(_=this.container.clientHeight){_!==e(this,le)&&(Z(this,le,_),r.docStyle.setProperty("--viewer-container-height",`${_}px`))},Xe=new WeakSet,ns=function(_){for(const I of _)if(I.target===this.container){G(this,Ge,Qi).call(this,Math.floor(I.borderBoxSize[0].blockSize)),Z(this,ie,null);break}},M.PDFViewer=p},(k,M,A)=>{Object.defineProperty(M,"__esModule",{value:!0}),M.PDFRenderingQueue=void 0;var l=A(4),r=A(2);const R=3e4;class x{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(d){this.pdfViewer=d}setThumbnailViewer(d){this.pdfThumbnailViewer=d}isHighestPriority(d){return this.highestPriorityPage===d.renderingId}renderHighestPriority(d){var v;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(d)&&(this.isThumbnailViewEnabled&&((v=this.pdfThumbnailViewer)!=null&&v.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),R)))}getHighestPriority(d,v,f,w=!1){const E=d.views,p=E.length;if(p===0)return null;for(let m=0;m<p;m++){const h=E[m].view;if(!this.isViewFinished(h))return h}const y=d.first.id,s=d.last.id;if(s-y+1>p){const m=d.ids;for(let h=1,D=s-y;h<D;h++){const C=f?y+h:s-h;if(m.has(C))continue;const z=v[C-1];if(!this.isViewFinished(z))return z}}let i=f?s:y-2,S=v[i];return S&&!this.isViewFinished(S)||w&&(i+=f?1:-1,S=v[i],S&&!this.isViewFinished(S))?S:null}isViewFinished(d){return d.renderingState===r.RenderingStates.FINISHED}renderView(d){switch(d.renderingState){case r.RenderingStates.FINISHED:return!1;case r.RenderingStates.PAUSED:this.highestPriorityPage=d.renderingId,d.resume();break;case r.RenderingStates.RUNNING:this.highestPriorityPage=d.renderingId;break;case r.RenderingStates.INITIAL:this.highestPriorityPage=d.renderingId,d.draw().finally(()=>{this.renderHighestPriority()}).catch(v=>{v instanceof l.RenderingCancelledException||console.error(`renderView: "${v}"`)});break}return!0}}M.PDFRenderingQueue=x}],n={};function g(k){var M=n[k];if(M!==void 0)return M.exports;var A=n[k]={exports:{}};return F[k](A,A.exports,g),A.exports}var V={};return(()=>{var k=V;Object.defineProperty(k,"__esModule",{value:!0}),Object.defineProperty(k,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return r.AnnotationLayerBuilder}}),Object.defineProperty(k,"DownloadManager",{enumerable:!0,get:function(){return R.DownloadManager}}),Object.defineProperty(k,"EventBus",{enumerable:!0,get:function(){return x.EventBus}}),Object.defineProperty(k,"FindState",{enumerable:!0,get:function(){return M.FindState}}),Object.defineProperty(k,"GenericL10n",{enumerable:!0,get:function(){return b.GenericL10n}}),Object.defineProperty(k,"LinkTarget",{enumerable:!0,get:function(){return A.LinkTarget}}),Object.defineProperty(k,"NullL10n",{enumerable:!0,get:function(){return d.NullL10n}}),Object.defineProperty(k,"PDFFindController",{enumerable:!0,get:function(){return M.PDFFindController}}),Object.defineProperty(k,"PDFHistory",{enumerable:!0,get:function(){return v.PDFHistory}}),Object.defineProperty(k,"PDFLinkService",{enumerable:!0,get:function(){return A.PDFLinkService}}),Object.defineProperty(k,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(k,"PDFScriptingManager",{enumerable:!0,get:function(){return w.PDFScriptingManager}}),Object.defineProperty(k,"PDFSinglePageViewer",{enumerable:!0,get:function(){return E.PDFSinglePageViewer}}),Object.defineProperty(k,"PDFViewer",{enumerable:!0,get:function(){return p.PDFViewer}}),Object.defineProperty(k,"ProgressBar",{enumerable:!0,get:function(){return l.ProgressBar}}),Object.defineProperty(k,"RenderingStates",{enumerable:!0,get:function(){return l.RenderingStates}}),Object.defineProperty(k,"ScrollMode",{enumerable:!0,get:function(){return l.ScrollMode}}),Object.defineProperty(k,"SimpleLinkService",{enumerable:!0,get:function(){return A.SimpleLinkService}}),Object.defineProperty(k,"SpreadMode",{enumerable:!0,get:function(){return l.SpreadMode}}),Object.defineProperty(k,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return y.StructTreeLayerBuilder}}),Object.defineProperty(k,"TextLayerBuilder",{enumerable:!0,get:function(){return s.TextLayerBuilder}}),Object.defineProperty(k,"XfaLayerBuilder",{enumerable:!0,get:function(){return i.XfaLayerBuilder}}),Object.defineProperty(k,"parseQueryString",{enumerable:!0,get:function(){return l.parseQueryString}});var M=g(1),A=g(5),l=g(2),r=g(6),R=g(8),x=g(9),b=g(10),d=g(7),v=g(12),f=g(13),w=g(21),E=g(24),p=g(25),y=g(16),s=g(19),i=g(20)})(),V})())})(pdf_viewer);var pdf_viewerExports=pdf_viewer.exports,define_import_meta_env_default={BASE_URL:"/zasudi-solid/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=U=>{let t;const F=new Set,n=(r,R)=>{const x=typeof r=="function"?r(t):r;if(!Object.is(x,t)){const b=t;t=R??(typeof x!="object"||x===null)?x:Object.assign({},t,x),F.forEach(d=>d(t,b))}},g=()=>t,A={setState:n,getState:g,getInitialState:()=>l,subscribe:r=>(F.add(r),()=>F.delete(r)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),F.clear()}},l=t=U(n,g,A);return A},createStore=U=>U?createStoreImpl(U):createStoreImpl;function __awaiter(U,t,F,n){function g(V){return V instanceof F?V:new F(function(k){k(V)})}return new(F||(F=Promise))(function(V,k){function M(r){try{l(n.next(r))}catch(R){k(R)}}function A(r){try{l(n.throw(r))}catch(R){k(R)}}function l(r){r.done?V(r.value):g(r.value).then(M,A)}l((n=n.apply(U,t||[])).next())})}function __classPrivateFieldGet(U,t,F,n){if(F==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?U!==t||!n:!t.has(U))throw new TypeError("Cannot read private member from an object whose class did not declare it");return F==="m"?n:F==="a"?n.call(U):n?n.value:t.get(U)}function __classPrivateFieldSet(U,t,F,n,g){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!g)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?U!==t||!g:!t.has(U))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?g.call(U,F):g?g.value=F:t.set(U,F),F}typeof SuppressedError=="function"&&SuppressedError;const RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class OutputScale{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}}function scrollIntoView(U,t,F=!1){let n=U.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let g=U.offsetTop+U.clientTop,V=U.offsetLeft+U.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||F&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden");)if(g+=n.offsetTop,V+=n.offsetLeft,n=n.offsetParent,!n)return;t&&(t.top!==void 0&&(g+=t.top),t.left!==void 0&&(V+=t.left,n.scrollLeft=V)),n.scrollTop=g,n.scrollLeft=V}function watchScroll(U,t){const F=function(V){g||(g=window.requestAnimationFrame(function(){g=null;const M=U.scrollLeft,A=n.lastX;M!==A&&(n.right=M>A),n.lastX=M;const l=U.scrollTop,r=n.lastY;l!==r&&(n.down=l>r),n.lastY=l,t(n)}))},n={right:!0,down:!0,lastX:U.scrollLeft,lastY:U.scrollTop,_eventHandler:F};let g=null;return U.addEventListener("scroll",F,!0),n}function binarySearchFirstItem(U,t,F=0){let n=F,g=U.length-1;if(g<0||!t(U[g]))return U.length;if(t(U[n]))return n;for(;n<g;){const V=n+g>>1,k=U[V];t(k)?g=V:n=V+1}return n}function getPageSizeInches({view:U,userUnit:t,rotate:F}){const[n,g,V,k]=U,M=F%180!==0,A=(V-n)/72*t,l=(k-g)/72*t;return{width:M?l:A,height:M?A:l}}function backtrackBeforeAllVisibleElements(U,t,F){if(U<2)return U;let n=t[U].div,g=n.offsetTop+n.clientTop;g>=F&&(n=t[U-1].div,g=n.offsetTop+n.clientTop);for(let V=U-2;V>=0&&(n=t[V].div,!(n.offsetTop+n.clientTop+n.clientHeight<=g));--V)U=V;return U}function getVisibleElements({scrollEl:U,views:t,sortByVisibility:F=!1,horizontal:n=!1,rtl:g=!1}){const V=U.scrollTop,k=V+U.clientHeight,M=U.scrollLeft,A=M+U.clientWidth;function l(E){const p=E.div;return p.offsetTop+p.clientTop+p.clientHeight>V}function r(E){const p=E.div,y=p.offsetLeft+p.clientLeft,s=y+p.clientWidth;return g?y<A:s>M}const R=[],x=new Set,b=t.length;let d=binarySearchFirstItem(t,n?r:l);d>0&&d<b&&!n&&(d=backtrackBeforeAllVisibleElements(d,t,V));let v=n?A:-1;for(let E=d;E<b;E++){const p=t[E],y=p.div,s=y.offsetLeft+y.clientLeft,i=y.offsetTop+y.clientTop,S=y.clientWidth,m=y.clientHeight,h=s+S,D=i+m;if(v===-1)D>=k&&(v=D);else if((n?s:i)>v)break;if(D<=V||i>=k||h<=M||s>=A)continue;const C=Math.max(0,V-i)+Math.max(0,D-k),z=Math.max(0,M-s)+Math.max(0,h-A),ie=(m-C)/m,T=(S-z)/S,q=ie*T*100|0;R.push({id:p.id,x:s,y:i,view:p,percent:q,widthPercent:T*100|0}),x.add(p.id)}const f=R[0],w=R.at(-1);return F&&R.sort(function(E,p){const y=E.percent-p.percent;return Math.abs(y)>.001?-y:E.id-p.id}),{first:f,last:w,views:R,ids:x}}function normalizeWheelEventDirection(U){let t=Math.hypot(U.deltaX,U.deltaY);const F=Math.atan2(U.deltaY,U.deltaX);return-.25*Math.PI<F&&F<.75*Math.PI&&(t=-t),t}function normalizeWheelEventDelta(U){const t=U.deltaMode;let F=normalizeWheelEventDirection(U);const n=30,g=30;return t===WheelEvent.DOM_DELTA_PIXEL?F/=n*g:t===WheelEvent.DOM_DELTA_LINE&&(F/=g),F}function isValidRotation(U){return Number.isInteger(U)&&U%90===0}function isValidScrollMode(U){return Number.isInteger(U)&&Object.values(ScrollMode).includes(U)&&U!==ScrollMode.UNKNOWN}function isValidSpreadMode(U){return Number.isInteger(U)&&Object.values(SpreadMode).includes(U)&&U!==SpreadMode.UNKNOWN}function isPortraitOrientation(U){return U.width<=U.height}new Promise(function(U){window.requestAnimationFrame(U)});document.documentElement.style;const CLEANUP_TIMEOUT=3e4;class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){var F,n;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!(!((F=this.pdfViewer)===null||F===void 0)&&F.forceRendering(t))&&(this.isThumbnailViewEnabled&&(!((n=this.pdfThumbnailViewer)===null||n===void 0)&&n.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)))}getHighestPriority(t,F,n,g=!1){const V=t.views,k=V.length;if(k===0)return null;for(let R=0;R<k;R++){const x=V[R].view;if(!this.isViewFinished(x))return x}const M=t.first.id,A=t.last.id;if(A-M+1>k){const R=t.ids;for(let x=1,b=A-M;x<b;x++){const d=n?M+x:A-x;if(R.has(d))continue;const v=F[d-1];if(!this.isViewFinished(v))return v}}let l=n?A:M-2,r=F[l];return r&&!this.isViewFinished(r)||g&&(l+=n?1:-1,r=F[l],r&&!this.isViewFinished(r))?r:null}isViewFinished(t){return t.renderingState===RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(F=>{F instanceof pdfExports.RenderingCancelledException||console.error(`renderView: "${F}"`)});break}return!0}}var _a,_TempImageFactory_tempCanvas;const DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3;class TempImageFactory{static getCanvas(t,F){const n=__classPrivateFieldSet(this,_a,__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas)||document.createElement("canvas"),"f",_TempImageFactory_tempCanvas);n.width=t,n.height=F;const g=n.getContext("2d",{alpha:!1});g.save(),g.fillStyle="rgb(255, 255, 255)",g.fillRect(0,0,t,F),g.restore();const V=n.getContext("2d");return[n,V]}static destroyCanvas(){const t=__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas);t&&(t.width=0,t.height=0),__classPrivateFieldSet(this,_a,null,"f",_TempImageFactory_tempCanvas)}}_a=TempImageFactory;_TempImageFactory_tempCanvas={value:null};class PDFThumbnailView{constructor({container:t,eventBus:F,id:n,defaultViewport:g,optionalContentConfigPromise:V,linkService:k,renderingQueue:M,l10n:A,pageColors:l,store:r,thumbnailWidth:R}){this.container=t,this.eventBus=F,this.id=n,this.renderingId="thumbnail"+n,this.pageLabel=null,this.store=r,this.loaded=!1,this.pdfPage=null,this.rotation=0,this.viewport=g,this.pdfPageRotate=g.rotation,this._optionalContentConfigPromise=V||null,this.pageColors=l||null,this.linkService=k,this.renderingQueue=M,this.renderTask=null,this.renderingState=RenderingStates.INITIAL,this.resume=null;const x=this.viewport.width,b=this.viewport.height,d=x/b;this.canvasWidth=R,this.canvasHeight=this.canvasWidth/d|0,this.scale=this.canvasWidth/x,this.l10n=A,this.canvas=null,this.src=null;const v=document.createElement("div");v.className="thumbnail pdfSlickThumbHolder",v.setAttribute("data-page-number",this.id.toString()),this.div=v,t.append(v)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const F=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:F}),this.reset()}reset(){this.cancelRendering(),this.renderingState=RenderingStates.INITIAL;const t=this.viewport.width,F=this.viewport.height,n=t/F;this.canvasHeight=this.canvasWidth/n|0,this.scale=this.canvasWidth/t,this.div.removeAttribute("data-loaded"),this.loaded=!1,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas)}update({rotation:t=null}){typeof t=="number"&&(this.rotation=t);const F=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:F}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(t=1){const F=document.createElement("canvas"),n=F.getContext("2d",{alpha:!1}),g=new OutputScale;F.width=t*this.canvasWidth*g.sx|0,F.height=t*this.canvasHeight*g.sy|0;const V=g.scaled?[g.sx,0,0,g.sy,0,0]:null;return{ctx:n,canvas:F,transform:V}}_convertCanvasToImage(t){if(this.renderingState!==RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const F=this._reduceImage(t);this.src=F.toDataURL(),this.div.setAttribute("data-loaded","true"),this.loaded=!0,this.store.getState()._setThumbnailView(this.id,this),F.width=0,F.height=0}draw(){if(this.renderingState!==RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();const{pdfPage:t}=this;if(!t)return this.renderingState=RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates.RUNNING;const F=(R=null)=>__awaiter(this,void 0,void 0,function*(){if(l===this.renderTask&&(this.renderTask=null),!(R instanceof pdfExports.RenderingCancelledException)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(g),R))throw R}),{ctx:n,canvas:g,transform:V}=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),k=this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),M=R=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=RenderingStates.PAUSED,this.resume=()=>{this.renderingState=RenderingStates.RUNNING,R()};return}R()},A={canvasContext:n,transform:V,viewport:k,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},l=this.renderTask=t.render(A);l.onContinue=M;const r=l.promise.then(function(){return F(null)},function(R){return F(R)});return r.finally(()=>{g.width=0,g.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),r}setImage(t){if(this.renderingState!==RenderingStates.INITIAL)return;const{thumbnailCanvas:F,pdfPage:n,scale:g}=t;F&&(this.pdfPage||this.setPdfPage(n),!(g<this.scale)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(F)))}_reduceImage(t){const{ctx:F,canvas:n}=this._getPageDrawContext();if(t.width<=2*n.width)return F.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n;let g=n.width<<MAX_NUM_SCALING_STEPS,V=n.height<<MAX_NUM_SCALING_STEPS;const[k,M]=TempImageFactory.getCanvas(g,V);for(;g>t.width||V>t.height;)g>>=1,V>>=1;for(M.drawImage(t,0,0,t.width,t.height,0,0,g,V);g>2*n.width;)M.drawImage(k,0,0,g,V,0,0,g>>1,V>>1),g>>=1,V>>=1;return F.drawImage(k,0,0,g,V,0,0,n.width,n.height),n}get _thumbPageTitle(){var t;return this.l10n.get("thumb_page_title",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}get _thumbPageCanvas(){var t;return this.l10n.get("thumb_page_canvas",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}setPageLabel(t){this.pageLabel=typeof t=="string"?t:null}}var _PDFThumbnailViewer_instances,_PDFThumbnailViewer_ensurePdfPageLoaded,_PDFThumbnailViewer_getScrollAhead;const THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected";class PDFThumbnailViewer{constructor({container:t,eventBus:F,linkService:n,renderingQueue:g,l10n:V,pageColors:k,store:M,thumbnailWidth:A}){_PDFThumbnailViewer_instances.add(this),this.container=t,this.eventBus=F,this.linkService=n,this.renderingQueue=g,this.l10n=V,this.pageColors=k||null,this._thumbnails=[],this._currentPageNumber=0,this._pagesRotation=0,this._pageLabels=[],this.pdfDocument=null,this.store=M,this.thumbnailWidth=A,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(t){return this._thumbnails[t]}_getVisibleThumbs(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument)return;const F=this._thumbnails[t-1];if(!F){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}t!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),F.div.classList.add(THUMBNAIL_SELECTED_CLASS));const n=this._getVisibleThumbs(),{first:g,last:V,views:k}=n;if(k.length>0){let M=!1;if(t<=g.id||t>=(V==null?void 0:V.id))M=!0;else for(const{id:A,percent:l}of k)if(A===t){M=l<100;break}M&&scrollIntoView(F.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=t,this.forceRendering()}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!isValidRotation(t))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===t)return;this._pagesRotation=t;const F={rotation:t};for(const n of this._thumbnails)n.update(F)}cleanup(){for(const t of this._thumbnails)t.renderingState!==RenderingStates.FINISHED&&t.reset();TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=[],this._pagesRotation=0,this.container.textContent=""}setDocument(t){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=t,!t)return;const F=t.getPage(1),n=t.getOptionalContentConfig();F.then(g=>{var V;const k=t.numPages,M=g.getViewport({scale:1});for(let l=1;l<=k;++l){const r=new PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:l,defaultViewport:M.clone(),optionalContentConfigPromise:n,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors,store:this.store,thumbnailWidth:this.thumbnailWidth});this._thumbnails.push(r)}(V=this._thumbnails[0])===null||V===void 0||V.setPdfPage(g),this._thumbnails[this._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS),this.store.getState()._setThumbnailsViews(this._thumbnails)}).catch(g=>{console.error("Unable to initialize thumbnail viewer",g)})}_cancelRendering(){for(const t of this._thumbnails)t.cancelRendering()}setPageLabels(t){var F,n;if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=[],console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=[];for(let g=0,V=this._thumbnails.length;g<V;g++)this._thumbnails[g].setPageLabel((n=(F=this._pageLabels)===null||F===void 0?void 0:F[g])!==null&&n!==void 0?n:null)}}forceRendering(){const t=this._getVisibleThumbs(),F=__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_getScrollAhead).call(this,t),n=this.renderingQueue.getHighestPriority(t,this._thumbnails,F);return n?(__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_ensurePdfPageLoaded).call(this,n).then(()=>{this.renderingQueue.renderView(n)}),!0):!1}}_PDFThumbnailViewer_instances=new WeakSet,_PDFThumbnailViewer_ensurePdfPageLoaded=function U(t){var F;return __awaiter(this,void 0,void 0,function*(){if(t!=null&&t.pdfPage)return t.pdfPage;try{const n=yield(F=this.pdfDocument)===null||F===void 0?void 0:F.getPage(t.id);return t!=null&&t.pdfPage||t.setPdfPage(n),n}catch(n){return console.error("Unable to get page for thumb view",n),null}})},_PDFThumbnailViewer_getScrollAhead=function U(t){var F,n;return((F=t.first)===null||F===void 0?void 0:F.id)===1?!0:((n=t.last)===null||n===void 0?void 0:n.id)===this._thumbnails.length?!1:this.scroll.down};var _OverlayManager_overlays,_OverlayManager_active;class OverlayManager{constructor(){_OverlayManager_overlays.set(this,new WeakMap),_OverlayManager_active.set(this,null)}get active(){return __classPrivateFieldGet(this,_OverlayManager_active,"f")}register(t,F=!1){return __awaiter(this,void 0,void 0,function*(){if(typeof t!="object")throw new Error("Not enough parameters.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay is already registered.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").set(t,{canForceClose:F}),t.addEventListener("cancel",()=>{__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})})}unregister(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay cannot be removed while it is active.")}else throw new Error("The overlay does not exist.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").delete(t)})}open(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay is already active.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").get(t).canForceClose)yield this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");__classPrivateFieldSet(this,_OverlayManager_active,t,"f"),t.showModal()})}close(t=__classPrivateFieldGet(this,_OverlayManager_active,"f")){return __awaiter(this,void 0,void 0,function*(){if(!t||!__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay does not exist.");if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")!==t)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");t.close(),__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})}}_OverlayManager_overlays=new WeakMap,_OverlayManager_active=new WeakMap;function getXfaHtmlForPrinting(U,t){const F=t.allXfaHtml,n=new pdf_viewerExports.SimpleLinkService,g=Math.round(pdfExports.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const V of F==null?void 0:F.children){const k=document.createElement("div");k.className="xfaPrintedPage",U.append(k);const M=new pdf_viewerExports.XfaLayerBuilder({pageDiv:k,pdfPage:null,annotationStorage:t.annotationStorage,linkService:n,xfaHtml:V}),A=pdfExports.getXfaPageViewport(V,{scale:g});M.render(A,"print")}}let activeService=null,dialog=null,overlayManager=new OverlayManager;function renderPage(U,t,F,n,g,V,k){const M=activeService.scratchCanvas,A=g/pdfExports.PixelsPerInch.PDF;M.width=Math.floor(n.width*A),M.height=Math.floor(n.height*A);const l=M.getContext("2d");return l.save(),l.fillStyle="rgb(255, 255, 255)",l.fillRect(0,0,M.width,M.height),l.restore(),Promise.all([t.getPage(F),k]).then(function([r,R]){const x={canvasContext:l,transform:[A,0,0,A,0,0],viewport:r.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:pdfExports.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:V,printAnnotationStorage:R};return r.render(x).promise})}class PDFPrintService{constructor(t,F,n,g,V=null,k=null,M){this.pdfDocument=t,this.pagesOverview=F,this.printContainer=n,this._printResolution=g||150,this._optionalContentConfigPromise=V||t.getOptionalContentConfig(),this._printAnnotationStoragePromise=k||Promise.resolve(),this.l10n=M,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const t=document.querySelector("body");t==null||t.setAttribute("data-pdfjsprinting","true"),this.pagesOverview.every(g=>g.width===this.pagesOverview[0].width&&g.height===this.pagesOverview[0].height,this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");const n=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+n.width+"pt "+n.height+"pt;}",t==null||t.append(this.pageStyleSheet)}destroy(){if(activeService!==this)return;this.printContainer.textContent="";const t=document.querySelector("body");t==null||t.removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,activeService=null,ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)})}renderPages(){if(this.pdfDocument.isPureXfa)return getXfaHtmlForPrinting(this.printContainer,this.pdfDocument),Promise.resolve();const t=this.pagesOverview.length,F=(n,g)=>{if(this.throwIfInactive(),++this.currentPage>=t){renderProgress(t,t,this.l10n),n();return}const V=this.currentPage;renderProgress(V,t,this.l10n),renderPage(this,this.pdfDocument,V+1,this.pagesOverview[V],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){F(n,g)},g)};return new Promise(F)}useRenderedPage(){this.throwIfInactive();const t=document.createElement("img"),F=this.scratchCanvas;"toBlob"in F?F.toBlob(function(g){t.src=URL.createObjectURL(g)}):t.src=F.toDataURL();const n=document.createElement("div");return n.className="printedPage",n.append(t),this.printContainer.append(n),new Promise(function(g,V){t.onload=g,t.onerror=V})}performPrint(){return this.throwIfInactive(),new Promise(t=>{setTimeout(()=>{if(!this.active){t();return}print.call(window),setTimeout(t,20)},0)})}get active(){return this===activeService}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const print=window.print;window.print=function(){if(activeService){console.warn("Ignored window.print() because of a pending print job.");return}ensureOverlay().then(function(){activeService&&overlayManager.open(dialog)});try{dispatchEvent("beforeprint")}finally{if(!activeService){console.error("Expected print service to be initialized."),ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)});return}const U=activeService;activeService.renderPages().then(function(){return U.performPrint()}).catch(function(){}).then(function(){U.active&&abort()})}};function dispatchEvent(U){const t=document.createEvent("CustomEvent");t.initCustomEvent(U,!1,!1,"custom"),window.dispatchEvent(t)}function abort(){activeService&&(activeService.destroy(),dispatchEvent("afterprint"))}function renderProgress(U,t,F){dialog||(dialog=document.getElementById("printServiceDialog"));const n=Math.round(100*U/t),g=dialog.querySelector("progress"),V=dialog.querySelector(".relative-progress");g.value=n,F.get("print_progress_percent",{progress:n}).then(k=>{V.textContent=k})}window.addEventListener("keydown",function(U){U.keyCode===80&&(U.ctrlKey||U.metaKey)&&!U.altKey&&!U.shiftKey&&(window.print(),U.preventDefault(),U.stopImmediatePropagation())},!0);if("onbeforeprint"in window){const U=function(t){t.detail!=="custom"&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",U),window.addEventListener("afterprint",U)}let overlayPromise;function ensureOverlay(){if(!overlayPromise){if(!overlayManager)throw new Error("The overlay manager has not yet been initialized.");dialog||(dialog=document.getElementById("printServiceDialog")),overlayPromise=overlayManager.register(dialog,!0),document.getElementById("printCancel").onclick=abort,dialog.addEventListener("close",abort)}return overlayPromise}const PDFPrintServiceFactory={instance:{supportsPrinting:!0,createPrintService(U,t,F,n,g,V,k){if(activeService)throw new Error("The print service is created and active.");return activeService=new PDFPrintService(U,t,F,n,g,V,k),activeService}}};var _PDFPresentationMode_instances,_PDFPresentationMode_state,_PDFPresentationMode_args,_PDFPresentationMode_mouseWheel,_PDFPresentationMode_notifyStateChange,_PDFPresentationMode_enter,_PDFPresentationMode_exit,_PDFPresentationMode_mouseDown,_PDFPresentationMode_contextMenu,_PDFPresentationMode_showControls,_PDFPresentationMode_hideControls,_PDFPresentationMode_resetMouseScrollState,_PDFPresentationMode_touchSwipe,_PDFPresentationMode_addWindowListeners,_PDFPresentationMode_removeWindowListeners,_PDFPresentationMode_fullscreenChange,_PDFPresentationMode_addFullscreenChangeListeners,_PDFPresentationMode_removeFullscreenChangeListeners;const DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6;class PDFPresentationMode{constructor({container:t,pdfViewer:F,eventBus:n}){_PDFPresentationMode_instances.add(this),_PDFPresentationMode_state.set(this,PresentationModeState.UNKNOWN),_PDFPresentationMode_args.set(this,null),this.container=t,this.pdfViewer=F,this.eventBus=n,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){return __awaiter(this,void 0,void 0,function*(){const{container:t,pdfViewer:F}=this;if(this.active||!F.pagesCount||!t.requestFullscreen)return!1;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.CHANGING);const n=t.requestFullscreen();__classPrivateFieldSet(this,_PDFPresentationMode_args,{pageNumber:F.currentPageNumber,scaleValue:F.currentScaleValue,scrollMode:F.scrollMode,spreadMode:null,annotationEditorMode:null},"f"),F.spreadMode!==SpreadMode.NONE&&!(F.pageViewsReady&&F.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode=F.spreadMode),F.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode=F.annotationEditorMode);try{return yield n,F.focus(),!0}catch{__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL)}return!1})}get active(){return __classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.CHANGING||__classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.FULLSCREEN}}_PDFPresentationMode_state=new WeakMap,_PDFPresentationMode_args=new WeakMap,_PDFPresentationMode_instances=new WeakSet,_PDFPresentationMode_mouseWheel=function U(t){if(!this.active)return;t.preventDefault();const F=normalizeWheelEventDelta(t),n=Date.now(),g=this.mouseScrollTimeStamp;if(!(n>g&&n-g<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&F<0||this.mouseScrollDelta<0&&F>0)&&__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.mouseScrollDelta+=F,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){const V=this.mouseScrollDelta;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),(V>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=n)}},_PDFPresentationMode_notifyStateChange=function U(t){__classPrivateFieldSet(this,_PDFPresentationMode_state,t,"f"),this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})},_PDFPresentationMode_enter=function U(){var t;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(()=>{this.pdfViewer.scrollMode=ScrollMode.PAGE,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode!==null&&(this.pdfViewer.spreadMode=SpreadMode.NONE),this.pdfViewer.currentPageNumber=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").pageNumber,this.pdfViewer.currentScaleValue="page-fit",__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).call(this),this.contextMenuOpen=!1,(t=window.getSelection())===null||t===void 0||t.removeAllRanges()},_PDFPresentationMode_exit=function U(){const t=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(()=>{var F;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL),this.pdfViewer.scrollMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scrollMode,((F=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f"))===null||F===void 0?void 0:F.spreadMode)!==null&&(this.pdfViewer.spreadMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode),this.pdfViewer.currentScaleValue=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scaleValue,this.pdfViewer.currentPageNumber=t,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode),__classPrivateFieldSet(this,_PDFPresentationMode_args,null,"f")},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_hideControls).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.contextMenuOpen=!1},_PDFPresentationMode_mouseDown=function U(t){var F;if(this.contextMenuOpen){this.contextMenuOpen=!1,t.preventDefault();return}t.button===0&&(t.target.href&&(!((F=t.target.parentNode)===null||F===void 0)&&F.hasAttribute("data-internal-link"))||(t.preventDefault(),t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},_PDFPresentationMode_contextMenu=function U(){this.contextMenuOpen=!0},_PDFPresentationMode_showControls=function U(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)},_PDFPresentationMode_hideControls=function U(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)},_PDFPresentationMode_resetMouseScrollState=function U(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},_PDFPresentationMode_touchSwipe=function U(t){if(this.active){if(t.touches.length>1){this.touchSwipeState=null;return}switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=t.touches[0].pageX,this.touchSwipeState.endY=t.touches[0].pageY,t.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let F=0;const n=this.touchSwipeState.endX-this.touchSwipeState.startX,g=this.touchSwipeState.endY-this.touchSwipeState.startY,V=Math.abs(Math.atan2(g,n));Math.abs(n)>SWIPE_MIN_DISTANCE_THRESHOLD&&(V<=SWIPE_ANGLE_THRESHOLD||V>=Math.PI-SWIPE_ANGLE_THRESHOLD)?F=n:Math.abs(g)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(V-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(F=g),F>0?this.pdfViewer.previousPage():F<0&&this.pdfViewer.nextPage();break}}},_PDFPresentationMode_addWindowListeners=function U(){this.showControlsBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).bind(this),this.mouseDownBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseDown).bind(this),this.mouseWheelBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseWheel).bind(this),this.resetMouseScrollStateBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).bind(this),this.contextMenuBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_contextMenu).bind(this),this.touchSwipeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},_PDFPresentationMode_removeWindowListeners=function U(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},_PDFPresentationMode_fullscreenChange=function U(){document.fullscreenElement?__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_enter).call(this):__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_exit).call(this)},_PDFPresentationMode_addFullscreenChangeListeners=function U(){this.fullscreenChangeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},_PDFPresentationMode_removeFullscreenChangeListeners=function U(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind};const initialState={isDocumentLoaded:!1,pagesReady:!1,url:null,numPages:0,pageNumber:0,scale:0,scaleValue:"auto",pagesRotation:0,spreadMode:SpreadMode.UNKNOWN,scrollMode:ScrollMode.UNKNOWN,documentOutline:null,attachments:new Map,thumbnails:new Map,thumbnailViews:new Map,annotationEditorMode:pdfExports.AnnotationEditorType.NONE,pdfSlick:null},create=()=>createStore((U,t)=>Object.assign(Object.assign({},initialState),{_setThumbnailView:(F,n)=>{const g=new Map(t().thumbnails),V=new Map(t().thumbnailViews),{canvasWidth:k,canvasHeight:M,scale:A,rotation:l,loaded:r,pageLabel:R,src:x=null}=n;V.set(F,n),g.set(F,{pageNumber:F,width:k,height:M,scale:A,rotation:l,loaded:r,pageLabel:R,src:x}),U({thumbnailViews:V,thumbnails:g})},_setThumbnailsViews:F=>{const n=new Map(F.map(V=>[V.id,V])),g=new Map(F.map(V=>{const{canvasWidth:k,canvasHeight:M,scale:A,rotation:l,loaded:r,pageLabel:R,src:x=null}=V;return[V.id,{pageNumber:V.id,width:k,height:M,scale:A,rotation:l,loaded:r,pageLabel:R,src:x}]}));U({thumbnailViews:n,thumbnails:g})}}));var _PDFSlick_instances,_PDFSlick_renderingQueue,_PDFSlick_container,_PDFSlick_viewerContainer,_PDFSlick_thumbsContainer,_PDFSlick_annotationMode,_PDFSlick_annotationEditorMode,_PDFSlick_initializePageLabels,_PDFSlick_parseDocumentInfo,_PDFSlick_parsePageSize,_PDFSlick_initInternalEventListeners,_PDFSlick_onDocumentReady,_PDFSlick_onRotationChanging,_PDFSlick_onSwitchSpreadMode,_PDFSlick_onSwitchScrollMode,_PDFSlick_onScaleChanging,_PDFSlick_onPageChanging,_PDFSlick_onPageRendered;pdfExports.GlobalWorkerOptions.workerSrc=`//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`;const US_PAGE_NAMES={"8.5x11":"Letter","8.5x14":"Legal"},METRIC_PAGE_NAMES={"297x420":"A3","210x297":"A4"};function getPageName(U,t,F){const n=t?U.width:U.height,g=t?U.height:U.width;return F[`${n}x${g}`]}class PDFSlick{constructor({container:t,viewer:F,thumbs:n,store:g=create(),options:V}){var k,M,A,l,r,R,x,b,d,v,f,w,E;_PDFSlick_instances.add(this),_PDFSlick_renderingQueue.set(this,void 0),_PDFSlick_container.set(this,void 0),_PDFSlick_viewerContainer.set(this,void 0),_PDFSlick_thumbsContainer.set(this,void 0),this.downloadManager=null,this.findController=null,this.pdfPresentationMode=null,this.document=null,_PDFSlick_annotationMode.set(this,void 0),_PDFSlick_annotationEditorMode.set(this,void 0),__classPrivateFieldSet(this,_PDFSlick_container,t,"f"),__classPrivateFieldSet(this,_PDFSlick_viewerContainer,F,"f"),__classPrivateFieldSet(this,_PDFSlick_thumbsContainer,n,"f"),this.l10n=(k=V==null?void 0:V.l10n)!==null&&k!==void 0?k:pdf_viewerExports.NullL10n,this.downloadManager=new pdf_viewerExports.DownloadManager,this.textLayerMode=(M=V==null?void 0:V.textLayerMode)!==null&&M!==void 0?M:TextLayerMode.ENABLE,__classPrivateFieldSet(this,_PDFSlick_annotationMode,(A=V==null?void 0:V.annotationMode)!==null&&A!==void 0?A:pdfExports.AnnotationMode.ENABLE_FORMS,"f"),__classPrivateFieldSet(this,_PDFSlick_annotationEditorMode,(l=V==null?void 0:V.annotationEditorMode)!==null&&l!==void 0?l:pdfExports.AnnotationEditorType.NONE,"f"),this.removePageBorders=(r=V==null?void 0:V.removePageBorders)!==null&&r!==void 0?r:!1,this.singlePageViewer=(R=V==null?void 0:V.singlePageViewer)!==null&&R!==void 0?R:!1,this.enablePrintAutoRotate=(x=V==null?void 0:V.enablePrintAutoRotate)!==null&&x!==void 0?x:!1,this.useOnlyCssZoom=(b=V==null?void 0:V.useOnlyCssZoom)!==null&&b!==void 0?b:!1,this.pageColors=(d=V==null?void 0:V.pageColors)!==null&&d!==void 0?d:null,this.maxCanvasPixels=(v=V==null?void 0:V.maxCanvasPixels)!==null&&v!==void 0?v:16777216,this.printResolution=(f=V==null?void 0:V.printResolution)!==null&&f!==void 0?f:96,this.thumbnailWidth=(w=V==null?void 0:V.thumbnailWidth)!==null&&w!==void 0?w:125,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.l10n=pdf_viewerExports.NullL10n,this.store=g;const p=new PDFRenderingQueue;p.onIdle=this._cleanup.bind(this),p.isThumbnailViewEnabled=!0,__classPrivateFieldSet(this,_PDFSlick_renderingQueue,p,"f");const y=new pdf_viewerExports.EventBus,s=new pdf_viewerExports.PDFLinkService({eventBus:y,externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",ignoreDestinationZoom:!1}),i=Object.assign(Object.assign({container:t},F&&{viewer:F}),{eventBus:y,linkService:s,renderingQueue:p,defaultRenderingQueue:!0,textLayerMode:this.textLayerMode,l10n:this.l10n,annotationMode:__classPrivateFieldGet(this,_PDFSlick_annotationMode,"f"),annotationEditorMode:__classPrivateFieldGet(this,_PDFSlick_annotationEditorMode,"f"),removePageBorders:this.removePageBorders,imageResourcesPath:"/images/",useOnlyCssZoom:this.useOnlyCssZoom}),S=this.singlePageViewer?new pdf_viewerExports.PDFSinglePageViewer(i):new pdf_viewerExports.PDFViewer(i);p.setViewer(S),n&&(this.thumbnailViewer=new PDFThumbnailViewer({container:n,eventBus:y,linkService:s,renderingQueue:p,l10n:this.l10n,pageColors:this.pageColors,store:g,thumbnailWidth:this.thumbnailWidth}),p.setThumbnailViewer(this.thumbnailViewer)),document.fullscreenEnabled&&(this.pdfPresentationMode=new PDFPresentationMode({container:t,pdfViewer:S,eventBus:y})),this.eventBus=y,this.linkService=s,this.viewer=S,this.linkService.setViewer(S);const m=(E=V==null?void 0:V.scaleValue)!==null&&E!==void 0?E:"auto";this.store.setState({scaleValue:m})}loadDocument(t,F){var n,g,V,k,M;return __awaiter(this,void 0,void 0,function*(){if(this.url&&typeof this.url=="string")try{URL.revokeObjectURL(this.url)}catch{}(n=this.document)===null||n===void 0||n.destroy(),(g=this.viewer)===null||g===void 0||g.cleanup(),t instanceof URL?this.url=t.toString():this.url=t;const A=(V=F==null?void 0:F.filename)!==null&&V!==void 0?V:pdfExports.getPdfFilenameFromUrl((k=this.url)===null||k===void 0?void 0:k.toString());this.filename=A;const l=yield pdfExports.getDocument(t).promise;this.document=l,this.viewer.setDocument(this.document),this.linkService.setDocument(this.document),this.thumbnailViewer&&((M=this.thumbnailViewer)===null||M===void 0||M.setDocument(l)),__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initInternalEventListeners).call(this),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initializePageLabels).call(this),this.store.setState({filename:A,numPages:l.numPages,pageNumber:1,isDocumentLoaded:!0,url:t.toString()});const r=yield l.getAttachments(),R=new Map(Object.keys(r??{}).sort((x,b)=>x.toLowerCase().localeCompare(b.toLowerCase())).map(x=>[x,r[x]]));this.store.setState({attachments:R}),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parseDocumentInfo).call(this),this.forceRendering()})}forceRendering(t=!0){__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").printing=!!this.printService,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").isThumbnailViewEnabled=t,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").renderHighestPriority()}gotoPage(t){this.linkService.goToPage(t)}openOrDownloadData(t,F,n){var g;(g=this.downloadManager)===null||g===void 0||g.openOrDownloadData(t,F,n)}download(){var t,F;return __awaiter(this,void 0,void 0,function*(){const n=this.url,{filename:g}=this;try{const V=yield this.document.getData(),k=new Blob([V],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(k,n,g,{})}catch{yield(F=this.downloadManager)===null||F===void 0?void 0:F.downloadUrl(n,g,{})}})}save(){var t;return __awaiter(this,void 0,void 0,function*(){const F=this.url,{filename:n}=this;try{const g=yield this.document.saveDocument(),V=new Blob([g],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(V,F,n,{})}catch(g){console.error(`Error when saving the document: ${g.message}`),yield this.download()}finally{}})}downloadOrSave(){var t;const{annotationStorage:F}=(t=this.document)!==null&&t!==void 0?t:{};F&&F.size>0?this.save():this.download()}get supportsPrinting(){return PDFPrintServiceFactory.instance.supportsPrinting}beforePrint(){if(this.printService||!this.supportsPrinting)return;if(!this.viewer.pageViewsReady){this.l10n.get("printing_not_ready").then(k=>{window.alert(k)});return}const t=this.viewer.getPagesOverview(),F=document.getElementById("printContainer"),n=this.printResolution,g=this.viewer.optionalContentConfigPromise,V=PDFPrintServiceFactory.instance.createPrintService(this.document,t,F,n,g,null,this.l10n);this.printService=V,this.forceRendering(),V.layout()}afterPrint(){var t;this.printService&&(this.printService.destroy(),this.printService=null,(t=this.document)===null||t===void 0||t.annotationStorage.resetModified()),this.forceRendering()}requestPresentationMode(){var t;(t=this.pdfPresentationMode)===null||t===void 0||t.request()}triggerPrinting(){this.supportsPrinting&&window.print()}_cleanup(){var t;if(this.document)try{this.viewer.cleanup(),(t=this.thumbnailViewer)===null||t===void 0||t.cleanup(),this.document.cleanup()}catch(F){console.error("Unable to perform cleanup",F)}}setAnnotationEditorMode(t){this.viewer.annotationEditorMode={mode:t},this.store.setState({annotationEditorMode:t})}setAnnotationEditorParams(t){const F=Array.isArray(t)?t:[t];for(const n of F)this.viewer.annotationEditorParams=n}setSpreadMode(t){isValidSpreadMode(t)&&(this.viewer.spreadMode=t,this.dispatch("switchspreadmode",{mode:t}))}setScrollMode(t){isValidScrollMode(t)&&(this.viewer.scrollMode=t,this.dispatch("switchscrollmode",{mode:t}))}setRotation(t){isValidRotation(t)&&(this.viewer.pagesRotation=t)}getPagesOverview(){var t,F;try{return(F=(t=this.viewer)===null||t===void 0?void 0:t.getPagesOverview())!==null&&F!==void 0?F:[]}catch{return[]}}increaseScale(){this.viewer.increaseScale()}decreaseScale(){this.viewer.decreaseScale()}set currentScaleValue(t){this.viewer.currentScaleValue=t}set currentScale(t){this.viewer.currentScale=t}getPageView(t){return this.viewer.getPageView(t)}on(t,F,n){this.eventBus.on(t,F,n)}off(t,F,n){this.eventBus.off(t,F,n)}dispatch(t,F){this.eventBus.dispatch(t,F)}}_PDFSlick_renderingQueue=new WeakMap,_PDFSlick_container=new WeakMap,_PDFSlick_viewerContainer=new WeakMap,_PDFSlick_thumbsContainer=new WeakMap,_PDFSlick_annotationMode=new WeakMap,_PDFSlick_annotationEditorMode=new WeakMap,_PDFSlick_instances=new WeakSet,_PDFSlick_initializePageLabels=function U(){var t;return __awaiter(this,void 0,void 0,function*(){const n=(t=yield this.document.getPageLabels())!==null&&t!==void 0?t:[],g=n.length;let V=0,k=0;for(let l=0;l<g;l++){const r=n[l];if(r===(l+1).toString())V++;else if(r==="")k++;else break}if(V>=g||k>=g)return;const{viewer:M,thumbnailViewer:A}=this;M.setPageLabels(n),A==null||A.setPageLabels(n)})},_PDFSlick_parseDocumentInfo=function U(){return __awaiter(this,void 0,void 0,function*(){const{info:t,contentLength:F}=yield this.document.getMetadata(),n=yield this.document.getPage(this.store.getState().pageNumber).then(g=>__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parsePageSize).call(this,getPageSizeInches(g),0));this.store.setState({filesize:F,title:t.Title,author:t.Author,subject:t.Subject,keywords:t.Keywords,creator:t.Creator,producer:t.Producer,version:t.PDFFormatVersion,creationDate:pdfExports.PDFDateString.toDateObject(t.CreationDate),modificationDate:pdfExports.PDFDateString.toDateObject(t.ModDate),isLinearized:t.IsLinearized,pageSize:n})})},_PDFSlick_parsePageSize=function U(t,F){return __awaiter(this,void 0,void 0,function*(){if(!t)return;F%180!==0&&(t={width:t.height,height:t.width});const n=isPortraitOrientation(t);let g={width:Math.round(t.width*100)/100,height:Math.round(t.height*100)/100},V={width:Math.round(t.width*25.4*10)/10,height:Math.round(t.height*25.4*10)/10},k=getPageName(g,n,US_PAGE_NAMES)||getPageName(V,n,METRIC_PAGE_NAMES);if(!k&&!(Number.isInteger(V.width)&&Number.isInteger(V.height))){const x={width:t.width*25.4,height:t.height*25.4},b={width:Math.round(V.width),height:Math.round(V.height)};Math.abs(x.width-b.width)<.1&&Math.abs(x.height-b.height)<.1&&(k=getPageName(b,n,METRIC_PAGE_NAMES),k&&(g={width:Math.round(b.width/25.4*100)/100,height:Math.round(b.height/25.4*100)/100},V=b))}const[{width:M,height:A},l,r,R]=yield Promise.all([g,this.l10n.get("document_properties_page_size_unit_inches"),k&&this.l10n.get(`document_properties_page_size_name_${k.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${n?"portrait":"landscape"}`)]);return{width:M.toLocaleString(),height:A.toLocaleString(),unit:l,name:r,orientation:R}})},_PDFSlick_initInternalEventListeners=function U(){this.eventBus._on("pagesinit",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onDocumentReady).bind(this)),this.eventBus._on("scalechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onScaleChanging).bind(this)),this.eventBus._on("pagechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageChanging).bind(this)),this.eventBus._on("pagerendered",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageRendered).bind(this)),this.eventBus._on("rotationchanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onRotationChanging).bind(this)),this.eventBus._on("switchspreadmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchSpreadMode).bind(this)),this.eventBus._on("switchscrollmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchScrollMode).bind(this)),this.eventBus._on("beforeprint",this.beforePrint.bind(this)),this.eventBus._on("afterprint",this.afterPrint.bind(this)),window.onbeforeprint=t=>{this.eventBus.dispatch("beforeprint",{source:window})},window.onafterprint=t=>{this.eventBus.dispatch("afterprint",{source:window})}},_PDFSlick_onDocumentReady=function U({source:t}){var F;return __awaiter(this,void 0,void 0,function*(){const n=yield(F=this.document)===null||F===void 0?void 0:F.getOutline(),g=this.store.getState().scaleValue;t.currentScale=1,t.currentScaleValue="auto",this.store.setState({documentOutline:n,pageNumber:1,scaleValue:g,pagesReady:!0})})},_PDFSlick_onRotationChanging=function U({pagesRotation:t,pageNumber:F}){this.store.setState({pagesRotation:t}),this.thumbnailViewer&&(this.thumbnailViewer.pagesRotation=t),this.forceRendering(),this.viewer.currentPageNumber=F},_PDFSlick_onSwitchSpreadMode=function U({mode:t}){this.store.setState({spreadMode:t})},_PDFSlick_onSwitchScrollMode=function U({mode:t}){this.store.setState({scrollMode:t})},_PDFSlick_onScaleChanging=function U({scale:t,presetValue:F}){this.store.setState({scale:t,scaleValue:F}),this.viewer.update()},_PDFSlick_onPageChanging=function U({pageNumber:t}){var F;(F=this.thumbnailViewer)===null||F===void 0||F.scrollThumbnailIntoView(t),this.store.setState({pageNumber:t})},_PDFSlick_onPageRendered=function U({pageNumber:t,error:F}){var n;if(__classPrivateFieldGet(this,_PDFSlick_thumbsContainer,"f")){const g=this.viewer.getPageView(t-1),V=(n=this.thumbnailViewer)===null||n===void 0?void 0:n.getThumbnail(t-1);g&&V&&V.setImage(g)}};var ELEMENT_SIZE_FALLBACK={width:null,height:null};function getElementSize(U){if(!U)return{...ELEMENT_SIZE_FALLBACK};const{width:t,height:F}=U.getBoundingClientRect();return{width:t,height:F}}function createElementSize(U){const t=typeof U=="function",[F,n]=createStaticStore(sharedConfig.context||t?ELEMENT_SIZE_FALLBACK:getElementSize(U)),g=new ResizeObserver(([V])=>n(getElementSize(V.target)));return onCleanup(()=>g.disconnect()),t?createEffect(()=>{const V=U();V&&(n(getElementSize(V)),g.observe(V),onCleanup(()=>g.unobserve(V)))}):(g.observe(U),onCleanup(()=>g.unobserve(U))),F}var _tmpl$$1$1=template('<div id=viewerContainer><div id=viewer class="pdfSlickViewer pdfViewer">');function PDFSlickViewer(U){const[t,F]=createSignal(),n=createElementSize(t);return createEffect(()=>{var g;n.width&&n.height&&(U.store.pdfSlick&&(U.store.scaleValue==="auto"||U.store.scaleValue==="page-fit"||U.store.scaleValue==="page-width")&&(U.store.pdfSlick.viewer.currentScaleValue=U.store.scaleValue),(g=U.store.pdfSlick)==null||g.viewer.update())}),(()=>{var g=_tmpl$$1$1();return use(V=>{U.viewerRef(V),F(V)},g),g.style.setProperty("position","absolute"),g.style.setProperty("inset","0"),createRenderEffect(()=>className(g,`pdfSlickContainer ${U.class??""}`)),g})()}var _tmpl$$2=template("<div>");function PDFSlickThumbnails(U){const[t,F]=createSignal(),n=createElementSize(t);return createEffect(()=>{var g;n.width&&n.height&&((g=U.store.pdfSlick)==null||g.forceRendering())}),(()=>{var g=_tmpl$$2();return use(V=>{U.thumbsRef(V),F(V)},g),g.style.setProperty("position","absolute"),g.style.setProperty("overflow","auto"),g.style.setProperty("inset","0"),insert(g,createComponent(For,{get each(){return Array.from(U.store.thumbnailViews)},children:([V,k])=>createComponent(Portal,{get mount(){return k.div},get children(){return U.children({pageNumber:V,width:k.canvasWidth,height:k.canvasHeight,scale:k.scale,src:(k==null?void 0:k.src)??null,rotation:k.rotation,pageLabel:k.pageLabel,loaded:k.loaded})}})})),createRenderEffect(V=>{var k=U.class??"",M=U.classList??{};return k!==V.e&&className(g,V.e=k),V.t=classList(g,M,V.t),V},{e:void 0,t:void 0}),g})()}function useStore(U,t=U.getState,F){const n=t(U.getState()),[g,V]=createStore$1(n),k=(A,l)=>{const r=t(l),R=t(A);F!==void 0?F(r,R)||V(reconcile(R)):V(reconcile(R))},M=U.subscribe(k);return onCleanup(()=>M()),g}const usePDFSlick=(U,t)=>{const[F,n]=createSignal(!1),[g,V]=createSignal(!1),[k,M]=createSignal(null),[A,l]=createSignal(null),[r,R]=createSignal(null),x=create(),b=useStore(x),d=f=>{M(f),V(!0)},v=f=>{l(f)};return createEffect(()=>{if(U&&g()){const f=new PDFSlick({container:k(),thumbs:A(),store:x,options:t});R(f),x.setState({pdfSlick:f}),f.loadDocument(U,t).then(()=>n(!0))}}),{isDocumentLoaded:F,viewerRef:d,thumbsRef:v,pdfSlick:r,pdfSlickStore:b,PDFSlickViewer,PDFSlickThumbnails}};var _tmpl$$1=template("<div class=pdf-viewer-wrapper>");function PDFViewer(U){const{viewerRef:t,pdfSlickStore:F,PDFSlickViewer:n}=usePDFSlick(U.pdfFilePath,{});return(()=>{var g=_tmpl$$1();return g.style.setProperty("position","relative"),g.style.setProperty("height","500px"),insert(g,createComponent(n,{store:F,viewerRef:t})),g})()}const demoPdf="/zasudi-solid/assets/demo-BKTSgfO1.pdf";var _tmpl$=template("<div>"),_tmpl$2=template("<div>Unknown item."),_tmpl$3=template("<tr><td colspan=2>Неосновательное обогащение:</td><td colspan=8>"),_tmpl$4=template("<div><table><thead><tr><th rowspan=2 colspan=1>Долг</th><th colspan=2>Период начисления</th><th colspan=2>Периоды</th><th colspan=2>Процент</th><th rowspan=2>Формула</th><th colspan=2>Начислено</th></tr><tr><th>с</th><th>по</th><th>%</th><th>неуст.</th><th>польз.</th><th>неуст.</th><th>процент</th><th>неустойка</th></tr></thead><tbody><tr><td colspan=7></td><td>Итого:</td><td></td><td></td></tr><tr><td colspan=2>Долг:</td><td colspan=8></td></tr><tr><td colspan=2></td><td colspan=8>"),_tmpl$5=template("<tr class=checkpoint><td>. </td><td><br></td><td><br></td><td></td><td></td><td></td><td></td><td></td><td></td><td>");function Demo(){const[U,t]=createSignal("raschet"),F=()=>{switch(U()){case"raschet":return;case"prilojenie":return"Приложения";case"pdf":return"Заявление о вынесении судебного приказа";default:return"Unknown item"}};return(()=>{var n=_tmpl$();return insert(n,createComponent(QuestionSection,{get question(){return F()},get children(){return createComponent(Switch,{get fallback(){return _tmpl$2()},get children(){return[createComponent(Match,{get when(){return U()==="raschet"},get children(){return createComponent(Raschet,{checkpoints:testCheckpoints,result:testResult})}}),createComponent(Match,{get when(){return U()==="prilojenie"},get children(){return createComponent(Prilojenie,{})}}),createComponent(Match,{get when(){return U()==="pdf"},get children(){return createComponent(PdfThing,{})}})]}})}}),null),insert(n,createComponent(QuestionSection,{get children(){return createComponent(ListBox,{items:[{text:"Расчёт исковых требований ",value:"raschet"},{text:"Приложения",value:"prilojenie"},{text:"Заявление о вынесении судебного приказа",value:"pdf"}],get value(){return U()},setValue:t})}}),null),n})()}function Prilojenie(){const[U,t]=createSignal("");return(()=>{var F=_tmpl$();return insert(F,createComponent(TextField,{icon:"no-space",label:"Наименование",get value(){return U()},setValue:t}),null),insert(F,createComponent(BigGreenButton,{thin:!0,text:"Добавить приложение",onClick:()=>{}}),null),createRenderEffect(()=>className(F,demo["demo-name"])),F})()}function PdfThing(){return createComponent(PDFViewer,{pdfFilePath:demoPdf})}function round(U){return U.toFixed(2)}function roundTemplate(U,...t){return U.map(F=>{const n=t.shift();if(n===void 0)return F;if(n==0||typeof n!="number")return F+n;if(n){const g=n.toFixed(2);return+g.split(".")[1]>0?F+g:F+n}else return F}).join("")}function Raschet(U){const[t,F]=createSignal("2023-02-01"),[n,g]=createSignal(!1);return[(()=>{var V=_tmpl$();return insert(V,createComponent(BigGreenButton,{thin:!0,text:"Расчёт",onClick:()=>{}}),null),insert(V,createComponent(BigGreenButton,{thin:!0,text:"Документ",onClick:()=>{}}),null),createRenderEffect(()=>className(V,demo["raschet-buttons"])),V})(),createComponent(QuestionSection,{question:"Демонстрация расчёта исковых требований",noPaddingTop:!0,get children(){var V=_tmpl$4(),k=V.firstChild,M=k.firstChild,A=M.nextSibling,l=A.firstChild,r=l.firstChild,R=r.nextSibling,x=R.nextSibling,b=x.nextSibling,d=l.nextSibling,v=d.firstChild,f=v.nextSibling,w=d.nextSibling,E=w.firstChild,p=E.nextSibling;return insert(A,createComponent(For,{get each(){return U.checkpoints},children:(y,s)=>createComponent(TableRow,{value:y,get i(){return s()}})}),l),insert(x,()=>round(U.result.percent)),insert(b,()=>round(U.result.fee)),insert(f,()=>roundTemplate`${U.result.debt+U.result.enrichment.value} + ${U.result.percent} + ${U.result.fee} = ${U.result.final+U.result.enrichment.value}`),insert(E,()=>`Госпошлина (${["arb","sou"][U.result.courtType]}):`),insert(p,()=>roundTemplate`${U.result.gosposhlina.formula} = ${U.result.gosposhlina.amount}`),insert(A,createComponent(Show,{get when(){return U.result.enrichment.value>=50},get children(){var y=_tmpl$3(),s=y.firstChild,i=s.nextSibling;return insert(i,()=>roundTemplate`${U.result.enrichment.formula} = ${U.result.enrichment.value}`),createRenderEffect(()=>className(y,demo.final)),y}}),null),createRenderEffect(y=>{var s=demo["rounded-fix"],i=demo["calculator-table"],S=demo.total,m=demo.final,h=demo.final;return s!==y.e&&className(V,y.e=s),i!==y.t&&className(k,y.t=i),S!==y.a&&className(l,y.a=S),m!==y.o&&className(d,y.o=m),h!==y.i&&className(w,y.i=h),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),V}}),createComponent(TextField,{type:"date",label:"Предполагаемая дата подачи иска",get value(){return t()},setValue:F}),createComponent(Checkbox,{label:"Рассчитать неустойку по ставке ЦБ, в случае если размер неустойки слишком велик",get value(){return n()},setValue:g})]}function TableRow(U){const t=()=>{let k=U.value,M=k.info.type;if(M==="payment"){let A=k;A.info.amountIncrease>=A.info.amountDecrease?M+="-increase":M+="-decrease"}return M},F=()=>{const k=U.value;return k.debt??k.enrichment??0},n=(k,M,A)=>k.info.oneDay?"":k.percentDisabled&&(M==="percent"||M==="percentPeriod")||k.feeDisabled&&(M==="fee"||M==="feePeriod")?"-":(A==null?void 0:A.toString())??"",g=k=>{const M={percent:"%",money:"р."},A={day:"д",week:"н",month:"м",year:"г",all:"весь"};try{return`${k.amount}${M[k.type]}/${A[k.period]}`}catch{return"err"}},V=k=>k.includes("T")&&k.includes("Z")?new Date(k).toLocaleDateString("ru"):k;return(()=>{var k=_tmpl$5(),M=k.firstChild,A=M.firstChild,l=M.nextSibling,r=l.firstChild,R=l.nextSibling,x=R.firstChild,b=R.nextSibling,d=b.nextSibling,v=d.nextSibling,f=v.nextSibling,w=f.nextSibling,E=w.nextSibling,p=E.nextSibling;return insert(M,()=>U.i,A),insert(M,F,null),insert(l,()=>V(U.value.from),r),insert(R,()=>V(n(U.value,"to",U.value.to)),x),insert(b,()=>V(n(U.value,"percentPeriod",U.value.percentPeriod))),insert(d,()=>n(U.value,"feePeriod",U.value.feePeriod)),insert(v,()=>n(U.value,"percent",g(U.value.percentData))),insert(f,()=>n(U.value,"fee",g(U.value.feeData))),insert(w,()=>U.value.formula),insert(E,()=>round(U.value.calculatedPercent)),insert(p,()=>round(U.value.calculatedFee)),createRenderEffect(()=>setAttribute(k,"data-type",t())),k})()}const testCheckpoints=[{from:"2015-01-01T00:00:00.000Z",terminated:!1,enrichment:0,info:{type:"start",oneDay:!1},debt:0,to:"2018-01-09T00:00:00.000Z",percentPeriod:36,feePeriod:1105,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:10.5,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:1,formula:"0 x 36 x 10% ",calculatedPercent:0,calculatedFee:0},{from:"2022-07-24T21:00:00.000Z",enrichment:0,terminated:!1,info:{terminated:!1,rate:8,type:"rate",oneDay:!1},debt:0,to:"2023-01-31T00:00:00.000Z",percentPeriod:6,feePeriod:191,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 x 6 x 10% + 0 x 191 / 365 x 8%",calculatedPercent:0,calculatedFee:0},{from:"2018-01-10T00:00:00.000Z",terminated:!1,enrichment:0,info:{type:"deadline",oneDay:!1},debt:0,to:"2018-02-10T21:00:00.000Z",percentPeriod:1,feePeriod:33,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8.25,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 x 1 x 10% + 0 x 33 / 365 x 8.25%",calculatedPercent:0,calculatedFee:0},{from:"2023-12-31T21:00:00.000Z",terminated:!1,enrichment:4e5,info:{type:"leapYear",oneDay:!1},debt:1e5,to:"2024-04-23T09:51:47.308Z",percentPeriod:3,feePeriod:114,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"100000 x 3 x 10% + 100000 x 114 / 366 x 8%",calculatedPercent:3e4,calculatedFee:2491.8032786885246},{from:"2023-02-01T00:00:00.000Z",terminated:!1,enrichment:4e5,info:{amountIncrease:5e5,amountDecrease:0,type:"payment",oneDay:!0},debt:1e5,to:null,percentPeriod:null,feePeriod:null,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 + 500000 = 500000 ",calculatedPercent:0,calculatedFee:0},{from:"2023-02-01T00:00:00.000Z",terminated:!1,enrichment:4e5,info:{type:"synthetic",oneDay:!1},debt:1e5,to:"2023-12-30T21:00:00.000Z",percentPeriod:10,feePeriod:334,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"100000 x 10 x 10% + 100000 x 334 / 365 x 8%",calculatedPercent:1e5,calculatedFee:7320.54794520548}],testResult={debt:1e5,debtBeforeTermination:1e5,percent:13e4,fee:9812.351223894004,final:239812.35122389402,gosposhlina:{amount:15796.247024477881,formula:"7000 + (639812.35 - 200000) x 0.02"},courtType:1,enrichment:{formula:"500000 - 100000",value:4e5},startDate:"2015-01-01T00:00:00.000Z",endDate:"2018-01-09T00:00:00.000Z",haltDate:"2024-04-23T09:51:47.308Z"};export{Demo as default};
