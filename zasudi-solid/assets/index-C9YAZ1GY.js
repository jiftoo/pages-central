var ar=Object.defineProperty;var or=(e,t,i)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var se=(e,t,i)=>(or(e,typeof t!="symbol"?t+"":t,i),i),Yt=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)};var o=(e,t,i)=>(Yt(e,t,"read from private field"),i?i.call(e):t.get(e)),$=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},ee=(e,t,i,n)=>(Yt(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i);var ht=(e,t,i,n)=>({set _(r){ee(e,t,r,i)},get _(){return o(e,t,n)}}),G=(e,t,i)=>(Yt(e,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const sharedConfig={context:void 0,registry:void 0},equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let ERROR=null,runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const i=Listener,n=Owner,r=e.length===0,s=t===void 0?n:t,a=r?UNOWNED:{owned:null,cleanups:null,context:s?s.context:null,owner:s},c=r?e:()=>e(()=>untrack(()=>cleanNode(a)));Owner=a,Listener=null;try{return runUpdates(c,!0)}finally{Listener=i,Owner=n}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const i={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=r=>(typeof r=="function"&&(r=r(i.value)),writeSignal(i,r));return[readSignal.bind(i),n]}function createComputed(e,t,i){const n=createComputation(e,t,!0,STALE);updateComputation(n)}function createRenderEffect(e,t,i){const n=createComputation(e,t,!1,STALE);updateComputation(n)}function createEffect(e,t,i){runEffects=runUserEffects;const n=createComputation(e,t,!1,STALE);(!i||!i.render)&&(n.user=!0),Effects?Effects.push(n):updateComputation(n)}function createMemo(e,t,i){i=i?Object.assign({},signalOptions,i):signalOptions;const n=createComputation(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=i.equals||void 0,updateComputation(n),readSignal.bind(n)}function isPromise(e){return e&&typeof e=="object"&&"then"in e}function createResource(e,t,i){let n,r,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,r=e,s=t||{}):(n=e,r=t,s=i||{});let a=null,c=NO_INIT,f=!1,u="initialValue"in s,l=typeof n=="function"&&createMemo(n);const m=new Set,[p,_]=(s.storage||createSignal)(s.initialValue),[g,P]=createSignal(void 0),[v,L]=createSignal(void 0,{equals:!1}),[F,w]=createSignal(u?"ready":"unresolved");function x(E,y,D,R){return a===E&&(a=null,R!==void 0&&(u=!0),(E===c||y===c)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(R,{value:y})),c=NO_INIT,h(y,D)),y}function h(E,y){runUpdates(()=>{y===void 0&&_(()=>E),w(y!==void 0?"errored":u?"ready":"unresolved"),P(y);for(const D of m.keys())D.decrement();m.clear()},!1)}function d(){const E=SuspenseContext,y=p(),D=g();if(D!==void 0&&!a)throw D;return Listener&&!Listener.user&&E&&createComputed(()=>{v(),a&&(E.resolved||m.has(E)||(E.increment(),m.add(E)))}),y}function M(E=!0){if(E!==!1&&f)return;f=!1;const y=l?l():n;if(y==null||y===!1){x(a,untrack(p));return}const D=c!==NO_INIT?c:untrack(()=>r(y,{value:p(),refetching:E}));return isPromise(D)?(a=D,"value"in D?(D.status==="success"?x(a,D.value,void 0,y):x(a,void 0,void 0,y),D):(f=!0,queueMicrotask(()=>f=!1),runUpdates(()=>{w(u?"refreshing":"pending"),L()},!1),D.then(R=>x(D,R,void 0,y),R=>x(D,void 0,castError(R),y)))):(x(a,D,void 0,y),D)}return Object.defineProperties(d,{state:{get:()=>F()},error:{get:()=>g()},loading:{get(){const E=F();return E==="pending"||E==="refreshing"}},latest:{get(){if(!u)return d();const E=g();if(E&&!a)throw E;return p()}}}),l?createComputed(()=>M(!1)):M(!1),[d,{refetch:M,mutate:_}]}function batch(e){return runUpdates(e,!1)}function untrack(e){if(Listener===null)return e();const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function on(e,t,i){const n=Array.isArray(e);let r,s=i&&i.defer;return a=>{let c;if(n){c=Array(e.length);for(let u=0;u<e.length;u++)c[u]=e[u]()}else c=e();if(s)return s=!1,a;const f=untrack(()=>t(c,r,a));return r=c,f}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function catchError(e,t){ERROR||(ERROR=Symbol("error")),Owner=createComputation(void 0,void 0,!0),Owner.context={...Owner.context,[ERROR]:[t]};try{return e()}catch(i){handleError(i)}finally{Owner=Owner.owner}}function getListener(){return Listener}function getOwner(){return Owner}function runWithOwner(e,t){const i=Owner,n=Listener;Owner=e,Listener=null;try{return runUpdates(t,!0)}catch(r){handleError(r)}finally{Owner=i,Listener=n}}function startTransition(e){const t=Listener,i=Owner;return Promise.resolve().then(()=>{Listener=t,Owner=i;let n;return runUpdates(e,!1),Listener=Owner=null,n?n.done:void 0})}function createContext(e,t){const i=Symbol("context");return{id:i,Provider:createProvider(i),defaultValue:e}}function useContext(e){return Owner&&Owner.context&&Owner.context[e.id]!==void 0?Owner.context[e.id]:e.defaultValue}function children(e){const t=createMemo(e),i=createMemo(()=>resolveChildren(t()));return i.toArray=()=>{const n=i();return Array.isArray(n)?n:n!=null?[n]:[]},i}let SuspenseContext;function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const e=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=e}if(Listener){const e=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(e)):(Listener.sources=[this],Listener.sourceSlots=[e]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,i){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let r=0;r<e.observers.length;r+=1){const s=e.observers[r],a=Transition&&Transition.running;a&&Transition.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Updates.push(s):Effects.push(s),s.observers&&markDownstream(s)),a||(s.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=ExecCount;runComputation(e,e.value,t)}function runComputation(e,t,i){let n;const r=Owner,s=Listener;Listener=Owner=e;try{n=e.fn(t)}catch(a){return e.pure&&(e.state=STALE,e.owned&&e.owned.forEach(cleanNode),e.owned=null),e.updatedAt=i+1,handleError(a)}finally{Listener=s,Owner=r}(!e.updatedAt||e.updatedAt<=i)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,n):e.value=n,e.updatedAt=i)}function createComputation(e,t,i,n=STALE,r){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:Owner?Owner.context:null,pure:i};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(s):Owner.owned=[s]),s}function runTop(e){if(e.state===0)return;if(e.state===PENDING)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)e.state&&t.push(e);for(let i=t.length-1;i>=0;i--)if(e=t[i],e.state===STALE)updateComputation(e);else if(e.state===PENDING){const n=Updates;Updates=null,runUpdates(()=>lookUpstream(e,t[0]),!1),Updates=n}}function runUpdates(e,t){if(Updates)return e();let i=!1;t||(Updates=[]),Effects?i=!0:Effects=[],ExecCount++;try{const n=e();return completeUpdates(i),n}catch(n){i||(Effects=null),Updates=null,handleError(n)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,i=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[i++]=n:runTop(n)}for(t=0;t<i;t++)runTop(e[t])}function lookUpstream(e,t){e.state=0;for(let i=0;i<e.sources.length;i+=1){const n=e.sources[i];if(n.sources){const r=n.state;r===STALE?n!==t&&(!n.updatedAt||n.updatedAt<ExecCount)&&runTop(n):r===PENDING&&lookUpstream(n,t)}}}function markDownstream(e){for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];i.state||(i.state=PENDING,i.pure?Updates.push(i):Effects.push(i),i.observers&&markDownstream(i))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const i=e.sources.pop(),n=e.sourceSlots.pop(),r=i.observers;if(r&&r.length){const s=r.pop(),a=i.observerSlots.pop();n<r.length&&(s.sourceSlots[a]=n,r[n]=s,i.observerSlots[n]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function castError(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function runErrors(e,t,i){try{for(const n of t)n(e)}catch(n){handleError(n,i&&i.owner||null)}}function handleError(e,t=Owner){const i=ERROR&&t&&t.context&&t.context[ERROR],n=castError(e);if(!i)throw n;Effects?Effects.push({fn(){runErrors(n,i,t)},state:STALE}):runErrors(n,i,t)}function resolveChildren(e){if(typeof e=="function"&&!e.length)return resolveChildren(e());if(Array.isArray(e)){const t=[];for(let i=0;i<e.length;i++){const n=resolveChildren(e[i]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function createProvider(e,t){return function(n){let r;return createRenderEffect(()=>r=untrack(()=>(Owner.context={...Owner.context,[e]:n.value},children(()=>n.children))),void 0),r}}const FALLBACK=Symbol("fallback");function dispose(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,i={}){let n=[],r=[],s=[],a=0,c=t.length>1?[]:null;return onCleanup(()=>dispose(s)),()=>{let f=e()||[],u,l;return f[$TRACK],untrack(()=>{let p=f.length,_,g,P,v,L,F,w,x,h;if(p===0)a!==0&&(dispose(s),s=[],n=[],r=[],a=0,c&&(c=[])),i.fallback&&(n=[FALLBACK],r[0]=createRoot(d=>(s[0]=d,i.fallback())),a=1);else if(a===0){for(r=new Array(p),l=0;l<p;l++)n[l]=f[l],r[l]=createRoot(m);a=p}else{for(P=new Array(p),v=new Array(p),c&&(L=new Array(p)),F=0,w=Math.min(a,p);F<w&&n[F]===f[F];F++);for(w=a-1,x=p-1;w>=F&&x>=F&&n[w]===f[x];w--,x--)P[x]=r[w],v[x]=s[w],c&&(L[x]=c[w]);for(_=new Map,g=new Array(x+1),l=x;l>=F;l--)h=f[l],u=_.get(h),g[l]=u===void 0?-1:u,_.set(h,l);for(u=F;u<=w;u++)h=n[u],l=_.get(h),l!==void 0&&l!==-1?(P[l]=r[u],v[l]=s[u],c&&(L[l]=c[u]),l=g[l],_.set(h,l)):s[u]();for(l=F;l<p;l++)l in P?(r[l]=P[l],s[l]=v[l],c&&(c[l]=L[l],c[l](l))):r[l]=createRoot(m);r=r.slice(0,a=p),n=f.slice(0)}return r});function m(p){if(s[l]=p,c){const[_,g]=createSignal(l);return c[l]=g,t(f[l],_)}return t(f[l])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}function trueFn(){return!0}const propTraps={get(e,t,i){return t===$PROXY?i:e.get(t)},has(e,t){return t===$PROXY?!0:e.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function resolveSources(){for(let e=0,t=this.length;e<t;++e){const i=this[e]();if(i!==void 0)return i}}function mergeProps(...e){let t=!1;for(let a=0;a<e.length;a++){const c=e[a];t=t||!!c&&$PROXY in c,e[a]=typeof c=="function"?(t=!0,createMemo(c)):c}if(t)return new Proxy({get(a){for(let c=e.length-1;c>=0;c--){const f=resolveSource(e[c])[a];if(f!==void 0)return f}},has(a){for(let c=e.length-1;c>=0;c--)if(a in resolveSource(e[c]))return!0;return!1},keys(){const a=[];for(let c=0;c<e.length;c++)a.push(...Object.keys(resolveSource(e[c])));return[...new Set(a)]}},propTraps);const i={},n=Object.create(null);for(let a=e.length-1;a>=0;a--){const c=e[a];if(!c)continue;const f=Object.getOwnPropertyNames(c);for(let u=f.length-1;u>=0;u--){const l=f[u];if(l==="__proto__"||l==="constructor")continue;const m=Object.getOwnPropertyDescriptor(c,l);if(!n[l])n[l]=m.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(i[l]=[m.get.bind(c)])}:m.value!==void 0?m:void 0;else{const p=i[l];p&&(m.get?p.push(m.get.bind(c)):m.value!==void 0&&p.push(()=>m.value))}}}const r={},s=Object.keys(n);for(let a=s.length-1;a>=0;a--){const c=s[a],f=n[c];f&&f.get?Object.defineProperty(r,c,f):r[c]=f?f.value:void 0}return r}function splitProps(e,...t){if($PROXY in e){const r=new Set(t.length>1?t.flat():t[0]),s=t.map(a=>new Proxy({get(c){return a.includes(c)?e[c]:void 0},has(c){return a.includes(c)&&c in e},keys(){return a.filter(c=>c in e)}},propTraps));return s.push(new Proxy({get(a){return r.has(a)?void 0:e[a]},has(a){return r.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!r.has(a))}},propTraps)),s}const i={},n=t.map(()=>({}));for(const r of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,r),a=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let c=!1,f=0;for(const u of t)u.includes(r)&&(c=!0,a?n[f][r]=s.value:Object.defineProperty(n[f],r,s)),++f;c||(a?i[r]=s.value:Object.defineProperty(i,r,s))}return[...n,i]}const narrowedError=e=>`Stale read from <${e}>.`;function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){const t=e.keyed,i=createMemo(()=>e.when,void 0,{equals:(n,r)=>t?n===r:!n==!r});return createMemo(()=>{const n=i();if(n){const r=e.children;return typeof r=="function"&&r.length>0?untrack(()=>r(t?n:()=>{if(!untrack(i))throw narrowedError("Show");return e.when})):r}return e.fallback},void 0,void 0)}function Switch(e){let t=!1;const i=(s,a)=>(t?s[1]===a[1]:!s[1]==!a[1])&&s[2]===a[2],n=children(()=>e.children),r=createMemo(()=>{let s=n();Array.isArray(s)||(s=[s]);for(let a=0;a<s.length;a++){const c=s[a].when;if(c)return t=!!s[a].keyed,[a,c,s[a]]}return[-1]},void 0,{equals:i});return createMemo(()=>{const[s,a,c]=r();if(s<0)return e.fallback;const f=c.children;return typeof f=="function"&&f.length>0?untrack(()=>f(t?a:()=>{if(untrack(r)[0]!==s)throw narrowedError("Match");return c.when})):f},void 0,void 0)}function Match(e){return e}let Errors;function resetErrorBoundaries(){Errors&&[...Errors].forEach(e=>e())}function ErrorBoundary(e){let t;const[i,n]=createSignal(t,void 0);return Errors||(Errors=new Set),Errors.add(n),onCleanup(()=>Errors.delete(n)),createMemo(()=>{let r;if(r=i()){const s=e.fallback;return typeof s=="function"&&s.length?untrack(()=>s(r,()=>n())):s}return catchError(()=>e.children,n)},void 0,void 0)}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(e,t){const i=PropAliases[e];return typeof i=="object"?i[t]?i.$:void 0:i}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGElements=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(e,t,i){let n=i.length,r=t.length,s=n,a=0,c=0,f=t[r-1].nextSibling,u=null;for(;a<r||c<s;){if(t[a]===i[c]){a++,c++;continue}for(;t[r-1]===i[s-1];)r--,s--;if(r===a){const l=s<n?c?i[c-1].nextSibling:i[s-c]:f;for(;c<s;)e.insertBefore(i[c++],l)}else if(s===c)for(;a<r;)(!u||!u.has(t[a]))&&t[a].remove(),a++;else if(t[a]===i[s-1]&&i[c]===t[r-1]){const l=t[--r].nextSibling;e.insertBefore(i[c++],t[a++].nextSibling),e.insertBefore(i[--s],l),t[r]=i[s]}else{if(!u){u=new Map;let m=c;for(;m<s;)u.set(i[m],m++)}const l=u.get(t[a]);if(l!=null)if(c<l&&l<s){let m=a,p=1,_;for(;++m<r&&m<s&&!((_=u.get(t[m]))==null||_!==l+p);)p++;if(p>l-c){const g=t[a];for(;c<l;)e.insertBefore(i[c++],g)}else e.replaceChild(i[c++],t[a++])}else a++;else t[a++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,i,n={}){let r;return createRoot(s=>{r=s,t===document?e():insert(t,e(),t.firstChild?null:void 0,i)},n.owner),()=>{r(),t.textContent=""}}function template(e,t,i){let n;const r=()=>{const a=document.createElement("template");return a.innerHTML=e,i?a.content.firstChild.firstChild:a.content.firstChild},s=t?()=>untrack(()=>document.importNode(n||(n=r()),!0)):()=>(n||(n=r())).cloneNode(!0);return s.cloneNode=s,s}function delegateEvents(e,t=window.document){const i=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let n=0,r=e.length;n<r;n++){const s=e[n];i.has(s)||(i.add(s),t.addEventListener(s,eventHandler))}}function setAttribute(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i)}function setAttributeNS(e,t,i,n){n==null?e.removeAttributeNS(t,i):e.setAttributeNS(t,i,n)}function className(e,t){t==null?e.removeAttribute("class"):e.className=t}function addEventListener(e,t,i,n){if(n)Array.isArray(i)?(e[`$$${t}`]=i[0],e[`$$${t}Data`]=i[1]):e[`$$${t}`]=i;else if(Array.isArray(i)){const r=i[0];e.addEventListener(t,i[0]=s=>r.call(e,i[1],s))}else e.addEventListener(t,i)}function classList(e,t,i={}){const n=Object.keys(t||{}),r=Object.keys(i);let s,a;for(s=0,a=r.length;s<a;s++){const c=r[s];!c||c==="undefined"||t[c]||(toggleClassKey(e,c,!1),delete i[c])}for(s=0,a=n.length;s<a;s++){const c=n[s],f=!!t[c];!c||c==="undefined"||i[c]===f||!f||(toggleClassKey(e,c,!0),i[c]=f)}return i}function style(e,t,i){if(!t)return i?setAttribute(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof i=="string"&&(n.cssText=i=void 0),i||(i={}),t||(t={});let r,s;for(s in i)t[s]==null&&n.removeProperty(s),delete i[s];for(s in t)r=t[s],r!==i[s]&&(n.setProperty(s,r),i[s]=r);return i}function spread(e,t={},i,n){const r={};return n||createRenderEffect(()=>r.children=insertExpression(e,t.children,r.children)),createRenderEffect(()=>t.ref&&t.ref(e)),createRenderEffect(()=>assign(e,t,i,!0,r,!0)),r}function use(e,t,i){return untrack(()=>e(t,i))}function insert(e,t,i,n){if(i!==void 0&&!n&&(n=[]),typeof t!="function")return insertExpression(e,t,n,i);createRenderEffect(r=>insertExpression(e,t(),r,i),n)}function assign(e,t,i,n,r={},s=!1){t||(t={});for(const a in r)if(!(a in t)){if(a==="children")continue;r[a]=assignProp(e,a,null,r[a],i,s)}for(const a in t){if(a==="children"){n||insertExpression(e,t.children);continue}const c=t[a];r[a]=assignProp(e,a,c,r[a],i,s)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,i)=>i.toUpperCase())}function toggleClassKey(e,t,i){const n=t.trim().split(/\s+/);for(let r=0,s=n.length;r<s;r++)e.classList.toggle(n[r],i)}function assignProp(e,t,i,n,r,s){let a,c,f,u,l;if(t==="style")return style(e,i,n);if(t==="classList")return classList(e,i,n);if(i===n)return n;if(t==="ref")s||i(e);else if(t.slice(0,3)==="on:"){const m=t.slice(3);n&&e.removeEventListener(m,n),i&&e.addEventListener(m,i)}else if(t.slice(0,10)==="oncapture:"){const m=t.slice(10);n&&e.removeEventListener(m,n,!0),i&&e.addEventListener(m,i,!0)}else if(t.slice(0,2)==="on"){const m=t.slice(2).toLowerCase(),p=DelegatedEvents.has(m);if(!p&&n){const _=Array.isArray(n)?n[0]:n;e.removeEventListener(m,_)}(p||i)&&(addEventListener(e,m,i,p),p&&delegateEvents([m]))}else if(t.slice(0,5)==="attr:")setAttribute(e,t.slice(5),i);else if((l=t.slice(0,5)==="prop:")||(f=ChildProperties.has(t))||!r&&((u=getPropAlias(t,e.tagName))||(c=Properties.has(t)))||(a=e.nodeName.includes("-")))l&&(t=t.slice(5),c=!0),t==="class"||t==="className"?className(e,i):a&&!c&&!f?e[toPropertyName(t)]=i:e[u||t]=i;else{const m=r&&t.indexOf(":")>-1&&SVGNamespace[t.split(":")[0]];m?setAttributeNS(e,m,t,i):setAttribute(e,Aliases[t]||t,i)}return i}function eventHandler(e){const t=`$$${e.type}`;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return i||document}});i;){const n=i[t];if(n&&!i.disabled){const r=i[`${t}Data`];if(r!==void 0?n.call(i,r,e):n.call(i,e),e.cancelBubble)return}i=i._$host||i.parentNode||i.host}}function insertExpression(e,t,i,n,r){for(;typeof i=="function";)i=i();if(t===i)return i;const s=typeof t,a=n!==void 0;if(e=a&&i[0]&&i[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),a){let c=i[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),i=cleanChildren(e,i,n,c)}else i!==""&&typeof i=="string"?i=e.firstChild.data=t:i=e.textContent=t;else if(t==null||s==="boolean")i=cleanChildren(e,i,n);else{if(s==="function")return createRenderEffect(()=>{let c=t();for(;typeof c=="function";)c=c();i=insertExpression(e,c,i,n)}),()=>i;if(Array.isArray(t)){const c=[],f=i&&Array.isArray(i);if(normalizeIncomingArray(c,t,i,r))return createRenderEffect(()=>i=insertExpression(e,c,i,n,!0)),()=>i;if(c.length===0){if(i=cleanChildren(e,i,n),a)return i}else f?i.length===0?appendNodes(e,c,n):reconcileArrays(e,i,c):(i&&cleanChildren(e),appendNodes(e,c));i=c}else if(t.nodeType){if(Array.isArray(i)){if(a)return i=cleanChildren(e,i,n,t);cleanChildren(e,i,null,t)}else i==null||i===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);i=t}}return i}function normalizeIncomingArray(e,t,i,n){let r=!1;for(let s=0,a=t.length;s<a;s++){let c=t[s],f=i&&i[e.length],u;if(!(c==null||c===!0||c===!1))if((u=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))r=normalizeIncomingArray(e,c,f)||r;else if(u==="function")if(n){for(;typeof c=="function";)c=c();r=normalizeIncomingArray(e,Array.isArray(c)?c:[c],Array.isArray(f)?f:[f])||r}else e.push(c),r=!0;else{const l=String(c);f&&f.nodeType===3&&f.data===l?e.push(f):e.push(document.createTextNode(l))}}return r}function appendNodes(e,t,i=null){for(let n=0,r=t.length;n<r;n++)e.insertBefore(t[n],i)}function cleanChildren(e,t,i,n){if(i===void 0)return e.textContent="";const r=n||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const c=t[a];if(r!==c){const f=c.parentNode===e;!s&&!a?f?e.replaceChild(r,c):e.insertBefore(r,i):f&&c.remove()}else s=!0}}else e.insertBefore(r,i);return[r]}const voidFn=()=>{},isServer=!1,SVG_NAMESPACE="http://www.w3.org/2000/svg";function createElement(e,t=!1){return t?document.createElementNS(SVG_NAMESPACE,e):document.createElement(e)}function Portal(e){const{useShadow:t}=e,i=document.createTextNode(""),n=()=>e.mount||document.body,r=getOwner();let s,a=!!sharedConfig.context;return createEffect(()=>{s||(s=runWithOwner(r,()=>createMemo(()=>e.children)));const c=n();if(c instanceof HTMLHeadElement){const[f,u]=createSignal(!1),l=()=>u(!0);createRoot(m=>insert(c,()=>f()?m():s(),null)),onCleanup(l)}else{const f=createElement(e.isSVG?"g":"div",e.isSVG),u=t&&f.attachShadow?f.attachShadow({mode:"open"}):f;Object.defineProperty(f,"_$host",{get(){return i.parentNode},configurable:!0}),insert(u,s),c.appendChild(f),e.ref&&e.ref(f),onCleanup(()=>c.removeChild(f))}},void 0,{render:!a}),i}function Dynamic(e){const[t,i]=splitProps(e,["component"]),n=createMemo(()=>t.component);return createMemo(()=>{const r=n();switch(typeof r){case"function":return untrack(()=>r(i));case"string":const s=SVGElements.has(r),a=createElement(r,s);return spread(a,i,s),a}})}function bindEvent(e,t,i){return e.addEventListener(t,i),()=>e.removeEventListener(t,i)}function intercept([e,t],i,n){return[i?()=>i(e()):e,n?r=>t(n(r)):t]}function querySelector(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function scrollToHash(e,t){const i=querySelector(`#${e}`);i?i.scrollIntoView():t&&window.scrollTo(0,0)}function createIntegration(e,t,i,n){let r=!1;const s=c=>typeof c=="string"?{value:c}:c,a=intercept(createSignal(s(e()),{equals:(c,f)=>c.value===f.value}),void 0,c=>(!r&&t(c),c));return i&&onCleanup(i((c=e())=>{r=!0,a[1](s(c)),r=!1})),{signal:a,utils:n}}function normalizeIntegration(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:createSignal({value:""})};return e}function pathIntegration(){return createIntegration(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:i,state:n})=>{t?window.history.replaceState(n,"",e):window.history.pushState(n,"",e),scrollToHash(window.location.hash.slice(1),i)},e=>bindEvent(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function hashIntegration(){return createIntegration(()=>window.location.hash.slice(1),({value:e,replace:t,scroll:i,state:n})=>{t?window.history.replaceState(n,"","#"+e):window.location.hash=e;const r=e.indexOf("#"),s=r>=0?e.slice(r+1):"";scrollToHash(s,i)},e=>bindEvent(window,"hashchange",()=>e()),{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:e=>{const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,i="/"]=window.location.hash.split("#",2);return`${i}#${t}`}return t}})}function createBeforeLeave(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let i=!1;function n(r,s){if(i)return!(i=!1);const a={to:r,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const c of e)c.listener({...a,from:c.location,retry:f=>{f&&(i=!0),c.navigate(r,s)}});return!a.defaultPrevented}return{subscribe:t,confirm:n}}const hasSchemeRegex=/^(?:[a-z0-9]+:)?\/\//i,trimPathRegex=/^\/+|(\/)\/+$/g;function normalizePath(e,t=!1){const i=e.replace(trimPathRegex,"$1");return i?t||/^[?#]/.test(i)?i:"/"+i:""}function resolvePath(e,t,i){if(hasSchemeRegex.test(t))return;const n=normalizePath(e),r=i&&normalizePath(i);let s="";return!r||t.startsWith("/")?s=n:r.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+r:s=r,(s||"/")+normalizePath(t,!s)}function invariant(e,t){if(e==null)throw new Error(t);return e}function joinPaths(e,t){return normalizePath(e).replace(/\/*(\*.*)?$/g,"")+normalizePath(t)}function extractSearchParams(e){const t={};return e.searchParams.forEach((i,n)=>{t[n]=i}),t}function createMatcher(e,t,i){const[n,r]=e.split("/*",2),s=n.split("/").filter(Boolean),a=s.length;return c=>{const f=c.split("/").filter(Boolean),u=f.length-a;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:a?"":"/",params:{}},m=p=>i===void 0?void 0:i[p];for(let p=0;p<a;p++){const _=s[p],g=f[p],P=_[0]===":",v=P?_.slice(1):_;if(P&&matchSegment(g,m(v)))l.params[v]=g;else if(P||!matchSegment(g,_))return null;l.path+=`/${g}`}if(r){const p=u?f.slice(-u).join("/"):"";if(matchSegment(p,m(r)))l.params[r]=p;else return null}return l}}function matchSegment(e,t){const i=n=>n.localeCompare(e,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?i(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(i):t instanceof RegExp?t.test(e):!1}function scoreRoute(e){const[t,i]=e.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((r,s)=>r+(s.startsWith(":")?2:3),n.length-(i===void 0?0:1))}function createMemoObject(e){const t=new Map,i=getOwner();return new Proxy({},{get(n,r){return t.has(r)||runWithOwner(i,()=>t.set(r,createMemo(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function expandOptionals(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let i=e.slice(0,t.index),n=e.slice(t.index+t[0].length);const r=[i,i+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)r.push(i+=t[1]),n=n.slice(t[0].length);return expandOptionals(n).reduce((s,a)=>[...s,...r.map(c=>c+a)],[])}const MAX_REDIRECTS=100,RouterContextObj=createContext(),RouteContextObj=createContext(),useRouter=()=>invariant(useContext(RouterContextObj),"Make sure your app is wrapped in a <Router />");let TempRoute;const useRoute=()=>TempRoute||useContext(RouteContextObj)||useRouter().base,useResolvedPath=e=>{const t=useRoute();return createMemo(()=>t.resolvePath(e()))},useHref=e=>{const t=useRouter();return createMemo(()=>{const i=e();return i!==void 0?t.renderPath(i):i})},useNavigate=()=>useRouter().navigatorFactory(),useLocation=()=>useRouter().location;function createRoutes(e,t="",i){const{component:n,data:r,children:s}=e,a=!s||Array.isArray(s)&&!s.length,c={key:e,element:n?()=>createComponent(n,{}):()=>{const{element:f}=e;return f===void 0&&i?createComponent(i,{}):f},preload:e.component?n.preload:e.preload,data:r};return asArray(e.path).reduce((f,u)=>{for(const l of expandOptionals(u)){const m=joinPaths(t,l),p=a?m:m.split("/*",1)[0];f.push({...c,originalPath:l,pattern:p,matcher:createMatcher(p,!a,e.matchFilters)})}return f},[])}function createBranch(e,t=0){return{routes:e,score:scoreRoute(e[e.length-1])*1e4-t,matcher(i){const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r],a=s.matcher(i);if(!a)return null;n.unshift({...a,route:s})}return n}}}function asArray(e){return Array.isArray(e)?e:[e]}function createBranches(e,t="",i,n=[],r=[]){const s=asArray(e);for(let a=0,c=s.length;a<c;a++){const f=s[a];if(f&&typeof f=="object"&&f.hasOwnProperty("path")){const u=createRoutes(f,t,i);for(const l of u){n.push(l);const m=Array.isArray(f.children)&&f.children.length===0;if(f.children&&!m)createBranches(f.children,l.pattern,i,n,r);else{const p=createBranch([...n],r.length);r.push(p)}n.pop()}}}return n.length?r:r.sort((a,c)=>c.score-a.score)}function getRouteMatches(e,t){for(let i=0,n=e.length;i<n;i++){const r=e[i].matcher(t);if(r)return r}return[]}function createLocation(e,t){const i=new URL("http://sar"),n=createMemo(f=>{const u=e();try{return new URL(u,i)}catch{return console.error(`Invalid path ${u}`),f}},i,{equals:(f,u)=>f.href===u.href}),r=createMemo(()=>n().pathname),s=createMemo(()=>n().search,!0),a=createMemo(()=>n().hash),c=createMemo(()=>"");return{get pathname(){return r()},get search(){return s()},get hash(){return a()},get state(){return t()},get key(){return c()},query:createMemoObject(on(s,()=>extractSearchParams(n())))}}function createRouterContext(e,t="",i,n){const{signal:[r,s],utils:a={}}=normalizeIntegration(e),c=a.parsePath||(D=>D),f=a.renderPath||(D=>D),u=a.beforeLeave||createBeforeLeave(),l=resolvePath("",t),m=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!r().value&&s({value:l,replace:!0,scroll:!1});const[p,_]=createSignal(!1),g=async D=>{_(!0);try{await startTransition(D)}finally{_(!1)}},[P,v]=createSignal(r().value),[L,F]=createSignal(r().state),w=createLocation(P,L),x=[],h={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(D){return resolvePath(l,D)}};if(i)try{TempRoute=h,h.data=i({data:void 0,params:{},location:w,navigate:M(h)})}finally{TempRoute=void 0}function d(D,R,z){untrack(()=>{if(typeof R=="number"){R&&(a.go?u.confirm(R,z)&&a.go(R):console.warn("Router integration does not support relative routing"));return}const{replace:te,resolve:O,scroll:X,state:J}={replace:!1,resolve:!0,scroll:!0,...z},q=O?D.resolvePath(R):resolvePath("",R);if(q===void 0)throw new Error(`Path '${R}' is not a routable path`);if(x.length>=MAX_REDIRECTS)throw new Error("Too many redirects");const H=P();if((q!==H||J!==L())&&!isServer){if(u.confirm(q,z)){const ce=x.push({value:H,replace:te,scroll:X,state:L()});g(()=>{v(q),F(J),resetErrorBoundaries()}).then(()=>{x.length===ce&&E({value:q,state:J})})}}})}function M(D){return D=D||useContext(RouteContextObj)||h,(R,z)=>d(D,R,z)}function E(D){const R=x[0];R&&((D.value!==R.value||D.state!==R.state)&&s({...D,replace:R.replace,scroll:R.scroll}),x.length=0)}createRenderEffect(()=>{const{value:D,state:R}=r();untrack(()=>{D!==P()&&g(()=>{v(D),F(R)})})});{let D=function(R){if(R.defaultPrevented||R.button!==0||R.metaKey||R.altKey||R.ctrlKey||R.shiftKey)return;const z=R.composedPath().find(H=>H instanceof Node&&H.nodeName.toUpperCase()==="A");if(!z||!z.hasAttribute("link"))return;const te=z.href;if(z.target||!te&&!z.hasAttribute("state"))return;const O=(z.getAttribute("rel")||"").split(/\s+/);if(z.hasAttribute("download")||O&&O.includes("external"))return;const X=new URL(te);if(X.origin!==window.location.origin||l&&X.pathname&&!X.pathname.toLowerCase().startsWith(l.toLowerCase()))return;const J=c(X.pathname+X.search+X.hash),q=z.getAttribute("state");R.preventDefault(),d(h,J,{resolve:!1,replace:z.hasAttribute("replace"),scroll:!z.hasAttribute("noscroll"),state:q&&JSON.parse(q)})};var y=D;delegateEvents(["click"]),document.addEventListener("click",D),onCleanup(()=>document.removeEventListener("click",D))}return{base:h,out:m,location:w,isRouting:p,renderPath:f,parsePath:c,navigatorFactory:M,beforeLeave:u}}function createRouteContext(e,t,i,n,r){const{base:s,location:a,navigatorFactory:c}=e,{pattern:f,element:u,preload:l,data:m}=n().route,p=createMemo(()=>n().path);l&&l();const _={parent:t,pattern:f,get child(){return i()},path:p,params:r,data:t.data,outlet:u,resolvePath(g){return resolvePath(s.path(),g,p())}};if(m)try{TempRoute=_,_.data=m({data:t.data,params:r,location:a,navigate:c(_)})}finally{TempRoute=void 0}return _}var _tmpl$$w=template("<a link>");const Router=e=>{const{source:t,url:i,base:n,data:r,out:s}=e,a=t||pathIntegration(),c=createRouterContext(a,n,r);return createComponent(RouterContextObj.Provider,{value:c,get children(){return e.children}})},Routes=e=>{const t=useRouter(),i=useRoute(),n=children(()=>e.children),r=createMemo(()=>createBranches(n(),joinPaths(i.pattern,e.base||""),Outlet)),s=createMemo(()=>getRouteMatches(r(),t.location.pathname)),a=createMemoObject(()=>{const l=s(),m={};for(let p=0;p<l.length;p++)Object.assign(m,l[p].params);return m});t.out&&t.out.matches.push(s().map(({route:l,path:m,params:p})=>({originalPath:l.originalPath,pattern:l.pattern,path:m,params:p})));const c=[];let f;const u=createMemo(on(s,(l,m,p)=>{let _=m&&l.length===m.length;const g=[];for(let P=0,v=l.length;P<v;P++){const L=m&&m[P],F=l[P];p&&L&&F.route.key===L.route.key?g[P]=p[P]:(_=!1,c[P]&&c[P](),createRoot(w=>{c[P]=w,g[P]=createRouteContext(t,g[P-1]||i,()=>u()[P+1],()=>s()[P],a)}))}return c.splice(l.length).forEach(P=>P()),p&&_?p:(f=g[0],g)}));return createComponent(Show,{get when(){return u()&&f},keyed:!0,children:l=>createComponent(RouteContextObj.Provider,{value:l,get children(){return l.outlet()}})})},Route=e=>{const t=children(()=>e.children);return mergeProps(e,{get children(){return t()}})},Outlet=()=>{const e=useRoute();return createComponent(Show,{get when(){return e.child},keyed:!0,children:t=>createComponent(RouteContextObj.Provider,{value:t,get children(){return t.outlet()}})})};function A(e){e=mergeProps({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=splitProps(e,["href","state","class","activeClass","inactiveClass","end"]),i=useResolvedPath(()=>e.href),n=useHref(i),r=useLocation(),s=createMemo(()=>{const a=i();if(a===void 0)return!1;const c=normalizePath(a.split(/[?#]/,1)[0]).toLowerCase(),f=normalizePath(r.pathname).toLowerCase();return e.end?c===f:f.startsWith(c)});return(()=>{var a=_tmpl$$w();return spread(a,mergeProps(t,{get href(){return n()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s(),[e.activeClass]:s(),...t.classList}},get"aria-current"(){return s()?"page":void 0}}),!1,!1),a})()}function Navigate(e){const t=useNavigate(),i=useLocation(),{href:n,state:r}=e,s=typeof n=="function"?n({navigate:t,location:i}):n;return t(s,{replace:!0,state:r}),null}const landingPage={"image-banner":"_image-banner_xkbbn_1","jumbotron-outer":"_jumbotron-outer_xkbbn_19","jumbotron-inner":"_jumbotron-inner_xkbbn_31","begin-flow-button":"_begin-flow-button_xkbbn_77","info-banner":"_info-banner_xkbbn_121","info-banner-block":"_info-banner-block_xkbbn_145","info-banner-block-text-wrapper":"_info-banner-block-text-wrapper_xkbbn_167","contacts-banner":"_contacts-banner_xkbbn_203","contacts-banner-wrapper":"_contacts-banner-wrapper_xkbbn_213","contacts-banner-company-info":"_contacts-banner-company-info_xkbbn_223"},landingPageBanner="/zasudi-solid/assets/landing-page-banner--kwD9oew.webp",notesIcon="/zasudi-solid/assets/notes-bPG4m6F5.png",laptopIcon="/zasudi-solid/assets/laptop-a7NCd9lQ.png",printerIcon="/zasudi-solid/assets/printer-BdpB889u.png",zasudiLogo={"zasudi-logo":"_zasudi-logo_uap1b_1"};var _tmpl$$v=template("<div>ZASUDI");function ZasudiLogo(e){const t=()=>(e.scale||1)*38;return(()=>{var i=_tmpl$$v();return createRenderEffect(n=>{var r=zasudiLogo["zasudi-logo"]+" "+e.class,s=t()+"px";return r!==n.e&&className(i,n.e=r),s!==n.t&&((n.t=s)!=null?i.style.setProperty("--__zasudi-logo-font-size",s):i.style.removeProperty("--__zasudi-logo-font-size")),n},{e:void 0,t:void 0}),i})()}var _tmpl$$u=template("<img>"),_tmpl$2$l=template("<div><div><div><h1>Документы для вас</h1><h3>Всего 5-10 минут от начала до печати"),_tmpl$3$f=template("<div><h1>Создайте документ онлайн всего за несколько минут"),_tmpl$4$a=template("<div><div><div><div>+7 012 345 67 89</div><div>Пн-Пт 13:00-9:00</div><a href=#>VK"),_tmpl$5$7=template("<div><img height=200><div><h2></h2><p>");function LandingPage(){return[(()=>{var e=_tmpl$$u();return setAttribute(e,"src",landingPageBanner),createRenderEffect(()=>className(e,landingPage["image-banner"])),e})(),(()=>{var e=_tmpl$2$l(),t=e.firstChild;return t.firstChild,insert(t,createComponent(A,{get class(){return landingPage["begin-flow-button"]},href:"document-flow",children:"Начать"}),null),createRenderEffect(i=>{var n=landingPage["jumbotron-outer"],r=landingPage["jumbotron-inner"];return n!==i.e&&className(e,i.e=n),r!==i.t&&className(t,i.t=r),i},{e:void 0,t:void 0}),e})(),(()=>{var e=_tmpl$3$f();return e.firstChild,insert(e,createComponent(InfoBannerBlock,{icon:notesIcon,heading:"Ответьте на вопросы",children:"Ваш документ будет заполняться предоставленной вами информацией в реальном времени."}),null),insert(e,createComponent(InfoBannerBlock,{icon:laptopIcon,heading:"Просмотрите документ",children:"Ваш документ уже сформирован. Осталось только убедиться в отсутствии опечаток."}),null),insert(e,createComponent(InfoBannerBlock,{icon:printerIcon,heading:"Загрузите, печатайте и делитесь!",children:"Готовый документ доступен к загрузке и принадлежит вам! Копируйте и изменяйте его как угодно."}),null),createRenderEffect(()=>className(e,landingPage["info-banner"])),e})(),(()=>{var e=_tmpl$4$a(),t=e.firstChild,i=t.firstChild,n=i.firstChild,r=n.nextSibling;return insert(i,createComponent(ZasudiLogo,{}),n),createRenderEffect(s=>{var a=landingPage["contacts-banner"],c=landingPage["contacts-banner-wrapper"],f=landingPage["contacts-banner-company-info"],u=landingPage["contacts-banner-phone"],l=landingPage["contacts-banner-hours"];return a!==s.e&&className(e,s.e=a),c!==s.t&&className(t,s.t=c),f!==s.a&&className(i,s.a=f),u!==s.o&&className(n,s.o=u),l!==s.i&&className(r,s.i=l),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e})()]}function InfoBannerBlock(e){return(()=>{var t=_tmpl$5$7(),i=t.firstChild,n=i.nextSibling,r=n.firstChild,s=r.nextSibling;return insert(r,()=>e.heading),insert(s,()=>e.children),createRenderEffect(a=>{var c=landingPage["info-banner-block"],f=e.icon,u=landingPage["info-banner-block-text-wrapper"];return c!==a.e&&className(t,a.e=c),f!==a.t&&setAttribute(i,"src",a.t=f),u!==a.a&&className(n,a.a=u),a},{e:void 0,t:void 0,a:void 0}),t})()}const flow={"flow-width":"_flow-width_1z0zc_11","flow-progress-wrapper":"_flow-progress-wrapper_1z0zc_19","flow-progress-appear":"_flow-progress-appear_1z0zc_1","flow-crumb":"_flow-crumb_1z0zc_65","flow-page":"_flow-page_1z0zc_293","flow-left-side":"_flow-left-side_1z0zc_317","flow-right-side":"_flow-right-side_1z0zc_323","flow-control-buttons":"_flow-control-buttons_1z0zc_355","flow-back-button":"_flow-back-button_1z0zc_439"},shadow="_shadow_k0n44_509",inactive="_inactive_k0n44_513",reusable={"big-green-button":"_big-green-button_k0n44_7","big-green-button-uppercase":"_big-green-button-uppercase_k0n44_21","big-green-button-thin":"_big-green-button-thin_k0n44_32","question-section":"_question-section_k0n44_45","block-select":"_block-select_k0n44_77","block-select-outline":"_block-select-outline_k0n44_88","block-select-item":"_block-select-item_k0n44_103","dropdown-select":"_dropdown-select_k0n44_132","dropdown-select-item":"_dropdown-select-item_k0n44_148","dropdown-select-selected-text":"_dropdown-select-selected-text_k0n44_178","dropdown-select-taller-rows":"_dropdown-select-taller-rows_k0n44_184","dropdown-select-details":"_dropdown-select-details_k0n44_188","delay-overflow":"_delay-overflow_k0n44_1","dropdown-select-caret":"_dropdown-select-caret_k0n44_280","text-field-wrapper":"_text-field-wrapper_k0n44_295","text-field-input-wrapper":"_text-field-input-wrapper_k0n44_301","text-field-input-icon":"_text-field-input-icon_k0n44_309","text-field":"_text-field_k0n44_295","text-field-sliding-placeholder":"_text-field-sliding-placeholder_k0n44_339","text-field-name-field":"_text-field-name-field_k0n44_374","input-container":"_input-container_k0n44_374","input-warning":"_input-warning_k0n44_382","warning-appear":"_warning-appear_k0n44_1","warning-disappear":"_warning-disappear_k0n44_1","text-field-example":"_text-field-example_k0n44_426","card-adder-cards":"_card-adder-cards_k0n44_440","card-adder-card":"_card-adder-card_k0n44_440","card-adder-card-delete-container":"_card-adder-card-delete-container_k0n44_460","card-adder-delete-button":"_card-adder-delete-button_k0n44_468","card-adder-add-button":"_card-adder-add-button_k0n44_481","styled-background":"_styled-background_k0n44_499",shadow,inactive,"checkbox-wrapper":"_checkbox-wrapper_k0n44_520","radio-group":"_radio-group_k0n44_551","radio-group-children-margin":"_radio-group-children-margin_k0n44_557","checkbox-wrapper-radio":"_checkbox-wrapper-radio_k0n44_565","list-box-wrapper":"_list-box-wrapper_k0n44_573","list-box":"_list-box_k0n44_573","list-box-aside-item":"_list-box-aside-item_k0n44_600"};var _tmpl$$t=template("<h3>"),_tmpl$2$k=template("<div><div>");function QuestionSection(e){return(()=>{var t=_tmpl$2$k(),i=t.firstChild;return insert(t,createComponent(Show,{get when(){return e.question},get children(){var n=_tmpl$$t();return insert(n,()=>e.question),n}}),i),insert(i,()=>e.children),createRenderEffect(n=>{var r=reusable["question-section"],s=e.noPaddingTop?"0":void 0,a=e.noPaddingBottom?"0":void 0;return r!==n.e&&className(t,n.e=r),s!==n.t&&((n.t=s)!=null?t.style.setProperty("padding-top",s):t.style.removeProperty("padding-top")),a!==n.a&&((n.a=a)!=null?t.style.setProperty("padding-bottom",a):t.style.removeProperty("padding-bottom")),n},{e:void 0,t:void 0,a:void 0}),t})()}const grid="_grid_jw89q_1",dogovor={grid};var _tmpl$$s=template("<div>");function StyledBackground(e){const t=()=>{let i=e.classList??{};return e.class?{...i,...Object.fromEntries(e.class.split(" ").map(n=>[n,!0]))}:i};return(()=>{var i=_tmpl$$s();return spread(i,mergeProps(e,{class:void 0,get classList(){return{...t(),[reusable.shadow]:e.shadow,[reusable.inactive]:e.inactive,[reusable["styled-background"]]:!0}}}),!1,!0),insert(i,()=>e.children),i})()}const menuIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-menu'%3e%3cline%20x1='3'%20y1='12'%20x2='21'%20y2='12'%3e%3c/line%3e%3cline%20x1='3'%20y1='6'%20x2='21'%20y2='6'%3e%3c/line%3e%3cline%20x1='3'%20y1='18'%20x2='21'%20y2='18'%3e%3c/line%3e%3c/svg%3e",calendarIcon="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.58309%2014.3563H5.89844V16.5333H3.58309V14.3563ZM20%206.50075V2.13306H18.0232V4.80153H13.9563V2.13306H12.0359V4.80153H7.96906V2.13306H6.04875V4.80153H1.9818V2.13306H0V6.50075H20ZM10.5859%2010.9343H12.9297V13.1844H10.5859V10.9343Z'%20fill='%231C4681'/%3e%3cpath%20d='M3.15381%200.0390625H4.87701V3.62961H3.15381V0.0390625ZM15.1283%200.0390625H16.8515V3.62961H15.1283L15.1283%200.0390625ZM9.14107%200.0390625H10.8642V3.62961H9.14107V0.0390625ZM10.5861%2014.3562H12.9298V16.5332H10.5861V14.3562ZM7.07045%2010.9343H9.4142V13.1844H7.07045V10.9343ZM14.1017%2010.9343H16.4171V13.1844H14.1017V10.9343Z'%20fill='%231C4681'/%3e%3cpath%20d='M0%207.67261V20.0376H20V7.67261H0ZM17.5888%2017.7051H2.41121V9.76245H17.5888V17.7051Z'%20fill='%231C4681'/%3e%3cpath%20d='M3.58301%2010.9343H5.89836V13.1844H3.58301V10.9343ZM7.07023%2014.3563H9.41398V16.5332H7.07023V14.3563ZM14.1015%2014.3563H16.4168V16.5332H14.1015V14.3563Z'%20fill='%231C4681'/%3e%3c/svg%3e",phoneIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-phone'%3e%3cpath%20d='M22%2016.92v3a2%202%200%200%201-2.18%202%2019.79%2019.79%200%200%201-8.63-3.07%2019.5%2019.5%200%200%201-6-6%2019.79%2019.79%200%200%201-3.07-8.67A2%202%200%200%201%204.11%202h3a2%202%200%200%201%202%201.72%2012.84%2012.84%200%200%200%20.7%202.81%202%202%200%200%201-.45%202.11L8.09%209.91a16%2016%200%200%200%206%206l1.27-1.27a2%202%200%200%201%202.11-.45%2012.84%2012.84%200%200%200%202.81.7A2%202%200%200%201%2022%2016.92z'%3e%3c/path%3e%3c/svg%3e";var _tmpl$$r=template("<img alt=icon>"),_tmpl$2$j=template("<input required>"),_tmpl$3$e=template("<div>"),_tmpl$4$9=template("<div><div>");function wordLimitDirective(e,t){const i=n=>{if(t()){if(t()<0){console.warn("word limit of is less than 0");return}n.currentTarget.value=n.currentTarget.value.split(" ").slice(0,t()).join(" "),n.data&&[...n.data].every(r=>r===" ")&&n.currentTarget.value.charAt(n.currentTarget.value.length-2)===" "&&(console.log("removing whitespace",`"${n.currentTarget.value}"`),n.currentTarget.value=n.currentTarget.value.slice(0,-n.data.length))}};e.addEventListener("input",i),onCleanup(()=>e.removeEventListener("input",i))}function TextField(e){const t=()=>{switch(e.type){case"date":return calendarIcon;case"tel":return phoneIcon;default:return menuIcon}};return(()=>{var i=_tmpl$4$9(),n=i.firstChild;return insert(n,createComponent(Show,{get when(){return e.icon!==!1&&e.icon!=="no-space"},get fallback(){return createMemo(()=>e.icon==="no-space")()?void 0:(()=>{var r=_tmpl$3$e();return createRenderEffect(()=>className(r,reusable["text-field-input-icon"])),r})()},get children(){var r=_tmpl$$r();return createRenderEffect(s=>{var a=reusable["text-field-input-icon"],c=e.icon??t();return a!==s.e&&className(r,s.e=a),c!==s.t&&setAttribute(r,"src",s.t=c),s},{e:void 0,t:void 0}),r}}),null),insert(n,createComponent(StyledBackground,{shadow:!0,get class(){return reusable["text-field"]},get children(){return[(()=>{var r=_tmpl$2$j();r.$$input=a=>{e.setValue(a.currentTarget.value)},use(wordLimitDirective,r,()=>e.wordLimit??null);var s=e.ref;return typeof s=="function"?use(s,r):e.ref=r,createRenderEffect(a=>{var c=e.type??"text",f={"non-empty":!!e.value},u=e.pattern,l=e.label,m=e.disabled;return c!==a.e&&setAttribute(r,"type",a.e=c),a.t=classList(r,f,a.t),u!==a.a&&setAttribute(r,"pattern",a.a=u),l!==a.o&&setAttribute(r,"placeholder",a.o=l),m!==a.i&&(r.disabled=a.i=m),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),createRenderEffect(()=>r.value=e.value),r})(),(()=>{var r=_tmpl$3$e();return insert(r,()=>e.label),createRenderEffect(()=>className(r,reusable["text-field-sliding-placeholder"])),r})()]}}),null),insert(i,createComponent(Show,{get when(){return e.example},get children(){var r=_tmpl$3$e();return insert(r,()=>e.example),createRenderEffect(()=>className(r,reusable["text-field-example"])),r}}),null),createRenderEffect(r=>{var s=reusable["text-field-wrapper"],a=reusable["text-field-input-wrapper"];return s!==r.e&&className(i,r.e=s),a!==r.t&&className(n,r.t=a),r},{e:void 0,t:void 0}),i})()}delegateEvents(["input"]);const $RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(e){let t=e[$PROXY];if(!t&&(Object.defineProperty(e,$PROXY,{value:t=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const i=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let r=0,s=i.length;r<s;r++){const a=i[r];n[a].get&&Object.defineProperty(e,a,{enumerable:n[a].enumerable,get:n[a].get.bind(t)})}}return t}function isWrappable(e){let t;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function unwrap(e,t=new Set){let i,n,r,s;if(i=e!=null&&e[$RAW])return i;if(!isWrappable(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,c=e.length;a<c;a++)r=e[a],(n=unwrap(r,t))!==r&&(e[a]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let f=0,u=a.length;f<u;f++)s=a[f],!c[s].get&&(r=e[s],(n=unwrap(r,t))!==r&&(e[s]=n))}return e}function getNodes(e,t){let i=e[t];return i||Object.defineProperty(e,t,{value:i=Object.create(null)}),i}function getNode(e,t,i){if(e[t])return e[t];const[n,r]=createSignal(i,{equals:!1,internal:!0});return n.$=r,e[t]=n}function proxyDescriptor$1(e,t){const i=Reflect.getOwnPropertyDescriptor(e,t);return!i||i.get||!i.configurable||t===$PROXY||t===$NODE||(delete i.value,delete i.writable,i.get=()=>e[$PROXY][t]),i}function trackSelf(e){getListener()&&getNode(getNodes(e,$NODE),$SELF)()}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}const proxyTraps$1={get(e,t,i){if(t===$RAW)return e;if(t===$PROXY)return i;if(t===$TRACK)return trackSelf(e),i;const n=getNodes(e,$NODE),r=n[t];let s=r?r():e[t];if(t===$NODE||t===$HAS||t==="__proto__")return s;if(!r){const a=Object.getOwnPropertyDescriptor(e,t);getListener()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=getNode(n,t,s)())}return isWrappable(s)?wrap$1(s):s},has(e,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t===$HAS||t==="__proto__"?!0:(getListener()&&getNode(getNodes(e,$HAS),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,t,i,n=!1){if(!n&&e[t]===i)return;const r=e[t],s=e.length;i===void 0?(delete e[t],e[$HAS]&&e[$HAS][t]&&r!==void 0&&e[$HAS][t].$()):(e[t]=i,e[$HAS]&&e[$HAS][t]&&r===void 0&&e[$HAS][t].$());let a=getNodes(e,$NODE),c;if((c=getNode(a,t,r))&&c.$(()=>i),Array.isArray(e)&&e.length!==s){for(let f=e.length;f<s;f++)(c=a[f])&&c.$();(c=getNode(a,"length",s))&&c.$(e.length)}(c=a[$SELF])&&c.$()}function mergeStoreNode(e,t){const i=Object.keys(t);for(let n=0;n<i.length;n+=1){const r=i[n];setProperty(e,r,t[r])}}function updateArray(e,t){if(typeof t=="function"&&(t=t(e)),t=unwrap(t),Array.isArray(t)){if(e===t)return;let i=0,n=t.length;for(;i<n;i++){const r=t[i];e[i]!==r&&setProperty(e,i,r)}setProperty(e,"length",n)}else mergeStoreNode(e,t)}function updatePath(e,t,i=[]){let n,r=e;if(t.length>1){n=t.shift();const a=typeof n,c=Array.isArray(e);if(Array.isArray(n)){for(let f=0;f<n.length;f++)updatePath(e,[n[f]].concat(t),i);return}else if(c&&a==="function"){for(let f=0;f<e.length;f++)n(e[f],f)&&updatePath(e,[f].concat(t),i);return}else if(c&&a==="object"){const{from:f=0,to:u=e.length-1,by:l=1}=n;for(let m=f;m<=u;m+=l)updatePath(e,[m].concat(t),i);return}else if(t.length>1){updatePath(e[n],t,[n].concat(i));return}r=e[n],i=[n].concat(i)}let s=t[0];typeof s=="function"&&(s=s(r,i),s===r)||n===void 0&&s==null||(s=unwrap(s),n===void 0||isWrappable(r)&&isWrappable(s)&&!Array.isArray(s)?mergeStoreNode(r,s):setProperty(e,n,s))}function createStore$1(...[e,t]){const i=unwrap(e||{}),n=Array.isArray(i),r=wrap$1(i);function s(...a){batch(()=>{n&&a.length===1?updateArray(i,a[0]):updatePath(i,a)})}return[r,s]}const $ROOT=Symbol("store-root");function applyState(e,t,i,n,r){const s=t[i];if(e===s)return;const a=Array.isArray(e);if(i!==$ROOT&&(!isWrappable(e)||!isWrappable(s)||a!==Array.isArray(s)||r&&e[r]!==s[r])){setProperty(t,i,e);return}if(a){if(e.length&&s.length&&(!n||r&&e[0]&&e[0][r]!=null)){let u,l,m,p,_,g,P,v;for(m=0,p=Math.min(s.length,e.length);m<p&&(s[m]===e[m]||r&&s[m]&&e[m]&&s[m][r]===e[m][r]);m++)applyState(e[m],s,m,n,r);const L=new Array(e.length),F=new Map;for(p=s.length-1,_=e.length-1;p>=m&&_>=m&&(s[p]===e[_]||r&&s[m]&&e[m]&&s[p][r]===e[_][r]);p--,_--)L[_]=s[p];if(m>_||m>p){for(l=m;l<=_;l++)setProperty(s,l,e[l]);for(;l<e.length;l++)setProperty(s,l,L[l]),applyState(e[l],s,l,n,r);s.length>e.length&&setProperty(s,"length",e.length);return}for(P=new Array(_+1),l=_;l>=m;l--)g=e[l],v=r&&g?g[r]:g,u=F.get(v),P[l]=u===void 0?-1:u,F.set(v,l);for(u=m;u<=p;u++)g=s[u],v=r&&g?g[r]:g,l=F.get(v),l!==void 0&&l!==-1&&(L[l]=s[u],l=P[l],F.set(v,l));for(l=m;l<e.length;l++)l in L?(setProperty(s,l,L[l]),applyState(e[l],s,l,n,r)):setProperty(s,l,e[l])}else for(let u=0,l=e.length;u<l;u++)applyState(e[u],s,u,n,r);s.length>e.length&&setProperty(s,"length",e.length);return}const c=Object.keys(e);for(let u=0,l=c.length;u<l;u++)applyState(e[c[u]],s,c[u],n,r);const f=Object.keys(s);for(let u=0,l=f.length;u<l;u++)e[f[u]]===void 0&&setProperty(s,f[u],void 0)}function reconcile(e,t={}){const{merge:i,key:n="id"}=t,r=unwrap(e);return s=>{if(!isWrappable(s)||!isWrappable(r))return r;const a=applyState(r,{[$ROOT]:s},$ROOT,i,n);return a===void 0?s:a}}const producers=new WeakMap,setterTraps={get(e,t){if(t===$RAW)return e;const i=e[t];let n;return isWrappable(i)?producers.get(i)||(producers.set(i,n=new Proxy(i,setterTraps)),n):i},set(e,t,i){return setProperty(e,t,unwrap(i)),!0},deleteProperty(e,t){return setProperty(e,t,void 0,!0),!0}};function produce(e){return t=>{if(isWrappable(t)){let i;(i=producers.get(t))||producers.set(t,i=new Proxy(t,setterTraps)),e(i)}return t}}function appStateToJson(e){return JSON.stringify(e,(t,i)=>{let n=i;for(;typeof n=="function"&&n.name==="bound readSignal";)n=n();return n})}function unproxifyDeep(e){return JSON.parse(appStateToJson(e))}function declass(e){return JSON.parse(JSON.stringify(e))}const DocumentContext=createContext(createStore$1(null));function DocumentProvider(e){var r;if(isClassOrClassInstance((r=e.initialDocument)==null?void 0:r.constructor))throw new Error("initialDocument must be an object not a class.");let[t,i]=createStore$1(e.initialDocument);const n=i;return i=function(...s){let a=0;for(const c of s)c instanceof Date&&console.warn("Date will be turned into string by the declasser.",c),isClassOrClassInstance(c)&&(s[a]=unproxifyDeep(c)),a++;n.apply(this,s)},createEffect(()=>{untrack(()=>{recurseObject(t,s=>{if(isClassOrClassInstance(s))throw new Error("DocumentContext: solid store cannot contain classes. Use plain objects instead. produce() is not declassed automatically.")})}),console.info("document changed",unproxifyDeep(t))}),createComponent(DocumentContext.Provider,{value:[t,i],get children(){return e.children}})}function useDocument(){return useContext(DocumentContext)}function recurseObject(e,t){const i=r=>r&&typeof r=="object"&&!Array.isArray(r),n=(r={})=>Object.entries(r).forEach(([s,a])=>{i(a)&&(t(a),n(a))});n(e)}function isClassOrClassInstance(e){if(e==null)return!1;const t=e.constructor&&e.constructor.toString().substring(0,5)==="class";if(e.prototype===void 0)return t;const i=e.prototype.constructor&&e.prototype.constructor.toString&&e.prototype.constructor.toString().substring(0,5)==="class";return t||i}let Dogovor$1=class{constructor(){se(this,"type","dogovor");se(this,"name","");se(this,"number","");se(this,"date","");se(this,"clause","");se(this,"sum","");se(this,"settleBeforeCourt",!1)}};class Raspiska{constructor(){se(this,"type","raspiska");se(this,"date","");se(this,"sum","");se(this,"loan",!1)}}const dogovorIcon="/zasudi-solid/assets/dogovor-VVVJ7yXA.svg",raspiskaIcon="/zasudi-solid/assets/raspiska-2qJPlMbz.svg",squish="_squish_1d98f_1",sides={"person-select":"_person-select_1d98f_1","person-select-container":"_person-select-container_1d98f_26","person-select-outline":"_person-select-outline_1d98f_35",squish,"person-select-item":"_person-select-item_1d98f_75"};var _tmpl$$q=template("<div><div>"),_tmpl$2$i=template("<div><img><div>");function PersonSelect(e){let t;const i=()=>{if(t)t.style.animation="none",t.offsetHeight,t.style.animation=null,t.style.animationPlayState="running";else throw Error("no ref")};return(()=>{var n=_tmpl$$q(),r=n.firstChild;return insert(r,createComponent(StyledBackground,{ref(s){var a=t;typeof a=="function"?a(s):t=s},shadow:!0,get style(){return{"--active-item-coeff":e.value}},get class(){return sides["person-select-outline"]}}),null),insert(r,createComponent(For,{get each(){return e.items},children:(s,a)=>(()=>{var c=_tmpl$2$i(),f=c.firstChild,u=f.nextSibling;return c.$$click=()=>(e.value!==a()&&e.setValue(a()),i()),insert(u,()=>s.text),createRenderEffect(l=>{var m={[sides["person-select-item"]]:!0,active:a()===e.value},p=s.icon;return l.e=classList(c,m,l.e),p!==l.t&&setAttribute(f,"src",l.t=p),l},{e:void 0,t:void 0}),c})()}),null),createRenderEffect(s=>{var a={[sides["person-select-container"]]:!0,center:e.center??!1},c=sides["person-select"];return s.e=classList(n,a,s.e),c!==s.t&&className(r,s.t=c),s},{e:void 0,t:void 0}),n})()}delegateEvents(["click"]);var _tmpl$$p=template("<label><input type=checkbox>");function Checkbox(e){return(()=>{var t=_tmpl$$p(),i=t.firstChild;return i.addEventListener("change",n=>e.setValue(n.currentTarget.checked)),insert(t,()=>e.label,null),createRenderEffect(()=>className(t,reusable["checkbox-wrapper"])),createRenderEffect(()=>i.checked=e.value),t})()}var _tmpl$$o=template("<div>");function Dogovor(){const[e,t]=useDocument(),i=()=>({dogovor:0,raspiska:1})[e.document.type];return(()=>{var n=_tmpl$$o();return insert(n,createComponent(QuestionSection,{question:"Какой документ был составлен?",get children(){return createComponent(PersonSelect,{items:[{icon:dogovorIcon,text:"Договор"},{icon:raspiskaIcon,text:"Расписка"}],get value(){return i()},setValue:r=>{switch(r){case 0:t("document",new Dogovor$1);break;case 1:t("document",new Raspiska);break;default:throw new Error("Invalid document type")}}})}}),null),insert(n,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.document.type==="dogovor"},get children(){return createComponent(DogovorFields,{get value(){return e.document},setValue:(r,s)=>t("document",r,s)})}}),createComponent(Match,{get when(){return e.document.type==="raspiska"},get children(){return createComponent(RaspiskaFields,{get value(){return e.document},setValue:(r,s)=>t("document",r,s)})}})]}}),null),createRenderEffect(()=>className(n,dogovor.dogovor)),n})()}function DogovorFields(e){const t=()=>e.value.number??"н/д";return createComponent(QuestionSection,{get children(){var i=_tmpl$$o();return insert(i,createComponent(TextField,{icon:"no-space",label:"Наименование",get value(){return e.value.name},setValue:n=>e.setValue("name",n)}),null),insert(i,createComponent(TextField,{icon:"no-space",label:"Номер",get value(){return t()},setValue:n=>e.setValue("number",n),get disabled(){return e.value.number===null}}),null),insert(i,createComponent(Checkbox,{label:"Без номера",get value(){return e.value.number===null},setValue:n=>e.setValue("number",n?null:"")}),null),insert(i,createComponent(TextField,{icon:"no-space",type:"date",label:"Дата",get value(){return e.value.date},setValue:n=>e.setValue("date",n)}),null),insert(i,createComponent(TextField,{icon:"no-space",label:"Сумма",get value(){return e.value.sum},setValue:n=>e.setValue("sum",n)}),null),insert(i,createComponent(TextField,{icon:"no-space",label:"Пункт",get value(){return e.value.clause},setValue:n=>e.setValue("clause",n)}),null),insert(i,createComponent(Checkbox,{label:"Договором установлен обязательный порядок досудебного урегулирования спора",get value(){return e.value.settleBeforeCourt},setValue:n=>e.setValue("settleBeforeCourt",n)}),null),createRenderEffect(()=>className(i,dogovor.grid)),i}})}function RaspiskaFields(e){return createComponent(QuestionSection,{get children(){return[createComponent(TextField,{icon:"no-space",type:"date",label:"Дата",get value(){return e.value.date},setValue:t=>e.setValue("date",t)}),createComponent(TextField,{icon:"no-space",label:"Сумма",get value(){return e.value.sum},setValue:t=>e.setValue("sum",t)}),createComponent(Checkbox,{label:"В расписке указано на передачу денежных средств в долг, либо взаймы",get value(){return e.value.loan},setValue:t=>e.setValue("loan",t)})]}})}var _tmpl$$n=template("<button>");function BigGreenButton(e){return(()=>{var t=_tmpl$$n();return t.$$click=i=>e.onClick(i),insert(t,()=>e.text),createRenderEffect(i=>{var n=e.style,r=`${reusable["big-green-button"]} ${e.class??""}`,s={[reusable["big-green-button-uppercase"]]:e.uppercase,[reusable["big-green-button-thin"]]:e.thin},a=e.disabled;return i.e=style(t,n,i.e),r!==i.t&&className(t,i.t=r),i.a=classList(t,s,i.a),a!==i.o&&(t.disabled=i.o=a),i},{e:void 0,t:void 0,a:void 0,o:void 0}),t})()}delegateEvents(["click"]);const flIcon="/zasudi-solid/assets/fl-fuegtMfi.svg",ipIcon="/zasudi-solid/assets/ip-Bwn4NpWE.svg",ulIcon="/zasudi-solid/assets/ul-KF9oUbE1.svg";class FLZaimodavec{constructor(){se(this,"type","fl");se(this,"firstName","");se(this,"secondName","");se(this,"lastName","");se(this,"address","");se(this,"birthDate","");se(this,"birthPlace","");se(this,"phone","");se(this,"identity",new IdentityPassport);se(this,"nameChange",null)}}class IPZaimodavec{constructor(){se(this,"type","ip");se(this,"firstName","");se(this,"secondName","");se(this,"lastName","");se(this,"address","");se(this,"birthDate","");se(this,"birthPlace","");se(this,"phone","");se(this,"identity",new IdentityPassport);se(this,"nameChange",null);se(this,"liquidation",null)}}class ULZaimodavec{constructor(){se(this,"type","ul");se(this,"inn","");se(this,"name","");se(this,"address","");se(this,"phone","")}}class FLZaemshik{constructor(){se(this,"type","fl");se(this,"firstName","");se(this,"secondName","");se(this,"lastName","");se(this,"addressType","registration");se(this,"address","");se(this,"birthDate","");se(this,"birthPlace","");se(this,"phone","");se(this,"identity",new IdentityPassport);se(this,"nameChange",null)}}class IPZaemshik{constructor(){se(this,"type","ip");se(this,"firstName","");se(this,"secondName","");se(this,"lastName","");se(this,"addressType","registration");se(this,"address","");se(this,"birthDate","");se(this,"birthPlace","");se(this,"phone","");se(this,"identity",new IdentityPassport);se(this,"nameChange",null);se(this,"liquidation",null)}}class ULZaemshik{constructor(){se(this,"type","ul");se(this,"inn","");se(this,"name","");se(this,"address","");se(this,"phone","")}}class IdentityPassport{constructor(){se(this,"type","passport");se(this,"issuerCode","");se(this,"series","");se(this,"number","");se(this,"issuedBy","");se(this,"issueDate","")}}class IdentityDriverLicense{constructor(){se(this,"type","driverLicense");se(this,"series","");se(this,"number","")}}class IdentityInn{constructor(){se(this,"type","inn");se(this,"inn","")}}class IdentitySnils{constructor(){se(this,"type","snils");se(this,"snils","")}}class NameChange{constructor(){se(this,"newFirstName","");se(this,"newSecondName","");se(this,"newLastName","");se(this,"reason","marriage");se(this,"date","")}}class Liquidation{constructor(){se(this,"date","")}}var _tmpl$$m=template("<img alt=icon>"),_tmpl$2$h=template("<div>"),_tmpl$3$d=template("<div tabindex=-1>"),_tmpl$4$8=template("<div tabindex=0><div>"),_tmpl$5$6=template("<span>");function DropdownSelect(e){const t=()=>{let m;if(typeof e.value=="string"?m=e.items.find(p=>p.value===e.value):m=e.items[e.value],!m)throw console.error("DropdownSelect: value not found in item array:",e.value,e.items),Error(`DropdownSelect: value not found in item array: ${JSON.stringify(e.value)} ${JSON.stringify(e.items)}`);return m},[i,n]=createSignal(!1),r=m=>{e.setValue(m),n(!1)},s=m=>{let p=!0,_=0;for(const g of m)g.value!==void 0?_++:p=!1;if(_!==m.length&&_!==0)throw console.error("DropdownSelect: all items or no items must be keyed.",_,"are keyed instead in",m),Error(`DropdownSelect: all items or no items must be keyed. ${_} out of ${m.length} are keyed instead.`);return p},a=createMemo(()=>s(e.items),s(e.items)),c=()=>{var m;return((m=t())==null?void 0:m.icon)??e.defaultIcon};let f,u;createEffect(()=>{if(!i()){const m=getComputedStyle(u).getPropertyValue("--dropdown-transition-duration");if(m==="")return;const _=(g=>g.includes("ms")?+g.replace("ms",""):g.includes("s")?+g.replace("s","")*1e3:null)(m);if(_===null)throw Error(`fix your css: '${m.toString()}'`);setTimeout(()=>{u.scrollTop=0},_)}});const l=m=>{i()&&!u.contains(m.relatedTarget)&&n(!1)};return(()=>{var m=_tmpl$2$h();return insert(m,createComponent(Show,{get when(){return c()},get children(){var p=_tmpl$$m();return createRenderEffect(()=>setAttribute(p,"src",c())),p}}),null),insert(m,createComponent(StyledBackground,{shadow:!0,ref(p){var _=f;typeof _=="function"?_(p):f=p},onClick:p=>{p.target===p.currentTarget&&n(_=>!_)},onKeyDown:p=>{p.target===p.currentTarget&&(p.key==="Enter"||p.key===" ")&&(n(_=>!_),p.preventDefault())},tabIndex:0,get class(){return reusable["dropdown-select-item"]},get children(){return[(()=>{var p=_tmpl$2$h();return insert(p,()=>{var _;return((_=t())==null?void 0:_.text)??"<undefined>"}),createRenderEffect(()=>className(p,reusable["dropdown-select-selected-text"])),p})(),(()=>{var p=_tmpl$3$d(),_=u;return typeof _=="function"?use(_,p):u=p,use(clickOutside,p,()=>g=>{i()&&g!==f&&n(!1)}),insert(p,createComponent(For,{get each(){return e.items},children:(g,P)=>createComponent(DropdownSelectItem,{get icon(){return g.icon},get text(){return g.text},get selected(){return g===t()},get onClick(){return a()?()=>r(g.value):()=>r(P())},get onFocusOut(){return P()===e.items.length-1||P()===0?l:void 0}})})),createRenderEffect(()=>className(p,reusable["dropdown-select-details"])),p})(),(()=>{var p=_tmpl$2$h();return createRenderEffect(()=>className(p,reusable["dropdown-select-caret"])),p})()]}}),null),createRenderEffect(p=>classList(m,{[reusable["dropdown-select"]]:!0,open:i(),[reusable["dropdown-select-taller-rows"]]:e.tallerRows},p)),m})()}function DropdownSelectItem(e){return(()=>{var t=_tmpl$4$8(),i=t.firstChild;return t.$$focusout=n=>{var r;return(r=e.onFocusOut)==null?void 0:r.call(e,n)},t.$$click=()=>e.onClick(),insert(t,(()=>{var n=createMemo(()=>!!e.icon);return()=>n()?(()=>{var r=_tmpl$$m();return createRenderEffect(()=>setAttribute(r,"src",e.icon)),r})():(()=>{var r=_tmpl$5$6();return r.style.setProperty("min-width","24px"),r})()})(),i),insert(i,()=>e.text),createRenderEffect(n=>{var r=reusable["dropdown-select-item"],s=!!e.selected;return r!==n.e&&className(t,n.e=r),s!==n.t&&t.classList.toggle("selected",n.t=s),n},{e:void 0,t:void 0}),t})()}delegateEvents(["click","focusout"]);const homeIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-home'%3e%3cpath%20d='M3%209l9-7%209%207v11a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2z'%3e%3c/path%3e%3cpolyline%20points='9%2022%209%2012%2015%2012%2015%2022'%3e%3c/polyline%3e%3c/svg%3e",mapPinIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-map-pin'%3e%3cpath%20d='M21%2010c0%207-9%2013-9%2013s-9-6-9-13a9%209%200%200%201%2018%200z'%3e%3c/path%3e%3ccircle%20cx='12'%20cy='10'%20r='3'%3e%3c/circle%3e%3c/svg%3e",userIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-user'%3e%3cpath%20d='M20%2021v-2a4%204%200%200%200-4-4H8a4%204%200%200%200-4%204v2'%3e%3c/path%3e%3ccircle%20cx='12'%20cy='7'%20r='4'%3e%3c/circle%3e%3c/svg%3e",idIcon="data:image/svg+xml,%3csvg%20width='20'%20height='14'%20viewBox='0%200%2020%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%200.555176V13.4452H20V0.555176H0ZM6.12336%202.63221C7.27496%202.63221%208.21184%203.56908%208.21184%204.72068C8.21184%205.87232%207.27496%206.8092%206.12336%206.8092C4.97176%206.8092%204.03484%205.87232%204.03484%204.72068C4.03484%203.56908%204.97176%202.63221%206.12336%202.63221ZM9.31106%2011.251H8.13918V9.7624C8.13918%208.99631%207.51594%208.37307%206.74984%208.37307H5.53875C4.77266%208.37307%204.14941%208.99631%204.14941%209.7624V11.251H2.97754V9.7624C2.97754%208.35014%204.12648%207.20119%205.53875%207.20119H6.74984C8.16211%207.20119%209.31106%208.35014%209.31106%209.7624V11.251ZM16.6406%2010.2562H11.5625V9.08436H16.6406V10.2562ZM16.6406%207.58611H11.5625V6.41424H16.6406V7.58611ZM16.6406%204.916H11.5625V3.74412H16.6406V4.916Z'%20fill='%231C4681'/%3e%3c/svg%3e";var _tmpl$$l=template("<div>"),_tmpl$2$g=template("<label><input type=radio>");function RadioGroup(e){const t=Math.random().toString(),i=()=>e.group??t,n=(s,a)=>typeof s=="string"?e.value===s:e.value===a,r=(s,a)=>{typeof s=="string"?e.setValue(s):e.setValue(a)};return(()=>{var s=_tmpl$$l();return insert(s,createComponent(For,{get each(){return e.items},children:(a,c)=>[createComponent(RadioInput,{get group(){return i()},get label(){return a.label},get checked(){return n(a.value,c())},onSelect:()=>r(a.value,c())}),createComponent(Show,{get when(){return createMemo(()=>!!e.children)()&&n(a.value,c())},get children(){var f=_tmpl$$l();return insert(f,()=>e.children),createRenderEffect(u=>classList(f,{[reusable["radio-group-children-margin"]]:!e.noChildrenMargin},u)),f}})]})),createRenderEffect(()=>className(s,reusable["radio-group"])),s})()}function RadioInput(e){return(()=>{var t=_tmpl$2$g(),i=t.firstChild;return i.addEventListener("change",()=>e.onSelect()),insert(t,()=>e.label,null),createRenderEffect(n=>{var r=reusable["checkbox-wrapper"]+" "+reusable["checkbox-wrapper-radio"],s=e.group;return r!==n.e&&className(t,n.e=r),s!==n.t&&setAttribute(i,"name",n.t=s),n},{e:void 0,t:void 0}),createRenderEffect(()=>i.checked=e.checked),t})()}var _tmpl$$k=template("<img alt=icon>"),_tmpl$2$f=template("<div><div>"),_tmpl$3$c=template("<div>"),_tmpl$4$7=template("<div><input type=text required><div>Допустимы только кириллица и дефис");function NameFields(e){return(()=>{var t=_tmpl$2$f(),i=t.firstChild;return insert(i,createComponent(Show,{get when(){return e.icon!==!1},get fallback(){return(()=>{var n=_tmpl$3$c();return createRenderEffect(()=>className(n,reusable["text-field-input-icon"])),n})()},get children(){var n=_tmpl$$k();return createRenderEffect(r=>{var s=reusable["text-field-input-icon"],a=e.icon??menuIcon;return s!==r.e&&className(n,r.e=s),a!==r.t&&setAttribute(n,"src",r.t=a),r},{e:void 0,t:void 0}),n}}),null),insert(i,createComponent(StyledBackground,{shadow:!0,get classList(){return{[reusable["text-field"]]:!0,[reusable["text-field-name-field"]]:!0}},get children(){return[createComponent(NameFieldsInput,{placeholder:"Фамилия",get value(){return e.lastNameValue},get setValue(){return e.setLastNameValue},get disabled(){return!!e.disabled}}),createComponent(NameFieldsInput,{placeholder:"Имя",get value(){return e.firstNameValue},get setValue(){return e.setFirstNameValue},get disabled(){return!!e.disabled}}),createComponent(NameFieldsInput,{placeholder:"Отчество",get value(){return e.secondNameValue},get setValue(){return e.setSecondNameValue},get disabled(){return!!e.disabled}})]}}),null),createRenderEffect(n=>{var r=reusable["text-field-wrapper"],s=reusable["text-field-input-wrapper"];return r!==n.e&&className(t,n.e=r),s!==n.t&&className(i,n.t=s),n},{e:void 0,t:void 0}),t})()}function NameFieldsInput(e){const[t,i]=createSignal(!1),[n,r]=createSignal(!0),s=150;let a;const c=()=>{clearTimeout(a),a=setTimeout(()=>{r(!0)},s),i(!1)};return(()=>{var f=_tmpl$4$7(),u=f.firstChild,l=u.nextSibling;return u.$$input=m=>{m.data===" "&&focusNextElement();const p=m.currentTarget.selectionStart,_=m.currentTarget.value.length;m.currentTarget.value=m.currentTarget.value.replace(/[^а-яА-ЯёЁ\-]/g,""),_!==m.currentTarget.value.length&&m.data!==" "?(m.currentTarget.selectionStart=p-1,m.currentTarget.selectionEnd=p-1,r(!1),i(!0)):c(),e.setValue(m.currentTarget.value)},u.$$focusout=c,createRenderEffect(m=>{var p=reusable["input-container"],_={"non-empty":!!e.value},g=e.placeholder,P=e.disabled,v={[reusable["input-warning"]]:!0,show:t()},L=n()?"none":"block";return p!==m.e&&className(f,m.e=p),m.t=classList(u,_,m.t),g!==m.a&&setAttribute(u,"placeholder",m.a=g),P!==m.o&&(u.disabled=m.o=P),m.i=classList(l,v,m.i),L!==m.n&&((m.n=L)!=null?l.style.setProperty("display",L):l.style.removeProperty("display")),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),createRenderEffect(()=>u.value=e.value),f})()}function focusNextElement(){const e='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])';if(document.activeElement){const t=[...document.querySelectorAll(e)].filter(n=>n.offsetWidth>0||n.offsetHeight>0||n===document.activeElement),i=t.indexOf(document.activeElement);i>-1&&(t[i+1]||t[0]).focus()}}delegateEvents(["focusout","input"]);var _tmpl$$j=template("<div>"),_tmpl$2$e=template("<h1>invalid identity type");function Zaemshik(){const[e,t]=useDocument(),i=()=>({fl:0,ip:1,ul:2})[e.zaemshik.type],n=s=>{t(produce(a=>{s(a.zaemshik)}))},r=()=>({fl:"Данные физического лица",ip:"Данные индивидуального предпринимателя",ul:"Данные юридического лица"})[e.zaemshik.type];return(()=>{var s=_tmpl$$j();return insert(s,createComponent(QuestionSection,{get children(){return createComponent(PersonSelect,{center:!0,items:[{icon:flIcon,text:"Физическое лицо"},{icon:ipIcon,text:"Индивидуальный предприниматель"},{icon:ulIcon,text:"Юридическое лицо"}],get value(){return i()},setValue:a=>{switch(a){case 0:t("zaemshik",new FLZaemshik);break;case 1:t("zaemshik",new IPZaemshik);break;case 2:t("zaemshik",new ULZaemshik);break;default:throw Error("unreachable")}}})}}),null),insert(s,createComponent(QuestionSection,{get question(){return r()},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.zaemshik.type==="fl"},get children(){return createComponent(FLForm$1,{get value(){return e.zaemshik},updateValue:a=>n(a)})}}),createComponent(Match,{get when(){return e.zaemshik.type==="ip"},get children(){return createComponent(IPForm$1,{get value(){return e.zaemshik},updateValue:a=>n(a)})}}),createComponent(Match,{get when(){return e.zaemshik.type==="ul"},get children(){return createComponent(ULForm$1,{get value(){return e.zaemshik},updateValue:a=>n(a)})}})]}})}}),null),createRenderEffect(()=>className(s,sides["side-container"])),s})()}function FLForm$1(e){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.firstName},setFirstNameValue:t=>e.updateValue(i=>i.firstName=t),get secondNameValue(){return e.value.secondName},setSecondNameValue:t=>e.updateValue(i=>i.secondName=t),get lastNameValue(){return e.value.lastName},setLastNameValue:t=>e.updateValue(i=>i.lastName=t)}),createComponent(DropdownSelect,{defaultIcon:homeIcon,items:[{text:"Адрес места регистрации ответчика",value:"registration"},{text:"Последний известный адрес",value:"last"},{text:"Адрес местонахождения недвижимости ответчика",value:"property"}],get value(){return e.value.addressType},setValue:t=>e.updateValue(i=>i.addressType=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес места жительства",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{type:"date",label:"Дата рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthDate=t)}),createComponent(TextField,{icon:mapPinIcon,label:"Место рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthPlace=t)}),createComponent(TextField,{icon:phoneIcon,label:"Телефон",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.phone=t)}),createComponent(DropdownSelect,{defaultIcon:idIcon,items:[{text:"ИНН",value:"inn"},{text:"Паспорт",value:"passport"},{text:"Водительское удостоверение",value:"driverLicense"},{text:"СНИЛС",value:"snils"}],get value(){return e.value.identity.type},setValue:t=>e.updateValue(i=>{switch(t){case"passport":i.identity=declass(new IdentityPassport);break;case"driverLicense":i.identity=declass(new IdentityDriverLicense);break;case"inn":i.identity=declass(new IdentityInn);break;case"snils":i.identity=declass(new IdentitySnils);break;default:throw Error("unreachable")}})}),createComponent(Switch,{get fallback(){return _tmpl$2$e()},get children(){return[createComponent(Match,{get when(){return e.value.identity.type==="passport"},get children(){return createComponent(PassportIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="driverLicense"},get children(){return createComponent(DriverLicenseIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="snils"},get children(){return createComponent(SnilsIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="inn"},get children(){return createComponent(InnIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}})]}}),createComponent(NameChangeComponent$1,{get value(){return e.value},get updateValue(){return e.updateValue}})]}function IPForm$1(e){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.firstName},setFirstNameValue:t=>e.updateValue(i=>i.firstName=t),get secondNameValue(){return e.value.secondName},setSecondNameValue:t=>e.updateValue(i=>i.secondName=t),get lastNameValue(){return e.value.lastName},setLastNameValue:t=>e.updateValue(i=>i.lastName=t)}),createComponent(DropdownSelect,{defaultIcon:homeIcon,items:[{text:"Адрес места регистрации ответчика",value:"registration"},{text:"Последний известный адрес",value:"last"},{text:"Адрес местонахождения недвижимости ответчика",value:"property"}],get value(){return e.value.addressType},setValue:t=>e.updateValue(i=>i.addressType=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес места жительства",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{type:"date",label:"Дата рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthDate=t)}),createComponent(TextField,{icon:mapPinIcon,label:"Место рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthPlace=t)}),createComponent(TextField,{icon:phoneIcon,label:"Телефон",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.phone=t)}),createComponent(DropdownSelect,{defaultIcon:idIcon,items:[{text:"ИНН",value:"inn"},{text:"Паспорт",value:"passport"},{text:"Водительское удостоверение",value:"driverLicense"},{text:"СНИЛС",value:"snils"}],get value(){return e.value.identity.type},setValue:t=>e.updateValue(i=>{switch(t){case"passport":i.identity=declass(new IdentityPassport);break;case"driverLicense":i.identity=declass(new IdentityDriverLicense);break;case"inn":i.identity=declass(new IdentityInn);break;case"snils":i.identity=declass(new IdentitySnils);break;default:throw Error("unreachable")}})}),createComponent(Switch,{get fallback(){return _tmpl$2$e()},get children(){return[createComponent(Match,{get when(){return e.value.identity.type==="passport"},get children(){return createComponent(PassportIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="driverLicense"},get children(){return createComponent(DriverLicenseIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="snils"},get children(){return createComponent(SnilsIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="inn"},get children(){return createComponent(InnIdentityFields$1,{get value(){return e.value},get updateValue(){return e.updateValue}})}})]}}),createComponent(NameChangeComponent$1,{get value(){return e.value},get updateValue(){return e.updateValue}}),createComponent(Checkbox,{label:"В период действия договора займа ИП был ликвидирован",get value(){return e.value.liquidation!==null},setValue:t=>e.updateValue(i=>i.liquidation=t?declass(new Liquidation):null)}),createComponent(Show,{get when(){return e.value.liquidation!==null},get children(){return createComponent(TextField,{type:"date",label:"Дата ликвидации ИП",get value(){return e.value.liquidation.date},setValue:t=>e.updateValue(i=>i.liquidation.date=t)})}}),createComponent(QuestionSection,{get children(){return createComponent(Checkbox,{label:"Представитель (todo)",value:!1,setValue:()=>{}})}})]}function ULForm$1(e){return[createComponent(TextField,{icon:idIcon,label:"ИНН",get value(){return e.value.inn},setValue:t=>e.updateValue(i=>i.inn=t)}),createComponent(TextField,{icon:userIcon,label:"Наименование",get value(){return e.value.name},setValue:t=>e.updateValue(i=>i.name=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{label:"Телефон",get value(){return e.value.phone},setValue:t=>e.updateValue(i=>i.phone=t),type:"tel"})]}function PassportIdentityFields$1(e){return[createComponent(TextField,{icon:!1,label:"Код подразделения",get value(){return e.value.identity.issuerCode},setValue:t=>e.updateValue(i=>i.identity.issuerCode=t)}),createComponent(TextField,{icon:!1,label:"Серия",get value(){return e.value.identity.series},setValue:t=>e.updateValue(i=>i.identity.series=t)}),createComponent(TextField,{icon:!1,label:"Номер",get value(){return e.value.identity.number},setValue:t=>e.updateValue(i=>i.identity.number=t)}),createComponent(TextField,{icon:!1,label:"Кем выдан",get value(){return e.value.identity.issuedBy},setValue:t=>e.updateValue(i=>i.identity.issuedBy=t)}),createComponent(TextField,{type:"date",label:"Дата выдачи",get value(){return e.value.identity.issueDate},setValue:t=>e.updateValue(i=>i.identity.issueDate=t)})]}function DriverLicenseIdentityFields$1(e){return[createComponent(TextField,{icon:!1,label:"Серия",get value(){return e.value.identity.series},setValue:t=>e.updateValue(i=>i.identity.series=t)}),createComponent(TextField,{icon:!1,label:"Номер",get value(){return e.value.identity.number},setValue:t=>e.updateValue(i=>i.identity.number=t)})]}function InnIdentityFields$1(e){return createComponent(TextField,{icon:!1,label:"ИНН",get value(){return e.value.identity.inn},setValue:t=>e.updateValue(i=>i.identity.inn=t)})}function SnilsIdentityFields$1(e){return createComponent(TextField,{icon:!1,label:"СНИЛС",get value(){return e.value.identity.snils},setValue:t=>e.updateValue(i=>i.identity.snils=t)})}function NameChangeComponent$1(e){const t=()=>e.value.nameChange!==null;return[createComponent(Checkbox,{label:"В период действия договора займа изменились ФИО заёмщика",get value(){return t()},setValue:i=>e.updateValue(n=>n.nameChange=i?declass(new NameChange):null)}),createComponent(Show,{get when(){return t()},get children(){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.nameChange.newFirstName},setFirstNameValue:i=>e.updateValue(n=>n.nameChange.newFirstName=i),get secondNameValue(){return e.value.nameChange.newSecondName},setSecondNameValue:i=>e.updateValue(n=>n.nameChange.newSecondName=i),get lastNameValue(){return e.value.nameChange.newLastName},setLastNameValue:i=>e.updateValue(n=>n.nameChange.newLastName=i)}),createComponent(QuestionSection,{question:"Фамилия, имя либо отчество изменились на основании",get children(){return createComponent(RadioGroup,{items:[{label:"Заключения брака",value:"marriage"},{label:"Расторжения брака",value:"divorce"},{label:"Заявления гражданина об изменении фамилии имени отчества",value:"other"}],get value(){return e.value.nameChange.reason},setValue:i=>e.updateValue(n=>n.nameChange.reason=i),get children(){return createComponent(TextField,{type:"date",icon:calendarIcon,label:"Дата",get value(){return e.value.nameChange.date},setValue:i=>e.updateValue(n=>n.nameChange.date=i)})}})}})]}})]}class CourtClaim{constructor(){se(this,"type","arb-claim");se(this,"value",new CourtClaimDefault)}}class CourtClaimDefault{constructor(){se(this,"type","default")}}class CourtClaimSpecific{constructor(){se(this,"type","specific");se(this,"name","");se(this,"clause","")}}class CourtClaimManual{constructor(){se(this,"type","manual");se(this,"name","")}}class CourtClaimZaimodavecVenue{constructor(){se(this,"type","zd-venue");se(this,"clause","")}}class CourtClaimZaemshikVenue{constructor(){se(this,"type","za-venue");se(this,"clause","")}}class CourtOrder{constructor(){se(this,"type","arb-order");se(this,"value",new CourtClaimDefault)}}class CourtOrderObjections{constructor(){se(this,"type","objections");se(this,"name","");se(this,"date","")}}class CourtOrderRejected{constructor(){se(this,"type","rejected");se(this,"date","");se(this,"case","")}}class CourtOrderCancelled{constructor(){se(this,"type","cancelled");se(this,"date","");se(this,"case","")}}class FeeFraction{constructor(){se(this,"type","fraction");se(this,"sum","");se(this,"periodUnit","day");se(this,"clause","")}}class FeeMoney{constructor(){se(this,"type","money");se(this,"sum","");se(this,"periodUnit","day");se(this,"clause","")}}class FeeNotSpecified{constructor(){se(this,"type","not-specified")}}class FeeBiggerThanLoan{constructor(){se(this,"type","bigger-than-loan");se(this,"sum","");se(this,"clause","")}}class FeeNoFee{constructor(){se(this,"type","no-fee");se(this,"clause","")}}let Penalty$1=class{constructor(){se(this,"value",new PenaltyNotSpecified);se(this,"maxPenalty",null)}};class PenaltyNotSpecified{constructor(){se(this,"type","not-specified")}}class PenaltyFraction{constructor(){se(this,"type","fraction");se(this,"sum","");se(this,"periodUnit","day");se(this,"clause","")}}class PenaltyMoney{constructor(){se(this,"type","money");se(this,"sum","");se(this,"periodUnit","day");se(this,"clause","")}}class PenaltyNoPenalty{constructor(){se(this,"type","no-penalty");se(this,"clause","")}}class PenaltyCentralBank{constructor(){se(this,"type","central-bank");se(this,"sum","");se(this,"onethreehundredth",!1);se(this,"clause","")}}class MaxPenalty{constructor(){se(this,"type","percent");se(this,"sum","");se(this,"clause","")}}class SrokVozvrataDate{constructor(){se(this,"type","date");se(this,"date","");se(this,"clause","")}}class SrokVozvrataPeriod{constructor(){se(this,"type","period");se(this,"period","");se(this,"periodUnit","day");se(this,"clause","")}}class SrokVozvrataHire{constructor(){se(this,"type","hire");se(this,"hire",new EqualPayments)}}class EqualPayments{constructor(){se(this,"type","equal");se(this,"sum","");se(this,"paymentDay",1);se(this,"dateStart","");se(this,"dateEnd","");se(this,"dateLastPaid","");se(this,"neverPaid",!1);se(this,"clause","")}}class UnequalPayments{constructor(){se(this,"type","unequal");se(this,"payments",[]);se(this,"clause","")}}class SrokVozvrataNotSpecified{constructor(){se(this,"type","not-specified")}}class SrokVozvrataOnDemand{constructor(){se(this,"type","on-demand");se(this,"clause","")}}let Proofs$1=class{constructor(){se(this,"dogovorProofs",[]);se(this,"returnProofs",new ReturnProofsNeverPaid)}};class ClauseProof{constructor(){se(this,"type","clause");se(this,"clause","");se(this,"vague",!1)}}class TransferRaspiskaProof{constructor(){se(this,"type","transfer-raspiska");se(this,"date","");se(this,"sum","")}}class FundsTransferProof{constructor(){se(this,"type","funds-transfer");se(this,"date","");se(this,"sum","")}}class DogovorRaspiskaProof{constructor(){se(this,"type","dogovor-raspiska");se(this,"sum","");se(this,"date",null)}}class CardTransferProof{constructor(){se(this,"type","card-transfer");se(this,"documentName","");se(this,"documentNumber","");se(this,"documentDate","");se(this,"date","");se(this,"sum","")}}class AccountStatementProof{constructor(){se(this,"type","account-statement");se(this,"periodStart","");se(this,"periodEnd","");se(this,"loanTransactions",[]);se(this,"repaymentTransactions",[])}}class PaymentOrderProof{constructor(){se(this,"type","payment-order");se(this,"number","");se(this,"date","");se(this,"sum","")}}class CashReceiptVoucherProof{constructor(){se(this,"type","cash-receipt-voucher");se(this,"number","");se(this,"date","");se(this,"sum","")}}class ExpenseReceiptProof{constructor(){se(this,"type","expense-receipt");se(this,"number","");se(this,"date","");se(this,"sum","")}}class CheckOrderProof{constructor(){se(this,"type","check-order");se(this,"number","");se(this,"date","");se(this,"sum","")}}class OtherProof{constructor(){se(this,"type","other");se(this,"documentName","");se(this,"documentNumber","");se(this,"documentDate","");se(this,"sum","")}}class ReturnProofsNeverPaid{constructor(){se(this,"type","never-paid")}}class ReturnProofsPaid{constructor(){se(this,"type","paid");se(this,"proofs",null);se(this,"zaemshikProofs",null);se(this,"unbackedProofs",null)}}class FlowType{constructor(){se(this,"document",new Dogovor$1);se(this,"zaimodavec",new FLZaimodavec);se(this,"zaemshik",new FLZaemshik);se(this,"srokVozvrata",new SrokVozvrataDate);se(this,"fee",new FeeFraction);se(this,"penalty",new Penalty$1);se(this,"court",new CourtClaim);se(this,"proofs",new Proofs$1)}}const penToolIcon="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-pen-tool'%3e%3cpath%20d='M12%2019l7-7%203%203-7%207-3-3z'%3e%3c/path%3e%3cpath%20d='M18%2013l-1.5-7.5L2%202l3.5%2014.5L13%2018l5-5z'%3e%3c/path%3e%3cpath%20d='M2%202l7.586%207.586'%3e%3c/path%3e%3ccircle%20cx='11'%20cy='11'%20r='2'%3e%3c/circle%3e%3c/svg%3e";var _tmpl$$i=template("<div>"),_tmpl$2$d=template("<h1>invalid identity type");function Zaimodavec(){console.log(penToolIcon);const[e,t]=useDocument(),i=()=>({fl:0,ip:1,ul:2})[e.zaimodavec.type],n=s=>{t(produce(a=>{s(a.zaimodavec)}))},r=()=>({fl:"Данные физического лица",ip:"Данные индивидуального предпринимателя",ul:"Данные юридического лица"})[e.zaimodavec.type];return(()=>{var s=_tmpl$$i();return insert(s,createComponent(QuestionSection,{get children(){return createComponent(PersonSelect,{center:!0,items:[{icon:flIcon,text:"Физическое лицо"},{icon:ipIcon,text:"Индивидуальный предприниматель"},{icon:ulIcon,text:"Юридическое лицо"}],get value(){return i()},setValue:a=>{switch(a){case 0:t("zaimodavec",new FLZaimodavec);break;case 1:t("zaimodavec",new IPZaimodavec);break;case 2:t("zaimodavec",new ULZaimodavec);break;default:throw Error("unreachable")}}})}}),null),insert(s,createComponent(QuestionSection,{get question(){return r()},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.zaimodavec.type==="fl"},get children(){return createComponent(FLForm,{get value(){return e.zaimodavec},updateValue:a=>n(a)})}}),createComponent(Match,{get when(){return e.zaimodavec.type==="ip"},get children(){return createComponent(IPForm,{get value(){return e.zaimodavec},updateValue:a=>n(a)})}}),createComponent(Match,{get when(){return e.zaimodavec.type==="ul"},get children(){return createComponent(ULForm,{get value(){return e.zaimodavec},updateValue:a=>n(a)})}})]}})}}),null),createRenderEffect(()=>className(s,sides["side-container"])),s})()}function FLForm(e){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.firstName},setFirstNameValue:t=>e.updateValue(i=>i.firstName=t),get secondNameValue(){return e.value.secondName},setSecondNameValue:t=>e.updateValue(i=>i.secondName=t),get lastNameValue(){return e.value.lastName},setLastNameValue:t=>e.updateValue(i=>i.lastName=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес места жительства",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{type:"date",label:"Дата рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthDate=t)}),createComponent(TextField,{icon:mapPinIcon,label:"Место рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthPlace=t)}),createComponent(TextField,{icon:phoneIcon,label:"Телефон",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.phone=t)}),createComponent(DropdownSelect,{defaultIcon:idIcon,items:[{text:"ИНН",value:"inn"},{text:"Паспорт",value:"passport"},{text:"Водительское удостоверение",value:"driverLicense"},{text:"СНИЛС",value:"snils"}],get value(){return e.value.identity.type},setValue:t=>e.updateValue(i=>{switch(t){case"passport":i.identity=declass(new IdentityPassport);break;case"driverLicense":i.identity=declass(new IdentityDriverLicense);break;case"inn":i.identity=declass(new IdentityInn);break;case"snils":i.identity=declass(new IdentitySnils);break;default:throw Error("unreachable")}})}),createComponent(Switch,{get fallback(){return _tmpl$2$d()},get children(){return[createComponent(Match,{get when(){return e.value.identity.type==="passport"},get children(){return createComponent(PassportIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="driverLicense"},get children(){return createComponent(DriverLicenseIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="snils"},get children(){return createComponent(SnilsIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="inn"},get children(){return createComponent(InnIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}})]}}),createComponent(NameChangeComponent,{get value(){return e.value},get updateValue(){return e.updateValue}})]}function IPForm(e){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.firstName},setFirstNameValue:t=>e.updateValue(i=>i.firstName=t),get secondNameValue(){return e.value.secondName},setSecondNameValue:t=>e.updateValue(i=>i.secondName=t),get lastNameValue(){return e.value.lastName},setLastNameValue:t=>e.updateValue(i=>i.lastName=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес места жительства",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{type:"date",label:"Дата рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthDate=t)}),createComponent(TextField,{icon:mapPinIcon,label:"Место рождения",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.birthPlace=t)}),createComponent(TextField,{icon:phoneIcon,label:"Телефон",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.phone=t)}),createComponent(DropdownSelect,{defaultIcon:idIcon,items:[{text:"ИНН",value:"inn"},{text:"Паспорт",value:"passport"},{text:"Водительское удостоверение",value:"driverLicense"},{text:"СНИЛС",value:"snils"}],get value(){return e.value.identity.type},setValue:t=>e.updateValue(i=>{switch(t){case"passport":i.identity=declass(new IdentityPassport);break;case"driverLicense":i.identity=declass(new IdentityDriverLicense);break;case"inn":i.identity=declass(new IdentityInn);break;case"snils":i.identity=declass(new IdentitySnils);break;default:throw Error("unreachable")}})}),createComponent(Switch,{get fallback(){return _tmpl$2$d()},get children(){return[createComponent(Match,{get when(){return e.value.identity.type==="passport"},get children(){return createComponent(PassportIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="driverLicense"},get children(){return createComponent(DriverLicenseIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="snils"},get children(){return createComponent(SnilsIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}}),createComponent(Match,{get when(){return e.value.identity.type==="inn"},get children(){return createComponent(InnIdentityFields,{get value(){return e.value},get updateValue(){return e.updateValue}})}})]}}),createComponent(NameChangeComponent,{get value(){return e.value},get updateValue(){return e.updateValue}}),createComponent(Checkbox,{label:"В период действия договора займа ИП был ликвидирован",get value(){return e.value.liquidation!==null},setValue:t=>e.updateValue(i=>i.liquidation=t?declass(new Liquidation):null)}),createComponent(Show,{get when(){return e.value.liquidation!==null},get children(){return createComponent(TextField,{type:"date",label:"Дата ликвидации ИП",get value(){return e.value.liquidation.date},setValue:t=>e.updateValue(i=>i.liquidation.date=t)})}}),createComponent(QuestionSection,{get children(){return createComponent(Checkbox,{label:"Представитель (todo)",value:!1,setValue:()=>{}})}})]}function ULForm(e){return[createComponent(TextField,{icon:idIcon,label:"ИНН",get value(){return e.value.inn},setValue:t=>e.updateValue(i=>i.inn=t)}),createComponent(TextField,{icon:userIcon,label:"Наименование",get value(){return e.value.name},setValue:t=>e.updateValue(i=>i.name=t)}),createComponent(TextField,{icon:homeIcon,label:"Адрес",get value(){return e.value.address},setValue:t=>e.updateValue(i=>i.address=t)}),createComponent(TextField,{label:"Телефон",get value(){return e.value.phone},setValue:t=>e.updateValue(i=>i.phone=t),type:"tel"})]}function PassportIdentityFields(e){return[createComponent(TextField,{icon:!1,label:"Код подразделения",get value(){return e.value.identity.issuerCode},setValue:t=>e.updateValue(i=>i.identity.issuerCode=t)}),createComponent(TextField,{icon:!1,label:"Серия",get value(){return e.value.identity.series},setValue:t=>e.updateValue(i=>i.identity.series=t)}),createComponent(TextField,{icon:!1,label:"Номер",get value(){return e.value.identity.number},setValue:t=>e.updateValue(i=>i.identity.number=t)}),createComponent(TextField,{icon:!1,label:"Кем выдан",get value(){return e.value.identity.issuedBy},setValue:t=>e.updateValue(i=>i.identity.issuedBy=t)}),createComponent(TextField,{type:"date",label:"Дата выдачи",get value(){return e.value.identity.issueDate},setValue:t=>e.updateValue(i=>i.identity.issueDate=t)})]}function DriverLicenseIdentityFields(e){return[createComponent(TextField,{icon:!1,label:"Серия",get value(){return e.value.identity.series},setValue:t=>e.updateValue(i=>i.identity.series=t)}),createComponent(TextField,{icon:!1,label:"Номер",get value(){return e.value.identity.number},setValue:t=>e.updateValue(i=>i.identity.number=t)})]}function InnIdentityFields(e){return createComponent(TextField,{icon:!1,label:"ИНН",get value(){return e.value.identity.inn},setValue:t=>e.updateValue(i=>i.identity.inn=t)})}function SnilsIdentityFields(e){return createComponent(TextField,{icon:!1,label:"СНИЛС",get value(){return e.value.identity.snils},setValue:t=>e.updateValue(i=>i.identity.snils=t)})}function NameChangeComponent(e){const t=()=>e.value.nameChange!==null;return[createComponent(Checkbox,{label:"В период действия договора займа изменились ФИО займодавца",get value(){return t()},setValue:i=>e.updateValue(n=>n.nameChange=i?declass(new NameChange):null)}),createComponent(Show,{get when(){return t()},get children(){return[createComponent(NameFields,{icon:userIcon,get firstNameValue(){return e.value.nameChange.newFirstName},setFirstNameValue:i=>e.updateValue(n=>n.nameChange.newFirstName=i),get secondNameValue(){return e.value.nameChange.newSecondName},setSecondNameValue:i=>e.updateValue(n=>n.nameChange.newSecondName=i),get lastNameValue(){return e.value.nameChange.newLastName},setLastNameValue:i=>e.updateValue(n=>n.nameChange.newLastName=i)}),createComponent(QuestionSection,{question:"Фамилия, имя либо отчество изменились на основании",get children(){return createComponent(RadioGroup,{items:[{label:"Заключения брака",value:"marriage"},{label:"Расторжения брака",value:"divorce"},{label:"Заявления гражданина об изменении фамилии имени отчества",value:"other"}],get value(){return e.value.nameChange.reason},setValue:i=>e.updateValue(n=>n.nameChange.reason=i),get children(){return createComponent(TextField,{type:"date",icon:calendarIcon,label:"Дата",get value(){return e.value.nameChange.date},setValue:i=>e.updateValue(n=>n.nameChange.date=i)})}})}})]}})]}const userHelperImage="/zasudi-solid/assets/userhelper1-gcvO6bRJ.webp",userHelper={"user-helper-wrapper":"_user-helper-wrapper_1epju_1","user-helper-person":"_user-helper-person_1epju_16","user-helper-tip":"_user-helper-tip_1epju_26"};var _tmpl$$h=template("<div><h1>Пройдите тест и получите<br><span>полный комплект документов</span><br>для обращения в суд</h1><div><img alt=man.webp>"),_tmpl$2$c=template("<h2>"),_tmpl$3$b=template("<p>");function UserHelper(){return(()=>{var e=_tmpl$$h(),t=e.firstChild,i=t.nextSibling,n=i.firstChild;return setAttribute(n,"src",userHelperImage),insert(i,createComponent(UserHelperTip,{heading:"Перейдём к документам!",text:"Если вы заключили договор, заполните информацию о нём. Если была составлена расписка, выберите её."}),null),createRenderEffect(r=>{var s=userHelper["user-helper-wrapper"],a=userHelper["user-helper-person"];return s!==r.e&&className(e,r.e=s),a!==r.t&&className(i,r.t=a),r},{e:void 0,t:void 0}),e})()}function UserHelperTip(e){return createComponent(StyledBackground,{shadow:!0,get class(){return userHelper["user-helper-tip"]},get children(){return[(()=>{var t=_tmpl$2$c();return insert(t,()=>e.heading),t})(),(()=>{var t=_tmpl$3$b();return insert(t,()=>e.text),t})()]}})}function isObject(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function accessWith(e,...t){return typeof e=="function"?e(...t):e}var tryOnCleanup=onCleanup;function createHydratableSignal(e,t,i){return createSignal(t(),i)}function makeEventListener(e,t,i,n){return e.addEventListener(t,i,n),tryOnCleanup(e.removeEventListener.bind(e,t,i,n))}function createStaticStore(e){const t={...e},i={...e},n={},r=a=>{let c=n[a];if(!c){if(!getListener())return t[a];n[a]=c=createSignal(t[a],{internal:!0}),delete t[a]}return c[0]()};for(const a in e)Object.defineProperty(i,a,{get:()=>r(a),enumerable:!0});const s=(a,c)=>{const f=n[a];if(f)return f[1](c);a in t&&(t[a]=accessWith(c,[t[a]]))};return[i,(a,c)=>{if(isObject(a)){const f=untrack(()=>Object.entries(accessWith(a,i)));batch(()=>{for(const[u,l]of f)s(u,()=>l)})}else s(a,c);return i}]}function createSingletonRoot(e,t=getOwner()){let i=0,n,r;return()=>(i++,onCleanup(()=>{i--,queueMicrotask(()=>{!i&&r&&(r(),r=n=void 0)})}),r||createRoot(s=>n=e(r=s),t),n)}function createHydratableSingletonRoot(e){const t=getOwner(),i=createSingletonRoot(e,t);return()=>i()}function createMediaQuery(e,t=!1){const i=window.matchMedia(e),[n,r]=createHydratableSignal(t,()=>i.matches);return makeEventListener(i,"change",()=>r(i.matches)),n}function createPrefersDark(e){return createMediaQuery("(prefers-color-scheme: dark)",e)}createPrefersDark.bind(void 0,!1);const srokVozvrata={"period-grid":"_period-grid_1279a_1"};var _tmpl$$g=template("<div>");function SrokVozvrata(){const[e,t]=useDocument(),i=(n,r)=>t("srokVozvrata",n,reconcile(r));return(()=>{var n=_tmpl$$g();return insert(n,createComponent(QuestionSection,{get children(){return createComponent(RadioGroup,{items:[{label:"Сумма займа подлежит единовременному возврату до конкретной даты",value:"date"},{label:"Сумма займа предоставлена на опредлённый срок",value:"period"},{label:"Договором предусмотрена рассрочка возврата займа",value:"hire"},{label:"В договоре отсутствует условие о сроке (дате) возврата займа",value:"not-specified"},{label:"Срок возврата займа определён моментом востребования",value:"on-demand"}],get value(){return e.srokVozvrata.type},setValue:r=>{switch(r){case"date":t("srokVozvrata",declass(new SrokVozvrataDate));break;case"period":t("srokVozvrata",declass(new SrokVozvrataPeriod));break;case"hire":t("srokVozvrata",declass(new SrokVozvrataHire));break;case"not-specified":t("srokVozvrata",declass(new SrokVozvrataNotSpecified));break;case"on-demand":t("srokVozvrata",declass(new SrokVozvrataOnDemand));break;default:throw new Error("Unknown srokVozvrata type")}},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.srokVozvrata.type==="date"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SrokVozvrataDateFields,{get value(){return e.srokVozvrata},setValue:i})}})}}),createComponent(Match,{get when(){return e.srokVozvrata.type==="period"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SrokVozvrataPeriodFields,{get value(){return e.srokVozvrata},setValue:i})}})}}),createComponent(Match,{get when(){return e.srokVozvrata.type==="hire"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SrokVozvrataHireFields,{get value(){return e.srokVozvrata},setValue:i})}})}}),createComponent(Match,{get when(){return e.srokVozvrata.type==="on-demand"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SrokVozvrataOnDemandFields,{get value(){return e.srokVozvrata},setValue:i})}})}})]}})}})}})),n})()}function SrokVozvrataDateFields(e){return[createComponent(TextField,{type:"date",label:"Дата возврата",get value(){return e.value.date},setValue:t=>e.setValue("date",t)}),createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})]}function SrokVozvrataPeriodFields(e){return(()=>{var t=_tmpl$$g();return insert(t,createComponent(TextField,{label:"Займ предоставлен на",get value(){return e.value.period},setValue:i=>e.setValue("period",i)}),null),insert(t,createComponent(DropdownSelect,{items:[{text:"Дней",value:"day"},{text:"Недель",value:"week"},{text:"Месяцев",value:"month"},{text:"Лет",value:"year"}],get value(){return e.value.periodUnit},setValue:i=>e.setValue("periodUnit",i)}),null),insert(t,createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:i=>e.setValue("clause",i)}),null),createRenderEffect(()=>className(t,srokVozvrata["period-grid"])),t})()}function SrokVozvrataHireFields(e){return createComponent(RadioGroup,{items:[{label:"Рассрочка на равные ежемесячные платежи",value:"equal"},{label:"Рассрочка на разные по суммам и датам платежи",value:"unequal"}],get value(){return e.value.hire.type},setValue:t=>{switch(t){case"equal":e.setValue("hire",declass(new EqualPayments));break;case"unequal":e.setValue("hire",declass(new UnequalPayments));break;default:throw new Error("Unknown hire type")}},children:"todo"})}function SrokVozvrataOnDemandFields(e){return createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})}const fee={"period-grid":"_period-grid_1szfu_1"};var _tmpl$$f=template("<div>"),_tmpl$2$b=template("<div><span>%"),_tmpl$3$a=template("<div><span>₽");function Fee(){const[e,t]=useDocument(),i=(n,r)=>t("fee",n,reconcile(r));return(()=>{var n=_tmpl$$f();return insert(n,createComponent(QuestionSection,{get children(){return createComponent(RadioGroup,{items:[{label:"Стороны согласовали начисление процентов за пользование займом в процентах",value:"fraction"},{label:"Стороны согласовали начисление процентов в рублях",value:"money"},{label:"Условие о начислении процентов в договоре отсутствует",value:"not-specified"},{label:"Заёмщик обязался возвратить сумму займа большую, чем взятая в долг",value:"bigger-than-loan"},{label:"В договоре указано на беспроцентный займ",value:"no-fee"}],get value(){return e.fee.type},setValue:r=>{switch(r){case"fraction":t("fee",declass(new FeeFraction));break;case"money":t("fee",declass(new FeeMoney));break;case"not-specified":t("fee",declass(new FeeNotSpecified));break;case"bigger-than-loan":t("fee",declass(new FeeBiggerThanLoan));break;case"no-fee":t("fee",declass(new FeeNoFee));break;default:throw new Error("Unknown fee type")}},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.fee.type==="fraction"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(FeeFractionFields,{get value(){return e.fee},setValue:i})}})}}),createComponent(Match,{get when(){return e.fee.type==="money"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(FeeMoneyFields,{get value(){return e.fee},setValue:i})}})}}),createComponent(Match,{get when(){return e.fee.type==="bigger-than-loan"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(FeeBiggerThanLoanFields,{get value(){return e.fee},setValue:i})}})}}),createComponent(Match,{get when(){return e.fee.type==="no-fee"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(FeeNoFeeFields,{get value(){return e.fee},setValue:i})}})}})]}})}})}})),n})()}function FeeFractionFields(e){return(()=>{var t=_tmpl$2$b(),i=t.firstChild;return insert(t,createComponent(TextField,{label:"Размер процентной ставки",get value(){return e.value.sum},setValue:n=>e.setValue("sum",n)}),i),insert(t,createComponent(DropdownSelect,{items:[{text:"День",value:"day"},{text:"Неделю",value:"week"},{text:"Месяц",value:"month"},{text:"Год",value:"year"}],get value(){return e.value.periodUnit},setValue:n=>e.setValue("periodUnit",n)}),null),insert(t,createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:n=>e.setValue("clause",n)}),null),createRenderEffect(()=>className(t,fee["period-grid"])),t})()}function FeeMoneyFields(e){return(()=>{var t=_tmpl$3$a(),i=t.firstChild;return insert(t,createComponent(TextField,{label:"Размер процентной ставки",get value(){return e.value.sum},setValue:n=>e.setValue("sum",n)}),i),insert(t,createComponent(DropdownSelect,{items:[{text:"День",value:"day"},{text:"Неделю",value:"week"},{text:"Месяц",value:"month"},{text:"Год",value:"year"}],get value(){return e.value.periodUnit},setValue:n=>e.setValue("periodUnit",n)}),null),insert(t,createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:n=>e.setValue("clause",n)}),null),createRenderEffect(()=>className(t,fee["period-grid"])),t})()}function FeeBiggerThanLoanFields(e){return[createComponent(TextField,{label:"Сумма, которую обязался возвратить Заёмщик",get value(){return e.value.sum},setValue:t=>e.setValue("sum",t)}),createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})]}function FeeNoFeeFields(e){return createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})}const penalty={"period-grid":"_period-grid_1szfu_1"};var _tmpl$$e=template("<div>"),_tmpl$2$a=template("<div><span>%"),_tmpl$3$9=template("<div><span>₽");function Penalty(){const[e,t]=useDocument(),i=(r,s)=>t("penalty","value",r,reconcile(s)),n=(r,s)=>t("penalty","maxPenalty",r,reconcile(s));return(()=>{var r=_tmpl$$e();return insert(r,createComponent(QuestionSection,{get children(){return createComponent(RadioGroup,{items:[{label:"Условия о начислении неустойки в договоре отсутствуют",value:"not-specified"},{label:"Стороны согласовали начисление неустойки в процентах",value:"fraction"},{label:"Стороны согласовали начисление неустойки в рублях",value:"money"},{label:"Договором предусмотрено, что начисление неустойки не допускается",value:"no-penalty"},{label:"В договоре указано на начисление неустойки по ставке ЦБ РФ",value:"central-bank"}],get value(){return e.penalty.value.type},setValue:s=>{switch(s){case"not-specified":t("penalty","value",declass(new PenaltyNotSpecified));break;case"fraction":t("penalty","value",declass(new PenaltyFraction));break;case"money":t("penalty","value",declass(new PenaltyMoney));break;case"no-penalty":t("penalty","value",declass(new PenaltyNoPenalty));break;case"central-bank":t("penalty","value",declass(new PenaltyCentralBank));break;default:throw new Error("Unknown penalty type")}},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.penalty.value.type==="fraction"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(PenaltyFractionFields,{get value(){return e.penalty.value},setValue:i})}})}}),createComponent(Match,{get when(){return e.penalty.value.type==="money"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(PenaltyMoneyFields,{get value(){return e.penalty.value},setValue:i})}})}}),createComponent(Match,{get when(){return e.penalty.value.type==="no-penalty"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(PenaltyNoPenaltyFields,{get value(){return e.penalty.value},setValue:i})}})}}),createComponent(Match,{get when(){return e.penalty.value.type==="central-bank"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(PenaltyCentralBankFields,{get value(){return e.penalty.value},setValue:i})}})}})]}})}})}}),null),insert(r,createComponent(QuestionSection,{question:"Предельный размер неустойки",get children(){return createComponent(RadioGroup,{items:[{label:"В договоре нет условия о предельном размере неустойки",value:"null"},{label:"Предельный размер неустойки выражен в твёрдой денежной сумме",value:"money"},{label:"Предельный размер неустойки выражен в процентном соотношении к сумме займа",value:"percent"}],get value(){var s;return((s=e.penalty.maxPenalty)==null?void 0:s.type)??"null"},setValue:s=>{switch(s){case"null":t("penalty","maxPenalty",null);break;case"money":{const a=declass(new MaxPenalty);a.type="money",t("penalty","maxPenalty",a);break}case"percent":{const a=declass(new MaxPenalty);a.type="percent",t("penalty","maxPenalty",a);break}default:throw new Error("Invalid maxPenalty value")}},get children(){return createComponent(Show,{get when(){return e.penalty.maxPenalty!==null},get children(){return createComponent(PenaltyMaxPenaltyFields,{get value(){return e.penalty.maxPenalty},setValue:n})}})}})}}),null),r})()}function PenaltyFractionFields(e){return(()=>{var t=_tmpl$2$a(),i=t.firstChild;return insert(t,createComponent(TextField,{label:"Размер процентной ставки",get value(){return e.value.sum},setValue:n=>e.setValue("sum",n)}),i),insert(t,createComponent(DropdownSelect,{items:[{text:"День",value:"day"},{text:"Неделю",value:"week"},{text:"Месяц",value:"month"},{text:"Год",value:"year"}],get value(){return e.value.periodUnit},setValue:n=>e.setValue("periodUnit",n)}),null),insert(t,createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:n=>e.setValue("clause",n)}),null),createRenderEffect(()=>className(t,penalty["period-grid"])),t})()}function PenaltyMoneyFields(e){return(()=>{var t=_tmpl$3$9(),i=t.firstChild;return insert(t,createComponent(TextField,{label:"Размер процентной ставки",get value(){return e.value.sum},setValue:n=>e.setValue("sum",n)}),i),insert(t,createComponent(DropdownSelect,{items:[{text:"День",value:"day"},{text:"Неделю",value:"week"},{text:"Месяц",value:"month"},{text:"Год",value:"year"}],get value(){return e.value.periodUnit},setValue:n=>e.setValue("periodUnit",n)}),null),insert(t,createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:n=>e.setValue("clause",n)}),null),createRenderEffect(()=>className(t,penalty["period-grid"])),t})()}function PenaltyNoPenaltyFields(e){return createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})}function PenaltyCentralBankFields(e){return[createComponent(Checkbox,{label:"1/300 ставки ЦБ за каждый день просрочки",get value(){return e.value.onethreehundredth},setValue:t=>e.setValue("onethreehundredth",t)}),createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})]}function PenaltyMaxPenaltyFields(e){return createComponent(QuestionSection,{get children(){return[createComponent(TextField,{label:"Предельный размер неустойки",get value(){return e.value.sum},setValue:t=>e.setValue("sum",t)}),createComponent(TextField,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})]}})}var _tmpl$$d=template("<div><pre>");function generateCourtFromNumber(e){let t;return e===2||e===6?t=declass(new CourtOrder):t=declass(new CourtClaim),t.type=["arb-claim","arb-simple","arb-order","jp-claim","gen-claim","gen-simple","jp-order"][e],t}function Court(){const[e,t]=useDocument(),i=(s,a)=>{t("court",s,reconcile(a))},[n,r]=createSignal(0);return(()=>{var s=_tmpl$$d(),a=s.firstChild;return insert(s,createComponent(QuestionSection,{get children(){return createComponent(DropdownSelect,{items:[{text:"1"},{text:"2"},{text:"3"},{text:"4"},{text:"5"},{text:"6"},{text:"7"}],get value(){return n()},setValue:c=>{function f(u){return u>=0&&u<=6}if(f(c))t("court",generateCourtFromNumber(c)),r(c);else throw new Error("Invalid court screen number")}})}}),a),insert(a,()=>JSON.stringify(e.court,null,2)),insert(s,createComponent(QuestionSection,{get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return n()===0},get children(){return createComponent(CourtClaimFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===1},get children(){return createComponent(CourtClaimFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===2},get children(){return createComponent(CourtOrderFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===3},get children(){return createComponent(CourtClaimFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===4},get children(){return createComponent(CourtClaimFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===5},get children(){return createComponent(CourtClaimFields,{get value(){return e.court},setValue:i})}}),createComponent(Match,{get when(){return n()===6},get children(){return createComponent(CourtOrderFields,{get value(){return e.court},setValue:i})}})]}})}}),null),s})()}function CourtClaimFields(e){const t=()=>e.value.value,i=(n,r)=>{console.log("setting",declass(e.value.value),n,r),e.setValue("value",{...e.value.value,[n]:r})};return createComponent(RadioGroup,{items:[{label:"Исковое заявление будет подано по месту жительства/нахождения должника (по умолчанию)",value:"default"},{label:"В договоре указан конкретный суд, в котором рассматриваются споры по договору",value:"specific"},{label:"Выбрать суд вручную",value:"manual"},{label:"В договоре укзаано, что дело рассматривается по месту нахождения/жительства истца",value:"zd-venue"},{label:"В договоре указано, что дело рассматривается по месту нахождения/жительства Займодавца",value:"za-venue"}],get value(){return e.value.value.type},setValue:n=>{switch(n){case"default":e.setValue("value",declass(new CourtClaimDefault));break;case"specific":e.setValue("value",declass(new CourtClaimSpecific));break;case"manual":e.setValue("value",declass(new CourtClaimManual));break;case"zd-venue":e.setValue("value",declass(new CourtClaimZaimodavecVenue));break;case"za-venue":e.setValue("value",declass(new CourtClaimZaemshikVenue));break;default:throw new Error("Invalid court claim value")}},get children(){return createComponent(CourtClaimInputs,{get value(){return t()},setValue:i})}})}function CourtOrderFields(e){const t=()=>e.value.value,i=(r,s)=>{e.setValue("value",{...e.value.value,[r]:s})},n=()=>e.value.value.type==="objections"||e.value.value.type==="rejected"||e.value.value.type==="cancelled"?"no-order":"order";return[createComponent(RadioGroup,{items:[{label:"Обратиться за вынесением судебного приказа",value:"order"},{label:"Я не могу обратиться за вынесением судебного приказа",value:"no-order"}],get value(){return n()},setValue:r=>{r==="order"?e.setValue("value",declass(new CourtClaimDefault)):e.setValue("value",declass(new CourtOrderObjections))}}),createComponent(QuestionSection,{get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return n()==="order"},get children(){return[createComponent(DropdownSelect,{tallerRows:!0,items:[{text:"Исковое заявление будет подано по месту жительства/нахождения должника (по умолчанию)",value:"default"},{text:"В договоре указан конкретный суд, в котором рассматриваются споры по договору",value:"specific"},{text:"Выбрать суд вручную",value:"manual"},{text:"В договоре укзаано, что дело рассматривается по месту нахождения/жительства истца",value:"zd-venue"},{text:"В договоре указано, что дело рассматривается по месту нахождения/жительства Займодавца",value:"za-venue"}],get value(){return e.value.value.type},setValue:r=>{switch(r){case"default":e.setValue("value",declass(new CourtClaimDefault));break;case"specific":e.setValue("value",declass(new CourtClaimSpecific));break;case"manual":e.setValue("value",declass(new CourtClaimManual));break;case"zd-venue":e.setValue("value",declass(new CourtClaimZaimodavecVenue));break;case"za-venue":e.setValue("value",declass(new CourtClaimZaemshikVenue));break;default:throw new Error("Invalid court claim (order) value")}}}),createComponent(CourtClaimInputs,{get value(){return t()},setValue:i})]}}),createComponent(Match,{get when(){return n()==="no-order"},get children(){return[createComponent(DropdownSelect,{tallerRows:!0,items:[{text:"У меня имеются письменные возражения заёмщика относительно спорной задолженности.",value:"objections"},{text:"Я уже обращался с заявлением о вынесении судебного приказа, однако Арбитражный суд вынес определение об отказе в принятии заявления о вынесении судебного приказа",value:"rejected"},{text:"Я уже обращался с заявлением о вынесении судебного приказа, однако судебный приказ был отменён в связи с подачей возражений должника.",value:"cancelled"}],get value(){return e.value.value.type},setValue:r=>{switch(r){case"objections":e.setValue("value",declass(new CourtOrderObjections));break;case"rejected":e.setValue("value",declass(new CourtOrderRejected));break;case"cancelled":e.setValue("value",declass(new CourtOrderCancelled));break;default:throw new Error("Invalid court claim (no-order) value")}}}),createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.value.value.type==="objections"},get children(){return[createComponent(TextField,{label:"Наименование документа",get value(){return e.value.value.date},setValue:r=>i("name",r)}),createComponent(TextField,{type:"date",label:"Дата документа",get value(){return e.value.value.date},setValue:r=>i("date",r)})]}}),createComponent(Match,{get when(){return e.value.value.type==="rejected"},get children(){return[createComponent(TextField,{type:"date",label:"Дата определения об отказе в принятии заявления о вынесении судебного приказа",get value(){return e.value.value.date},setValue:r=>i("date",r)}),createComponent(TextField,{label:"Номер дела из картотеки арбитражных дел",get value(){return e.value.value.date},setValue:r=>i("case",r)})]}}),createComponent(Match,{get when(){return e.value.value.type==="cancelled"},get children(){return[createComponent(TextField,{type:"date",label:"Дата определения об отказе в принятии заявления о вынесении судебного приказа",get value(){return e.value.value.date},setValue:r=>i("date",r)}),createComponent(TextField,{label:"Номер дела из картотеки арбитражных дел",get value(){return e.value.value.date},setValue:r=>i("case",r)})]}})]}})]}})]}})}})]}function CourtClaimInputs(e){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.value.type==="specific"},get children(){return createComponent(QuestionSection,{get children(){return[createComponent(TextField,{label:"Наименование суда",get value(){return e.value.name},setValue:t=>e.setValue("name",t)}),createComponent(TextField,{label:"Пункт договора",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})]}})}}),createComponent(Match,{get when(){return e.value.type==="manual"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(TextField,{label:"Наименование суда",get value(){return e.value.name},setValue:t=>e.setValue("name",t)})}})}}),createComponent(Match,{get when(){return e.value.type==="zd-venue"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(TextField,{label:"Пункт договора",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})}})}}),createComponent(Match,{get when(){return e.value.type==="za-venue"},get children(){return createComponent(QuestionSection,{get children(){return createComponent(TextField,{label:"Пункт договора",get value(){return e.value.clause},setValue:t=>e.setValue("clause",t)})}})}})]}})}function CourtReactToFlow(){const[e,t]=useDocument();return createEffect(i=>{var r;return(r=e.zaimodavec)==null?void 0:r.lastName},""),null}const scriptRel="modulepreload",assetsURL=function(e){return"/zasudi-solid/"+e},seen={},__vitePreload=function(t,i,n){let r=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.all(i.map(f=>{if(f=assetsURL(f),f in seen)return;seen[f]=!0;const u=f.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(!!n)for(let _=s.length-1;_>=0;_--){const g=s[_];if(g.href===f&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${l}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":scriptRel,u||(p.as="script",p.crossOrigin=""),p.href=f,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((_,g)=>{p.addEventListener("load",_),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${f}`)))})}))}return r.then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},__variableDynamicImportRuntimeHelper=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})},proofs={"adder-popup":"_adder-popup_wnbxe_1","adder-modal-fix":"_adder-modal-fix_wnbxe_39","dialog-appear":"_dialog-appear_wnbxe_1","hover-example":"_hover-example_wnbxe_85","adder-buttons":"_adder-buttons_wnbxe_145","proof-adder":"_proof-adder_wnbxe_163","proof-card":"_proof-card_wnbxe_179","add-proof-card":"_add-proof-card_wnbxe_225","simple-proof-fields":"_simple-proof-fields_wnbxe_341","simple-proof-adder":"_simple-proof-adder_wnbxe_383"},xSvg="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-x'%3e%3cline%20x1='18'%20y1='6'%20x2='6'%20y2='18'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='18'%20y2='18'%3e%3c/line%3e%3c/svg%3e",rubleIcon="data:image/svg+xml,%3csvg%20width='15'%20height='20'%20viewBox='0%200%2015%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.37398%200H1V9.24801H0V12.248H1V13.5836H0V16.5836H1V20H4V16.5836H7.75V13.5836H4V12.25H8.37481C11.7524%2012.25%2014.5%209.50238%2014.5%206.1252C14.5%202.74762%2011.7524%200%208.37398%200ZM8.3752%209.25H4V2.99961H8.3752C10.0984%202.99961%2011.5004%204.4016%2011.5004%206.1248C11.5004%207.84801%2010.0984%209.25%208.3752%209.25Z'%20fill='%231C4681'/%3e%3c/svg%3e";var _tmpl$$c=template("<div><select>"),_tmpl$2$9=template("<div>"),_tmpl$3$8=template("<option>");function ListBox(e){const t=()=>e.items.some(i=>i.aside!==void 0);return(()=>{var i=_tmpl$$c(),n=i.firstChild;return insert(i,createComponent(Show,{get when(){return t()},get children(){return createComponent(For,{get each(){return e.items},children:(r,s)=>(()=>{var a=_tmpl$2$9();return insert(a,()=>{var c;return(c=r.aside)==null?void 0:c.call(r)}),createRenderEffect(c=>{var f=e.value===r.value?!0:void 0,u=reusable["list-box-aside-item"],l=s();return f!==c.e&&setAttribute(a,"data-option-selected",c.e=f),u!==c.t&&className(a,c.t=u),l!==c.a&&((c.a=l)!=null?a.style.setProperty("--index",l):a.style.removeProperty("--index")),c},{e:void 0,t:void 0,a:void 0}),a})()})}}),n),n.addEventListener("change",r=>e.setValue(r.currentTarget.value)),insert(n,createComponent(For,{get each(){return e.items},children:r=>(()=>{var s=_tmpl$3$8();return insert(s,()=>r.text),createRenderEffect(()=>s.selected=e.value===r.value),createRenderEffect(()=>s.value=r.value),s})()})),createRenderEffect(r=>{var s=reusable["list-box-wrapper"],a={[reusable["list-box"]]:!0},c=e.items.length;return s!==r.e&&className(i,r.e=s),r.t=classList(n,a,r.t),c!==r.a&&setAttribute(n,"size",r.a=c),r},{e:void 0,t:void 0,a:void 0}),i})()}var _tmpl$$b=template("<pre>"),_tmpl$2$8=template("<div>"),_tmpl$3$7=template('<div><div>пример</div><img alt="">'),_tmpl$4$6=template("<div><dialog><div>"),_tmpl$5$5=template("<span>Платёж "),_tmpl$6=template("<br>"),_tmpl$7=template("<span>На сумму <span class=warning> р."),_tmpl$8=template("<button><img alt=x>");function Proofs(){const[e,t]=useDocument(),i=s=>t("proofs","dogovorProofs",e.proofs.dogovorProofs.length,s),n=s=>t("proofs","dogovorProofs",produce(a=>{a.splice(s,1)})),r=(s,a)=>{console.log("setting document proof",s,a,e.proofs.dogovorProofs),t("proofs","dogovorProofs",produce(c=>{c[s]=a}))};return(()=>{var s=_tmpl$2$8();return insert(s,createComponent(QuestionSection,{get children(){return[createComponent(ProofAdder,{get proofs(){return e.proofs.dogovorProofs},addProof:i,deleteProof:n,setProof:r}),(()=>{var a=_tmpl$$b();return insert(a,()=>JSON.stringify(e.proofs.dogovorProofs,null,2)),a})(),(()=>{var a=_tmpl$$b();return insert(a,()=>JSON.stringify(e.proofs.returnProofs,null,2)),a})()]}}),null),insert(s,createComponent(QuestionSection,{question:"Возвращение займа",get children(){return createComponent(RadioGroup,{items:[{label:"Заёмщик, и его правопреемники ни разу не производили оплату по договору займа",value:"never-paid"},{label:"Заёмщик частично платил по договору спорному договору займа",value:"paid"}],get value(){return e.proofs.returnProofs.type},setValue:a=>{switch(a){case"never-paid":t("proofs","returnProofs",declass(new ReturnProofsNeverPaid));break;case"paid":t("proofs","returnProofs",declass(new ReturnProofsPaid));break;default:throw new Error("Unknown proof type")}},get children(){return createComponent(Show,{get when(){return e.proofs.returnProofs.type==="paid"},get children(){return createComponent(HasPaidFields,{document:e,setDocument:t})}})}})}}),null),s})()}const proofTypeMap={clause:"Пункт договора","transfer-raspiska":"Расписка в передаче денежных средств","funds-transfer":"Акт приёма-передачи денежных средств","dogovor-raspiska":"Расписка на договоре","card-transfer":"Перевод на карту","account-statement":"Выписка по счёту","payment-order":"Платёжное поручение","cash-receipt-voucher":"Квитанция к приходному кассовому ордеру","expense-receipt":"Расходный кассовый ордер","check-order":"Чек-ордер банка","payment-agreement":"Соглашение о зачёте",other:"Другое"};function ProofAdder(e){const[t,i]=createSignal(!1);let n;createEffect(()=>t()?n.showModal():n.close());const r=w=>{const x=declass(w);return x.note=null,x},[s,a]=createSignal(null),[c,f]=createSignal({proof:r(new ClauseProof),mode:{value:"add"}}),u=w=>f(x=>({...x,proof:w})),l=()=>{u(r(new ClauseProof)),a(null)},m=(w,x)=>{f(h=>x!==void 0?{...h,mode:{value:w,index:x}}:{...h,mode:{value:w}})};createEffect(()=>{console.log("proof in progress updated",c(),s())});const p=()=>Object.values(c().proof).every(w=>w!==""),_=()=>{const w=c();console.log(w),w.proof.note=s(),w.mode.value==="edit"?(e.setProof(w.mode.index,w.proof),i(!1)):(e.addProof(w.proof),i(!1))},g=()=>{m("add"),l(),i(!0)},P=(w,x)=>{m("edit",x),a(w.note),u(declass(w)),i(!0)},[v,L]=createSignal(0),F=w=>{const[x]=createResource(()=>__variableDynamicImportRuntimeHelper(Object.assign({"../../../assets/example-documents/account-statement.jpg":()=>__vitePreload(()=>import("./account-statement-DzdXkgl8.js"),[]),"../../../assets/example-documents/card-transfer.jpg":()=>__vitePreload(()=>import("./card-transfer-CSMD_Vck.js"),[]),"../../../assets/example-documents/cash-receipt-voucher.jpg":()=>__vitePreload(()=>import("./cash-receipt-voucher-DNXc6Sdk.js"),[]),"../../../assets/example-documents/check-order.jpg":()=>__vitePreload(()=>import("./check-order-BCVPIxgK.js"),[]),"../../../assets/example-documents/clause.jpg":()=>__vitePreload(()=>import("./clause-DmFs3e5G.js"),[]),"../../../assets/example-documents/expense-receipt.jpg":()=>__vitePreload(()=>import("./expense-receipt-rsnUZ8tJ.js"),[]),"../../../assets/example-documents/funds-transfer.jpg":()=>__vitePreload(()=>import("./funds-transfer-BN_LdnSn.js"),[]),"../../../assets/example-documents/other.jpg":()=>__vitePreload(()=>import("./other-5fxjf8TQ.js"),[]),"../../../assets/example-documents/payment-order.jpg":()=>__vitePreload(()=>import("./payment-order-cI9zTrOO.js"),[])}),`../../../assets/example-documents/${w.type}.jpg`).then(h=>h.default).catch(h=>{}));return createEffect(()=>console.log("image:",w.type,x())),createComponent(Show,{get when(){return x()},children:h=>(()=>{var d=_tmpl$3$7(),M=d.firstChild,E=M.nextSibling;return createRenderEffect(y=>{var D=proofs["hover-example"],R=h();return D!==y.e&&className(d,y.e=D),R!==y.t&&setAttribute(E,"src",y.t=R),y},{e:void 0,t:void 0}),d})()})};return(()=>{var w=_tmpl$4$6(),x=w.firstChild,h=x.firstChild;x.addEventListener("close",()=>i(!1)),x.$$click=M=>M.target===M.currentTarget&&i(!1);var d=n;return typeof d=="function"?use(d,x):n=x,insert(h,createComponent(QuestionSection,{get question(){return c().mode.value==="add"?"Добавить доказательство":"Изменить доказательство"},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return v()===0},get children(){return createComponent(ListBox,{get items(){return Object.entries(proofTypeMap).map(([M,E])=>({value:M,text:E,aside:()=>createComponent(F,{type:M})}))},get value(){return c().proof.type},setValue:M=>{switch(M){case"clause":u(r(new ClauseProof));break;case"transfer-raspiska":u(r(new TransferRaspiskaProof));break;case"funds-transfer":u(r(new FundsTransferProof));break;case"dogovor-raspiska":u(r(new DogovorRaspiskaProof));break;case"card-transfer":u(r(new CardTransferProof));break;case"account-statement":u(r(new AccountStatementProof));break;case"payment-order":u(r(new PaymentOrderProof));break;case"cash-receipt-voucher":u(r(new CashReceiptVoucherProof));break;case"expense-receipt":u(r(new ExpenseReceiptProof));break;case"check-order":u(r(new CheckOrderProof));break;case"other":u(r(new OtherProof));break;default:throw new Error("Unknown proof type")}}})}}),createComponent(Match,{get when(){return v()===1},get children(){return[createComponent(TextField,{icon:"no-space",label:"Примечание (не обязательно)",get value(){return s()??""},setValue:M=>a(M===""?null:M)}),createComponent(ProofAdderFields,{get value(){return c().proof},setValue:u})]}})]}})}}),null),insert(h,createComponent(QuestionSection,{get children(){var M=_tmpl$2$8();return insert(M,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return v()===0},get children(){return[createComponent(BigGreenButton,{text:"Закрыть",get class(){return flow["flow-back-button"]},onClick:()=>i(!1)}),createComponent(BigGreenButton,{text:"Далее",onClick:()=>L(1)})]}}),createComponent(Match,{get when(){return v()===1},get children(){return[createComponent(BigGreenButton,{text:"К типам",get class(){return flow["flow-back-button"]},onClick:()=>L(0)}),createComponent(BigGreenButton,{get text(){return c().mode.value==="add"?"Добавить":"Сохранить"},onClick:_,get disabled(){return!p()}})]}})]}})),createRenderEffect(()=>className(M,proofs["adder-buttons"])),M}}),null),insert(w,createComponent(For,{get each(){return e.proofs},children:(M,E)=>createComponent(ProofCard,{get index(){return E()},onDelete:()=>e.deleteProof(E()),onClick:()=>P(declass(M),E()),onKeyDown:()=>P(declass(M),E()),get label(){return proofTypeMap[M.type]},get note(){return M.note??void 0}})}),null),insert(w,createComponent(StyledBackground,{shadow:!0,get classList(){return{[proofs["proof-card"]]:!0,[proofs["add-proof-card"]]:!0}},onClick:g,onKeyDown:M=>{M.target===M.currentTarget&&(M.key==="Enter"||M.key===" ")&&g()},tabIndex:0,children:"Добавить доказательство"}),null),createRenderEffect(M=>{var E=proofs["proof-adder"],y=proofs["adder-popup"],D=proofs["adder-modal-fix"];return E!==M.e&&className(w,M.e=E),y!==M.t&&className(x,M.t=y),D!==M.a&&className(h,M.a=D),M},{e:void 0,t:void 0,a:void 0}),w})()}function SimpleProofAdder(e){const t=()=>{},[i,n]=createSignal(""),[r,s]=createSignal("");return[(()=>{var a=_tmpl$2$8();return insert(a,createComponent(TextField,{icon:calendarIcon,type:"date",label:"Дата платежа",get value(){return i()},setValue:n}),null),insert(a,createComponent(TextField,{icon:rubleIcon,label:"Сумма платежа",get value(){return r()},setValue:s}),null),insert(a,createComponent(BigGreenButton,{get disabled(){return i()===""||r()===""},text:"Добавить",onClick:()=>(e.addProof({date:i(),sum:r()}),n(""),s(""))}),null),createRenderEffect(()=>className(a,proofs["simple-proof-fields"])),a})(),createComponent(Show,{get when(){return e.proofs.length>0},get children(){var a=_tmpl$2$8();return insert(a,createComponent(For,{get each(){return e.proofs},children:(c,f)=>createComponent(ProofCard,{get label(){return[(()=>{var u=_tmpl$5$5();return u.firstChild,insert(u,()=>new Date(c.date).toLocaleDateString("ru"),null),u})(),_tmpl$6(),(()=>{var u=_tmpl$7(),l=u.firstChild,m=l.nextSibling,p=m.firstChild;return insert(m,()=>c.sum,p),u})()]},get index(){return f()},onDelete:()=>e.deleteProof(f()),onClick:t,onKeyDown:t})})),createRenderEffect(c=>classList(a,{[proofs["proof-adder"]]:!0,[proofs["simple-proof-adder"]]:!0},c)),a}})]}function ProofCard(e){return createComponent(StyledBackground,{shadow:!0,get class(){return proofs["proof-card"]},onClick:()=>e.onClick(),onKeyDown:t=>{t.target===t.currentTarget&&(t.key==="Enter"||t.key===" ")&&e.onKeyDown()},get title(){return e.note??(typeof e.label=="string"?e.label:void 0)},tabIndex:0,get children(){return[createComponent(Show,{get when(){return e.note!==void 0},get children(){var t=_tmpl$2$8();return insert(t,()=>e.note),createRenderEffect(()=>setAttribute(t,"title",e.note)),t}}),(()=>{var t=_tmpl$2$8();return insert(t,()=>e.label),createRenderEffect(()=>setAttribute(t,"title",typeof e.label=="string"?e.label:void 0)),t})(),(()=>{var t=_tmpl$8(),i=t.firstChild;return t.$$click=n=>(n.stopPropagation(),e.onDelete()),setAttribute(i,"src",xSvg),t})()]}})}function ProofAdderFields(e){const t=()=>e.value,i=(n,r)=>e.setValue({...e.value,[n]:r});return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e.value.type==="clause"},get children(){return[createComponent(TextField,{label:"Пункт договора",get value(){return t().clause},setValue:n=>i("clause",n)}),createComponent(Checkbox,{label:"Расплывчатая формулировка",get value(){return t().vague},setValue:n=>i("vague",n)})]}}),createComponent(Match,{get when(){return e.value.type==="transfer-raspiska"},get children(){return[createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма платежа",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="funds-transfer"},get children(){return[createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма платежа",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="dogovor-raspiska"},get children(){return[createComponent(TextField,{label:"Сумма платежа",get value(){return t().sum},setValue:n=>i("sum",n)}),createComponent(Checkbox,{label:"В расписке указана дата передачи денежных средств, отличная от даты составления договора",get value(){return t().date!==null},setValue:n=>i("date",n?"":null)}),createComponent(Show,{get when(){return t().date!==null},get children(){return createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)})}})]}}),createComponent(Match,{get when(){return e.value.type==="card-transfer"},get children(){return[createComponent(TextField,{label:"Наименование документа",get value(){return t().documentName},setValue:n=>i("documentName",n)}),createComponent(TextField,{label:"Номер документа",get value(){return t().documentNumber},setValue:n=>i("documentNumber",n)}),createComponent(TextField,{type:"date",label:"Дата документа",get value(){return t().documentDate},setValue:n=>i("documentDate",n)}),createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма платежа",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="account-statement"},get children(){return[createComponent(TextField,{label:"Начало периода",get value(){return t().periodStart},setValue:n=>i("periodStart",n)}),createComponent(TextField,{label:"Конец периода",get value(){return t().periodEnd},setValue:n=>i("periodEnd",n)}),"TODO inner adders"]}}),createComponent(Match,{get when(){return e.value.type==="payment-order"},get children(){return[createComponent(TextField,{label:"Номер",get value(){return t().number},setValue:n=>i("number",n)}),createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="cash-receipt-voucher"},get children(){return[createComponent(TextField,{label:"Номер",get value(){return t().number},setValue:n=>i("number",n)}),createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="expense-receipt"},get children(){return[createComponent(TextField,{label:"Номер",get value(){return t().number},setValue:n=>i("number",n)}),createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="check-order"},get children(){return[createComponent(TextField,{label:"Номер",get value(){return t().number},setValue:n=>i("number",n)}),createComponent(TextField,{type:"date",label:"Дата",get value(){return t().date},setValue:n=>i("date",n)}),createComponent(TextField,{label:"Сумма",get value(){return t().sum},setValue:n=>i("sum",n)})]}}),createComponent(Match,{get when(){return e.value.type==="other"},get children(){return[createComponent(TextField,{label:"Наименование документа",get value(){return t().documentName},setValue:n=>i("documentName",n)}),createComponent(Checkbox,{label:"Без номера",get value(){return t().documentNumber===null},setValue:n=>i("documentNumber",n?null:"")}),createComponent(Show,{get when(){return t().documentNumber!==null},get children(){return createComponent(TextField,{label:"Номер документа",get value(){return t().documentNumber},setValue:n=>i("documentNumber",n)})}}),createComponent(TextField,{type:"date",label:"Дата документа",get value(){return t().documentDate},setValue:n=>i("documentDate",n)})]}})]}})}function HasPaidFields(e){const t=a=>e.setDocument("proofs","returnProofs","proofs",e.document.proofs.returnProofs.proofs.length,a),i=a=>e.setDocument("proofs","returnProofs","proofs",produce(c=>{c.splice(a,1)})),n=(a,c)=>{console.log("setting return proof",a,c,e.document.proofs.returnProofs.proofs),e.setDocument("proofs","returnProofs","proofs",produce(f=>{f[a]=c}))},r=(a,c)=>e.setDocument("proofs","returnProofs",c,e.document.proofs.returnProofs[c].length,a),s=(a,c)=>e.setDocument("proofs","returnProofs",c,produce(f=>{f.splice(a,1)}));return createComponent(QuestionSection,{get children(){return[createComponent(Checkbox,{label:"У меня имеется оригинал или копия документа о возврате части задолженности Заёмщиком",get value(){return e.document.proofs.returnProofs.proofs!==null},setValue:a=>e.setDocument("proofs","returnProofs","proofs",a?[]:null)}),createComponent(Show,{get when(){return e.document.proofs.returnProofs.proofs!==null},get children(){return createComponent(QuestionSection,{get children(){return createComponent(ProofAdder,{get proofs(){return e.document.proofs.returnProofs.proofs},addProof:t,deleteProof:i,setProof:n})}})}}),createComponent(Checkbox,{label:"Документ об оплате части задолженности находится у Заёмщика",get value(){return e.document.proofs.returnProofs.zaemshikProofs!==null},setValue:a=>e.setDocument("proofs","returnProofs","zaemshikProofs",a?[]:null)}),createComponent(Show,{get when(){return e.document.proofs.returnProofs.zaemshikProofs!==null},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SimpleProofAdder,{get proofs(){return e.document.proofs.returnProofs.zaemshikProofs},addProof:a=>r(a,"zaemshikProofs"),deleteProof:a=>s(a,"zaemshikProofs")})}})}}),createComponent(Checkbox,{label:"Часть задолженности мне была возвращена, но соответствующий документ не был составлен",get value(){return e.document.proofs.returnProofs.unbackedProofs!==null},setValue:a=>e.setDocument("proofs","returnProofs","unbackedProofs",a?[]:null)}),createComponent(Show,{get when(){return e.document.proofs.returnProofs.unbackedProofs!==null},get children(){return createComponent(QuestionSection,{get children(){return createComponent(SimpleProofAdder,{get proofs(){return e.document.proofs.returnProofs.unbackedProofs},addProof:a=>r(a,"unbackedProofs"),deleteProof:a=>s(a,"unbackedProofs")})}})}})]}})}delegateEvents(["click"]);const demo={"demo-name":"_demo-name_1lm9s_1","raschet-buttons":"_raschet-buttons_1lm9s_10","calculator-table":"_calculator-table_1lm9s_35","rounded-fix":"_rounded-fix_1lm9s_67","checkpoint-glow":"_checkpoint-glow_1lm9s_185","checkpoint-start":"_checkpoint-start_1lm9s_188","checkpoint-deadline":"_checkpoint-deadline_1lm9s_191","checkpoint-payment-decrease":"_checkpoint-payment-decrease_1lm9s_194","checkpoint-payment-increase":"_checkpoint-payment-increase_1lm9s_197","checkpoint-change":"_checkpoint-change_1lm9s_200","checkpoint-change-term":"_checkpoint-change-term_1lm9s_203","checkpoint-leapYear":"_checkpoint-leapYear_1lm9s_206","checkpoint-charge":"_checkpoint-charge_1lm9s_209","checkpoint-synthetic":"_checkpoint-synthetic_1lm9s_212","checkpoint-idk":"_checkpoint-idk_1lm9s_215"};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),i}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,i){module.exports=t.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var et;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ce,t.bytesToString=re,t.createValidAbsoluteUrl=Ee,t.getModificationDate=Re,t.getUuid=Qe,t.getVerbosityLevel=X,t.info=J,t.isArrayBuffer=ve,t.isArrayEqual=Me,t.isNodeJS=void 0,t.normalizeUnicode=Ge,t.objectFromMap=ae,t.objectSize=Ce,t.setVerbosityLevel=O,t.shadow=xe,t.string32=me,t.stringToBytes=be,t.stringToPDFString=ue,t.stringToUTF8String=ie,t.unreachable=H,t.utf8StringToString=ne,t.warn=q;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=i;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const r=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=r;const s=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=s;const a=1.35;t.LINE_FACTOR=a;const c=.35;t.LINE_DESCENT_FACTOR=c;const f=c/a;t.BASELINE_FACTOR=f;const u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=u;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const m="pdfjs_internal_editor_";t.AnnotationEditorPrefix=m;const p={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=p;const _={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=_;const g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=g;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=P;const v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=v;const L={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=L;const F={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=F;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=w;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=x;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=h;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=d;const M={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=M;const E={O:"PageOpen",C:"PageClose"};t.PageActionEventType=E;const y={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=y;const D={NONE:0,BINARY:1};t.CMapCompressionType=D;const R={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=R;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=z;let te=y.WARNINGS;function O(Pe){Number.isInteger(Pe)&&(te=Pe)}function X(){return te}function J(Pe){te>=y.INFOS&&console.log(`Info: ${Pe}`)}function q(Pe){te>=y.WARNINGS&&console.log(`Warning: ${Pe}`)}function H(Pe){throw new Error(Pe)}function ce(Pe,k){Pe||H(k)}function K(Pe){switch(Pe==null?void 0:Pe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(Pe,k=null,V=null){if(!Pe)return null;try{if(V&&typeof Pe=="string"){if(V.addDefaultProtocol&&Pe.startsWith("www.")){const le=Pe.match(/\./g);(le==null?void 0:le.length)>=2&&(Pe=`http://${Pe}`)}if(V.tryConvertEncoding)try{Pe=ie(Pe)}catch{}}const he=k?new URL(Pe,k):new URL(Pe);if(K(he))return he}catch{}return null}function xe(Pe,k,V,he=!1){return Object.defineProperty(Pe,k,{value:V,enumerable:!he,configurable:!0,writable:!1}),V}const B=function(){function k(V,he){this.constructor===k&&H("Cannot initialize BaseException."),this.message=V,this.name=he}return k.prototype=new Error,k.constructor=k,k}();t.BaseException=B;class b extends B{constructor(k,V){super(k,"PasswordException"),this.code=V}}t.PasswordException=b;class T extends B{constructor(k,V){super(k,"UnknownErrorException"),this.details=V}}t.UnknownErrorException=T;class C extends B{constructor(k){super(k,"InvalidPDFException")}}t.InvalidPDFException=C;class I extends B{constructor(k){super(k,"MissingPDFException")}}t.MissingPDFException=I;class N extends B{constructor(k,V){super(k,"UnexpectedResponseException"),this.status=V}}t.UnexpectedResponseException=N;class j extends B{constructor(k){super(k,"FormatError")}}t.FormatError=j;class Z extends B{constructor(k){super(k,"AbortException")}}t.AbortException=Z;function re(Pe){(typeof Pe!="object"||(Pe==null?void 0:Pe.length)===void 0)&&H("Invalid argument for bytesToString");const k=Pe.length,V=8192;if(k<V)return String.fromCharCode.apply(null,Pe);const he=[];for(let le=0;le<k;le+=V){const ge=Math.min(le+V,k),ye=Pe.subarray(le,ge);he.push(String.fromCharCode.apply(null,ye))}return he.join("")}function be(Pe){typeof Pe!="string"&&H("Invalid argument for stringToBytes");const k=Pe.length,V=new Uint8Array(k);for(let he=0;he<k;++he)V[he]=Pe.charCodeAt(he)&255;return V}function me(Pe){return String.fromCharCode(Pe>>24&255,Pe>>16&255,Pe>>8&255,Pe&255)}function Ce(Pe){return Object.keys(Pe).length}function ae(Pe){const k=Object.create(null);for(const[V,he]of Pe)k[V]=he;return k}function we(){const Pe=new Uint8Array(4);return Pe[0]=1,new Uint32Array(Pe.buffer,0,1)[0]===1}function _e(){try{return new Function(""),!0}catch{return!1}}class Le{static get isLittleEndian(){return xe(this,"isLittleEndian",we())}static get isEvalSupported(){return xe(this,"isEvalSupported",_e())}static get isOffscreenCanvasSupported(){return xe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?xe(this,"platform",{isWin:!1,isMac:!1}):xe(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var k,V;return xe(this,"isCSSRoundSupported",(V=(k=globalThis.CSS)==null?void 0:k.supports)==null?void 0:V.call(k,"width: round(1.5px, 1px)"))}}t.FeatureTest=Le;const Ie=[...Array(256).keys()].map(Pe=>Pe.toString(16).padStart(2,"0"));class Fe{static makeHexColor(k,V,he){return`#${Ie[k]}${Ie[V]}${Ie[he]}`}static scaleMinMax(k,V){let he;k[0]?(k[0]<0&&(he=V[0],V[0]=V[1],V[1]=he),V[0]*=k[0],V[1]*=k[0],k[3]<0&&(he=V[2],V[2]=V[3],V[3]=he),V[2]*=k[3],V[3]*=k[3]):(he=V[0],V[0]=V[2],V[2]=he,he=V[1],V[1]=V[3],V[3]=he,k[1]<0&&(he=V[2],V[2]=V[3],V[3]=he),V[2]*=k[1],V[3]*=k[1],k[2]<0&&(he=V[0],V[0]=V[1],V[1]=he),V[0]*=k[2],V[1]*=k[2]),V[0]+=k[4],V[1]+=k[4],V[2]+=k[5],V[3]+=k[5]}static transform(k,V){return[k[0]*V[0]+k[2]*V[1],k[1]*V[0]+k[3]*V[1],k[0]*V[2]+k[2]*V[3],k[1]*V[2]+k[3]*V[3],k[0]*V[4]+k[2]*V[5]+k[4],k[1]*V[4]+k[3]*V[5]+k[5]]}static applyTransform(k,V){const he=k[0]*V[0]+k[1]*V[2]+V[4],le=k[0]*V[1]+k[1]*V[3]+V[5];return[he,le]}static applyInverseTransform(k,V){const he=V[0]*V[3]-V[1]*V[2],le=(k[0]*V[3]-k[1]*V[2]+V[2]*V[5]-V[4]*V[3])/he,ge=(-k[0]*V[1]+k[1]*V[0]+V[4]*V[1]-V[5]*V[0])/he;return[le,ge]}static getAxialAlignedBoundingBox(k,V){const he=this.applyTransform(k,V),le=this.applyTransform(k.slice(2,4),V),ge=this.applyTransform([k[0],k[3]],V),ye=this.applyTransform([k[2],k[1]],V);return[Math.min(he[0],le[0],ge[0],ye[0]),Math.min(he[1],le[1],ge[1],ye[1]),Math.max(he[0],le[0],ge[0],ye[0]),Math.max(he[1],le[1],ge[1],ye[1])]}static inverseTransform(k){const V=k[0]*k[3]-k[1]*k[2];return[k[3]/V,-k[1]/V,-k[2]/V,k[0]/V,(k[2]*k[5]-k[4]*k[3])/V,(k[4]*k[1]-k[5]*k[0])/V]}static singularValueDecompose2dScale(k){const V=[k[0],k[2],k[1],k[3]],he=k[0]*V[0]+k[1]*V[2],le=k[0]*V[1]+k[1]*V[3],ge=k[2]*V[0]+k[3]*V[2],ye=k[2]*V[1]+k[3]*V[3],W=(he+ye)/2,de=Math.sqrt((he+ye)**2-4*(he*ye-ge*le))/2,ke=W+de||1,Ae=W-de||1;return[Math.sqrt(ke),Math.sqrt(Ae)]}static normalizeRect(k){const V=k.slice(0);return k[0]>k[2]&&(V[0]=k[2],V[2]=k[0]),k[1]>k[3]&&(V[1]=k[3],V[3]=k[1]),V}static intersect(k,V){const he=Math.max(Math.min(k[0],k[2]),Math.min(V[0],V[2])),le=Math.min(Math.max(k[0],k[2]),Math.max(V[0],V[2]));if(he>le)return null;const ge=Math.max(Math.min(k[1],k[3]),Math.min(V[1],V[3])),ye=Math.min(Math.max(k[1],k[3]),Math.max(V[1],V[3]));return ge>ye?null:[he,ge,le,ye]}static bezierBoundingBox(k,V,he,le,ge,ye,W,de){const ke=[],Ae=[[],[]];let Oe,Ve,ze,Te,Ye,Ue,Q,S;for(let pe=0;pe<2;++pe){if(pe===0?(Ve=6*k-12*he+6*ge,Oe=-3*k+9*he-9*ge+3*W,ze=3*he-3*k):(Ve=6*V-12*le+6*ye,Oe=-3*V+9*le-9*ye+3*de,ze=3*le-3*V),Math.abs(Oe)<1e-12){if(Math.abs(Ve)<1e-12)continue;Te=-ze/Ve,0<Te&&Te<1&&ke.push(Te);continue}Q=Ve*Ve-4*ze*Oe,S=Math.sqrt(Q),!(Q<0)&&(Ye=(-Ve+S)/(2*Oe),0<Ye&&Ye<1&&ke.push(Ye),Ue=(-Ve-S)/(2*Oe),0<Ue&&Ue<1&&ke.push(Ue))}let U=ke.length,Y;const oe=U;for(;U--;)Te=ke[U],Y=1-Te,Ae[0][U]=Y*Y*Y*k+3*Y*Y*Te*he+3*Y*Te*Te*ge+Te*Te*Te*W,Ae[1][U]=Y*Y*Y*V+3*Y*Y*Te*le+3*Y*Te*Te*ye+Te*Te*Te*de;return Ae[0][oe]=k,Ae[1][oe]=V,Ae[0][oe+1]=W,Ae[1][oe+1]=de,Ae[0].length=Ae[1].length=oe+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}t.Util=Fe;const fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ue(Pe){if(Pe[0]>="ï"){let V;if(Pe[0]==="þ"&&Pe[1]==="ÿ"?V="utf-16be":Pe[0]==="ÿ"&&Pe[1]==="þ"?V="utf-16le":Pe[0]==="ï"&&Pe[1]==="»"&&Pe[2]==="¿"&&(V="utf-8"),V)try{const he=new TextDecoder(V,{fatal:!0}),le=be(Pe);return he.decode(le)}catch(he){q(`stringToPDFString: "${he}".`)}}const k=[];for(let V=0,he=Pe.length;V<he;V++){const le=fe[Pe.charCodeAt(V)];k.push(le?String.fromCharCode(le):Pe.charAt(V))}return k.join("")}function ie(Pe){return decodeURIComponent(escape(Pe))}function ne(Pe){return unescape(encodeURIComponent(Pe))}function ve(Pe){return typeof Pe=="object"&&(Pe==null?void 0:Pe.byteLength)!==void 0}function Me(Pe,k){if(Pe.length!==k.length)return!1;for(let V=0,he=Pe.length;V<he;V++)if(Pe[V]!==k[V])return!1;return!0}function Re(Pe=new Date){return[Pe.getUTCFullYear().toString(),(Pe.getUTCMonth()+1).toString().padStart(2,"0"),Pe.getUTCDate().toString().padStart(2,"0"),Pe.getUTCHours().toString().padStart(2,"0"),Pe.getUTCMinutes().toString().padStart(2,"0"),Pe.getUTCSeconds().toString().padStart(2,"0")].join("")}class Be{constructor(){$(this,et,!1);this.promise=new Promise((k,V)=>{this.resolve=he=>{ee(this,et,!0),k(he)},this.reject=he=>{ee(this,et,!0),V(he)}})}get settled(){return o(this,et)}}et=new WeakMap,t.PromiseCapability=Be;let He=null,qe=null;function Ge(Pe){return He||(He=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qe=new Map([["ﬅ","ſt"]])),Pe.replaceAll(He,(k,V,he)=>V?V.normalize("NFKC"):qe.get(he))}function Qe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Pe=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Pe);else for(let k=0;k<32;k++)Pe[k]=Math.floor(Math.random()*255);return re(Pe)}const Ke="pdfjs_internal_id_";t.AnnotationPrefix=Ke},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,i,n,r,ft,a,kt,f,u,l,m,p,_,g,P,v,Ft,F,w,Zt,h,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(E){if(typeof E=="string"||E instanceof URL?E={url:E}:(0,_util.isArrayBuffer)(E)&&(E={data:E}),typeof E!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!E.url&&!E.data&&!E.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const y=new PDFDocumentLoadingTask,{docId:D}=y,R=E.url?getUrlProp(E.url):null,z=E.data?getDataProp(E.data):null,te=E.httpHeaders||null,O=E.withCredentials===!0,X=E.password??null,J=E.range instanceof PDFDataRangeTransport?E.range:null,q=Number.isInteger(E.rangeChunkSize)&&E.rangeChunkSize>0?E.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let H=E.worker instanceof PDFWorker?E.worker:null;const ce=E.verbosity,K=typeof E.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(E.docBaseUrl)?E.docBaseUrl:null,Ee=typeof E.cMapUrl=="string"?E.cMapUrl:null,xe=E.cMapPacked!==!1,B=E.CMapReaderFactory||DefaultCMapReaderFactory,b=typeof E.standardFontDataUrl=="string"?E.standardFontDataUrl:null,T=E.StandardFontDataFactory||DefaultStandardFontDataFactory,C=E.stopAtErrors!==!0,I=Number.isInteger(E.maxImageSize)&&E.maxImageSize>-1?E.maxImageSize:-1,N=E.isEvalSupported!==!1,j=typeof E.isOffscreenCanvasSupported=="boolean"?E.isOffscreenCanvasSupported:!_util.isNodeJS,Z=Number.isInteger(E.canvasMaxAreaInBytes)?E.canvasMaxAreaInBytes:-1,re=typeof E.disableFontFace=="boolean"?E.disableFontFace:_util.isNodeJS,be=E.fontExtraProperties===!0,me=E.enableXfa===!0,Ce=E.ownerDocument||globalThis.document,ae=E.disableRange===!0,we=E.disableStream===!0,_e=E.disableAutoFetch===!0,Le=E.pdfBug===!0,Ie=J?J.length:E.length??NaN,Fe=typeof E.useSystemFonts=="boolean"?E.useSystemFonts:!_util.isNodeJS&&!re,fe=typeof E.useWorkerFetch=="boolean"?E.useWorkerFetch:B===_display_utils.DOMCMapReaderFactory&&T===_display_utils.DOMStandardFontDataFactory&&Ee&&b&&(0,_display_utils.isValidFetchUrl)(Ee,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI),ue=E.canvasFactory||new DefaultCanvasFactory({ownerDocument:Ce}),ie=E.filterFactory||new DefaultFilterFactory({docId:D,ownerDocument:Ce}),ne=null;(0,_util.setVerbosityLevel)(ce);const ve={canvasFactory:ue,filterFactory:ie};if(fe||(ve.cMapReaderFactory=new B({baseUrl:Ee,isCompressed:xe}),ve.standardFontDataFactory=new T({baseUrl:b})),!H){const Be={verbosity:ce,port:_worker_options.GlobalWorkerOptions.workerPort};H=Be.port?PDFWorker.fromPort(Be):new PDFWorker(Be),y._worker=H}const Me={docId:D,apiVersion:"3.11.174",data:z,password:X,disableAutoFetch:_e,rangeChunkSize:q,length:Ie,docBaseUrl:K,enableXfa:me,evaluatorOptions:{maxImageSize:I,disableFontFace:re,ignoreErrors:C,isEvalSupported:N,isOffscreenCanvasSupported:j,canvasMaxAreaInBytes:Z,fontExtraProperties:be,useSystemFonts:Fe,cMapUrl:fe?Ee:null,standardFontDataUrl:fe?b:null}},Re={ignoreErrors:C,isEvalSupported:N,disableFontFace:re,fontExtraProperties:be,enableXfa:me,ownerDocument:Ce,disableAutoFetch:_e,pdfBug:Le,styleElement:ne};return H.promise.then(function(){if(y.destroyed)throw new Error("Loading aborted");const Be=_fetchDocument(H,Me),He=new Promise(function(qe){let Ge;J?Ge=new _transport_stream.PDFDataTransportStream({length:Ie,initialData:J.initialData,progressiveDone:J.progressiveDone,contentDispositionFilename:J.contentDispositionFilename,disableRange:ae,disableStream:we},J):z||(Ge=(Ke=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ke):(0,_display_utils.isValidFetchUrl)(Ke.url)?new _displayFetch_stream.PDFFetchStream(Ke):new _displayNetwork.PDFNetworkStream(Ke))({url:R,length:Ie,httpHeaders:te,withCredentials:O,rangeChunkSize:q,disableRange:ae,disableStream:we})),qe(Ge)});return Promise.all([Be,He]).then(function([qe,Ge]){if(y.destroyed)throw new Error("Loading aborted");const Qe=new _message_handler.MessageHandler(D,qe,H.port),Ke=new WorkerTransport(Qe,y,Ge,Re,ve);y._transport=Ke,Qe.send("Ready",null)})}).catch(y._capability.reject),y}async function _fetchDocument(E,y){if(E.destroyed)throw new Error("Worker was destroyed");const D=await E.messageHandler.sendWithPromise("GetDocRequest",y,y.data?[y.data.buffer]:null);if(E.destroyed)throw new Error("Worker was destroyed");return D}function getUrlProp(E){if(E instanceof URL)return E.href;try{return new URL(E,window.location).href}catch{if(_util.isNodeJS&&typeof E=="string")return E}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(E){if(_util.isNodeJS&&typeof Buffer<"u"&&E instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength)return E;if(typeof E=="string")return(0,_util.stringToBytes)(E);if(typeof E=="object"&&!isNaN(E==null?void 0:E.length)||(0,_util.isArrayBuffer)(E))return new Uint8Array(E);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ht(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var y,D,R;this.destroyed=!0;try{(y=this._worker)!=null&&y.port&&(this._worker._pendingDestroy=!0),await((D=this._transport)==null?void 0:D.destroy())}catch(z){throw(R=this._worker)!=null&&R.port&&delete this._worker._pendingDestroy,z}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,$(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(y,D,R=!1,z=null){this.length=y,this.initialData=D,this.progressiveDone=R,this.contentDispositionFilename=z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(y){this._rangeListeners.push(y)}addProgressListener(y){this._progressListeners.push(y)}addProgressiveReadListener(y){this._progressiveReadListeners.push(y)}addProgressiveDoneListener(y){this._progressiveDoneListeners.push(y)}onDataRange(y,D){for(const R of this._rangeListeners)R(y,D)}onDataProgress(y,D){this._readyCapability.promise.then(()=>{for(const R of this._progressListeners)R(y,D)})}onDataProgressiveRead(y){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(y)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const y of this._progressiveDoneListeners)y()})}transportReady(){this._readyCapability.resolve()}requestDataRange(y,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(y,D){this._pdfInfo=y,this._transport=D,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(R=>{if(!R)return R;const z=[];for(const te in R)z.push(...R[te]);return z}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(y){return this._transport.getPage(y)}getPageIndex(y){return this._transport.getPageIndex(y)}getDestinations(){return this._transport.getDestinations()}getDestination(y){return this._transport.getDestination(y)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(y=!1){return this._transport.startCleanup(y||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(y,D,R,z=!1){$(this,r);$(this,a);$(this,i,null);$(this,n,!1);this._pageIndex=y,this._pageInfo=D,this._transport=R,this._stats=z?new _display_utils.StatTimer:null,this._pdfBug=z,this.commonObjs=R.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:y,rotation:D=this.rotate,offsetX:R=0,offsetY:z=0,dontFlip:te=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:y,rotation:D,offsetX:R,offsetY:z,dontFlip:te})}getAnnotations({intent:y="display"}={}){const D=this._transport.getRenderingIntent(y);return this._transport.getAnnotations(this._pageIndex,D.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var y;return((y=this._transport._htmlForXfa)==null?void 0:y.children[this._pageIndex])||null}render({canvasContext:y,viewport:D,intent:R="display",annotationMode:z=_util.AnnotationMode.ENABLE,transform:te=null,background:O=null,optionalContentConfigPromise:X=null,annotationCanvasMap:J=null,pageColors:q=null,printAnnotationStorage:H=null}){var T,C;(T=this._stats)==null||T.time("Overall");const ce=this._transport.getRenderingIntent(R,z,H);ee(this,n,!1),G(this,a,kt).call(this),X||(X=this._transport.getOptionalContentConfig());let K=this._intentStates.get(ce.cacheKey);K||(K=Object.create(null),this._intentStates.set(ce.cacheKey,K)),K.streamReaderCancelTimeout&&(clearTimeout(K.streamReaderCancelTimeout),K.streamReaderCancelTimeout=null);const Ee=!!(ce.renderingIntent&_util.RenderingIntentFlag.PRINT);K.displayReadyCapability||(K.displayReadyCapability=new _util.PromiseCapability,K.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(ce));const xe=I=>{var N,j;K.renderTasks.delete(B),(this._maybeCleanupAfterRender||Ee)&&ee(this,n,!0),G(this,r,ft).call(this,!Ee),I?(B.capability.reject(I),this._abortOperatorList({intentState:K,reason:I instanceof Error?I:new Error(I)})):B.capability.resolve(),(N=this._stats)==null||N.timeEnd("Rendering"),(j=this._stats)==null||j.timeEnd("Overall")},B=new InternalRenderTask({callback:xe,params:{canvasContext:y,viewport:D,transform:te,background:O},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:K.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ee,pdfBug:this._pdfBug,pageColors:q});(K.renderTasks||(K.renderTasks=new Set)).add(B);const b=B.task;return Promise.all([K.displayReadyCapability.promise,X]).then(([I,N])=>{var j;if(this.destroyed){xe();return}(j=this._stats)==null||j.time("Rendering"),B.initializeGraphics({transparency:I,optionalContentConfig:N}),B.operatorListChanged()}).catch(xe),b}getOperatorList({intent:y="display",annotationMode:D=_util.AnnotationMode.ENABLE,printAnnotationStorage:R=null}={}){var J;function z(){O.operatorList.lastChunk&&(O.opListReadCapability.resolve(O.operatorList),O.renderTasks.delete(X))}const te=this._transport.getRenderingIntent(y,D,R,!0);let O=this._intentStates.get(te.cacheKey);O||(O=Object.create(null),this._intentStates.set(te.cacheKey,O));let X;return O.opListReadCapability||(X=Object.create(null),X.operatorListChanged=z,O.opListReadCapability=new _util.PromiseCapability,(O.renderTasks||(O.renderTasks=new Set)).add(X),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(te)),O.opListReadCapability.promise}streamTextContent({includeMarkedContent:y=!1,disableNormalization:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:y===!0,disableNormalization:D===!0},{highWaterMark:100,size(z){return z.items.length}})}getTextContent(y={}){if(this._transport._htmlForXfa)return this.getXfa().then(R=>_xfa_text.XfaText.textContent(R));const D=this.streamTextContent(y);return new Promise(function(R,z){function te(){O.read().then(function({value:J,done:q}){if(q){R(X);return}Object.assign(X.styles,J.styles),X.items.push(...J.items),te()},z)}const O=D.getReader(),X={items:[],styles:Object.create(null)};te()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const y=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const R of D.renderTasks)y.push(R.completed),R.cancel();return this.objs.clear(),ee(this,n,!1),G(this,a,kt).call(this),Promise.all(y)}cleanup(y=!1){ee(this,n,!0);const D=G(this,r,ft).call(this,!1);return y&&D&&this._stats&&(this._stats=new _display_utils.StatTimer),D}_startRenderPage(y,D){var z,te;const R=this._intentStates.get(D);R&&((z=this._stats)==null||z.timeEnd("Page Request"),(te=R.displayReadyCapability)==null||te.resolve(y))}_renderPageChunk(y,D){for(let R=0,z=y.length;R<z;R++)D.operatorList.fnArray.push(y.fnArray[R]),D.operatorList.argsArray.push(y.argsArray[R]);D.operatorList.lastChunk=y.lastChunk,D.operatorList.separateAnnots=y.separateAnnots;for(const R of D.renderTasks)R.operatorListChanged();y.lastChunk&&G(this,r,ft).call(this,!0)}_pumpOperatorList({renderingIntent:y,cacheKey:D,annotationStorageSerializable:R}){const{map:z,transfers:te}=R,X=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:y,cacheKey:D,annotationStorage:z},te).getReader(),J=this._intentStates.get(D);J.streamReader=X;const q=()=>{X.read().then(({value:H,done:ce})=>{if(ce){J.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,J),q())},H=>{if(J.streamReader=null,!this._transport.destroyed){if(J.operatorList){J.operatorList.lastChunk=!0;for(const ce of J.renderTasks)ce.operatorListChanged();G(this,r,ft).call(this,!0)}if(J.displayReadyCapability)J.displayReadyCapability.reject(H);else if(J.opListReadCapability)J.opListReadCapability.reject(H);else throw H}})};q()}_abortOperatorList({intentState:y,reason:D,force:R=!1}){if(y.streamReader){if(y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null),!R){if(y.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let z=RENDERING_CANCELLED_TIMEOUT;D.extraDelay>0&&D.extraDelay<1e3&&(z+=D.extraDelay),y.streamReaderCancelTimeout=setTimeout(()=>{y.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:y,reason:D,force:!0})},z);return}}if(y.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),y.streamReader=null,!this._transport.destroyed){for(const[z,te]of this._intentStates)if(te===y){this._intentStates.delete(z);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,n=new WeakMap,r=new WeakSet,ft=function(y=!1){if(G(this,a,kt).call(this),!o(this,n)||this.destroyed)return!1;if(y)return ee(this,i,setTimeout(()=>{ee(this,i,null),G(this,r,ft).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:D,operatorList:R}of this._intentStates.values())if(D.size>0||!R.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ee(this,n,!1),!0},a=new WeakSet,kt=function(){o(this,i)&&(clearTimeout(o(this,i)),ee(this,i,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){$(this,f,new Set);$(this,u,Promise.resolve())}postMessage(y,D){const R={data:structuredClone(y,D?{transfer:D}:null)};o(this,u).then(()=>{for(const z of o(this,f))z.call(this,R)})}addEventListener(y,D){o(this,f).add(D)}removeEventListener(y,D){o(this,f).delete(D)}terminate(){o(this,f).clear()}}f=new WeakMap,u=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const E=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;E&&(PDFWorkerUtil.fallbackWorkerSrc=E.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(E,y){let D;try{if(D=new URL(E),!D.origin||D.origin==="null")return!1}catch{return!1}const R=new URL(y,D);return D.origin===R.origin},PDFWorkerUtil.createCDNWrapper=function(E){const y=`importScripts("${E}");`;return URL.createObjectURL(new Blob([y]))}}const _PDFWorker=class _PDFWorker{constructor({name:E=null,port:y=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){var R;if(this.name=E,this.destroyed=!1,this.verbosity=D,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,y){if((R=o(_PDFWorker,m))!=null&&R.has(y))throw new Error("Cannot use more than one PDFWorker per port.");(o(_PDFWorker,m)||ee(_PDFWorker,m,new WeakMap)).set(y,this),this._initializeFromPort(y);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(E){this._port=E,this._messageHandler=new _message_handler.MessageHandler("main","worker",E),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:E}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,E)||(E=PDFWorkerUtil.createCDNWrapper(new URL(E,window.location).href));const y=new Worker(E),D=new _message_handler.MessageHandler("main","worker",y),R=()=>{y.removeEventListener("error",z),D.destroy(),y.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},z=()=>{this._webWorker||R()};y.addEventListener("error",z),D.on("test",O=>{if(y.removeEventListener("error",z),this.destroyed){R();return}O?(this._messageHandler=D,this._port=y,this._webWorker=y,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),y.terminate())}),D.on("ready",O=>{if(y.removeEventListener("error",z),this.destroyed){R();return}try{te()}catch{this._setupFakeWorker()}});const te=()=>{const O=new Uint8Array;D.send("test",O,[O.buffer])};te();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(E=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const y=new LoopbackPort;this._port=y;const D=`fake${PDFWorkerUtil.fakeWorkerId++}`,R=new _message_handler.MessageHandler(D+"_worker",D,y);E.setup(R,y);const z=new _message_handler.MessageHandler(D,D+"_worker",y);this._messageHandler=z,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})}).catch(E=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${E.message}".`))})}destroy(){var E;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(E=o(_PDFWorker,m))==null||E.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(E){var D;if(!(E!=null&&E.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const y=(D=o(this,m))==null?void 0:D.get(E.port);if(y){if(y._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return y}return new _PDFWorker(E)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var E;try{return((E=globalThis.pdfjsWorker)==null?void 0:E.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};m=new WeakMap,$(_PDFWorker,m,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(y,D,R,z,te){$(this,v);$(this,p,new Map);$(this,_,new Map);$(this,g,new Map);$(this,P,null);this.messageHandler=y,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:z.ownerDocument,styleElement:z.styleElement}),this._params=z,this.canvasFactory=te.canvasFactory,this.filterFactory=te.filterFactory,this.cMapReaderFactory=te.cMapReaderFactory,this.standardFontDataFactory=te.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=R,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(y,D=_util.AnnotationMode.ENABLE,R=null,z=!1){let te=_util.RenderingIntentFlag.DISPLAY,O=_annotation_storage.SerializableEmpty;switch(y){case"any":te=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":te=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${y}`)}switch(D){case _util.AnnotationMode.DISABLE:te+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:te+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:te+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,O=(te&_util.RenderingIntentFlag.PRINT&&R instanceof _annotation_storage.PrintAnnotationStorage?R:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return z&&(te+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:te,cacheKey:`${te}_${O.hash}`,annotationStorageSerializable:O}}destroy(){var R;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(R=o(this,P))==null||R.reject(new Error("Worker was destroyed during onPassword callback"));const y=[];for(const z of o(this,_).values())y.push(z._destroy());o(this,_).clear(),o(this,g).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return y.push(D),Promise.all(y).then(()=>{var z;this.commonObjs.clear(),this.fontLoader.clear(),o(this,p).clear(),this.filterFactory.destroy(),(z=this._networkStream)==null||z.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:y,loadingTask:D}=this;y.on("GetReader",(R,z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=te=>{this._lastProgress={loaded:te.loaded,total:te.total}},z.onPull=()=>{this._fullReader.read().then(function({value:te,done:O}){if(O){z.close();return}(0,_util.assert)(te instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(te),1,[te])}).catch(te=>{z.error(te)})},z.onCancel=te=>{this._fullReader.cancel(te),z.ready.catch(O=>{if(!this.destroyed)throw O})}}),y.on("ReaderHeadersReady",R=>{const z=new _util.PromiseCapability,te=this._fullReader;return te.headersReady.then(()=>{var O;(!te.isStreamingSupported||!te.isRangeSupported)&&(this._lastProgress&&((O=D.onProgress)==null||O.call(D,this._lastProgress)),te.onProgress=X=>{var J;(J=D.onProgress)==null||J.call(D,{loaded:X.loaded,total:X.total})}),z.resolve({isStreamingSupported:te.isStreamingSupported,isRangeSupported:te.isRangeSupported,contentLength:te.contentLength})},z.reject),z.promise}),y.on("GetRangeReader",(R,z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const te=this._networkStream.getRangeReader(R.begin,R.end);if(!te){z.close();return}z.onPull=()=>{te.read().then(function({value:O,done:X}){if(X){z.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{z.error(O)})},z.onCancel=O=>{te.cancel(O),z.ready.catch(X=>{if(!this.destroyed)throw X})}}),y.on("GetDoc",({pdfInfo:R})=>{this._numPages=R.numPages,this._htmlForXfa=R.htmlForXfa,delete R.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(R,this))}),y.on("DocException",function(R){let z;switch(R.name){case"PasswordException":z=new _util.PasswordException(R.message,R.code);break;case"InvalidPDFException":z=new _util.InvalidPDFException(R.message);break;case"MissingPDFException":z=new _util.MissingPDFException(R.message);break;case"UnexpectedResponseException":z=new _util.UnexpectedResponseException(R.message,R.status);break;case"UnknownErrorException":z=new _util.UnknownErrorException(R.message,R.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(z)}),y.on("PasswordRequest",R=>{if(ee(this,P,new _util.PromiseCapability),D.onPassword){const z=te=>{te instanceof Error?o(this,P).reject(te):o(this,P).resolve({password:te})};try{D.onPassword(z,R.code)}catch(te){o(this,P).reject(te)}}else o(this,P).reject(new _util.PasswordException(R.message,R.code));return o(this,P).promise}),y.on("DataLoaded",R=>{var z;(z=D.onProgress)==null||z.call(D,{loaded:R.length,total:R.length}),this.downloadInfoCapability.resolve(R)}),y.on("StartRenderPage",R=>{if(this.destroyed)return;o(this,_).get(R.pageIndex)._startRenderPage(R.transparency,R.cacheKey)}),y.on("commonobj",([R,z,te])=>{var O;if(!this.destroyed&&!this.commonObjs.has(R))switch(z){case"Font":const X=this._params;if("error"in te){const H=te.error;(0,_util.warn)(`Error during font loading: ${H}`),this.commonObjs.resolve(R,H);break}const J=X.pdfBug&&((O=globalThis.FontInspector)!=null&&O.enabled)?(H,ce)=>globalThis.FontInspector.fontAdded(H,ce):null,q=new _font_loader.FontFaceObject(te,{isEvalSupported:X.isEvalSupported,disableFontFace:X.disableFontFace,ignoreErrors:X.ignoreErrors,inspectFont:J});this.fontLoader.bind(q).catch(H=>y.sendWithPromise("FontFallback",{id:R})).finally(()=>{!X.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(R,q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(R,te);break;default:throw new Error(`Got unknown common object type ${z}`)}}),y.on("obj",([R,z,te,O])=>{var J;if(this.destroyed)return;const X=o(this,_).get(z);if(!X.objs.has(R))switch(te){case"Image":if(X.objs.resolve(R,O),O){let q;if(O.bitmap){const{width:H,height:ce}=O;q=H*ce*4}else q=((J=O.data)==null?void 0:J.length)||0;q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(X._maybeCleanupAfterRender=!0)}break;case"Pattern":X.objs.resolve(R,O);break;default:throw new Error(`Got unknown object type ${te}`)}}),y.on("DocProgress",R=>{var z;this.destroyed||(z=D.onProgress)==null||z.call(D,{loaded:R.loaded,total:R.total})}),y.on("FetchBuiltInCMap",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(R):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),y.on("FetchStandardFontData",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(R):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var R;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:y,transfers:D}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:y,filename:((R=this._fullReader)==null?void 0:R.filename)??null},D).finally(()=>{this.annotationStorage.resetModified()})}getPage(y){if(!Number.isInteger(y)||y<=0||y>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=y-1,R=o(this,g).get(D);if(R)return R;const z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then(te=>{if(this.destroyed)throw new Error("Transport destroyed");const O=new PDFPageProxy(D,te,this,this._params.pdfBug);return o(this,_).set(D,O),O});return o(this,g).set(D,z),z}getPageIndex(y){return typeof y!="object"||y===null||!Number.isInteger(y.num)||y.num<0||!Number.isInteger(y.gen)||y.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:y.num,gen:y.gen})}getAnnotations(y,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:y,intent:D})}getFieldObjects(){return G(this,v,Ft).call(this,"GetFieldObjects")}hasJSActions(){return G(this,v,Ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(y){return typeof y!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:y})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return G(this,v,Ft).call(this,"GetDocJSActions")}getPageJSActions(y){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:y})}getStructTree(y){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:y})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(y=>new _optional_content_config.OptionalContentConfig(y))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const y="GetMetadata",D=o(this,p).get(y);if(D)return D;const R=this.messageHandler.sendWithPromise(y,null).then(z=>{var te,O;return{info:z[0],metadata:z[1]?new _metadata.Metadata(z[1]):null,contentDispositionFilename:((te=this._fullReader)==null?void 0:te.filename)??null,contentLength:((O=this._fullReader)==null?void 0:O.contentLength)??null}});return o(this,p).set(y,R),R}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(y=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const D of o(this,_).values())if(!D.cleanup())throw new Error(`startCleanup: Page ${D.pageNumber} is currently rendering.`);this.commonObjs.clear(),y||this.fontLoader.clear(),o(this,p).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:y,enableXfa:D}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:y,enableXfa:D})}}p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakSet,Ft=function(y,D=null){const R=o(this,p).get(y);if(R)return R;const z=this.messageHandler.sendWithPromise(y,D);return o(this,p).set(y,z),z};class PDFObjects{constructor(){$(this,w);$(this,F,Object.create(null))}get(y,D=null){if(D){const z=G(this,w,Zt).call(this,y);return z.capability.promise.then(()=>D(z.data)),null}const R=o(this,F)[y];if(!(R!=null&&R.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${y}.`);return R.data}has(y){const D=o(this,F)[y];return(D==null?void 0:D.capability.settled)||!1}resolve(y,D=null){const R=G(this,w,Zt).call(this,y);R.data=D,R.capability.resolve()}clear(){var y;for(const D in o(this,F)){const{data:R}=o(this,F)[D];(y=R==null?void 0:R.bitmap)==null||y.close()}ee(this,F,Object.create(null))}}F=new WeakMap,w=new WeakSet,Zt=function(y){var D;return(D=o(this,F))[y]||(D[y]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(y){$(this,h,null);ee(this,h,y),this.onContinue=null}get promise(){return o(this,h).capability.promise}cancel(y=0){o(this,h).cancel(null,y)}get separateAnnots(){const{separateAnnots:y}=o(this,h).operatorList;if(!y)return!1;const{annotationCanvasMap:D}=o(this,h);return y.form||y.canvas&&(D==null?void 0:D.size)>0}}h=new WeakMap,exports.RenderTask=RenderTask;const M=class M{constructor({callback:y,params:D,objs:R,commonObjs:z,annotationCanvasMap:te,operatorList:O,pageIndex:X,canvasFactory:J,filterFactory:q,useRequestAnimationFrame:H=!1,pdfBug:ce=!1,pageColors:K=null}){this.callback=y,this.params=D,this.objs=R,this.commonObjs=z,this.annotationCanvasMap=te,this.operatorListIdx=null,this.operatorList=O,this._pageIndex=X,this.canvasFactory=J,this.filterFactory=q,this._pdfBug=ce,this.pageColors=K,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=H===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:y=!1,optionalContentConfig:D}){var X,J;if(this.cancelled)return;if(this._canvas){if(o(M,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(M,d).add(this._canvas)}this._pdfBug&&((X=globalThis.StepperManager)!=null&&X.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:R,viewport:z,transform:te,background:O}=this.params;this.gfx=new _canvas.CanvasGraphics(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:te,viewport:z,transparency:y,background:O}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(y=null,D=0){var R;this.running=!1,this.cancelled=!0,(R=this.gfx)==null||R.endDrawing(),o(M,d).delete(this._canvas),this.callback(y||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,D))}operatorListChanged(){var y;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(y=this.stepper)==null||y.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(M,d).delete(this._canvas),this.callback())))}};d=new WeakMap,$(M,d,new WeakSet);let InternalRenderTask=M;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,i)=>{var u,l,m,ni,_;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=i(1),r=i(4),s=i(8);const a=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=a;class c{constructor(){$(this,m);$(this,u,!1);$(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(P,v){const L=o(this,l).get(P);return L===void 0?v:Object.assign(v,L)}getRawValue(P){return o(this,l).get(P)}remove(P){if(o(this,l).delete(P),o(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of o(this,l).values())if(v instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(P,v){const L=o(this,l).get(P);let F=!1;if(L!==void 0)for(const[w,x]of Object.entries(v))L[w]!==x&&(F=!0,L[w]=x);else F=!0,o(this,l).set(P,v);F&&G(this,m,ni).call(this),v instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(P){return o(this,l).has(P)}getAll(){return o(this,l).size>0?(0,n.objectFromMap)(o(this,l)):null}setAll(P){for(const[v,L]of Object.entries(P))this.setValue(v,L)}get size(){return o(this,l).size}resetModified(){o(this,u)&&(ee(this,u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f(this)}get serializable(){if(o(this,l).size===0)return a;const P=new Map,v=new s.MurmurHash3_64,L=[],F=Object.create(null);let w=!1;for(const[x,h]of o(this,l)){const d=h instanceof r.AnnotationEditor?h.serialize(!1,F):h;d&&(P.set(x,d),v.update(`${x}:${JSON.stringify(d)}`),w||(w=!!d.bitmap))}if(w)for(const x of P.values())x.bitmap&&L.push(x.bitmap);return P.size>0?{map:P,hash:v.hexdigest(),transfers:L}:a}}u=new WeakMap,l=new WeakMap,m=new WeakSet,ni=function(){o(this,u)||(ee(this,u,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=c;class f extends c{constructor(v){super();$(this,_,void 0);const{map:L,hash:F,transfers:w}=v.serializable,x=structuredClone(L,w?{transfer:w}:null);ee(this,_,{map:x,hash:F,transfers:w})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,_)}}_=new WeakMap,t.PrintAnnotationStorage=f},(e,t,i)=>{var f,u,l,m,p,_,g,P,v,L,F,w,x,h,d,Qt,E,Jt,D,en,z,tn,O,ii,J,ri,H,si,K,nn,xe,ai;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=i(5),r=i(1),s=i(6);const b=class b{constructor(C){$(this,d);$(this,E);$(this,z);$(this,O);$(this,J);$(this,H);$(this,K);$(this,xe);$(this,f,"");$(this,u,!1);$(this,l,null);$(this,m,null);$(this,p,null);$(this,_,!1);$(this,g,null);$(this,P,this.focusin.bind(this));$(this,v,this.focusout.bind(this));$(this,L,!1);$(this,F,!1);$(this,w,!1);se(this,"_initialOptions",Object.create(null));se(this,"_uiManager",null);se(this,"_focusEventsAllowed",!0);se(this,"_l10nPromise",null);$(this,x,!1);$(this,h,b._zIndex++);this.constructor===b&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=C.parent,this.id=C.id,this.width=this.height=null,this.pageIndex=C.parent.pageIndex,this.name=C.name,this.div=null,this._uiManager=C.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=C.isCentered,this._structTreeParentId=null;const{rotation:I,rawDims:{pageWidth:N,pageHeight:j,pageX:Z,pageY:re}}=this.parent.viewport;this.rotation=I,this.pageRotation=(360+I-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[N,j],this.pageTranslation=[Z,re];const[be,me]=this.parentDimensions;this.x=C.x/be,this.y=C.y/me,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(C){const I=new c({id:C.parent.getNextId(),parent:C.parent,uiManager:C._uiManager});I.annotationElementId=C.annotationElementId,I.deleted=!0,I._uiManager.addToAnnotationStorage(I)}static initialize(C,I=null){if(b._l10nPromise||(b._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(j=>[j,C.get(j)]))),I!=null&&I.strings)for(const j of I.strings)b._l10nPromise.set(j,C.get(j));if(b._borderLineWidth!==-1)return;const N=getComputedStyle(document.documentElement);b._borderLineWidth=parseFloat(N.getPropertyValue("--outline-width"))||0}static updateDefaultParams(C,I){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(C){return!1}static paste(C,I){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,x)}set _isDraggable(C){var I;ee(this,x,C),(I=this.div)==null||I.classList.toggle("draggable",C)}center(){const[C,I]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*I/(C*2),this.y+=this.width*C/(I*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*I/(C*2),this.y-=this.width*C/(I*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(C){this._uiManager.addCommands(C)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,h)}setParent(C){C!==null&&(this.pageIndex=C.pageIndex,this.pageDimensions=C.pageDimensions),this.parent=C}focusin(C){this._focusEventsAllowed&&(o(this,L)?ee(this,L,!1):this.parent.setSelected(this))}focusout(C){var N;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const I=C.relatedTarget;I!=null&&I.closest(`#${this.id}`)||(C.preventDefault(),(N=this.parent)!=null&&N.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(C,I,N,j){const[Z,re]=this.parentDimensions;[N,j]=this.screenToPageTranslation(N,j),this.x=(C+N)/Z,this.y=(I+j)/re,this.fixAndSetPosition()}translate(C,I){G(this,d,Qt).call(this,this.parentDimensions,C,I)}translateInPage(C,I){G(this,d,Qt).call(this,this.pageDimensions,C,I),this.div.scrollIntoView({block:"nearest"})}drag(C,I){const[N,j]=this.parentDimensions;if(this.x+=C/N,this.y+=I/j,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Ce,y:ae}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Ce,ae)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Z,y:re}=this;const[be,me]=G(this,E,Jt).call(this);Z+=be,re+=me,this.div.style.left=`${(100*Z).toFixed(2)}%`,this.div.style.top=`${(100*re).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[C,I]=this.pageDimensions;let{x:N,y:j,width:Z,height:re}=this;switch(Z*=C,re*=I,N*=C,j*=I,this.rotation){case 0:N=Math.max(0,Math.min(C-Z,N)),j=Math.max(0,Math.min(I-re,j));break;case 90:N=Math.max(0,Math.min(C-re,N)),j=Math.min(I,Math.max(Z,j));break;case 180:N=Math.min(C,Math.max(Z,N)),j=Math.min(I,Math.max(re,j));break;case 270:N=Math.min(C,Math.max(re,N)),j=Math.max(0,Math.min(I-Z,j));break}this.x=N/=C,this.y=j/=I;const[be,me]=G(this,E,Jt).call(this);N+=be,j+=me;const{style:Ce}=this.div;Ce.left=`${(100*N).toFixed(2)}%`,Ce.top=`${(100*j).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(C,I){var N;return G(N=b,D,en).call(N,C,I,this.parentRotation)}pageTranslationToScreen(C,I){var N;return G(N=b,D,en).call(N,C,I,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:C,pageDimensions:[I,N]}=this,j=I*C,Z=N*C;return r.FeatureTest.isCSSRoundSupported?[Math.round(j),Math.round(Z)]:[j,Z]}setDims(C,I){var Z;const[N,j]=this.parentDimensions;this.div.style.width=`${(100*C/N).toFixed(2)}%`,o(this,_)||(this.div.style.height=`${(100*I/j).toFixed(2)}%`),(Z=o(this,l))==null||Z.classList.toggle("small",C<b.SMALL_EDITOR_SIZE||I<b.SMALL_EDITOR_SIZE)}fixDims(){const{style:C}=this.div,{height:I,width:N}=C,j=N.endsWith("%"),Z=!o(this,_)&&I.endsWith("%");if(j&&Z)return;const[re,be]=this.parentDimensions;j||(C.width=`${(100*parseFloat(N)/re).toFixed(2)}%`),!o(this,_)&&!Z&&(C.height=`${(100*parseFloat(I)/be).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(o(this,l))return;const C=ee(this,l,document.createElement("button"));C.className="altText";const I=await b._l10nPromise.get("editor_alt_text_button_label");C.textContent=I,C.setAttribute("aria-label",I),C.tabIndex="0",C.addEventListener("contextmenu",s.noContextMenu),C.addEventListener("pointerdown",N=>N.stopPropagation()),C.addEventListener("click",N=>{N.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),C.addEventListener("keydown",N=>{N.target===C&&N.key==="Enter"&&(N.preventDefault(),this._uiManager.editAltText(this))}),G(this,K,nn).call(this),this.div.append(C),b.SMALL_EDITOR_SIZE||(b.SMALL_EDITOR_SIZE=Math.min(128,Math.round(C.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:o(this,f),decorative:o(this,u)}}set altTextData({altText:C,decorative:I}){o(this,f)===C&&o(this,u)===I||(ee(this,f,C),ee(this,u,I),G(this,K,nn).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",o(this,P)),this.div.addEventListener("focusout",o(this,v));const[C,I]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*I/C).toFixed(2)}%`,this.div.style.maxHeight=`${(100*C/I).toFixed(2)}%`);const[N,j]=this.getInitialTranslation();return this.translate(N,j),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(C){const{isMac:I}=r.FeatureTest.platform;if(C.button!==0||C.ctrlKey&&I){C.preventDefault();return}ee(this,L,!0),G(this,xe,ai).call(this,C)}moveInDOM(){var C;(C=this.parent)==null||C.moveEditorInDOM(this)}_setParentAndPosition(C,I,N){C.changeParent(this),this.x=I,this.y=N,this.fixAndSetPosition()}getRect(C,I){const N=this.parentScale,[j,Z]=this.pageDimensions,[re,be]=this.pageTranslation,me=C/N,Ce=I/N,ae=this.x*j,we=this.y*Z,_e=this.width*j,Le=this.height*Z;switch(this.rotation){case 0:return[ae+me+re,Z-we-Ce-Le+be,ae+me+_e+re,Z-we-Ce+be];case 90:return[ae+Ce+re,Z-we+me+be,ae+Ce+Le+re,Z-we+me+_e+be];case 180:return[ae-me-_e+re,Z-we+Ce+be,ae-me+re,Z-we+Ce+Le+be];case 270:return[ae-Ce-Le+re,Z-we-me-_e+be,ae-Ce+re,Z-we-me+be];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(C,I){const[N,j,Z,re]=C,be=Z-N,me=re-j;switch(this.rotation){case 0:return[N,I-re,be,me];case 90:return[N,I-j,me,be];case 180:return[Z,I-j,be,me];case 270:return[Z,I-re,me,be];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ee(this,w,!0)}disableEditMode(){ee(this,w,!1)}isInEditMode(){return o(this,w)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var C,I;(C=this.div)==null||C.addEventListener("focusin",o(this,P)),(I=this.div)==null||I.addEventListener("focusout",o(this,v))}serialize(C=!1,I=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(C,I,N){const j=new this.prototype.constructor({parent:I,id:I.getNextId(),uiManager:N});j.rotation=C.rotation;const[Z,re]=j.pageDimensions,[be,me,Ce,ae]=j.getRectInCurrentCoords(C.rect,re);return j.x=be/Z,j.y=me/re,j.width=Ce/Z,j.height=ae/re,j}remove(){var C;this.div.removeEventListener("focusin",o(this,P)),this.div.removeEventListener("focusout",o(this,v)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(C=o(this,l))==null||C.remove(),ee(this,l,null),ee(this,m,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(G(this,O,ii).call(this),o(this,g).classList.remove("hidden"))}select(){var C;this.makeResizable(),(C=this.div)==null||C.classList.add("selectedEditor")}unselect(){var C,I,N;(C=o(this,g))==null||C.classList.add("hidden"),(I=this.div)==null||I.classList.remove("selectedEditor"),(N=this.div)!=null&&N.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(C,I){}disableEditing(){o(this,l)&&(o(this,l).hidden=!0)}enableEditing(){o(this,l)&&(o(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return o(this,F)}set isEditing(C){ee(this,F,C),this.parent&&(C?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(C,I){ee(this,_,!0);const N=C/I,{style:j}=this.div;j.aspectRatio=N,j.height="auto"}static get MIN_SIZE(){return 16}};f=new WeakMap,u=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,F=new WeakMap,w=new WeakMap,x=new WeakMap,h=new WeakMap,d=new WeakSet,Qt=function([C,I],N,j){[N,j]=this.screenToPageTranslation(N,j),this.x+=N/C,this.y+=j/I,this.fixAndSetPosition()},E=new WeakSet,Jt=function(){const[C,I]=this.parentDimensions,{_borderLineWidth:N}=b,j=N/C,Z=N/I;switch(this.rotation){case 90:return[-j,Z];case 180:return[j,Z];case 270:return[j,-Z];default:return[-j,-Z]}},D=new WeakSet,en=function(C,I,N){switch(N){case 90:return[I,-C];case 180:return[-C,-I];case 270:return[-I,C];default:return[C,I]}},z=new WeakSet,tn=function(C){switch(C){case 90:{const[I,N]=this.pageDimensions;return[0,-I/N,N/I,0]}case 180:return[-1,0,0,-1];case 270:{const[I,N]=this.pageDimensions;return[0,I/N,-N/I,0]}default:return[1,0,0,1]}},O=new WeakSet,ii=function(){if(o(this,g))return;ee(this,g,document.createElement("div")),o(this,g).classList.add("resizers");const C=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||C.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const I of C){const N=document.createElement("div");o(this,g).append(N),N.classList.add("resizer",I),N.addEventListener("pointerdown",G(this,J,ri).bind(this,I)),N.addEventListener("contextmenu",s.noContextMenu)}this.div.prepend(o(this,g))},J=new WeakSet,ri=function(C,I){I.preventDefault();const{isMac:N}=r.FeatureTest.platform;if(I.button!==0||I.ctrlKey&&N)return;const j=G(this,H,si).bind(this,C),Z=this._isDraggable;this._isDraggable=!1;const re={passive:!0,capture:!0};window.addEventListener("pointermove",j,re);const be=this.x,me=this.y,Ce=this.width,ae=this.height,we=this.parent.div.style.cursor,_e=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(I.target).cursor;const Le=()=>{this._isDraggable=Z,window.removeEventListener("pointerup",Le),window.removeEventListener("blur",Le),window.removeEventListener("pointermove",j,re),this.parent.div.style.cursor=we,this.div.style.cursor=_e;const Ie=this.x,Fe=this.y,fe=this.width,ue=this.height;Ie===be&&Fe===me&&fe===Ce&&ue===ae||this.addCommands({cmd:()=>{this.width=fe,this.height=ue,this.x=Ie,this.y=Fe;const[ie,ne]=this.parentDimensions;this.setDims(ie*fe,ne*ue),this.fixAndSetPosition()},undo:()=>{this.width=Ce,this.height=ae,this.x=be,this.y=me;const[ie,ne]=this.parentDimensions;this.setDims(ie*Ce,ne*ae),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Le),window.addEventListener("blur",Le)},H=new WeakSet,si=function(C,I){const[N,j]=this.parentDimensions,Z=this.x,re=this.y,be=this.width,me=this.height,Ce=b.MIN_SIZE/N,ae=b.MIN_SIZE/j,we=he=>Math.round(he*1e4)/1e4,_e=G(this,z,tn).call(this,this.rotation),Le=(he,le)=>[_e[0]*he+_e[2]*le,_e[1]*he+_e[3]*le],Ie=G(this,z,tn).call(this,360-this.rotation),Fe=(he,le)=>[Ie[0]*he+Ie[2]*le,Ie[1]*he+Ie[3]*le];let fe,ue,ie=!1,ne=!1;switch(C){case"topLeft":ie=!0,fe=(he,le)=>[0,0],ue=(he,le)=>[he,le];break;case"topMiddle":fe=(he,le)=>[he/2,0],ue=(he,le)=>[he/2,le];break;case"topRight":ie=!0,fe=(he,le)=>[he,0],ue=(he,le)=>[0,le];break;case"middleRight":ne=!0,fe=(he,le)=>[he,le/2],ue=(he,le)=>[0,le/2];break;case"bottomRight":ie=!0,fe=(he,le)=>[he,le],ue=(he,le)=>[0,0];break;case"bottomMiddle":fe=(he,le)=>[he/2,le],ue=(he,le)=>[he/2,0];break;case"bottomLeft":ie=!0,fe=(he,le)=>[0,le],ue=(he,le)=>[he,0];break;case"middleLeft":ne=!0,fe=(he,le)=>[0,le/2],ue=(he,le)=>[he,le/2];break}const ve=fe(be,me),Me=ue(be,me);let Re=Le(...Me);const Be=we(Z+Re[0]),He=we(re+Re[1]);let qe=1,Ge=1,[Qe,Ke]=this.screenToPageTranslation(I.movementX,I.movementY);if([Qe,Ke]=Fe(Qe/N,Ke/j),ie){const he=Math.hypot(be,me);qe=Ge=Math.max(Math.min(Math.hypot(Me[0]-ve[0]-Qe,Me[1]-ve[1]-Ke)/he,1/be,1/me),Ce/be,ae/me)}else ne?qe=Math.max(Ce,Math.min(1,Math.abs(Me[0]-ve[0]-Qe)))/be:Ge=Math.max(ae,Math.min(1,Math.abs(Me[1]-ve[1]-Ke)))/me;const et=we(be*qe),Pe=we(me*Ge);Re=Le(...ue(et,Pe));const k=Be-Re[0],V=He-Re[1];this.width=et,this.height=Pe,this.x=k,this.y=V,this.setDims(N*et,j*Pe),this.fixAndSetPosition()},K=new WeakSet,nn=async function(){var N;const C=o(this,l);if(!C)return;if(!o(this,f)&&!o(this,u)){C.classList.remove("done"),(N=o(this,m))==null||N.remove();return}b._l10nPromise.get("editor_alt_text_edit_button_label").then(j=>{C.setAttribute("aria-label",j)});let I=o(this,m);if(!I){ee(this,m,I=document.createElement("span")),I.className="tooltip",I.setAttribute("role","tooltip");const j=I.id=`alt-text-tooltip-${this.id}`;C.setAttribute("aria-describedby",j);const Z=100;C.addEventListener("mouseenter",()=>{ee(this,p,setTimeout(()=>{ee(this,p,null),o(this,m).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Z))}),C.addEventListener("mouseleave",()=>{var re;clearTimeout(o(this,p)),ee(this,p,null),(re=o(this,m))==null||re.classList.remove("show")})}C.classList.add("done"),I.innerText=o(this,u)?await b._l10nPromise.get("editor_alt_text_decorative_tooltip"):o(this,f),I.parentNode||C.append(I)},xe=new WeakSet,ai=function(C){if(!this._isDraggable)return;const I=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let N,j;I&&(N={passive:!0,capture:!0},j=re=>{const[be,me]=this.screenToPageTranslation(re.movementX,re.movementY);this._uiManager.dragSelectedEditors(be,me)},window.addEventListener("pointermove",j,N));const Z=()=>{if(window.removeEventListener("pointerup",Z),window.removeEventListener("blur",Z),I&&window.removeEventListener("pointermove",j,N),ee(this,L,!1),!this._uiManager.endDragSession()){const{isMac:re}=r.FeatureTest.platform;C.ctrlKey&&!re||C.shiftKey||C.metaKey&&re?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Z),window.addEventListener("blur",Z)},$(b,D),se(b,"_borderLineWidth",-1),se(b,"_colorManager",new n.ColorManager),se(b,"_zIndex",1),se(b,"SMALL_EDITOR_SIZE",0);let a=b;t.AnnotationEditor=a;class c extends a{constructor(C){super(C),this.annotationElementId=C.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,i)=>{var _,g,P,v,L,rn,x,h,d,M,E,oi,R,z,te,O,X,J,q,H,ce,K,Ee,xe,B,b,T,C,I,N,j,Z,re,be,me,Ce,ae,we,_e,Le,Ie,Fe,fe,ue,ie,ne,ve,li,Re,sn,He,an,Ge,Lt,Ke,ln,Pe,cn,V,at,le,bt,ye,ci,de,ui,Ae,un,Ve,yt,Te,dn;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=s,t.opacityToHex=a;var n=i(1),r=i(6);function s(Q,S,U){for(const Y of U)S.addEventListener(Y,Q[Y].bind(Q))}function a(Q){return Math.round(Math.min(255,Math.max(1,255*Q))).toString(16).padStart(2,"0")}class c{constructor(){$(this,_,0)}getId(){return`${n.AnnotationEditorPrefix}${ht(this,_)._++}`}}_=new WeakMap;const w=class w{constructor(){$(this,L);$(this,g,(0,n.getUuid)());$(this,P,0);$(this,v,null)}static get _isSVGFittingCanvas(){const S='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Y=new OffscreenCanvas(1,3).getContext("2d"),oe=new Image;oe.src=S;const pe=oe.decode().then(()=>(Y.drawImage(oe,0,0,1,1,0,0,1,3),new Uint32Array(Y.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",pe)}async getFromFile(S){const{lastModified:U,name:Y,size:oe,type:pe}=S;return G(this,L,rn).call(this,`${U}_${Y}_${oe}_${pe}`,S)}async getFromUrl(S){return G(this,L,rn).call(this,S,S)}async getFromId(S){o(this,v)||ee(this,v,new Map);const U=o(this,v).get(S);return U?U.bitmap?(U.refCounter+=1,U):U.file?this.getFromFile(U.file):this.getFromUrl(U.url):null}getSvgUrl(S){const U=o(this,v).get(S);return U!=null&&U.isSvg?U.svgUrl:null}deleteId(S){o(this,v)||ee(this,v,new Map);const U=o(this,v).get(S);U&&(U.refCounter-=1,U.refCounter===0&&(U.bitmap=null))}isValidId(S){return S.startsWith(`image_${o(this,g)}_`)}};g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakSet,rn=async function(S,U){o(this,v)||ee(this,v,new Map);let Y=o(this,v).get(S);if(Y===null)return null;if(Y!=null&&Y.bitmap)return Y.refCounter+=1,Y;try{Y||(Y={bitmap:null,id:`image_${o(this,g)}_${ht(this,P)._++}`,refCounter:0,isSvg:!1});let oe;if(typeof U=="string"){Y.url=U;const pe=await fetch(U);if(!pe.ok)throw new Error(pe.statusText);oe=await pe.blob()}else oe=Y.file=U;if(oe.type==="image/svg+xml"){const pe=w._isSVGFittingCanvas,Se=new FileReader,De=new Image,$e=new Promise((Ne,Je)=>{De.onload=()=>{Y.bitmap=De,Y.isSvg=!0,Ne()},Se.onload=async()=>{const je=Y.svgUrl=Se.result;De.src=await pe?`${je}#svgView(preserveAspectRatio(none))`:je},De.onerror=Se.onerror=Je});Se.readAsDataURL(oe),await $e}else Y.bitmap=await createImageBitmap(oe);Y.refCounter=1}catch(oe){console.error(oe),Y=null}return o(this,v).set(S,Y),Y&&o(this,v).set(Y.id,Y),Y};let f=w;class u{constructor(S=128){$(this,x,[]);$(this,h,!1);$(this,d,void 0);$(this,M,-1);ee(this,d,S)}add({cmd:S,undo:U,mustExec:Y,type:oe=NaN,overwriteIfSameType:pe=!1,keepUndo:Se=!1}){if(Y&&S(),o(this,h))return;const De={cmd:S,undo:U,type:oe};if(o(this,M)===-1){o(this,x).length>0&&(o(this,x).length=0),ee(this,M,0),o(this,x).push(De);return}if(pe&&o(this,x)[o(this,M)].type===oe){Se&&(De.undo=o(this,x)[o(this,M)].undo),o(this,x)[o(this,M)]=De;return}const $e=o(this,M)+1;$e===o(this,d)?o(this,x).splice(0,1):(ee(this,M,$e),$e<o(this,x).length&&o(this,x).splice($e)),o(this,x).push(De)}undo(){o(this,M)!==-1&&(ee(this,h,!0),o(this,x)[o(this,M)].undo(),ee(this,h,!1),ee(this,M,o(this,M)-1))}redo(){o(this,M)<o(this,x).length-1&&(ee(this,M,o(this,M)+1),ee(this,h,!0),o(this,x)[o(this,M)].cmd(),ee(this,h,!1))}hasSomethingToUndo(){return o(this,M)!==-1}hasSomethingToRedo(){return o(this,M)<o(this,x).length-1}destroy(){ee(this,x,null)}}x=new WeakMap,h=new WeakMap,d=new WeakMap,M=new WeakMap,t.CommandManager=u;class l{constructor(S){$(this,E);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:U}=n.FeatureTest.platform;for(const[Y,oe,pe={}]of S)for(const Se of Y){const De=Se.startsWith("mac+");U&&De?(this.callbacks.set(Se.slice(4),{callback:oe,options:pe}),this.allKeys.add(Se.split("+").at(-1))):!U&&!De&&(this.callbacks.set(Se,{callback:oe,options:pe}),this.allKeys.add(Se.split("+").at(-1)))}}exec(S,U){if(!this.allKeys.has(U.key))return;const Y=this.callbacks.get(G(this,E,oi).call(this,U));if(!Y)return;const{callback:oe,options:{bubbles:pe=!1,args:Se=[],checker:De=null}}=Y;De&&!De(S,U)||(oe.bind(S,...Se)(),pe||(U.stopPropagation(),U.preventDefault()))}}E=new WeakSet,oi=function(S){S.altKey&&this.buffer.push("alt"),S.ctrlKey&&this.buffer.push("ctrl"),S.metaKey&&this.buffer.push("meta"),S.shiftKey&&this.buffer.push("shift"),this.buffer.push(S.key);const U=this.buffer.join("+");return this.buffer.length=0,U},t.KeyboardManager=l;const D=class D{get _colors(){const S=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(S),(0,n.shadow)(this,"_colors",S)}convert(S){const U=(0,r.getRGB)(S);if(!window.matchMedia("(forced-colors: active)").matches)return U;for(const[Y,oe]of this._colors)if(oe.every((pe,Se)=>pe===U[Se]))return D._colorsMapping.get(Y);return U}getHexCode(S){const U=this._colors.get(S);return U?n.Util.makeHexColor(...U):S}};se(D,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let m=D;t.ColorManager=m;const Ue=class Ue{constructor(S,U,Y,oe,pe,Se){$(this,ve);$(this,Re);$(this,He);$(this,Ge);$(this,Ke);$(this,Pe);$(this,V);$(this,le);$(this,ye);$(this,de);$(this,Ae);$(this,Ve);$(this,Te);$(this,R,null);$(this,z,new Map);$(this,te,new Map);$(this,O,null);$(this,X,null);$(this,J,new u);$(this,q,0);$(this,H,new Set);$(this,ce,null);$(this,K,null);$(this,Ee,new Set);$(this,xe,null);$(this,B,new c);$(this,b,!1);$(this,T,!1);$(this,C,null);$(this,I,n.AnnotationEditorType.NONE);$(this,N,new Set);$(this,j,null);$(this,Z,this.blur.bind(this));$(this,re,this.focus.bind(this));$(this,be,this.copy.bind(this));$(this,me,this.cut.bind(this));$(this,Ce,this.paste.bind(this));$(this,ae,this.keydown.bind(this));$(this,we,this.onEditingAction.bind(this));$(this,_e,this.onPageChanging.bind(this));$(this,Le,this.onScaleChanging.bind(this));$(this,Ie,this.onRotationChanging.bind(this));$(this,Fe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});$(this,fe,[0,0]);$(this,ue,null);$(this,ie,null);$(this,ne,null);ee(this,ie,S),ee(this,ne,U),ee(this,O,Y),this._eventBus=oe,this._eventBus._on("editingaction",o(this,we)),this._eventBus._on("pagechanging",o(this,_e)),this._eventBus._on("scalechanging",o(this,Le)),this._eventBus._on("rotationchanging",o(this,Ie)),ee(this,X,pe.annotationStorage),ee(this,xe,pe.filterFactory),ee(this,j,Se),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const S=Ue.prototype,U=pe=>{const{activeElement:Se}=document;return Se&&o(pe,ie).contains(Se)&&pe.hasSomethingToControl()},Y=this.TRANSLATE_SMALL,oe=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],S.selectAll],[["ctrl+z","mac+meta+z"],S.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],S.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],S.delete],[["Escape","mac+Escape"],S.unselectAll],[["ArrowLeft","mac+ArrowLeft"],S.translateSelectedEditors,{args:[-Y,0],checker:U}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],S.translateSelectedEditors,{args:[-oe,0],checker:U}],[["ArrowRight","mac+ArrowRight"],S.translateSelectedEditors,{args:[Y,0],checker:U}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],S.translateSelectedEditors,{args:[oe,0],checker:U}],[["ArrowUp","mac+ArrowUp"],S.translateSelectedEditors,{args:[0,-Y],checker:U}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],S.translateSelectedEditors,{args:[0,-oe],checker:U}],[["ArrowDown","mac+ArrowDown"],S.translateSelectedEditors,{args:[0,Y],checker:U}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],S.translateSelectedEditors,{args:[0,oe],checker:U}]]))}destroy(){G(this,Ge,Lt).call(this),G(this,Re,sn).call(this),this._eventBus._off("editingaction",o(this,we)),this._eventBus._off("pagechanging",o(this,_e)),this._eventBus._off("scalechanging",o(this,Le)),this._eventBus._off("rotationchanging",o(this,Ie));for(const S of o(this,te).values())S.destroy();o(this,te).clear(),o(this,z).clear(),o(this,Ee).clear(),ee(this,R,null),o(this,N).clear(),o(this,J).destroy(),o(this,O).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",o(this,j)?o(this,xe).addHCMFilter(o(this,j).foreground,o(this,j).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(o(this,ie)).direction)}editAltText(S){var U;(U=o(this,O))==null||U.editAltText(this,S)}onPageChanging({pageNumber:S}){ee(this,q,S-1)}focusMainContainer(){o(this,ie).focus()}findParent(S,U){for(const Y of o(this,te).values()){const{x:oe,y:pe,width:Se,height:De}=Y.div.getBoundingClientRect();if(S>=oe&&S<=oe+Se&&U>=pe&&U<=pe+De)return Y}return null}disableUserSelect(S=!1){o(this,ne).classList.toggle("noUserSelect",S)}addShouldRescale(S){o(this,Ee).add(S)}removeShouldRescale(S){o(this,Ee).delete(S)}onScaleChanging({scale:S}){this.commitOrRemove(),this.viewParameters.realScale=S*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const U of o(this,Ee))U.onScaleChanging()}onRotationChanging({pagesRotation:S}){this.commitOrRemove(),this.viewParameters.rotation=S}addToAnnotationStorage(S){!S.isEmpty()&&o(this,X)&&!o(this,X).has(S.id)&&o(this,X).setValue(S.id,S)}blur(){if(!this.hasSelection)return;const{activeElement:S}=document;for(const U of o(this,N))if(U.div.contains(S)){ee(this,C,[U,S]),U._focusEventsAllowed=!1;break}}focus(){if(!o(this,C))return;const[S,U]=o(this,C);ee(this,C,null),U.addEventListener("focusin",()=>{S._focusEventsAllowed=!0},{once:!0}),U.focus()}addEditListeners(){G(this,He,an).call(this),G(this,Ke,ln).call(this)}removeEditListeners(){G(this,Ge,Lt).call(this),G(this,Pe,cn).call(this)}copy(S){var Y;if(S.preventDefault(),(Y=o(this,R))==null||Y.commitOrRemove(),!this.hasSelection)return;const U=[];for(const oe of o(this,N)){const pe=oe.serialize(!0);pe&&U.push(pe)}U.length!==0&&S.clipboardData.setData("application/pdfjs",JSON.stringify(U))}cut(S){this.copy(S),this.delete()}paste(S){S.preventDefault();const{clipboardData:U}=S;for(const pe of U.items)for(const Se of o(this,K))if(Se.isHandlingMimeForPasting(pe.type)){Se.paste(pe,this.currentLayer);return}let Y=U.getData("application/pdfjs");if(!Y)return;try{Y=JSON.parse(Y)}catch(pe){(0,n.warn)(`paste: "${pe.message}".`);return}if(!Array.isArray(Y))return;this.unselectAll();const oe=this.currentLayer;try{const pe=[];for(const $e of Y){const Ne=oe.deserialize($e);if(!Ne)return;pe.push(Ne)}const Se=()=>{for(const $e of pe)G(this,Ae,un).call(this,$e);G(this,Te,dn).call(this,pe)},De=()=>{for(const $e of pe)$e.remove()};this.addCommands({cmd:Se,undo:De,mustExec:!0})}catch(pe){(0,n.warn)(`paste: "${pe.message}".`)}}keydown(S){var U;(U=this.getActive())!=null&&U.shouldGetKeyboardEvents()||Ue._keyboardManager.exec(this,S)}onEditingAction(S){["undo","redo","delete","selectAll"].includes(S.name)&&this[S.name]()}setEditingState(S){S?(G(this,ve,li).call(this),G(this,He,an).call(this),G(this,Ke,ln).call(this),G(this,V,at).call(this,{isEditing:o(this,I)!==n.AnnotationEditorType.NONE,isEmpty:G(this,Ve,yt).call(this),hasSomethingToUndo:o(this,J).hasSomethingToUndo(),hasSomethingToRedo:o(this,J).hasSomethingToRedo(),hasSelectedEditor:!1})):(G(this,Re,sn).call(this),G(this,Ge,Lt).call(this),G(this,Pe,cn).call(this),G(this,V,at).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(S){if(!o(this,K)){ee(this,K,S);for(const U of o(this,K))G(this,le,bt).call(this,U.defaultPropertiesToUpdate)}}getId(){return o(this,B).getId()}get currentLayer(){return o(this,te).get(o(this,q))}getLayer(S){return o(this,te).get(S)}get currentPageIndex(){return o(this,q)}addLayer(S){o(this,te).set(S.pageIndex,S),o(this,b)?S.enable():S.disable()}removeLayer(S){o(this,te).delete(S.pageIndex)}updateMode(S,U=null){if(o(this,I)!==S){if(ee(this,I,S),S===n.AnnotationEditorType.NONE){this.setEditingState(!1),G(this,de,ui).call(this);return}this.setEditingState(!0),G(this,ye,ci).call(this),this.unselectAll();for(const Y of o(this,te).values())Y.updateMode(S);if(U){for(const Y of o(this,z).values())if(Y.annotationElementId===U){this.setSelected(Y),Y.enterInEditMode();break}}}}updateToolbar(S){S!==o(this,I)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:S})}updateParams(S,U){if(o(this,K)){if(S===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(S);return}for(const Y of o(this,N))Y.updateParams(S,U);for(const Y of o(this,K))Y.updateDefaultParams(S,U)}}enableWaiting(S=!1){if(o(this,T)!==S){ee(this,T,S);for(const U of o(this,te).values())S?U.disableClick():U.enableClick(),U.div.classList.toggle("waiting",S)}}getEditors(S){const U=[];for(const Y of o(this,z).values())Y.pageIndex===S&&U.push(Y);return U}getEditor(S){return o(this,z).get(S)}addEditor(S){o(this,z).set(S.id,S)}removeEditor(S){var U;o(this,z).delete(S.id),this.unselect(S),(!S.annotationElementId||!o(this,H).has(S.annotationElementId))&&((U=o(this,X))==null||U.remove(S.id))}addDeletedAnnotationElement(S){o(this,H).add(S.annotationElementId),S.deleted=!0}isDeletedAnnotationElement(S){return o(this,H).has(S)}removeDeletedAnnotationElement(S){o(this,H).delete(S.annotationElementId),S.deleted=!1}setActiveEditor(S){o(this,R)!==S&&(ee(this,R,S),S&&G(this,le,bt).call(this,S.propertiesToUpdate))}toggleSelected(S){if(o(this,N).has(S)){o(this,N).delete(S),S.unselect(),G(this,V,at).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,N).add(S),S.select(),G(this,le,bt).call(this,S.propertiesToUpdate),G(this,V,at).call(this,{hasSelectedEditor:!0})}setSelected(S){for(const U of o(this,N))U!==S&&U.unselect();o(this,N).clear(),o(this,N).add(S),S.select(),G(this,le,bt).call(this,S.propertiesToUpdate),G(this,V,at).call(this,{hasSelectedEditor:!0})}isSelected(S){return o(this,N).has(S)}unselect(S){S.unselect(),o(this,N).delete(S),G(this,V,at).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,N).size!==0}undo(){o(this,J).undo(),G(this,V,at).call(this,{hasSomethingToUndo:o(this,J).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:G(this,Ve,yt).call(this)})}redo(){o(this,J).redo(),G(this,V,at).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,J).hasSomethingToRedo(),isEmpty:G(this,Ve,yt).call(this)})}addCommands(S){o(this,J).add(S),G(this,V,at).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:G(this,Ve,yt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const S=[...o(this,N)],U=()=>{for(const oe of S)oe.remove()},Y=()=>{for(const oe of S)G(this,Ae,un).call(this,oe)};this.addCommands({cmd:U,undo:Y,mustExec:!0})}commitOrRemove(){var S;(S=o(this,R))==null||S.commitOrRemove()}hasSomethingToControl(){return o(this,R)||this.hasSelection}selectAll(){for(const S of o(this,N))S.commit();G(this,Te,dn).call(this,o(this,z).values())}unselectAll(){if(o(this,R)){o(this,R).commitOrRemove();return}if(this.hasSelection){for(const S of o(this,N))S.unselect();o(this,N).clear(),G(this,V,at).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(S,U,Y=!1){if(Y||this.commitOrRemove(),!this.hasSelection)return;o(this,fe)[0]+=S,o(this,fe)[1]+=U;const[oe,pe]=o(this,fe),Se=[...o(this,N)],De=1e3;o(this,ue)&&clearTimeout(o(this,ue)),ee(this,ue,setTimeout(()=>{ee(this,ue,null),o(this,fe)[0]=o(this,fe)[1]=0,this.addCommands({cmd:()=>{for(const $e of Se)o(this,z).has($e.id)&&$e.translateInPage(oe,pe)},undo:()=>{for(const $e of Se)o(this,z).has($e.id)&&$e.translateInPage(-oe,-pe)},mustExec:!1})},De));for(const $e of Se)$e.translateInPage(S,U)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ee(this,ce,new Map);for(const S of o(this,N))o(this,ce).set(S,{savedX:S.x,savedY:S.y,savedPageIndex:S.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,ce))return!1;this.disableUserSelect(!1);const S=o(this,ce);ee(this,ce,null);let U=!1;for(const[{x:oe,y:pe,pageIndex:Se},De]of S)De.newX=oe,De.newY=pe,De.newPageIndex=Se,U||(U=oe!==De.savedX||pe!==De.savedY||Se!==De.savedPageIndex);if(!U)return!1;const Y=(oe,pe,Se,De)=>{if(o(this,z).has(oe.id)){const $e=o(this,te).get(De);$e?oe._setParentAndPosition($e,pe,Se):(oe.pageIndex=De,oe.x=pe,oe.y=Se)}};return this.addCommands({cmd:()=>{for(const[oe,{newX:pe,newY:Se,newPageIndex:De}]of S)Y(oe,pe,Se,De)},undo:()=>{for(const[oe,{savedX:pe,savedY:Se,savedPageIndex:De}]of S)Y(oe,pe,Se,De)},mustExec:!0}),!0}dragSelectedEditors(S,U){if(o(this,ce))for(const Y of o(this,ce).keys())Y.drag(S,U)}rebuild(S){if(S.parent===null){const U=this.getLayer(S.pageIndex);U?(U.changeParent(S),U.addOrRebuild(S)):(this.addEditor(S),this.addToAnnotationStorage(S),S.rebuild())}else S.parent.addOrRebuild(S)}isActive(S){return o(this,R)===S}getActive(){return o(this,R)}getMode(){return o(this,I)}get imageManager(){return(0,n.shadow)(this,"imageManager",new f)}};R=new WeakMap,z=new WeakMap,te=new WeakMap,O=new WeakMap,X=new WeakMap,J=new WeakMap,q=new WeakMap,H=new WeakMap,ce=new WeakMap,K=new WeakMap,Ee=new WeakMap,xe=new WeakMap,B=new WeakMap,b=new WeakMap,T=new WeakMap,C=new WeakMap,I=new WeakMap,N=new WeakMap,j=new WeakMap,Z=new WeakMap,re=new WeakMap,be=new WeakMap,me=new WeakMap,Ce=new WeakMap,ae=new WeakMap,we=new WeakMap,_e=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,fe=new WeakMap,ue=new WeakMap,ie=new WeakMap,ne=new WeakMap,ve=new WeakSet,li=function(){window.addEventListener("focus",o(this,re)),window.addEventListener("blur",o(this,Z))},Re=new WeakSet,sn=function(){window.removeEventListener("focus",o(this,re)),window.removeEventListener("blur",o(this,Z))},He=new WeakSet,an=function(){window.addEventListener("keydown",o(this,ae),{capture:!0})},Ge=new WeakSet,Lt=function(){window.removeEventListener("keydown",o(this,ae),{capture:!0})},Ke=new WeakSet,ln=function(){document.addEventListener("copy",o(this,be)),document.addEventListener("cut",o(this,me)),document.addEventListener("paste",o(this,Ce))},Pe=new WeakSet,cn=function(){document.removeEventListener("copy",o(this,be)),document.removeEventListener("cut",o(this,me)),document.removeEventListener("paste",o(this,Ce))},V=new WeakSet,at=function(S){Object.entries(S).some(([Y,oe])=>o(this,Fe)[Y]!==oe)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Fe),S)})},le=new WeakSet,bt=function(S){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:S})},ye=new WeakSet,ci=function(){if(!o(this,b)){ee(this,b,!0);for(const S of o(this,te).values())S.enable()}},de=new WeakSet,ui=function(){if(this.unselectAll(),o(this,b)){ee(this,b,!1);for(const S of o(this,te).values())S.disable()}},Ae=new WeakSet,un=function(S){const U=o(this,te).get(S.pageIndex);U?U.addOrRebuild(S):this.addEditor(S)},Ve=new WeakSet,yt=function(){if(o(this,z).size===0)return!0;if(o(this,z).size===1)for(const S of o(this,z).values())return S.isEmpty();return!1},Te=new WeakSet,dn=function(S){o(this,N).clear();for(const U of S)U.isEmpty()||(o(this,N).add(U),U.select());G(this,V,at).call(this,{hasSelectedEditor:!0})},se(Ue,"TRANSLATE_SMALL",1),se(Ue,"TRANSLATE_BIG",10);let p=Ue;t.AnnotationEditorUIManager=p},(e,t,i)=>{var q,H,ce,K,Ee,xe,B,b,T,C,I,N,gt,Z,pt,be,hn,Ce,Rt,we,Dt,Le,wt,Fe,St;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=M,t.getColorValues=z,t.getCurrentTransform=te,t.getCurrentTransformInverse=O,t.getFilenameFromUrl=L,t.getPdfFilenameFromUrl=F,t.getRGB=R,t.getXfaPageViewport=D,t.isDataScheme=P,t.isPdfFile=v,t.isValidFetchUrl=x,t.loadScript=d,t.noContextMenu=h,t.setLayerDimensions=X;var n=i(7),r=i(1);const s="http://www.w3.org/2000/svg",J=class J{};se(J,"CSS",96),se(J,"PDF",72),se(J,"PDF_TO_CSS_UNITS",J.CSS/J.PDF);let a=J;t.PixelsPerInch=a;class c extends n.BaseFilterFactory{constructor({docId:ne,ownerDocument:ve=globalThis.document}={}){super();$(this,N);$(this,Z);$(this,be);$(this,Ce);$(this,we);$(this,Le);$(this,Fe);$(this,q,void 0);$(this,H,void 0);$(this,ce,void 0);$(this,K,void 0);$(this,Ee,void 0);$(this,xe,void 0);$(this,B,void 0);$(this,b,void 0);$(this,T,void 0);$(this,C,void 0);$(this,I,0);ee(this,ce,ne),ee(this,K,ve)}addFilter(ne){if(!ne)return"none";let ve=o(this,N,gt).get(ne);if(ve)return ve;let Me,Re,Be,He;if(ne.length===1){const Ke=ne[0],et=new Array(256);for(let Pe=0;Pe<256;Pe++)et[Pe]=Ke[Pe]/255;He=Me=Re=Be=et.join(",")}else{const[Ke,et,Pe]=ne,k=new Array(256),V=new Array(256),he=new Array(256);for(let le=0;le<256;le++)k[le]=Ke[le]/255,V[le]=et[le]/255,he[le]=Pe[le]/255;Me=k.join(","),Re=V.join(","),Be=he.join(","),He=`${Me}${Re}${Be}`}if(ve=o(this,N,gt).get(He),ve)return o(this,N,gt).set(ne,ve),ve;const qe=`g_${o(this,ce)}_transfer_map_${ht(this,I)._++}`,Ge=`url(#${qe})`;o(this,N,gt).set(ne,Ge),o(this,N,gt).set(He,Ge);const Qe=G(this,Ce,Rt).call(this,qe);return G(this,Le,wt).call(this,Me,Re,Be,Qe),Ge}addHCMFilter(ne,ve){var et;const Me=`${ne}-${ve}`;if(o(this,xe)===Me)return o(this,B);if(ee(this,xe,Me),ee(this,B,"none"),(et=o(this,Ee))==null||et.remove(),!ne||!ve)return o(this,B);const Re=G(this,Fe,St).call(this,ne);ne=r.Util.makeHexColor(...Re);const Be=G(this,Fe,St).call(this,ve);if(ve=r.Util.makeHexColor(...Be),o(this,Z,pt).style.color="",ne==="#000000"&&ve==="#ffffff"||ne===ve)return o(this,B);const He=new Array(256);for(let Pe=0;Pe<=255;Pe++){const k=Pe/255;He[Pe]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const qe=He.join(","),Ge=`g_${o(this,ce)}_hcm_filter`,Qe=ee(this,b,G(this,Ce,Rt).call(this,Ge));G(this,Le,wt).call(this,qe,qe,qe,Qe),G(this,be,hn).call(this,Qe);const Ke=(Pe,k)=>{const V=Re[Pe]/255,he=Be[Pe]/255,le=new Array(k+1);for(let ge=0;ge<=k;ge++)le[ge]=V+ge/k*(he-V);return le.join(",")};return G(this,Le,wt).call(this,Ke(0,5),Ke(1,5),Ke(2,5),Qe),ee(this,B,`url(#${Ge})`),o(this,B)}addHighlightHCMFilter(ne,ve,Me,Re){var he;const Be=`${ne}-${ve}-${Me}-${Re}`;if(o(this,T)===Be)return o(this,C);if(ee(this,T,Be),ee(this,C,"none"),(he=o(this,b))==null||he.remove(),!ne||!ve)return o(this,C);const[He,qe]=[ne,ve].map(G(this,Fe,St).bind(this));let Ge=Math.round(.2126*He[0]+.7152*He[1]+.0722*He[2]),Qe=Math.round(.2126*qe[0]+.7152*qe[1]+.0722*qe[2]),[Ke,et]=[Me,Re].map(G(this,Fe,St).bind(this));Qe<Ge&&([Ge,Qe,Ke,et]=[Qe,Ge,et,Ke]),o(this,Z,pt).style.color="";const Pe=(le,ge,ye)=>{const W=new Array(256),de=(Qe-Ge)/ye,ke=le/255,Ae=(ge-le)/(255*ye);let Oe=0;for(let Ve=0;Ve<=ye;Ve++){const ze=Math.round(Ge+Ve*de),Te=ke+Ve*Ae;for(let Ye=Oe;Ye<=ze;Ye++)W[Ye]=Te;Oe=ze+1}for(let Ve=Oe;Ve<256;Ve++)W[Ve]=W[Oe-1];return W.join(",")},k=`g_${o(this,ce)}_hcm_highlight_filter`,V=ee(this,b,G(this,Ce,Rt).call(this,k));return G(this,be,hn).call(this,V),G(this,Le,wt).call(this,Pe(Ke[0],et[0],5),Pe(Ke[1],et[1],5),Pe(Ke[2],et[2],5),V),ee(this,C,`url(#${k})`),o(this,C)}destroy(ne=!1){ne&&(o(this,B)||o(this,C))||(o(this,H)&&(o(this,H).parentNode.parentNode.remove(),ee(this,H,null)),o(this,q)&&(o(this,q).clear(),ee(this,q,null)),ee(this,I,0))}}q=new WeakMap,H=new WeakMap,ce=new WeakMap,K=new WeakMap,Ee=new WeakMap,xe=new WeakMap,B=new WeakMap,b=new WeakMap,T=new WeakMap,C=new WeakMap,I=new WeakMap,N=new WeakSet,gt=function(){return o(this,q)||ee(this,q,new Map)},Z=new WeakSet,pt=function(){if(!o(this,H)){const ne=o(this,K).createElement("div"),{style:ve}=ne;ve.visibility="hidden",ve.contain="strict",ve.width=ve.height=0,ve.position="absolute",ve.top=ve.left=0,ve.zIndex=-1;const Me=o(this,K).createElementNS(s,"svg");Me.setAttribute("width",0),Me.setAttribute("height",0),ee(this,H,o(this,K).createElementNS(s,"defs")),ne.append(Me),Me.append(o(this,H)),o(this,K).body.append(ne)}return o(this,H)},be=new WeakSet,hn=function(ne){const ve=o(this,K).createElementNS(s,"feColorMatrix");ve.setAttribute("type","matrix"),ve.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ne.append(ve)},Ce=new WeakSet,Rt=function(ne){const ve=o(this,K).createElementNS(s,"filter");return ve.setAttribute("color-interpolation-filters","sRGB"),ve.setAttribute("id",ne),o(this,Z,pt).append(ve),ve},we=new WeakSet,Dt=function(ne,ve,Me){const Re=o(this,K).createElementNS(s,ve);Re.setAttribute("type","discrete"),Re.setAttribute("tableValues",Me),ne.append(Re)},Le=new WeakSet,wt=function(ne,ve,Me,Re){const Be=o(this,K).createElementNS(s,"feComponentTransfer");Re.append(Be),G(this,we,Dt).call(this,Be,"feFuncR",ne),G(this,we,Dt).call(this,Be,"feFuncG",ve),G(this,we,Dt).call(this,Be,"feFuncB",Me)},Fe=new WeakSet,St=function(ne){return o(this,Z,pt).style.color=ne,R(getComputedStyle(o(this,Z,pt)).getPropertyValue("color"))},t.DOMFilterFactory=c;class f extends n.BaseCanvasFactory{constructor({ownerDocument:ie=globalThis.document}={}){super(),this._document=ie}_createCanvas(ie,ne){const ve=this._document.createElement("canvas");return ve.width=ie,ve.height=ne,ve}}t.DOMCanvasFactory=f;async function u(ue,ie=!1){if(x(ue,document.baseURI)){const ne=await fetch(ue);if(!ne.ok)throw new Error(ne.statusText);return ie?new Uint8Array(await ne.arrayBuffer()):(0,r.stringToBytes)(await ne.text())}return new Promise((ne,ve)=>{const Me=new XMLHttpRequest;Me.open("GET",ue,!0),ie&&(Me.responseType="arraybuffer"),Me.onreadystatechange=()=>{if(Me.readyState===XMLHttpRequest.DONE){if(Me.status===200||Me.status===0){let Re;if(ie&&Me.response?Re=new Uint8Array(Me.response):!ie&&Me.responseText&&(Re=(0,r.stringToBytes)(Me.responseText)),Re){ne(Re);return}}ve(new Error(Me.statusText))}},Me.send(null)})}class l extends n.BaseCMapReaderFactory{_fetchData(ie,ne){return u(ie,this.isCompressed).then(ve=>({cMapData:ve,compressionType:ne}))}}t.DOMCMapReaderFactory=l;class m extends n.BaseStandardFontDataFactory{_fetchData(ie){return u(ie,!0)}}t.DOMStandardFontDataFactory=m;class p extends n.BaseSVGFactory{_createSVG(ie){return document.createElementNS(s,ie)}}t.DOMSVGFactory=p;class _{constructor({viewBox:ie,scale:ne,rotation:ve,offsetX:Me=0,offsetY:Re=0,dontFlip:Be=!1}){this.viewBox=ie,this.scale=ne,this.rotation=ve,this.offsetX=Me,this.offsetY=Re;const He=(ie[2]+ie[0])/2,qe=(ie[3]+ie[1])/2;let Ge,Qe,Ke,et;switch(ve%=360,ve<0&&(ve+=360),ve){case 180:Ge=-1,Qe=0,Ke=0,et=1;break;case 90:Ge=0,Qe=1,Ke=1,et=0;break;case 270:Ge=0,Qe=-1,Ke=-1,et=0;break;case 0:Ge=1,Qe=0,Ke=0,et=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Be&&(Ke=-Ke,et=-et);let Pe,k,V,he;Ge===0?(Pe=Math.abs(qe-ie[1])*ne+Me,k=Math.abs(He-ie[0])*ne+Re,V=(ie[3]-ie[1])*ne,he=(ie[2]-ie[0])*ne):(Pe=Math.abs(He-ie[0])*ne+Me,k=Math.abs(qe-ie[1])*ne+Re,V=(ie[2]-ie[0])*ne,he=(ie[3]-ie[1])*ne),this.transform=[Ge*ne,Qe*ne,Ke*ne,et*ne,Pe-Ge*ne*He-Ke*ne*qe,k-Qe*ne*He-et*ne*qe],this.width=V,this.height=he}get rawDims(){const{viewBox:ie}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:ie[2]-ie[0],pageHeight:ie[3]-ie[1],pageX:ie[0],pageY:ie[1]})}clone({scale:ie=this.scale,rotation:ne=this.rotation,offsetX:ve=this.offsetX,offsetY:Me=this.offsetY,dontFlip:Re=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:ie,rotation:ne,offsetX:ve,offsetY:Me,dontFlip:Re})}convertToViewportPoint(ie,ne){return r.Util.applyTransform([ie,ne],this.transform)}convertToViewportRectangle(ie){const ne=r.Util.applyTransform([ie[0],ie[1]],this.transform),ve=r.Util.applyTransform([ie[2],ie[3]],this.transform);return[ne[0],ne[1],ve[0],ve[1]]}convertToPdfPoint(ie,ne){return r.Util.applyInverseTransform([ie,ne],this.transform)}}t.PageViewport=_;class g extends r.BaseException{constructor(ie,ne=0){super(ie,"RenderingCancelledException"),this.extraDelay=ne}}t.RenderingCancelledException=g;function P(ue){const ie=ue.length;let ne=0;for(;ne<ie&&ue[ne].trim()==="";)ne++;return ue.substring(ne,ne+5).toLowerCase()==="data:"}function v(ue){return typeof ue=="string"&&/\.pdf$/i.test(ue)}function L(ue,ie=!1){return ie||([ue]=ue.split(/[#?]/,1)),ue.substring(ue.lastIndexOf("/")+1)}function F(ue,ie="document.pdf"){if(typeof ue!="string")return ie;if(P(ue))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ie;const ne=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ve=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Me=ne.exec(ue);let Re=ve.exec(Me[1])||ve.exec(Me[2])||ve.exec(Me[3]);if(Re&&(Re=Re[0],Re.includes("%")))try{Re=ve.exec(decodeURIComponent(Re))[0]}catch{}return Re||ie}class w{constructor(){se(this,"started",Object.create(null));se(this,"times",[])}time(ie){ie in this.started&&(0,r.warn)(`Timer is already running for ${ie}`),this.started[ie]=Date.now()}timeEnd(ie){ie in this.started||(0,r.warn)(`Timer has not been started for ${ie}`),this.times.push({name:ie,start:this.started[ie],end:Date.now()}),delete this.started[ie]}toString(){const ie=[];let ne=0;for(const{name:ve}of this.times)ne=Math.max(ve.length,ne);for(const{name:ve,start:Me,end:Re}of this.times)ie.push(`${ve.padEnd(ne)} ${Re-Me}ms
`);return ie.join("")}}t.StatTimer=w;function x(ue,ie){try{const{protocol:ne}=ie?new URL(ue,ie):new URL(ue);return ne==="http:"||ne==="https:"}catch{return!1}}function h(ue){ue.preventDefault()}function d(ue,ie=!1){return new Promise((ne,ve)=>{const Me=document.createElement("script");Me.src=ue,Me.onload=function(Re){ie&&Me.remove(),ne(Re)},Me.onerror=function(){ve(new Error(`Cannot load script at: ${Me.src}`))},(document.head||document.documentElement).append(Me)})}function M(ue){console.log("Deprecated API usage: "+ue)}let E;class y{static toDateObject(ie){if(!ie||typeof ie!="string")return null;E||(E=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ne=E.exec(ie);if(!ne)return null;const ve=parseInt(ne[1],10);let Me=parseInt(ne[2],10);Me=Me>=1&&Me<=12?Me-1:0;let Re=parseInt(ne[3],10);Re=Re>=1&&Re<=31?Re:1;let Be=parseInt(ne[4],10);Be=Be>=0&&Be<=23?Be:0;let He=parseInt(ne[5],10);He=He>=0&&He<=59?He:0;let qe=parseInt(ne[6],10);qe=qe>=0&&qe<=59?qe:0;const Ge=ne[7]||"Z";let Qe=parseInt(ne[8],10);Qe=Qe>=0&&Qe<=23?Qe:0;let Ke=parseInt(ne[9],10)||0;return Ke=Ke>=0&&Ke<=59?Ke:0,Ge==="-"?(Be+=Qe,He+=Ke):Ge==="+"&&(Be-=Qe,He-=Ke),new Date(Date.UTC(ve,Me,Re,Be,He,qe))}}t.PDFDateString=y;function D(ue,{scale:ie=1,rotation:ne=0}){const{width:ve,height:Me}=ue.attributes.style,Re=[0,0,parseInt(ve),parseInt(Me)];return new _({viewBox:Re,scale:ie,rotation:ne})}function R(ue){if(ue.startsWith("#")){const ie=parseInt(ue.slice(1),16);return[(ie&16711680)>>16,(ie&65280)>>8,ie&255]}return ue.startsWith("rgb(")?ue.slice(4,-1).split(",").map(ie=>parseInt(ie)):ue.startsWith("rgba(")?ue.slice(5,-1).split(",").map(ie=>parseInt(ie)).slice(0,3):((0,r.warn)(`Not a valid color format: "${ue}"`),[0,0,0])}function z(ue){const ie=document.createElement("span");ie.style.visibility="hidden",document.body.append(ie);for(const ne of ue.keys()){ie.style.color=ne;const ve=window.getComputedStyle(ie).color;ue.set(ne,R(ve))}ie.remove()}function te(ue){const{a:ie,b:ne,c:ve,d:Me,e:Re,f:Be}=ue.getTransform();return[ie,ne,ve,Me,Re,Be]}function O(ue){const{a:ie,b:ne,c:ve,d:Me,e:Re,f:Be}=ue.getTransform().invertSelf();return[ie,ne,ve,Me,Re,Be]}function X(ue,ie,ne=!1,ve=!0){if(ie instanceof _){const{pageWidth:Me,pageHeight:Re}=ie.rawDims,{style:Be}=ue,He=r.FeatureTest.isCSSRoundSupported,qe=`var(--scale-factor) * ${Me}px`,Ge=`var(--scale-factor) * ${Re}px`,Qe=He?`round(${qe}, 1px)`:`calc(${qe})`,Ke=He?`round(${Ge}, 1px)`:`calc(${Ge})`;!ne||ie.rotation%180===0?(Be.width=Qe,Be.height=Ke):(Be.width=Ke,Be.height=Qe)}ve&&ue.setAttribute("data-main-rotation",ie.rotation)}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=i(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,m){return"none"}addHighlightHCMFilter(l,m,p,_){return"none"}destroy(l=!1){}}t.BaseFilterFactory=r;class s{constructor(){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,m){if(l<=0||m<=0)throw new Error("Invalid canvas size");const p=this._createCanvas(l,m);return{canvas:p,context:p.getContext("2d")}}reset(l,m,p){if(!l.canvas)throw new Error("Canvas is not specified");if(m<=0||p<=0)throw new Error("Invalid canvas size");l.canvas.width=m,l.canvas.height=p}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,m){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=s;class a{constructor({baseUrl:l=null,isCompressed:m=!0}){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=m}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const m=this.baseUrl+l+(this.isCompressed?".bcmap":""),p=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(m,p).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${m}`)})}_fetchData(l,m){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=a;class c{constructor({baseUrl:l=null}){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const m=`${this.baseUrl}${l}`;return this._fetchData(m).catch(p=>{throw new Error(`Unable to load font data at: ${m}`)})}_fetchData(l){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=c;class f{constructor(){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,m,p=!1){if(l<=0||m<=0)throw new Error("Invalid SVG dimensions");const _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),p||(_.setAttribute("width",`${l}px`),_.setAttribute("height",`${m}px`)),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox",`0 0 ${l} ${m}`),_}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=f},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,s=4294901760,a=65535;class c{constructor(u){this.h1=u?u&4294967295:r,this.h2=u?u&4294967295:r}update(u){let l,m;if(typeof u=="string"){l=new Uint8Array(u.length*2),m=0;for(let M=0,E=u.length;M<E;M++){const y=u.charCodeAt(M);y<=255?l[m++]=y:(l[m++]=y>>>8,l[m++]=y&255)}}else if((0,n.isArrayBuffer)(u))l=u.slice(),m=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const p=m>>2,_=m-p*4,g=new Uint32Array(l.buffer,0,p);let P=0,v=0,L=this.h1,F=this.h2;const w=3432918353,x=461845907,h=w&a,d=x&a;for(let M=0;M<p;M++)M&1?(P=g[M],P=P*w&s|P*h&a,P=P<<15|P>>>17,P=P*x&s|P*d&a,L^=P,L=L<<13|L>>>19,L=L*5+3864292196):(v=g[M],v=v*w&s|v*h&a,v=v<<15|v>>>17,v=v*x&s|v*d&a,F^=v,F=F<<13|F>>>19,F=F*5+3864292196);switch(P=0,_){case 3:P^=l[p*4+2]<<16;case 2:P^=l[p*4+1]<<8;case 1:P^=l[p*4],P=P*w&s|P*h&a,P=P<<15|P>>>17,P=P*x&s|P*d&a,p&1?L^=P:F^=P}this.h1=L,this.h2=F}hexdigest(){let u=this.h1,l=this.h2;return u^=l>>>1,u=u*3981806797&s|u*36045&a,l=l*4283543511&s|((l<<16|u>>>16)*2950163797&s)>>>16,u^=l>>>1,u=u*444984403&s|u*60499&a,l=l*3301882366&s|((l<<16|u>>>16)*3120437893&s)>>>16,u^=l>>>1,(u>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=c},(e,t,i)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=i(1);class r{constructor({ownerDocument:f=globalThis.document,styleElement:u=null}){$(this,a,new Set);this._document=f,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(f){this.nativeFontFaces.add(f),this._document.fonts.add(f)}removeNativeFontFace(f){this.nativeFontFaces.delete(f),this._document.fonts.delete(f)}insertRule(f){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(f,u.cssRules.length)}clear(){for(const f of this.nativeFontFaces)this._document.fonts.delete(f);this.nativeFontFaces.clear(),o(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(f){if(!(!f||o(this,a).has(f.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:u,src:l,style:m}=f,p=new FontFace(u,l,m);this.addNativeFontFace(p);try{await p.load(),o(this,a).add(u)}catch{(0,n.warn)(`Cannot load system font: ${f.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(p)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(f){if(f.attached||f.missingFile&&!f.systemFontInfo)return;if(f.attached=!0,f.systemFontInfo){await this.loadSystemFont(f.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=f.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(m){throw(0,n.warn)(`Failed to load font '${l.family}': '${m}'.`),f.disableFontFace=!0,m}}return}const u=f.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const m=this._queueLoadingCallback(l);this._prepareFontLoadEvent(f,m)})}}get isFontLoadingAPISupported(){var u;const f=!!((u=this._document)!=null&&u.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",f)}get isSyncFontLoadingSupported(){let f=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(f=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",f)}_queueLoadingCallback(f){function u(){for((0,n.assert)(!m.done,"completeRequest() cannot be called twice."),m.done=!0;l.length>0&&l[0].done;){const p=l.shift();setTimeout(p.callback,0)}}const{loadingRequests:l}=this,m={done:!1,complete:u,callback:f};return l.push(m),m}get _loadTestFont(){const f=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",f)}_prepareFontLoadEvent(f,u){function l(R,z){return R.charCodeAt(z)<<24|R.charCodeAt(z+1)<<16|R.charCodeAt(z+2)<<8|R.charCodeAt(z+3)&255}function m(R,z,te,O){const X=R.substring(0,z),J=R.substring(z+te);return X+O+J}let p,_;const g=this._document.createElement("canvas");g.width=1,g.height=1;const P=g.getContext("2d");let v=0;function L(R,z){if(++v>30){(0,n.warn)("Load test font never loaded."),z();return}if(P.font="30px "+R,P.fillText(".",0,20),P.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(L.bind(null,R,z))}const F=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=m(w,976,F.length,F);const h=16,d=1482184792;let M=l(w,h);for(p=0,_=F.length-3;p<_;p+=4)M=M-d+l(F,p)|0;p<F.length&&(M=M-d+l(F+"XXX",p)|0),w=m(w,h,4,(0,n.string32)(M));const E=`url(data:font/opentype;base64,${btoa(w)});`,y=`@font-face {font-family:"${F}";src:${E}}`;this.insertRule(y);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const R of[f.loadedName,F]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=R,D.append(z)}this._document.body.append(D),L(F,()=>{D.remove(),u.complete()})}}a=new WeakMap,t.FontLoader=r;class s{constructor(f,{isEvalSupported:u=!0,disableFontFace:l=!1,ignoreErrors:m=!1,inspectFont:p=null}){this.compiledGlyphs=Object.create(null);for(const _ in f)this[_]=f[_];this.isEvalSupported=u!==!1,this.disableFontFace=l===!0,this.ignoreErrors=m===!0,this._inspectFont=p}createNativeFontFace(){var u;if(!this.data||this.disableFontFace)return null;let f;if(!this.cssFontInfo)f=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),f=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(u=this._inspectFont)==null||u.call(this,this),f}createFontFaceRule(){var m;if(!this.data||this.disableFontFace)return null;const f=(0,n.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(f)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let p=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(p+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${p}src:${u}}`}return(m=this._inspectFont)==null||m.call(this,this,u),l}getPathGenerator(f,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let l;try{l=f.get(this.loadedName+"_path_"+u)}catch(m){if(!this.ignoreErrors)throw m;return(0,n.warn)(`getPathGenerator - ignoring character: "${m}".`),this.compiledGlyphs[u]=function(p,_){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const m=[];for(const p of l){const _=p.args!==void 0?p.args.join(","):"";m.push("c.",p.cmd,"(",_,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",m.join(""))}return this.compiledGlyphs[u]=function(m,p){for(const _ of l)_.cmd==="scale"&&(_.args=[p,-p]),m[_.cmd].apply(m,_.args)}}}t.FontFaceObject=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=i(7);i(1);const r=function(u){return new Promise((l,m)=>{require$$5.readFile(u,(_,g)=>{if(_||!g){m(new Error(_));return}l(new Uint8Array(g))})})};class s extends n.BaseFilterFactory{}t.NodeFilterFactory=s;class a extends n.BaseCanvasFactory{_createCanvas(l,m){return require$$5.createCanvas(l,m)}}t.NodeCanvasFactory=a;class c extends n.BaseCMapReaderFactory{_fetchData(l,m){return r(l).then(p=>({cMapData:p,compressionType:m}))}}t.NodeCMapReaderFactory=c;class f extends n.BaseStandardFontDataFactory{_fetchData(l){return r(l)}}t.NodeStandardFontDataFactory=f},(e,t,i)=>{var H,fn,K,gn;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=i(1),r=i(6),s=i(12),a=i(13);const c=16,f=100,u=4096,l=15,m=10,p=1e3,_=16;function g(B,b){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){b.save(),this.__originalSave()},B.restore=function(){b.restore(),this.__originalRestore()},B.translate=function(C,I){b.translate(C,I),this.__originalTranslate(C,I)},B.scale=function(C,I){b.scale(C,I),this.__originalScale(C,I)},B.transform=function(C,I,N,j,Z,re){b.transform(C,I,N,j,Z,re),this.__originalTransform(C,I,N,j,Z,re)},B.setTransform=function(C,I,N,j,Z,re){b.setTransform(C,I,N,j,Z,re),this.__originalSetTransform(C,I,N,j,Z,re)},B.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},B.rotate=function(C){b.rotate(C),this.__originalRotate(C)},B.clip=function(C){b.clip(C),this.__originalClip(C)},B.moveTo=function(T,C){b.moveTo(T,C),this.__originalMoveTo(T,C)},B.lineTo=function(T,C){b.lineTo(T,C),this.__originalLineTo(T,C)},B.bezierCurveTo=function(T,C,I,N,j,Z){b.bezierCurveTo(T,C,I,N,j,Z),this.__originalBezierCurveTo(T,C,I,N,j,Z)},B.rect=function(T,C,I,N){b.rect(T,C,I,N),this.__originalRect(T,C,I,N)},B.closePath=function(){b.closePath(),this.__originalClosePath()},B.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class P{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,T,C){let I;return this.cache[b]!==void 0?(I=this.cache[b],this.canvasFactory.reset(I,T,C)):(I=this.canvasFactory.create(T,C),this.cache[b]=I),I}delete(b){delete this.cache[b]}clear(){for(const b in this.cache){const T=this.cache[b];this.canvasFactory.destroy(T),delete this.cache[b]}}}function v(B,b,T,C,I,N,j,Z,re,be){const[me,Ce,ae,we,_e,Le]=(0,r.getCurrentTransform)(B);if(Ce===0&&ae===0){const fe=j*me+_e,ue=Math.round(fe),ie=Z*we+Le,ne=Math.round(ie),ve=(j+re)*me+_e,Me=Math.abs(Math.round(ve)-ue)||1,Re=(Z+be)*we+Le,Be=Math.abs(Math.round(Re)-ne)||1;return B.setTransform(Math.sign(me),0,0,Math.sign(we),ue,ne),B.drawImage(b,T,C,I,N,0,0,Me,Be),B.setTransform(me,Ce,ae,we,_e,Le),[Me,Be]}if(me===0&&we===0){const fe=Z*ae+_e,ue=Math.round(fe),ie=j*Ce+Le,ne=Math.round(ie),ve=(Z+be)*ae+_e,Me=Math.abs(Math.round(ve)-ue)||1,Re=(j+re)*Ce+Le,Be=Math.abs(Math.round(Re)-ne)||1;return B.setTransform(0,Math.sign(Ce),Math.sign(ae),0,ue,ne),B.drawImage(b,T,C,I,N,0,0,Be,Me),B.setTransform(me,Ce,ae,we,_e,Le),[Be,Me]}B.drawImage(b,T,C,I,N,j,Z,re,be);const Ie=Math.hypot(me,Ce),Fe=Math.hypot(ae,we);return[Ie*re,Fe*be]}function L(B){const{width:b,height:T}=B;if(b>p||T>p)return null;const C=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),N=b+1;let j=new Uint8Array(N*(T+1)),Z,re,be;const me=b+7&-8;let Ce=new Uint8Array(me*T),ae=0;for(const Fe of B.data){let fe=128;for(;fe>0;)Ce[ae++]=Fe&fe?0:255,fe>>=1}let we=0;for(ae=0,Ce[ae]!==0&&(j[0]=1,++we),re=1;re<b;re++)Ce[ae]!==Ce[ae+1]&&(j[re]=Ce[ae]?2:1,++we),ae++;for(Ce[ae]!==0&&(j[re]=2,++we),Z=1;Z<T;Z++){ae=Z*me,be=Z*N,Ce[ae-me]!==Ce[ae]&&(j[be]=Ce[ae]?1:8,++we);let Fe=(Ce[ae]?4:0)+(Ce[ae-me]?8:0);for(re=1;re<b;re++)Fe=(Fe>>2)+(Ce[ae+1]?4:0)+(Ce[ae-me+1]?8:0),I[Fe]&&(j[be+re]=I[Fe],++we),ae++;if(Ce[ae-me]!==Ce[ae]&&(j[be+re]=Ce[ae]?2:4,++we),we>C)return null}for(ae=me*(T-1),be=Z*N,Ce[ae]!==0&&(j[be]=8,++we),re=1;re<b;re++)Ce[ae]!==Ce[ae+1]&&(j[be+re]=Ce[ae]?4:8,++we),ae++;if(Ce[ae]!==0&&(j[be+re]=4,++we),we>C)return null;const _e=new Int32Array([0,N,-1,0,-N,0,0,0,1]),Le=new Path2D;for(Z=0;we&&Z<=T;Z++){let Fe=Z*N;const fe=Fe+b;for(;Fe<fe&&!j[Fe];)Fe++;if(Fe===fe)continue;Le.moveTo(Fe%N,Z);const ue=Fe;let ie=j[Fe];do{const ne=_e[ie];do Fe+=ne;while(!j[Fe]);const ve=j[Fe];ve!==5&&ve!==10?(ie=ve,j[Fe]=0):(ie=ve&51*ie>>4,j[Fe]&=ie>>2|ie<<2),Le.lineTo(Fe%N,Fe/N|0),j[Fe]||--we}while(ue!==Fe);--Z}return Ce=null,j=null,function(Fe){Fe.save(),Fe.scale(1/b,-1/T),Fe.translate(0,-T),Fe.fill(Le),Fe.beginPath(),Fe.restore()}}class F{constructor(b,T){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,T])}clone(){const b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,T){this.x=b,this.y=T}updatePathMinMax(b,T,C){[T,C]=n.Util.applyTransform([T,C],b),this.minX=Math.min(this.minX,T),this.minY=Math.min(this.minY,C),this.maxX=Math.max(this.maxX,T),this.maxY=Math.max(this.maxY,C)}updateRectMinMax(b,T){const C=n.Util.applyTransform(T,b),I=n.Util.applyTransform(T.slice(2),b);this.minX=Math.min(this.minX,C[0],I[0]),this.minY=Math.min(this.minY,C[1],I[1]),this.maxX=Math.max(this.maxX,C[0],I[0]),this.maxY=Math.max(this.maxY,C[1],I[1])}updateScalingPathMinMax(b,T){n.Util.scaleMinMax(b,T),this.minX=Math.min(this.minX,T[0]),this.maxX=Math.max(this.maxX,T[1]),this.minY=Math.min(this.minY,T[2]),this.maxY=Math.max(this.maxY,T[3])}updateCurvePathMinMax(b,T,C,I,N,j,Z,re,be,me){const Ce=n.Util.bezierBoundingBox(T,C,I,N,j,Z,re,be);if(me){me[0]=Math.min(me[0],Ce[0],Ce[2]),me[1]=Math.max(me[1],Ce[0],Ce[2]),me[2]=Math.min(me[2],Ce[1],Ce[3]),me[3]=Math.max(me[3],Ce[1],Ce[3]);return}this.updateRectMinMax(b,Ce)}getPathBoundingBox(b=s.PathType.FILL,T=null){const C=[this.minX,this.minY,this.maxX,this.maxY];if(b===s.PathType.STROKE){T||(0,n.unreachable)("Stroke bounding box must include transform.");const I=n.Util.singularValueDecompose2dScale(T),N=I[0]*this.lineWidth/2,j=I[1]*this.lineWidth/2;C[0]-=N,C[1]-=j,C[2]+=N,C[3]+=j}return C}updateClipFromPath(){const b=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=s.PathType.FILL,T=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(b,T))}}function w(B,b){if(typeof ImageData<"u"&&b instanceof ImageData){B.putImageData(b,0,0);return}const T=b.height,C=b.width,I=T%_,N=(T-I)/_,j=I===0?N:N+1,Z=B.createImageData(C,_);let re=0,be;const me=b.data,Ce=Z.data;let ae,we,_e,Le;if(b.kind===n.ImageKind.GRAYSCALE_1BPP){const Ie=me.byteLength,Fe=new Uint32Array(Ce.buffer,0,Ce.byteLength>>2),fe=Fe.length,ue=C+7>>3,ie=4294967295,ne=n.FeatureTest.isLittleEndian?4278190080:255;for(ae=0;ae<j;ae++){for(_e=ae<N?_:I,be=0,we=0;we<_e;we++){const ve=Ie-re;let Me=0;const Re=ve>ue?C:ve*8-7,Be=Re&-8;let He=0,qe=0;for(;Me<Be;Me+=8)qe=me[re++],Fe[be++]=qe&128?ie:ne,Fe[be++]=qe&64?ie:ne,Fe[be++]=qe&32?ie:ne,Fe[be++]=qe&16?ie:ne,Fe[be++]=qe&8?ie:ne,Fe[be++]=qe&4?ie:ne,Fe[be++]=qe&2?ie:ne,Fe[be++]=qe&1?ie:ne;for(;Me<Re;Me++)He===0&&(qe=me[re++],He=128),Fe[be++]=qe&He?ie:ne,He>>=1}for(;be<fe;)Fe[be++]=0;B.putImageData(Z,0,ae*_)}}else if(b.kind===n.ImageKind.RGBA_32BPP){for(we=0,Le=C*_*4,ae=0;ae<N;ae++)Ce.set(me.subarray(re,re+Le)),re+=Le,B.putImageData(Z,0,we),we+=_;ae<j&&(Le=C*I*4,Ce.set(me.subarray(re,re+Le)),B.putImageData(Z,0,we))}else if(b.kind===n.ImageKind.RGB_24BPP)for(_e=_,Le=C*_e,ae=0;ae<j;ae++){for(ae>=N&&(_e=I,Le=C*_e),be=0,we=Le;we--;)Ce[be++]=me[re++],Ce[be++]=me[re++],Ce[be++]=me[re++],Ce[be++]=255;B.putImageData(Z,0,ae*_)}else throw new Error(`bad image kind: ${b.kind}`)}function x(B,b){if(b.bitmap){B.drawImage(b.bitmap,0,0);return}const T=b.height,C=b.width,I=T%_,N=(T-I)/_,j=I===0?N:N+1,Z=B.createImageData(C,_);let re=0;const be=b.data,me=Z.data;for(let Ce=0;Ce<j;Ce++){const ae=Ce<N?_:I;({srcPos:re}=(0,a.convertBlackAndWhiteToRGBA)({src:be,srcPos:re,dest:me,width:C,height:ae,nonBlackColor:0})),B.putImageData(Z,0,Ce*_)}}function h(B,b){const T=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const C of T)B[C]!==void 0&&(b[C]=B[C]);B.setLineDash!==void 0&&(b.setLineDash(B.getLineDash()),b.lineDashOffset=B.lineDashOffset)}function d(B){if(B.strokeStyle=B.fillStyle="#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0),!n.isNodeJS){const{filter:b}=B;b!=="none"&&b!==""&&(B.filter="none")}}function M(B,b,T,C){const I=B.length;for(let N=3;N<I;N+=4){const j=B[N];if(j===0)B[N-3]=b,B[N-2]=T,B[N-1]=C;else if(j<255){const Z=255-j;B[N-3]=B[N-3]*j+b*Z>>8,B[N-2]=B[N-2]*j+T*Z>>8,B[N-1]=B[N-1]*j+C*Z>>8}}}function E(B,b,T){const C=B.length,I=1/255;for(let N=3;N<C;N+=4){const j=T?T[B[N]]:B[N];b[N]=b[N]*j*I|0}}function y(B,b,T){const C=B.length;for(let I=3;I<C;I+=4){const N=B[I-3]*77+B[I-2]*152+B[I-1]*28;b[I]=T?b[I]*T[N>>8]>>8:b[I]*N>>16}}function D(B,b,T,C,I,N,j,Z,re,be,me){const Ce=!!N,ae=Ce?N[0]:0,we=Ce?N[1]:0,_e=Ce?N[2]:0,Le=I==="Luminosity"?y:E,Fe=Math.min(C,Math.ceil(1048576/T));for(let fe=0;fe<C;fe+=Fe){const ue=Math.min(Fe,C-fe),ie=B.getImageData(Z-be,fe+(re-me),T,ue),ne=b.getImageData(Z,fe+re,T,ue);Ce&&M(ie.data,ae,we,_e),Le(ie.data,ne.data,j),b.putImageData(ne,Z,fe+re)}}function R(B,b,T,C){const I=C[0],N=C[1],j=C[2]-I,Z=C[3]-N;j===0||Z===0||(D(b.context,T,j,Z,b.subtype,b.backdrop,b.transferMap,I,N,b.offsetX,b.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(T.canvas,0,0),B.restore())}function z(B,b){const T=n.Util.singularValueDecompose2dScale(B);T[0]=Math.fround(T[0]),T[1]=Math.fround(T[1]);const C=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:T[0]<=C||T[1]<=C}const te=["butt","round","square"],O=["miter","round","bevel"],X={},J={},xe=class xe{constructor(b,T,C,I,N,{optionalContentConfig:j,markedContentStack:Z=null},re,be){$(this,H);$(this,K);this.ctx=b,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=T,this.objs=C,this.canvasFactory=I,this.filterFactory=N,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Z||[],this.optionalContentConfig=j,this.cachedCanvases=new P(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=re,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=be,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,T=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):T}beginDrawing({transform:b,viewport:T,transparency:C=!1,background:I=null}){const N=this.ctx.canvas.width,j=this.ctx.canvas.height,Z=this.ctx.fillStyle;if(this.ctx.fillStyle=I||"#ffffff",this.ctx.fillRect(0,0,N,j),this.ctx.fillStyle=Z,C){const re=this.cachedCanvases.getCanvas("transparent",N,j);this.compositeCtx=this.ctx,this.transparentCanvas=re.canvas,this.ctx=re.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(...T.transform),this.viewportScale=T.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(b,T,C,I){const N=b.argsArray,j=b.fnArray;let Z=T||0;const re=N.length;if(re===Z)return Z;const be=re-Z>m&&typeof C=="function",me=be?Date.now()+l:0;let Ce=0;const ae=this.commonObjs,we=this.objs;let _e;for(;;){if(I!==void 0&&Z===I.nextBreakPoint)return I.breakIt(Z,C),Z;if(_e=j[Z],_e!==n.OPS.dependency)this[_e].apply(this,N[Z]);else for(const Le of N[Z]){const Ie=Le.startsWith("g_")?ae:we;if(!Ie.has(Le))return Ie.get(Le,C),Z}if(Z++,Z===re)return Z;if(be&&++Ce>m){if(Date.now()>me)return C(),Z;Ce=0}}}endDrawing(){G(this,H,fn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const b of this._cachedBitmapsMap.values()){for(const T of b.values())typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement&&(T.width=T.height=0);b.clear()}this._cachedBitmapsMap.clear(),G(this,K,gn).call(this)}_scaleImage(b,T){const C=b.width,I=b.height;let N=Math.max(Math.hypot(T[0],T[1]),1),j=Math.max(Math.hypot(T[2],T[3]),1),Z=C,re=I,be="prescale1",me,Ce;for(;N>2&&Z>1||j>2&&re>1;){let ae=Z,we=re;N>2&&Z>1&&(ae=Z>=16384?Math.floor(Z/2)-1||1:Math.ceil(Z/2),N/=Z/ae),j>2&&re>1&&(we=re>=16384?Math.floor(re/2)-1||1:Math.ceil(re)/2,j/=re/we),me=this.cachedCanvases.getCanvas(be,ae,we),Ce=me.context,Ce.clearRect(0,0,ae,we),Ce.drawImage(b,0,0,Z,re,0,0,ae,we),b=me.canvas,Z=ae,re=we,be=be==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:Z,paintHeight:re}}_createMaskCanvas(b){const T=this.ctx,{width:C,height:I}=b,N=this.current.fillColor,j=this.current.patternFill,Z=(0,r.getCurrentTransform)(T);let re,be,me,Ce;if((b.bitmap||b.data)&&b.count>1){const Me=b.bitmap||b.data.buffer;be=JSON.stringify(j?Z:[Z.slice(0,4),N]),re=this._cachedBitmapsMap.get(Me),re||(re=new Map,this._cachedBitmapsMap.set(Me,re));const Re=re.get(be);if(Re&&!j){const Be=Math.round(Math.min(Z[0],Z[2])+Z[4]),He=Math.round(Math.min(Z[1],Z[3])+Z[5]);return{canvas:Re,offsetX:Be,offsetY:He}}me=Re}me||(Ce=this.cachedCanvases.getCanvas("maskCanvas",C,I),x(Ce.context,b));let ae=n.Util.transform(Z,[1/C,0,0,-1/I,0,0]);ae=n.Util.transform(ae,[1,0,0,1,0,-I]);const we=n.Util.applyTransform([0,0],ae),_e=n.Util.applyTransform([C,I],ae),Le=n.Util.normalizeRect([we[0],we[1],_e[0],_e[1]]),Ie=Math.round(Le[2]-Le[0])||1,Fe=Math.round(Le[3]-Le[1])||1,fe=this.cachedCanvases.getCanvas("fillCanvas",Ie,Fe),ue=fe.context,ie=Math.min(we[0],_e[0]),ne=Math.min(we[1],_e[1]);ue.translate(-ie,-ne),ue.transform(...ae),me||(me=this._scaleImage(Ce.canvas,(0,r.getCurrentTransformInverse)(ue)),me=me.img,re&&j&&re.set(be,me)),ue.imageSmoothingEnabled=z((0,r.getCurrentTransform)(ue),b.interpolate),v(ue,me,0,0,me.width,me.height,0,0,C,I),ue.globalCompositeOperation="source-in";const ve=n.Util.transform((0,r.getCurrentTransformInverse)(ue),[1,0,0,1,-ie,-ne]);return ue.fillStyle=j?N.getPattern(T,this,ve,s.PathType.FILL):N,ue.fillRect(0,0,C,I),re&&!j&&(this.cachedCanvases.delete("fillCanvas"),re.set(be,fe.canvas)),{canvas:fe.canvas,offsetX:Math.round(ie),offsetY:Math.round(ne)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=te[b]}setLineJoin(b){this.ctx.lineJoin=O[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,T){const C=this.ctx;C.setLineDash!==void 0&&(C.setLineDash(b),C.lineDashOffset=T)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(const[T,C]of b)switch(T){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C[0],C[1]);break;case"CA":this.current.strokeAlpha=C;break;case"ca":this.current.fillAlpha=C,this.ctx.globalAlpha=C;break;case"BM":this.ctx.globalCompositeOperation=C;break;case"SMask":this.current.activeSMask=C?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(C);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const b=this.ctx.canvas.width,T=this.ctx.canvas.height,C="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(C,b,T);this.suspendedCtx=this.ctx,this.ctx=I.context;const N=this.ctx;N.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),h(this.suspendedCtx,N),g(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),h(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const T=this.current.activeSMask,C=this.suspendedCtx;R(C,T,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(h(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),h(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,T,C,I,N,j){this.ctx.transform(b,T,C,I,N,j),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,T,C){const I=this.ctx,N=this.current;let j=N.x,Z=N.y,re,be;const me=(0,r.getCurrentTransform)(I),Ce=me[0]===0&&me[3]===0||me[1]===0&&me[2]===0,ae=Ce?C.slice(0):null;for(let we=0,_e=0,Le=b.length;we<Le;we++)switch(b[we]|0){case n.OPS.rectangle:j=T[_e++],Z=T[_e++];const Ie=T[_e++],Fe=T[_e++],fe=j+Ie,ue=Z+Fe;I.moveTo(j,Z),Ie===0||Fe===0?I.lineTo(fe,ue):(I.lineTo(fe,Z),I.lineTo(fe,ue),I.lineTo(j,ue)),Ce||N.updateRectMinMax(me,[j,Z,fe,ue]),I.closePath();break;case n.OPS.moveTo:j=T[_e++],Z=T[_e++],I.moveTo(j,Z),Ce||N.updatePathMinMax(me,j,Z);break;case n.OPS.lineTo:j=T[_e++],Z=T[_e++],I.lineTo(j,Z),Ce||N.updatePathMinMax(me,j,Z);break;case n.OPS.curveTo:re=j,be=Z,j=T[_e+4],Z=T[_e+5],I.bezierCurveTo(T[_e],T[_e+1],T[_e+2],T[_e+3],j,Z),N.updateCurvePathMinMax(me,re,be,T[_e],T[_e+1],T[_e+2],T[_e+3],j,Z,ae),_e+=6;break;case n.OPS.curveTo2:re=j,be=Z,I.bezierCurveTo(j,Z,T[_e],T[_e+1],T[_e+2],T[_e+3]),N.updateCurvePathMinMax(me,re,be,j,Z,T[_e],T[_e+1],T[_e+2],T[_e+3],ae),j=T[_e+2],Z=T[_e+3],_e+=4;break;case n.OPS.curveTo3:re=j,be=Z,j=T[_e+2],Z=T[_e+3],I.bezierCurveTo(T[_e],T[_e+1],j,Z,j,Z),N.updateCurvePathMinMax(me,re,be,T[_e],T[_e+1],j,Z,j,Z,ae),_e+=4;break;case n.OPS.closePath:I.closePath();break}Ce&&N.updateScalingPathMinMax(me,ae),N.setCurrentPoint(j,Z)}closePath(){this.ctx.closePath()}stroke(b=!0){const T=this.ctx,C=this.current.strokeColor;T.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof C=="object"&&(C!=null&&C.getPattern)?(T.save(),T.strokeStyle=C.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),s.PathType.STROKE),this.rescaleAndStroke(!1),T.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),T.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){const T=this.ctx,C=this.current.fillColor,I=this.current.patternFill;let N=!1;I&&(T.save(),T.fillStyle=C.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),s.PathType.FILL),N=!0);const j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(T.fill("evenodd"),this.pendingEOFill=!1):T.fill()),N&&T.restore(),b&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=X}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const b=this.pendingTextPaths,T=this.ctx;if(b===void 0){T.beginPath();return}T.save(),T.beginPath();for(const C of b)T.setTransform(...C.transform),T.translate(C.x,C.y),C.addToPath(T,C.fontSize);T.restore(),T.clip(),T.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,T){var me;const C=this.commonObjs.get(b),I=this.current;if(!C)throw new Error(`Can't find font for ${b}`);if(I.fontMatrix=C.fontMatrix||n.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+b),T<0?(T=-T,I.fontDirection=-1):I.fontDirection=1,this.current.font=C,this.current.fontSize=T,C.isType3Font)return;const N=C.loadedName||"sans-serif",j=((me=C.systemFontInfo)==null?void 0:me.css)||`"${N}", ${C.fallbackName}`;let Z="normal";C.black?Z="900":C.bold&&(Z="bold");const re=C.italic?"italic":"normal";let be=T;T<c?be=c:T>f&&(be=f),this.current.fontSizeScale=T/be,this.ctx.font=`${re} ${Z} ${be}px ${j}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,T){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=T}setLeadingMoveText(b,T){this.setLeading(-T),this.moveText(b,T)}setTextMatrix(b,T,C,I,N,j){this.current.textMatrix=[b,T,C,I,N,j],this.current.textMatrixScale=Math.hypot(b,T),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,T,C,I){const N=this.ctx,j=this.current,Z=j.font,re=j.textRenderingMode,be=j.fontSize/j.fontSizeScale,me=re&n.TextRenderingMode.FILL_STROKE_MASK,Ce=!!(re&n.TextRenderingMode.ADD_TO_PATH_FLAG),ae=j.patternFill&&!Z.missingFile;let we;(Z.disableFontFace||Ce||ae)&&(we=Z.getPathGenerator(this.commonObjs,b)),Z.disableFontFace||ae?(N.save(),N.translate(T,C),N.beginPath(),we(N,be),I&&N.setTransform(...I),(me===n.TextRenderingMode.FILL||me===n.TextRenderingMode.FILL_STROKE)&&N.fill(),(me===n.TextRenderingMode.STROKE||me===n.TextRenderingMode.FILL_STROKE)&&N.stroke(),N.restore()):((me===n.TextRenderingMode.FILL||me===n.TextRenderingMode.FILL_STROKE)&&N.fillText(b,T,C),(me===n.TextRenderingMode.STROKE||me===n.TextRenderingMode.FILL_STROKE)&&N.strokeText(b,T,C)),Ce&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(N),x:T,y:C,fontSize:be,addToPath:we})}get isFontSubpixelAAEnabled(){const{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);const T=b.getImageData(0,0,10,10).data;let C=!1;for(let I=3;I<T.length;I+=4)if(T[I]>0&&T[I]<255){C=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",C)}showText(b){const T=this.current,C=T.font;if(C.isType3Font)return this.showType3Text(b);const I=T.fontSize;if(I===0)return;const N=this.ctx,j=T.fontSizeScale,Z=T.charSpacing,re=T.wordSpacing,be=T.fontDirection,me=T.textHScale*be,Ce=b.length,ae=C.vertical,we=ae?1:-1,_e=C.defaultVMetrics,Le=I*T.fontMatrix[0],Ie=T.textRenderingMode===n.TextRenderingMode.FILL&&!C.disableFontFace&&!T.patternFill;N.save(),N.transform(...T.textMatrix),N.translate(T.x,T.y+T.textRise),be>0?N.scale(me,-1):N.scale(me,1);let Fe;if(T.patternFill){N.save();const ve=T.fillColor.getPattern(N,this,(0,r.getCurrentTransformInverse)(N),s.PathType.FILL);Fe=(0,r.getCurrentTransform)(N),N.restore(),N.fillStyle=ve}let fe=T.lineWidth;const ue=T.textMatrixScale;if(ue===0||fe===0){const ve=T.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(ve===n.TextRenderingMode.STROKE||ve===n.TextRenderingMode.FILL_STROKE)&&(fe=this.getSinglePixelWidth())}else fe/=ue;if(j!==1&&(N.scale(j,j),fe/=j),N.lineWidth=fe,C.isInvalidPDFjsFont){const ve=[];let Me=0;for(const Re of b)ve.push(Re.unicode),Me+=Re.width;N.fillText(ve.join(""),0,0),T.x+=Me*Le*me,N.restore(),this.compose();return}let ie=0,ne;for(ne=0;ne<Ce;++ne){const ve=b[ne];if(typeof ve=="number"){ie+=we*ve*I/1e3;continue}let Me=!1;const Re=(ve.isSpace?re:0)+Z,Be=ve.fontChar,He=ve.accent;let qe,Ge,Qe=ve.width;if(ae){const et=ve.vmetric||_e,Pe=-(ve.vmetric?et[1]:Qe*.5)*Le,k=et[2]*Le;Qe=et?-et[0]:Qe,qe=Pe/j,Ge=(ie+k)/j}else qe=ie/j,Ge=0;if(C.remeasure&&Qe>0){const et=N.measureText(Be).width*1e3/I*j;if(Qe<et&&this.isFontSubpixelAAEnabled){const Pe=Qe/et;Me=!0,N.save(),N.scale(Pe,1),qe/=Pe}else Qe!==et&&(qe+=(Qe-et)/2e3*I/j)}if(this.contentVisible&&(ve.isInFont||C.missingFile)){if(Ie&&!He)N.fillText(Be,qe,Ge);else if(this.paintChar(Be,qe,Ge,Fe),He){const et=qe+I*He.offset.x/j,Pe=Ge-I*He.offset.y/j;this.paintChar(He.fontChar,et,Pe,Fe)}}const Ke=ae?Qe*Le-Re*be:Qe*Le+Re*be;ie+=Ke,Me&&N.restore()}ae?T.y-=ie:T.x+=ie*me,N.restore(),this.compose()}showType3Text(b){const T=this.ctx,C=this.current,I=C.font,N=C.fontSize,j=C.fontDirection,Z=I.vertical?1:-1,re=C.charSpacing,be=C.wordSpacing,me=C.textHScale*j,Ce=C.fontMatrix||n.FONT_IDENTITY_MATRIX,ae=b.length,we=C.textRenderingMode===n.TextRenderingMode.INVISIBLE;let _e,Le,Ie,Fe;if(!(we||N===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,T.save(),T.transform(...C.textMatrix),T.translate(C.x,C.y),T.scale(me,j),_e=0;_e<ae;++_e){if(Le=b[_e],typeof Le=="number"){Fe=Z*Le*N/1e3,this.ctx.translate(Fe,0),C.x+=Fe*me;continue}const fe=(Le.isSpace?be:0)+re,ue=I.charProcOperatorList[Le.operatorListId];if(!ue){(0,n.warn)(`Type3 character "${Le.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Le,this.save(),T.scale(N,N),T.transform(...Ce),this.executeOperatorList(ue),this.restore()),Ie=n.Util.applyTransform([Le.width,0],Ce)[0]*N+fe,T.translate(Ie,0),C.x+=Ie*me}T.restore(),this.processingType3=null}}setCharWidth(b,T){}setCharWidthAndBounds(b,T,C,I,N,j){this.ctx.rect(C,I,N-C,j-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let T;if(b[0]==="TilingPattern"){const C=b[1],I=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),N={createCanvasGraphics:j=>new xe(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};T=new s.TilingPattern(b,C,this.ctx,N,I)}else T=this._getPattern(b[1],b[2]);return T}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,T,C){const I=n.Util.makeHexColor(b,T,C);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(b,T,C){const I=n.Util.makeHexColor(b,T,C);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(b,T=null){let C;return this.cachedPatterns.has(b)?C=this.cachedPatterns.get(b):(C=(0,s.getShadingPattern)(this.getObject(b)),this.cachedPatterns.set(b,C)),T&&(C.matrix=T),C}shadingFill(b){if(!this.contentVisible)return;const T=this.ctx;this.save();const C=this._getPattern(b);T.fillStyle=C.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),s.PathType.SHADING);const I=(0,r.getCurrentTransformInverse)(T);if(I){const{width:N,height:j}=T.canvas,[Z,re,be,me]=n.Util.getAxialAlignedBoundingBox([0,0,N,j],I);this.ctx.fillRect(Z,re,be-Z,me-re)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,T){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),T)){const C=T[2]-T[0],I=T[3]-T[1];this.ctx.rect(T[0],T[1],C,I),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),T),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const T=this.ctx;b.isolated||(0,n.info)("TODO: Support non-isolated groups."),b.knockout&&(0,n.warn)("Knockout groups not supported.");const C=(0,r.getCurrentTransform)(T);if(b.matrix&&T.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let I=n.Util.getAxialAlignedBoundingBox(b.bbox,(0,r.getCurrentTransform)(T));const N=[0,0,T.canvas.width,T.canvas.height];I=n.Util.intersect(I,N)||[0,0,0,0];const j=Math.floor(I[0]),Z=Math.floor(I[1]);let re=Math.max(Math.ceil(I[2])-j,1),be=Math.max(Math.ceil(I[3])-Z,1),me=1,Ce=1;re>u&&(me=re/u,re=u),be>u&&(Ce=be/u,be=u),this.current.startNewPathAndClipBox([0,0,re,be]);let ae="groupAt"+this.groupLevel;b.smask&&(ae+="_smask_"+this.smaskCounter++%2);const we=this.cachedCanvases.getCanvas(ae,re,be),_e=we.context;_e.scale(1/me,1/Ce),_e.translate(-j,-Z),_e.transform(...C),b.smask?this.smaskStack.push({canvas:we.canvas,context:_e,offsetX:j,offsetY:Z,scaleX:me,scaleY:Ce,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(T.setTransform(1,0,0,1,0,0),T.translate(j,Z),T.scale(me,Ce),T.save()),h(T,_e),this.ctx=_e,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(T),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;const T=this.ctx,C=this.groupStack.pop();if(this.ctx=C,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const N=n.Util.getAxialAlignedBoundingBox([0,0,T.canvas.width,T.canvas.height],I);this.ctx.drawImage(T.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(b,T,C,I,N){if(G(this,H,fn).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(T)&&T.length===4){const j=T[2]-T[0],Z=T[3]-T[1];if(N&&this.annotationCanvasMap){C=C.slice(),C[4]-=T[0],C[5]-=T[1],T=T.slice(),T[0]=T[1]=0,T[2]=j,T[3]=Z;const[re,be]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:me}=this,Ce=Math.ceil(j*this.outputScaleX*me),ae=Math.ceil(Z*this.outputScaleY*me);this.annotationCanvas=this.canvasFactory.create(Ce,ae);const{canvas:we,context:_e}=this.annotationCanvas;this.annotationCanvasMap.set(b,we),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_e,this.ctx.save(),this.ctx.setTransform(re,0,0,-be,0,Z*be),d(this.ctx)}else d(this.ctx),this.ctx.rect(T[0],T[1],j,Z),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...C),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),G(this,K,gn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;const T=b.count;b=this.getObject(b.data,b),b.count=T;const C=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=L(b)),I.compiled)){I.compiled(C);return}const N=this._createMaskCanvas(b),j=N.canvas;C.save(),C.setTransform(1,0,0,1,0,0),C.drawImage(j,N.offsetX,N.offsetY),C.restore(),this.compose()}paintImageMaskXObjectRepeat(b,T,C=0,I=0,N,j){if(!this.contentVisible)return;b=this.getObject(b.data,b);const Z=this.ctx;Z.save();const re=(0,r.getCurrentTransform)(Z);Z.transform(T,C,I,N,0,0);const be=this._createMaskCanvas(b);Z.setTransform(1,0,0,1,be.offsetX-re[4],be.offsetY-re[5]);for(let me=0,Ce=j.length;me<Ce;me+=2){const ae=n.Util.transform(re,[T,C,I,N,j[me],j[me+1]]),[we,_e]=n.Util.applyTransform([0,0],ae);Z.drawImage(be.canvas,we,_e)}Z.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;const T=this.ctx,C=this.current.fillColor,I=this.current.patternFill;for(const N of b){const{data:j,width:Z,height:re,transform:be}=N,me=this.cachedCanvases.getCanvas("maskCanvas",Z,re),Ce=me.context;Ce.save();const ae=this.getObject(j,N);x(Ce,ae),Ce.globalCompositeOperation="source-in",Ce.fillStyle=I?C.getPattern(Ce,this,(0,r.getCurrentTransformInverse)(T),s.PathType.FILL):C,Ce.fillRect(0,0,Z,re),Ce.restore(),T.save(),T.transform(...be),T.scale(1,-1),v(T,me.canvas,0,0,Z,re,0,-1,1,1),T.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;const T=this.getObject(b);if(!T){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(T)}paintImageXObjectRepeat(b,T,C,I){if(!this.contentVisible)return;const N=this.getObject(b);if(!N){(0,n.warn)("Dependent image isn't ready yet");return}const j=N.width,Z=N.height,re=[];for(let be=0,me=I.length;be<me;be+=2)re.push({transform:[T,0,0,C,I[be],I[be+1]],x:0,y:0,w:j,h:Z});this.paintInlineImageXObjectGroup(N,re)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;const{bitmap:T,width:C,height:I}=b,N=this.cachedCanvases.getCanvas("inlineImage",C,I),j=N.context;return j.filter=this.current.transferMaps,j.drawImage(T,0,0),j.filter="none",N.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;const T=b.width,C=b.height,I=this.ctx;if(this.save(),!n.isNodeJS){const{filter:Z}=I;Z!=="none"&&Z!==""&&(I.filter="none")}I.scale(1/T,-1/C);let N;if(b.bitmap)N=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)N=b;else{const re=this.cachedCanvases.getCanvas("inlineImage",T,C).context;w(re,b),N=this.applyTransferMapsToCanvas(re)}const j=this._scaleImage(N,(0,r.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=z((0,r.getCurrentTransform)(I),b.interpolate),v(I,j.img,0,0,j.paintWidth,j.paintHeight,0,-C,T,C),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,T){if(!this.contentVisible)return;const C=this.ctx;let I;if(b.bitmap)I=b.bitmap;else{const N=b.width,j=b.height,re=this.cachedCanvases.getCanvas("inlineImage",N,j).context;w(re,b),I=this.applyTransferMapsToCanvas(re)}for(const N of T)C.save(),C.transform(...N.transform),C.scale(1,-1),v(C,I,N.x,N.y,N.w,N.h,0,-1,1,1),C.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,T){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,T){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(T)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){const T=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);const C=this.ctx;this.pendingClip&&(T||(this.pendingClip===J?C.clip("evenodd"):C.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),C.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const b=(0,r.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{const T=Math.abs(b[0]*b[3]-b[2]*b[1]),C=Math.hypot(b[0],b[2]),I=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(C,I)/T}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:b}=this.current,{a:T,b:C,c:I,d:N}=this.ctx.getTransform();let j,Z;if(C===0&&I===0){const re=Math.abs(T),be=Math.abs(N);if(re===be)if(b===0)j=Z=1/re;else{const me=re*b;j=Z=me<1?1/me:1}else if(b===0)j=1/re,Z=1/be;else{const me=re*b,Ce=be*b;j=me<1?1/me:1,Z=Ce<1?1/Ce:1}}else{const re=Math.abs(T*N-C*I),be=Math.hypot(T,C),me=Math.hypot(I,N);if(b===0)j=me/re,Z=be/re;else{const Ce=b*re;j=me>Ce?me/Ce:1,Z=be>Ce?be/Ce:1}}this._cachedScaleForStroking[0]=j,this._cachedScaleForStroking[1]=Z}return this._cachedScaleForStroking}rescaleAndStroke(b){const{ctx:T}=this,{lineWidth:C}=this.current,[I,N]=this.getScaleForStroking();if(T.lineWidth=C||1,I===1&&N===1){T.stroke();return}const j=T.getLineDash();if(b&&T.save(),T.scale(I,N),j.length>0){const Z=Math.max(I,N);T.setLineDash(j.map(re=>re/Z)),T.lineDashOffset/=Z}T.stroke(),b&&T.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}};H=new WeakSet,fn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},K=new WeakSet,gn=function(){if(this.pageColors){const b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){const T=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=T}}};let q=xe;t.CanvasGraphics=q;for(const B in n.OPS)q.prototype[B]!==void 0&&(q.prototype[n.OPS[B]]=q.prototype[B])},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=_;var n=i(1),r=i(6);const s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=s;function a(L,F){if(!F)return;const w=F[2]-F[0],x=F[3]-F[1],h=new Path2D;h.rect(F[0],F[1],w,x),L.clip(h)}class c{constructor(){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class f extends c{constructor(F){super(),this._type=F[1],this._bbox=F[2],this._colorStops=F[3],this._p0=F[4],this._p1=F[5],this._r0=F[6],this._r1=F[7],this.matrix=null}_createGradient(F){let w;this._type==="axial"?w=F.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=F.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)w.addColorStop(x[0],x[1]);return w}getPattern(F,w,x,h){let d;if(h===s.STROKE||h===s.FILL){const M=w.current.getClippedPathBoundingBox(h,(0,r.getCurrentTransform)(F))||[0,0,0,0],E=Math.ceil(M[2]-M[0])||1,y=Math.ceil(M[3]-M[1])||1,D=w.cachedCanvases.getCanvas("pattern",E,y,!0),R=D.context;R.clearRect(0,0,R.canvas.width,R.canvas.height),R.beginPath(),R.rect(0,0,R.canvas.width,R.canvas.height),R.translate(-M[0],-M[1]),x=n.Util.transform(x,[1,0,0,1,M[0],M[1]]),R.transform(...w.baseTransform),this.matrix&&R.transform(...this.matrix),a(R,this._bbox),R.fillStyle=this._createGradient(R),R.fill(),d=F.createPattern(D.canvas,"no-repeat");const z=new DOMMatrix(x);d.setTransform(z)}else a(F,this._bbox),d=this._createGradient(F);return d}}function u(L,F,w,x,h,d,M,E){const y=F.coords,D=F.colors,R=L.data,z=L.width*4;let te;y[w+1]>y[x+1]&&(te=w,w=x,x=te,te=d,d=M,M=te),y[x+1]>y[h+1]&&(te=x,x=h,h=te,te=M,M=E,E=te),y[w+1]>y[x+1]&&(te=w,w=x,x=te,te=d,d=M,M=te);const O=(y[w]+F.offsetX)*F.scaleX,X=(y[w+1]+F.offsetY)*F.scaleY,J=(y[x]+F.offsetX)*F.scaleX,q=(y[x+1]+F.offsetY)*F.scaleY,H=(y[h]+F.offsetX)*F.scaleX,ce=(y[h+1]+F.offsetY)*F.scaleY;if(X>=ce)return;const K=D[d],Ee=D[d+1],xe=D[d+2],B=D[M],b=D[M+1],T=D[M+2],C=D[E],I=D[E+1],N=D[E+2],j=Math.round(X),Z=Math.round(ce);let re,be,me,Ce,ae,we,_e,Le;for(let Ie=j;Ie<=Z;Ie++){if(Ie<q){const ne=Ie<X?0:(X-Ie)/(X-q);re=O-(O-J)*ne,be=K-(K-B)*ne,me=Ee-(Ee-b)*ne,Ce=xe-(xe-T)*ne}else{let ne;Ie>ce?ne=1:q===ce?ne=0:ne=(q-Ie)/(q-ce),re=J-(J-H)*ne,be=B-(B-C)*ne,me=b-(b-I)*ne,Ce=T-(T-N)*ne}let Fe;Ie<X?Fe=0:Ie>ce?Fe=1:Fe=(X-Ie)/(X-ce),ae=O-(O-H)*Fe,we=K-(K-C)*Fe,_e=Ee-(Ee-I)*Fe,Le=xe-(xe-N)*Fe;const fe=Math.round(Math.min(re,ae)),ue=Math.round(Math.max(re,ae));let ie=z*Ie+fe*4;for(let ne=fe;ne<=ue;ne++)Fe=(re-ne)/(re-ae),Fe<0?Fe=0:Fe>1&&(Fe=1),R[ie++]=be-(be-we)*Fe|0,R[ie++]=me-(me-_e)*Fe|0,R[ie++]=Ce-(Ce-Le)*Fe|0,R[ie++]=255}}function l(L,F,w){const x=F.coords,h=F.colors;let d,M;switch(F.type){case"lattice":const E=F.verticesPerRow,y=Math.floor(x.length/E)-1,D=E-1;for(d=0;d<y;d++){let R=d*E;for(let z=0;z<D;z++,R++)u(L,w,x[R],x[R+1],x[R+E],h[R],h[R+1],h[R+E]),u(L,w,x[R+E+1],x[R+1],x[R+E],h[R+E+1],h[R+1],h[R+E])}break;case"triangles":for(d=0,M=x.length;d<M;d+=3)u(L,w,x[d],x[d+1],x[d+2],h[d],h[d+1],h[d+2]);break;default:throw new Error("illegal figure")}}class m extends c{constructor(F){super(),this._coords=F[2],this._colors=F[3],this._figures=F[4],this._bounds=F[5],this._bbox=F[7],this._background=F[8],this.matrix=null}_createMeshCanvas(F,w,x){const E=Math.floor(this._bounds[0]),y=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-E,R=Math.ceil(this._bounds[3])-y,z=Math.min(Math.ceil(Math.abs(D*F[0]*1.1)),3e3),te=Math.min(Math.ceil(Math.abs(R*F[1]*1.1)),3e3),O=D/z,X=R/te,J={coords:this._coords,colors:this._colors,offsetX:-E,offsetY:-y,scaleX:1/O,scaleY:1/X},q=z+2*2,H=te+2*2,ce=x.getCanvas("mesh",q,H,!1),K=ce.context,Ee=K.createImageData(z,te);if(w){const B=Ee.data;for(let b=0,T=B.length;b<T;b+=4)B[b]=w[0],B[b+1]=w[1],B[b+2]=w[2],B[b+3]=255}for(const B of this._figures)l(Ee,B,J);return K.putImageData(Ee,2,2),{canvas:ce.canvas,offsetX:E-2*O,offsetY:y-2*X,scaleX:O,scaleY:X}}getPattern(F,w,x,h){a(F,this._bbox);let d;if(h===s.SHADING)d=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(F));else if(d=n.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const E=n.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*E[0],d[1]*E[1]]}const M=this._createMeshCanvas(d,h===s.SHADING?null:this._background,w.cachedCanvases);return h!==s.SHADING&&(F.setTransform(...w.baseTransform),this.matrix&&F.transform(...this.matrix)),F.translate(M.offsetX,M.offsetY),F.scale(M.scaleX,M.scaleY),F.createPattern(M.canvas,"no-repeat")}}class p extends c{getPattern(){return"hotpink"}}function _(L){switch(L[0]){case"RadialAxial":return new f(L);case"Mesh":return new m(L);case"Dummy":return new p}throw new Error(`Unknown IR type: ${L[0]}`)}const g={COLORED:1,UNCOLORED:2},v=class v{constructor(F,w,x,h,d){this.operatorList=F[2],this.matrix=F[3]||[1,0,0,1,0,0],this.bbox=F[4],this.xstep=F[5],this.ystep=F[6],this.paintType=F[7],this.tilingType=F[8],this.color=w,this.ctx=x,this.canvasGraphicsFactory=h,this.baseTransform=d}createPatternCanvas(F){const w=this.operatorList,x=this.bbox,h=this.xstep,d=this.ystep,M=this.paintType,E=this.tilingType,y=this.color,D=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+E);const R=x[0],z=x[1],te=x[2],O=x[3],X=n.Util.singularValueDecompose2dScale(this.matrix),J=n.Util.singularValueDecompose2dScale(this.baseTransform),q=[X[0]*J[0],X[1]*J[1]],H=this.getSizeAndScale(h,this.ctx.canvas.width,q[0]),ce=this.getSizeAndScale(d,this.ctx.canvas.height,q[1]),K=F.cachedCanvases.getCanvas("pattern",H.size,ce.size,!0),Ee=K.context,xe=D.createCanvasGraphics(Ee);xe.groupLevel=F.groupLevel,this.setFillAndStrokeStyleToContext(xe,M,y);let B=R,b=z,T=te,C=O;return R<0&&(B=0,T+=Math.abs(R)),z<0&&(b=0,C+=Math.abs(z)),Ee.translate(-(H.scale*B),-(ce.scale*b)),xe.transform(H.scale,0,0,ce.scale,0,0),Ee.save(),this.clipBbox(xe,B,b,T,C),xe.baseTransform=(0,r.getCurrentTransform)(xe.ctx),xe.executeOperatorList(w),xe.endDrawing(),{canvas:K.canvas,scaleX:H.scale,scaleY:ce.scale,offsetX:B,offsetY:b}}getSizeAndScale(F,w,x){F=Math.abs(F);const h=Math.max(v.MAX_PATTERN_SIZE,w);let d=Math.ceil(F*x);return d>=h?d=h:x=d/F,{scale:x,size:d}}clipBbox(F,w,x,h,d){const M=h-w,E=d-x;F.ctx.rect(w,x,M,E),F.current.updateRectMinMax((0,r.getCurrentTransform)(F.ctx),[w,x,h,d]),F.clip(),F.endPath()}setFillAndStrokeStyleToContext(F,w,x){const h=F.ctx,d=F.current;switch(w){case g.COLORED:const M=this.ctx;h.fillStyle=M.fillStyle,h.strokeStyle=M.strokeStyle,d.fillColor=M.fillStyle,d.strokeColor=M.strokeStyle;break;case g.UNCOLORED:const E=n.Util.makeHexColor(x[0],x[1],x[2]);h.fillStyle=E,h.strokeStyle=E,d.fillColor=E,d.strokeColor=E;break;default:throw new n.FormatError(`Unsupported paint type: ${w}`)}}getPattern(F,w,x,h){let d=x;h!==s.SHADING&&(d=n.Util.transform(d,w.baseTransform),this.matrix&&(d=n.Util.transform(d,this.matrix)));const M=this.createPatternCanvas(w);let E=new DOMMatrix(d);E=E.translate(M.offsetX,M.offsetY),E=E.scale(1/M.scaleX,1/M.scaleY);const y=F.createPattern(M.canvas,"repeat");return y.setTransform(E),y}};se(v,"MAX_PATTERN_SIZE",3e3);let P=v;t.TilingPattern=P},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=s,t.convertToRGBA=r,t.grayToRGBA=c;var n=i(1);function r(f){switch(f.kind){case n.ImageKind.GRAYSCALE_1BPP:return s(f);case n.ImageKind.RGB_24BPP:return a(f)}return null}function s({src:f,srcPos:u=0,dest:l,width:m,height:p,nonBlackColor:_=4294967295,inverseDecode:g=!1}){const P=n.FeatureTest.isLittleEndian?4278190080:255,[v,L]=g?[_,P]:[P,_],F=m>>3,w=m&7,x=f.length;l=new Uint32Array(l.buffer);let h=0;for(let d=0;d<p;d++){for(const E=u+F;u<E;u++){const y=u<x?f[u]:255;l[h++]=y&128?L:v,l[h++]=y&64?L:v,l[h++]=y&32?L:v,l[h++]=y&16?L:v,l[h++]=y&8?L:v,l[h++]=y&4?L:v,l[h++]=y&2?L:v,l[h++]=y&1?L:v}if(w===0)continue;const M=u<x?f[u++]:255;for(let E=0;E<w;E++)l[h++]=M&1<<7-E?L:v}return{srcPos:u,destPos:h}}function a({src:f,srcPos:u=0,dest:l,destPos:m=0,width:p,height:_}){let g=0;const P=f.length>>2,v=new Uint32Array(f.buffer,u,P);if(n.FeatureTest.isLittleEndian){for(;g<P-2;g+=3,m+=4){const L=v[g],F=v[g+1],w=v[g+2];l[m]=L|4278190080,l[m+1]=L>>>24|F<<8|4278190080,l[m+2]=F>>>16|w<<16|4278190080,l[m+3]=w>>>8|4278190080}for(let L=g*4,F=f.length;L<F;L+=3)l[m++]=f[L]|f[L+1]<<8|f[L+2]<<16|4278190080}else{for(;g<P-2;g+=3,m+=4){const L=v[g],F=v[g+1],w=v[g+2];l[m]=L|255,l[m+1]=L<<24|F>>>8|255,l[m+2]=F<<16|w>>>16|255,l[m+3]=w<<8|255}for(let L=g*4,F=f.length;L<F;L+=3)l[m++]=f[L]<<24|f[L+1]<<16|f[L+2]<<8|255}return{srcPos:u,destPos:m}}function c(f,u){if(n.FeatureTest.isLittleEndian)for(let l=0,m=f.length;l<m;l++)u[l]=f[l]*65793|4278190080;else for(let l=0,m=f.length;l<m;l++)u[l]=f[l]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,t,i)=>{var f,di,l,hi,p,It;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=i(1);const r={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(g){switch(g instanceof Error||typeof g=="object"&&g!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new n.AbortException(g.message);case"MissingPDFException":return new n.MissingPDFException(g.message);case"PasswordException":return new n.PasswordException(g.message,g.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(g.message,g.status);case"UnknownErrorException":return new n.UnknownErrorException(g.message,g.details);default:return new n.UnknownErrorException(g.message,g.toString())}}class c{constructor(P,v,L){$(this,f);$(this,l);$(this,p);this.sourceName=P,this.targetName=v,this.comObj=L,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=F=>{const w=F.data;if(w.targetName!==this.sourceName)return;if(w.stream){G(this,l,hi).call(this,w);return}if(w.callback){const h=w.callbackId,d=this.callbackCapabilities[h];if(!d)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],w.callback===r.DATA)d.resolve(w.data);else if(w.callback===r.ERROR)d.reject(a(w.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[w.action];if(!x)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const h=this.sourceName,d=w.sourceName;new Promise(function(M){M(x(w.data))}).then(function(M){L.postMessage({sourceName:h,targetName:d,callback:r.DATA,callbackId:w.callbackId,data:M})},function(M){L.postMessage({sourceName:h,targetName:d,callback:r.ERROR,callbackId:w.callbackId,reason:a(M)})});return}if(w.streamId){G(this,f,di).call(this,w);return}x(w.data)},L.addEventListener("message",this._onComObjOnMessage)}on(P,v){const L=this.actionHandler;if(L[P])throw new Error(`There is already an actionName called "${P}"`);L[P]=v}send(P,v,L){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,data:v},L)}sendWithPromise(P,v,L){const F=this.callbackId++,w=new n.PromiseCapability;this.callbackCapabilities[F]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:P,callbackId:F,data:v},L)}catch(x){w.reject(x)}return w.promise}sendWithStream(P,v,L,F){const w=this.streamId++,x=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:M=>{const E=new n.PromiseCapability;return this.streamControllers[w]={controller:M,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:x,targetName:h,action:P,streamId:w,data:v,desiredSize:M.desiredSize},F),E.promise},pull:M=>{const E=new n.PromiseCapability;return this.streamControllers[w].pullCall=E,d.postMessage({sourceName:x,targetName:h,stream:s.PULL,streamId:w,desiredSize:M.desiredSize}),E.promise},cancel:M=>{(0,n.assert)(M instanceof Error,"cancel must have a valid reason");const E=new n.PromiseCapability;return this.streamControllers[w].cancelCall=E,this.streamControllers[w].isClosed=!0,d.postMessage({sourceName:x,targetName:h,stream:s.CANCEL,streamId:w,reason:a(M)}),E.promise}},L)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f=new WeakSet,di=function(P){const v=P.streamId,L=this.sourceName,F=P.sourceName,w=this.comObj,x=this,h=this.actionHandler[P.action],d={enqueue(M,E=1,y){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=E,D>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),w.postMessage({sourceName:L,targetName:F,stream:s.ENQUEUE,streamId:v,chunk:M},y)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:L,targetName:F,stream:s.CLOSE,streamId:v}),delete x.streamSinks[v])},error(M){(0,n.assert)(M instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:L,targetName:F,stream:s.ERROR,streamId:v,reason:a(M)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:P.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[v]=d,new Promise(function(M){M(h(P.data,d))}).then(function(){w.postMessage({sourceName:L,targetName:F,stream:s.START_COMPLETE,streamId:v,success:!0})},function(M){w.postMessage({sourceName:L,targetName:F,stream:s.START_COMPLETE,streamId:v,reason:a(M)})})},l=new WeakSet,hi=function(P){const v=P.streamId,L=this.sourceName,F=P.sourceName,w=this.comObj,x=this.streamControllers[v],h=this.streamSinks[v];switch(P.stream){case s.START_COMPLETE:P.success?x.startCall.resolve():x.startCall.reject(a(P.reason));break;case s.PULL_COMPLETE:P.success?x.pullCall.resolve():x.pullCall.reject(a(P.reason));break;case s.PULL:if(!h){w.postMessage({sourceName:L,targetName:F,stream:s.PULL_COMPLETE,streamId:v,success:!0});break}h.desiredSize<=0&&P.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=P.desiredSize,new Promise(function(d){var M;d((M=h.onPull)==null?void 0:M.call(h))}).then(function(){w.postMessage({sourceName:L,targetName:F,stream:s.PULL_COMPLETE,streamId:v,success:!0})},function(d){w.postMessage({sourceName:L,targetName:F,stream:s.PULL_COMPLETE,streamId:v,reason:a(d)})});break;case s.ENQUEUE:if((0,n.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(P.chunk);break;case s.CLOSE:if((0,n.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),G(this,p,It).call(this,x,v);break;case s.ERROR:(0,n.assert)(x,"error should have stream controller"),x.controller.error(a(P.reason)),G(this,p,It).call(this,x,v);break;case s.CANCEL_COMPLETE:P.success?x.cancelCall.resolve():x.cancelCall.reject(a(P.reason)),G(this,p,It).call(this,x,v);break;case s.CANCEL:if(!h)break;new Promise(function(d){var M;d((M=h.onCancel)==null?void 0:M.call(h,a(P.reason)))}).then(function(){w.postMessage({sourceName:L,targetName:F,stream:s.CANCEL_COMPLETE,streamId:v,success:!0})},function(d){w.postMessage({sourceName:L,targetName:F,stream:s.CANCEL_COMPLETE,streamId:v,reason:a(d)})}),h.sinkCapability.reject(a(P.reason)),h.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}},p=new WeakSet,It=async function(P,v){var L,F,w;await Promise.allSettled([(L=P.startCall)==null?void 0:L.promise,(F=P.pullCall)==null?void 0:F.promise,(w=P.cancelCall)==null?void 0:w.promise]),delete this.streamControllers[v]},t.MessageHandler=c},(e,t,i)=>{var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=i(1);class r{constructor({parsedData:f,rawData:u}){$(this,s,void 0);$(this,a,void 0);ee(this,s,f),ee(this,a,u)}getRaw(){return o(this,a)}get(f){return o(this,s).get(f)??null}getAll(){return(0,n.objectFromMap)(o(this,s))}has(f){return o(this,s).has(f)}}s=new WeakMap,a=new WeakMap,t.Metadata=r},(e,t,i)=>{var f,u,l,m,p,_,pn;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=i(1),r=i(8);const s=Symbol("INTERNAL");class a{constructor(v,L){$(this,f,!0);this.name=v,this.intent=L}get visible(){return o(this,f)}_setVisible(v,L){v!==s&&(0,n.unreachable)("Internal method `_setVisible` called."),ee(this,f,L)}}f=new WeakMap;class c{constructor(v){$(this,_);$(this,u,null);$(this,l,new Map);$(this,m,null);$(this,p,null);if(this.name=null,this.creator=null,v!==null){this.name=v.name,this.creator=v.creator,ee(this,p,v.order);for(const L of v.groups)o(this,l).set(L.id,new a(L.name,L.intent));if(v.baseState==="OFF")for(const L of o(this,l).values())L._setVisible(s,!1);for(const L of v.on)o(this,l).get(L)._setVisible(s,!0);for(const L of v.off)o(this,l).get(L)._setVisible(s,!1);ee(this,m,this.getHash())}}isVisible(v){if(o(this,l).size===0)return!0;if(!v)return(0,n.warn)("Optional content group not defined."),!0;if(v.type==="OCG")return o(this,l).has(v.id)?o(this,l).get(v.id).visible:((0,n.warn)(`Optional content group not found: ${v.id}`),!0);if(v.type==="OCMD"){if(v.expression)return G(this,_,pn).call(this,v.expression);if(!v.policy||v.policy==="AnyOn"){for(const L of v.ids){if(!o(this,l).has(L))return(0,n.warn)(`Optional content group not found: ${L}`),!0;if(o(this,l).get(L).visible)return!0}return!1}else if(v.policy==="AllOn"){for(const L of v.ids){if(!o(this,l).has(L))return(0,n.warn)(`Optional content group not found: ${L}`),!0;if(!o(this,l).get(L).visible)return!1}return!0}else if(v.policy==="AnyOff"){for(const L of v.ids){if(!o(this,l).has(L))return(0,n.warn)(`Optional content group not found: ${L}`),!0;if(!o(this,l).get(L).visible)return!0}return!1}else if(v.policy==="AllOff"){for(const L of v.ids){if(!o(this,l).has(L))return(0,n.warn)(`Optional content group not found: ${L}`),!0;if(o(this,l).get(L).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${v.policy}.`),!0}return(0,n.warn)(`Unknown group type ${v.type}.`),!0}setVisibility(v,L=!0){if(!o(this,l).has(v)){(0,n.warn)(`Optional content group not found: ${v}`);return}o(this,l).get(v)._setVisible(s,!!L),ee(this,u,null)}get hasInitialVisibility(){return o(this,m)===null||this.getHash()===o(this,m)}getOrder(){return o(this,l).size?o(this,p)?o(this,p).slice():[...o(this,l).keys()]:null}getGroups(){return o(this,l).size>0?(0,n.objectFromMap)(o(this,l)):null}getGroup(v){return o(this,l).get(v)||null}getHash(){if(o(this,u)!==null)return o(this,u);const v=new r.MurmurHash3_64;for(const[L,F]of o(this,l))v.update(`${L}:${F.visible}`);return ee(this,u,v.hexdigest())}}u=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakSet,pn=function(v){const L=v.length;if(L<2)return!0;const F=v[0];for(let w=1;w<L;w++){const x=v[w];let h;if(Array.isArray(x))h=G(this,_,pn).call(this,x);else if(o(this,l).has(x))h=o(this,l).get(x).visible;else return(0,n.warn)(`Optional content group not found: ${x}`),!0;switch(F){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return F==="And"},t.OptionalContentConfig=c},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=i(1),r=i(6);class s{constructor({length:u,initialData:l,progressiveDone:m=!1,contentDispositionFilename:p=null,disableRange:_=!1,disableStream:g=!1},P){if((0,n.assert)(P,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m,this._contentDispositionFilename=p,(l==null?void 0:l.length)>0){const v=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=P,this._isStreamingSupported=!g,this._isRangeSupported=!_,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,L)=>{this._onReceiveData({begin:v,chunk:L})}),this._pdfDataRangeTransport.addProgressListener((v,L)=>{this._onProgress({loaded:v,total:L})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:l}){const m=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const p=this._rangeReaders.some(function(_){return _._begin!==u?!1:(_._enqueue(m),!0)});(0,n.assert)(p,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)==null?void 0:u._loaded)??0}_onProgress(u){var l,m,p,_;u.total===void 0?(m=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||m.call(l,{loaded:u.loaded}):(_=(p=this._fullRequestReader)==null?void 0:p.onProgress)==null||_.call(p,{loaded:u.loaded,total:u.total})}_onProgressiveDone(){var u;(u=this._fullRequestReader)==null||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const l=this._rangeReaders.indexOf(u);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new a(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,l){if(l<=this._progressiveDataLength)return null;const m=new c(this,u,l);return this._pdfDataRangeTransport.requestDataRange(u,l),this._rangeReaders.push(m),m}cancelAllRequests(u){var l;(l=this._fullRequestReader)==null||l.cancel(u);for(const m of this._rangeReaders.slice(0))m.cancel(u);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=s;class a{constructor(u,l,m=!1,p=null){this._stream=u,this._done=m||!1,this._filename=(0,r.isPdfFile)(p)?p:null,this._queuedChunks=l||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new n.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c{constructor(u,l,m){this._stream=u,this._begin=l,this._end=m,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new n.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=i(1),r=i(20);function s(m,p,_){return{method:"GET",headers:m,signal:_.signal,mode:"cors",credentials:p?"include":"same-origin",redirect:"follow"}}function a(m){const p=new Headers;for(const _ in m){const g=m[_];g!==void 0&&p.append(_,g)}return p}function c(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:((0,n.warn)(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class f{constructor(p){this.source=p,this.isHttp=/^https?:/i.test(p.url),this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(p,_){if(_<=this._progressiveDataLength)return null;const g=new l(this,p,_);return this._rangeRequestReaders.push(g),g}cancelAllRequests(p){var _;(_=this._fullRequestReader)==null||_.cancel(p);for(const g of this._rangeRequestReaders.slice(0))g.cancel(p)}}t.PDFFetchStream=f;class u{constructor(p){this._stream=p,this._reader=null,this._loaded=0,this._filename=null;const _=p.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=new n.PromiseCapability,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=a(this._stream.httpHeaders);const g=_.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,r.validateResponseStatus)(P.status))throw(0,r.createResponseStatusError)(P.status,g);this._reader=P.body.getReader(),this._headersCapability.resolve();const v=w=>P.headers.get(w),{allowRangeRequests:L,suggestedLength:F}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=L,this._contentLength=F||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:p,done:_}=await this._reader.read();return _?{value:p,done:_}:(this._loaded+=p.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:c(p),done:!1})}cancel(p){var _;(_=this._reader)==null||_.cancel(p),this._abortController.abort()}}class l{constructor(p,_,g){this._stream=p,this._reader=null,this._loaded=0;const P=p.source;this._withCredentials=P.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!P.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${g-1}`);const v=P.url;fetch(v,s(this._headers,this._withCredentials,this._abortController)).then(L=>{if(!(0,r.validateResponseStatus)(L.status))throw(0,r.createResponseStatusError)(L.status,v);this._readCapability.resolve(),this._reader=L.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:p,done:_}=await this._reader.read();return _?{value:p,done:_}:(this._loaded+=p.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:c(p),done:!1})}cancel(p){var _;(_=this._reader)==null||_.cancel(p),this._abortController.abort()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=f,t.extractFilenameFromHeader=c,t.validateRangeRequestCapabilities=a,t.validateResponseStatus=u;var n=i(1),r=i(21),s=i(6);function a({getResponseHeader:l,isHttp:m,rangeChunkSize:p,disableRange:_}){const g={allowRangeRequests:!1,suggestedLength:void 0},P=parseInt(l("Content-Length"),10);return!Number.isInteger(P)||(g.suggestedLength=P,P<=2*p)||_||!m||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function c(l){const m=l("Content-Disposition");if(m){let p=(0,r.getFilenameFromContentDispositionHeader)(m);if(p.includes("%"))try{p=decodeURIComponent(p)}catch{}if((0,s.isPdfFile)(p))return p}return null}function f(l,m){return l===404||l===0&&m.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+m+'".'):new n.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${m}".`,l)}function u(l){return l===200||l===206}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;var n=i(1);function r(s){let a=!0,c=f("filename\\*","i").exec(s);if(c){c=c[1];let P=p(c);return P=unescape(P),P=_(P),P=g(P),l(P)}if(c=m(s),c){const P=g(c);return l(P)}if(c=f("filename","i").exec(s),c){c=c[1];let P=p(c);return P=g(P),l(P)}function f(P,v){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function u(P,v){if(P){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const L=new TextDecoder(P,{fatal:!0}),F=(0,n.stringToBytes)(v);v=L.decode(F),a=!1}catch{}}return v}function l(P){return a&&/[\x80-\xff]/.test(P)&&(P=u("utf-8",P),a&&(P=u("iso-8859-1",P))),P}function m(P){const v=[];let L;const F=f("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(L=F.exec(P))!==null;){let[,x,h,d]=L;if(x=parseInt(x,10),x in v){if(x===0)break;continue}v[x]=[h,d]}const w=[];for(let x=0;x<v.length&&x in v;++x){let[h,d]=v[x];d=p(d),h&&(d=unescape(d),x===0&&(d=_(d))),w.push(d)}return w.join("")}function p(P){if(P.startsWith('"')){const v=P.slice(1).split('\\"');for(let L=0;L<v.length;++L){const F=v[L].indexOf('"');F!==-1&&(v[L]=v[L].slice(0,F),v.length=L+1),v[L]=v[L].replaceAll(/\\(.)/g,"$1")}P=v.join('"')}return P}function _(P){const v=P.indexOf("'");if(v===-1)return P;const L=P.slice(0,v),w=P.slice(v+1).replace(/^[^']*'/,"");return u(L,w)}function g(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,L,F,w){if(F==="q"||F==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,h){return String.fromCharCode(parseInt(h,16))}),u(L,w);try{w=atob(w)}catch{}return u(L,w)})}return""}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=i(1),r=i(20);const s=200,a=206;function c(p){const _=p.response;return typeof _!="string"?_:(0,n.stringToBytes)(_).buffer}class f{constructor(_,g={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,g,P){const v={begin:_,end:g};for(const L in P)v[L]=P[L];return this.request(v)}requestFull(_){return this.request(_)}request(_){const g=new XMLHttpRequest,P=this.currXhrId++,v=this.pendingRequests[P]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const L in this.httpHeaders){const F=this.httpHeaders[L];F!==void 0&&g.setRequestHeader(L,F)}return this.isHttp&&"begin"in _&&"end"in _?(g.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),v.expectedStatus=a):v.expectedStatus=s,g.responseType="arraybuffer",_.onError&&(g.onerror=function(L){_.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,P),g.onprogress=this.onProgress.bind(this,P),v.onHeadersReceived=_.onHeadersReceived,v.onDone=_.onDone,v.onError=_.onError,v.onProgress=_.onProgress,g.send(null),P}onProgress(_,g){var v;const P=this.pendingRequests[_];P&&((v=P.onProgress)==null||v.call(P,g))}onStateChange(_,g){var x,h,d;const P=this.pendingRequests[_];if(!P)return;const v=P.xhr;if(v.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),v.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],v.status===0&&this.isHttp){(x=P.onError)==null||x.call(P,v.status);return}const L=v.status||s;if(!(L===s&&P.expectedStatus===a)&&L!==P.expectedStatus){(h=P.onError)==null||h.call(P,v.status);return}const w=c(v);if(L===a){const M=v.getResponseHeader("Content-Range"),E=/bytes (\d+)-(\d+)\/(\d+)/.exec(M);P.onDone({begin:parseInt(E[1],10),chunk:w})}else w?P.onDone({begin:0,chunk:w}):(d=P.onError)==null||d.call(P,v.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const g=this.pendingRequests[_].xhr;delete this.pendingRequests[_],g.abort()}}class u{constructor(_){this._source=_,this._manager=new f(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const g=this._rangeRequestReaders.indexOf(_);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(_,g){const P=new m(this._manager,_,g);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(_){var g;(g=this._fullRequestReader)==null||g.cancel(_);for(const P of this._rangeRequestReaders.slice(0))P.cancel(_)}}t.PDFNetworkStream=u;class l{constructor(_,g){this._manager=_;const P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=_.requestFull(P),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,g=this._manager.getRequestXhr(_),P=F=>g.getResponseHeader(F),{allowRangeRequests:v,suggestedLength:L}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=L||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,r.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){var g;(g=this.onProgress)==null||g.call(this,{loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new n.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class m{constructor(_,g,P){this._manager=_;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(g,P,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _;(_=this.onClosed)==null||_.call(this,this)}_onDone(_){const g=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,r.createResponseStatusError)(_,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new n.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=i(1),r=i(20);const s=/^file:\/\/\/[a-zA-Z]:\//;function a(P){const v=require$$5,L=v.parse(P);return L.protocol==="file:"||L.host?L:/^[a-z]:[/\\]/i.test(P)?v.parse(`file:///${P}`):(L.host||(L.protocol="file:"),L)}class c{constructor(v){this.source=v,this.url=a(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new m(this),this._fullRequestReader}getRangeReader(v,L){if(L<=this._progressiveDataLength)return null;const F=this.isFsUrl?new g(this,v,L):new p(this,v,L);return this._rangeRequestReaders.push(F),F}cancelAllRequests(v){var L;(L=this._fullRequestReader)==null||L.cancel(v);for(const F of this._rangeRequestReaders.slice(0))F.cancel(v)}}t.PDFNodeStream=c;class f{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const L=v.source;this._contentLength=L.length,this._loaded=0,this._filename=null,this._disableRange=L.disableRange||!1,this._rangeChunkSize=L.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!L.disableStream,this._isRangeSupported=!L.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",L=>{this._error(L)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const L=v.source;this._isStreamingSupported=!L.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=v.length,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",L=>{this._error(L)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(P,v){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:v}}class m extends f{constructor(v){super(v);const L=F=>{if(F.statusCode===404){const d=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(F);const w=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:x,suggestedLength:h}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=h||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(w)};if(this._request=null,this._url.protocol==="http:"){const F=require$$5;this._request=F.request(l(this._url,v.httpHeaders),L)}else{const F=require$$5;this._request=F.request(l(this._url,v.httpHeaders),L)}this._request.on("error",F=>{this._storedError=F,this._headersCapability.reject(F)}),this._request.end()}}class p extends u{constructor(v,L,F){super(v),this._httpHeaders={};for(const x in v.httpHeaders){const h=v.httpHeaders[x];h!==void 0&&(this._httpHeaders[x]=h)}this._httpHeaders.Range=`bytes=${L}-${F-1}`;const w=x=>{if(x.statusCode===404){const h=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),w)}else{const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),w)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class _ extends f{constructor(v){super(v);let L=decodeURIComponent(this._url.path);s.test(this._url.href)&&(L=L.replace(/^\//,""));const F=require$$5;F.lstat(L,(w,x)=>{if(w){w.code==="ENOENT"&&(w=new n.MissingPDFException(`Missing PDF "${L}".`)),this._storedError=w,this._headersCapability.reject(w);return}this._contentLength=x.size,this._setReadableStream(F.createReadStream(L)),this._headersCapability.resolve()})}}class g extends u{constructor(v,L,F){super(v);let w=decodeURIComponent(this._url.path);s.test(this._url.href)&&(w=w.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(w,{start:L,end:F-1}))}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=i(6),r=i(1);const s={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",f=["butt","round","square"],u=["miter","round","bevel"],l=function(x,h="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([x],{type:h}));const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${h};base64,`;for(let y=0,D=x.length;y<D;y+=3){const R=x[y]&255,z=x[y+1]&255,te=x[y+2]&255,O=R>>2,X=(R&3)<<4|z>>4,J=y+1<D?(z&15)<<2|te>>6:64,q=y+2<D?te&63:64;E+=M[O]+M[X]+M[J]+M[q]}return E},m=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,d=new Int32Array(256);for(let te=0;te<256;te++){let O=te;for(let X=0;X<8;X++)O=O&1?3988292384^O>>1&2147483647:O>>1&2147483647;d[te]=O}function M(te,O,X){let J=-1;for(let q=O;q<X;q++){const H=(J^te[q])&255,ce=d[H];J=J>>>8^ce}return J^-1}function E(te,O,X,J){let q=J;const H=O.length;X[q]=H>>24&255,X[q+1]=H>>16&255,X[q+2]=H>>8&255,X[q+3]=H&255,q+=4,X[q]=te.charCodeAt(0)&255,X[q+1]=te.charCodeAt(1)&255,X[q+2]=te.charCodeAt(2)&255,X[q+3]=te.charCodeAt(3)&255,q+=4,X.set(O,q),q+=O.length;const ce=M(X,J+4,q);X[q]=ce>>24&255,X[q+1]=ce>>16&255,X[q+2]=ce>>8&255,X[q+3]=ce&255}function y(te,O,X){let J=1,q=0;for(let H=O;H<X;++H)J=(J+(te[H]&255))%65521,q=(q+J)%65521;return q<<16|J}function D(te){if(!r.isNodeJS)return R(te);try{const O=parseInt(process.versions.node)>=8?te:Buffer.from(te),X=require$$5.deflateSync(O,{level:9});return X instanceof Uint8Array?X:new Uint8Array(X)}catch(O){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+O)}return R(te)}function R(te){let O=te.length;const X=65535,J=Math.ceil(O/X),q=new Uint8Array(2+O+J*5+4);let H=0;q[H++]=120,q[H++]=156;let ce=0;for(;O>X;)q[H++]=0,q[H++]=255,q[H++]=255,q[H++]=0,q[H++]=0,q.set(te.subarray(ce,ce+X),H),H+=X,ce+=X,O-=X;q[H++]=1,q[H++]=O&255,q[H++]=O>>8&255,q[H++]=~O&65535&255,q[H++]=(~O&65535)>>8&255,q.set(te.subarray(ce),H),H+=te.length-ce;const K=y(te,0,te.length);return q[H++]=K>>24&255,q[H++]=K>>16&255,q[H++]=K>>8&255,q[H++]=K&255,q}function z(te,O,X,J){const q=te.width,H=te.height;let ce,K,Ee;const xe=te.data;switch(O){case r.ImageKind.GRAYSCALE_1BPP:K=0,ce=1,Ee=q+7>>3;break;case r.ImageKind.RGB_24BPP:K=2,ce=8,Ee=q*3;break;case r.ImageKind.RGBA_32BPP:K=6,ce=8,Ee=q*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+Ee)*H);let b=0,T=0;for(let re=0;re<H;++re)B[b++]=0,B.set(xe.subarray(T,T+Ee),b),T+=Ee,b+=Ee;if(O===r.ImageKind.GRAYSCALE_1BPP&&J){b=0;for(let re=0;re<H;re++){b++;for(let be=0;be<Ee;be++)B[b++]^=255}}const C=new Uint8Array([q>>24&255,q>>16&255,q>>8&255,q&255,H>>24&255,H>>16&255,H>>8&255,H&255,ce,K,0,0,0]),I=D(B),N=x.length+h*3+C.length+I.length,j=new Uint8Array(N);let Z=0;return j.set(x,Z),Z+=x.length,E("IHDR",C,j,Z),Z+=h+C.length,E("IDATA",I,j,Z),Z+=h+I.length,E("IEND",new Uint8Array(0),j,Z),l(j,"image/png",X)}return function(O,X,J){const q=O.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:O.kind;return z(O,q,X,J)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=s.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=s.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,d){this.x=h,this.y=d}}function _(x){let h=[];const d=[];for(const M of x){if(M.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),d.push(h),h=h.at(-1).items;continue}M.fn==="restore"?h=d.pop():h.push(M)}return h}function g(x){if(Number.isInteger(x))return x.toString();const h=x.toFixed(10);let d=h.length-1;if(h[d]!=="0")return h;do d--;while(h[d]==="0");return h.substring(0,h[d]==="."?d:d+1)}function P(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${g(x[0])} ${g(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const h=Math.acos(x[0])*180/Math.PI;return`rotate(${g(h)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${g(x[4])} ${g(x[5])})`;return`matrix(${g(x[0])} ${g(x[1])} ${g(x[2])} ${g(x[3])} ${g(x[4])} ${g(x[5])})`}let v=0,L=0,F=0;class w{constructor(h,d,M=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new p,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=h,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!M,this._operatorIdMapping=[];for(const E in r.OPS)this._operatorIdMapping[r.OPS[E]]=E}getObject(h,d=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):d}save(){this.transformStack.push(this.transformMatrix);const h=this.current;this.extraStack.push(h),this.current=h.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(h){this.save(),this.executeOpTree(h),this.restore()}loadDependencies(h){const d=h.fnArray,M=h.argsArray;for(let E=0,y=d.length;E<y;E++)if(d[E]===r.OPS.dependency)for(const D of M[E]){const R=D.startsWith("g_")?this.commonObjs:this.objs,z=new Promise(te=>{R.get(D,te)});this.current.dependencies.push(z)}return Promise.all(this.current.dependencies)}transform(h,d,M,E,y,D){const R=[h,d,M,E,y,D];this.transformMatrix=r.Util.transform(this.transformMatrix,R),this.tgrp=null}getSVG(h,d){this.viewport=d;const M=this._initialize(d);return this.loadDependencies(h).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(h)),M))}convertOpList(h){const d=this._operatorIdMapping,M=h.argsArray,E=h.fnArray,y=[];for(let D=0,R=E.length;D<R;D++){const z=E[D];y.push({fnId:z,fn:d[z],args:M[D]})}return _(y)}executeOpTree(h){for(const d of h){const M=d.fn,E=d.fnId,y=d.args;switch(E|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(y);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(y[0],y[1]);break;case r.OPS.setFont:this.setFont(y);break;case r.OPS.showText:this.showText(y[0]);break;case r.OPS.showSpacedText:this.showText(y[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(y[0],y[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(y[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(y[0]);break;case r.OPS.setHScale:this.setHScale(y[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]);break;case r.OPS.setTextRise:this.setTextRise(y[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(y[0]);break;case r.OPS.setLineWidth:this.setLineWidth(y[0]);break;case r.OPS.setLineJoin:this.setLineJoin(y[0]);break;case r.OPS.setLineCap:this.setLineCap(y[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(y[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(y[0],y[1],y[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(y[0],y[1],y[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(y);break;case r.OPS.setFillColorN:this.setFillColorN(y);break;case r.OPS.shadingFill:this.shadingFill(y[0]);break;case r.OPS.setDash:this.setDash(y[0],y[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(y[0]);break;case r.OPS.setFlatness:this.setFlatness(y[0]);break;case r.OPS.setGState:this.setGState(y[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(y[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(y[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(y[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(y[0],y[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(y[0],y[1],y[2],y[3],y[4],y[5]);break;case r.OPS.constructPath:this.constructPath(y[0],y[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,r.warn)(`Unimplemented operator ${M}`);break}}}setWordSpacing(h){this.current.wordSpacing=h}setCharSpacing(h){this.current.charSpacing=h}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(h,d,M,E,y,D){const R=this.current;R.textMatrix=R.lineMatrix=[h,d,M,E,y,D],R.textMatrixScale=Math.hypot(h,d),R.x=R.lineX=0,R.y=R.lineY=0,R.xcoords=[],R.ycoords=[],R.tspan=this.svgFactory.createElement("svg:tspan"),R.tspan.setAttributeNS(null,"font-family",R.fontFamily),R.tspan.setAttributeNS(null,"font-size",`${g(R.fontSize)}px`),R.tspan.setAttributeNS(null,"y",g(-R.y)),R.txtElement=this.svgFactory.createElement("svg:text"),R.txtElement.append(R.tspan)}beginText(){const h=this.current;h.x=h.lineX=0,h.y=h.lineY=0,h.textMatrix=r.IDENTITY_MATRIX,h.lineMatrix=r.IDENTITY_MATRIX,h.textMatrixScale=1,h.tspan=this.svgFactory.createElement("svg:tspan"),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtgrp=this.svgFactory.createElement("svg:g"),h.xcoords=[],h.ycoords=[]}moveText(h,d){const M=this.current;M.x=M.lineX+=h,M.y=M.lineY+=d,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${g(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",g(-M.y))}showText(h){const d=this.current,M=d.font,E=d.fontSize;if(E===0)return;const y=d.fontSizeScale,D=d.charSpacing,R=d.wordSpacing,z=d.fontDirection,te=d.textHScale*z,O=M.vertical,X=O?1:-1,J=M.defaultVMetrics,q=E*d.fontMatrix[0];let H=0;for(const Ee of h){if(Ee===null){H+=z*R;continue}else if(typeof Ee=="number"){H+=X*Ee*E/1e3;continue}const xe=(Ee.isSpace?R:0)+D,B=Ee.fontChar;let b,T,C=Ee.width;if(O){let N;const j=Ee.vmetric||J;N=Ee.vmetric?j[1]:C*.5,N=-N*q;const Z=j[2]*q;C=j?-j[0]:C,b=N/y,T=(H+Z)/y}else b=H/y,T=0;(Ee.isInFont||M.missingFile)&&(d.xcoords.push(d.x+b),O&&d.ycoords.push(-d.y+T),d.tspan.textContent+=B);const I=O?C*q-xe*z:C*q+xe*z;H+=I}d.tspan.setAttributeNS(null,"x",d.xcoords.map(g).join(" ")),O?d.tspan.setAttributeNS(null,"y",d.ycoords.map(g).join(" ")):d.tspan.setAttributeNS(null,"y",g(-d.y)),O?d.y-=H:d.x+=H*te,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${g(d.fontSize)}px`),d.fontStyle!==s.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==s.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const ce=d.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(ce===r.TextRenderingMode.FILL||ce===r.TextRenderingMode.FILL_STROKE?(d.fillColor!==s.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),ce===r.TextRenderingMode.STROKE||ce===r.TextRenderingMode.FILL_STROKE){const Ee=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,Ee)}let K=d.textMatrix;d.textRise!==0&&(K=K.slice(),K[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${P(K)} scale(${g(te)}, -1)`),d.txtElement.setAttributeNS(a,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(h,d){this.setLeading(-d),this.moveText(h,d)}addFontStyle(h){if(!h.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=l(h.data,h.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${h.loadedName}"; src: url(${d}); }
`}setFont(h){const d=this.current,M=this.commonObjs.get(h[0]);let E=h[1];d.font=M,this.embedFonts&&!M.missingFile&&!this.embeddedFonts[M.loadedName]&&(this.addFontStyle(M),this.embeddedFonts[M.loadedName]=M),d.fontMatrix=M.fontMatrix||r.FONT_IDENTITY_MATRIX;let y="normal";M.black?y="900":M.bold&&(y="bold");const D=M.italic?"italic":"normal";E<0?(E=-E,d.fontDirection=-1):d.fontDirection=1,d.fontSize=E,d.fontFamily=M.loadedName,d.fontWeight=y,d.fontStyle=D,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",g(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const h=this.current;h.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=h.txtElement)!=null&&d.hasChildNodes())&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(h){h>0&&(this.current.lineWidth=h)}setLineCap(h){this.current.lineCap=f[h]}setLineJoin(h){this.current.lineJoin=u[h]}setMiterLimit(h){this.current.miterLimit=h}setStrokeAlpha(h){this.current.strokeAlpha=h}setStrokeRGBColor(h,d,M){this.current.strokeColor=r.Util.makeHexColor(h,d,M)}setFillAlpha(h){this.current.fillAlpha=h}setFillRGBColor(h,d,M){this.current.fillColor=r.Util.makeHexColor(h,d,M),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(h){this.current.strokeColor=this._makeColorN_Pattern(h)}setFillColorN(h){this.current.fillColor=this._makeColorN_Pattern(h)}shadingFill(h){const{width:d,height:M}=this.viewport,E=r.Util.inverseTransform(this.transformMatrix),[y,D,R,z]=r.Util.getAxialAlignedBoundingBox([0,0,d,M],E),te=this.svgFactory.createElement("svg:rect");te.setAttributeNS(null,"x",y),te.setAttributeNS(null,"y",D),te.setAttributeNS(null,"width",R-y),te.setAttributeNS(null,"height",z-D),te.setAttributeNS(null,"fill",this._makeShadingPattern(h)),this.current.fillAlpha<1&&te.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(te)}_makeColorN_Pattern(h){return h[0]==="TilingPattern"?this._makeTilingPattern(h):this._makeShadingPattern(h)}_makeTilingPattern(h){const d=h[1],M=h[2],E=h[3]||r.IDENTITY_MATRIX,[y,D,R,z]=h[4],te=h[5],O=h[6],X=h[7],J=`shading${F++}`,[q,H,ce,K]=r.Util.normalizeRect([...r.Util.applyTransform([y,D],E),...r.Util.applyTransform([R,z],E)]),[Ee,xe]=r.Util.singularValueDecompose2dScale(E),B=te*Ee,b=O*xe,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",J),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",B),T.setAttributeNS(null,"height",b),T.setAttributeNS(null,"x",`${q}`),T.setAttributeNS(null,"y",`${H}`);const C=this.svg,I=this.transformMatrix,N=this.current.fillColor,j=this.current.strokeColor,Z=this.svgFactory.create(ce-q,K-H);if(this.svg=Z,this.transformMatrix=E,X===2){const re=r.Util.makeHexColor(...d);this.current.fillColor=re,this.current.strokeColor=re}return this.executeOpTree(this.convertOpList(M)),this.svg=C,this.transformMatrix=I,this.current.fillColor=N,this.current.strokeColor=j,T.append(Z.childNodes[0]),this.defs.append(T),`url(#${J})`}_makeShadingPattern(h){switch(typeof h=="string"&&(h=this.objs.get(h)),h[0]){case"RadialAxial":const d=`shading${F++}`,M=h[3];let E;switch(h[1]){case"axial":const y=h[4],D=h[5];E=this.svgFactory.createElement("svg:linearGradient"),E.setAttributeNS(null,"id",d),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"x1",y[0]),E.setAttributeNS(null,"y1",y[1]),E.setAttributeNS(null,"x2",D[0]),E.setAttributeNS(null,"y2",D[1]);break;case"radial":const R=h[4],z=h[5],te=h[6],O=h[7];E=this.svgFactory.createElement("svg:radialGradient"),E.setAttributeNS(null,"id",d),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"cx",z[0]),E.setAttributeNS(null,"cy",z[1]),E.setAttributeNS(null,"r",O),E.setAttributeNS(null,"fx",R[0]),E.setAttributeNS(null,"fy",R[1]),E.setAttributeNS(null,"fr",te);break;default:throw new Error(`Unknown RadialAxial type: ${h[1]}`)}for(const y of M){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",y[0]),D.setAttributeNS(null,"stop-color",y[1]),E.append(D)}return this.defs.append(E),`url(#${d})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${h[0]}`)}}setDash(h,d){this.current.dashArray=h,this.current.dashPhase=d}constructPath(h,d){const M=this.current;let E=M.x,y=M.y,D=[],R=0;for(const z of h)switch(z|0){case r.OPS.rectangle:E=d[R++],y=d[R++];const te=d[R++],O=d[R++],X=E+te,J=y+O;D.push("M",g(E),g(y),"L",g(X),g(y),"L",g(X),g(J),"L",g(E),g(J),"Z");break;case r.OPS.moveTo:E=d[R++],y=d[R++],D.push("M",g(E),g(y));break;case r.OPS.lineTo:E=d[R++],y=d[R++],D.push("L",g(E),g(y));break;case r.OPS.curveTo:E=d[R+4],y=d[R+5],D.push("C",g(d[R]),g(d[R+1]),g(d[R+2]),g(d[R+3]),g(E),g(y)),R+=6;break;case r.OPS.curveTo2:D.push("C",g(E),g(y),g(d[R]),g(d[R+1]),g(d[R+2]),g(d[R+3])),E=d[R+2],y=d[R+3],R+=4;break;case r.OPS.curveTo3:E=d[R+2],y=d[R+3],D.push("C",g(d[R]),g(d[R+1]),g(E),g(y),g(E),g(y)),R+=4;break;case r.OPS.closePath:D.push("Z");break}D=D.join(" "),M.path&&h.length>0&&h[0]!==r.OPS.rectangle&&h[0]!==r.OPS.moveTo?D=M.path.getAttributeNS(null,"d")+D:(M.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(M.path)),M.path.setAttributeNS(null,"d",D),M.path.setAttributeNS(null,"fill","none"),M.element=M.path,M.setCurrentPoint(E,y)}endPath(){const h=this.current;if(h.path=null,!this.pendingClip)return;if(!h.element){this.pendingClip=null;return}const d=`clippath${v++}`,M=this.svgFactory.createElement("svg:clipPath");M.setAttributeNS(null,"id",d),M.setAttributeNS(null,"transform",P(this.transformMatrix));const E=h.element.cloneNode(!0);if(this.pendingClip==="evenodd"?E.setAttributeNS(null,"clip-rule","evenodd"):E.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,M.append(E),this.defs.append(M),h.activeClipUrl){h.clipGroup=null;for(const y of this.extraStack)y.clipGroup=null;M.setAttributeNS(null,"clip-path",h.activeClipUrl)}h.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(h){this.pendingClip=h}closePath(){const h=this.current;if(h.path){const d=`${h.path.getAttributeNS(null,"d")}Z`;h.path.setAttributeNS(null,"d",d)}}setLeading(h){this.current.leading=-h}setTextRise(h){this.current.textRise=h}setTextRenderingMode(h){this.current.textRenderingMode=h}setHScale(h){this.current.textHScale=h/100}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[d,M]of h)switch(d){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M);break;case"CA":this.setStrokeAlpha(M);break;case"ca":this.setFillAlpha(M);break;default:(0,r.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const h=this.current;h.element&&(h.element.setAttributeNS(null,"fill",h.fillColor),h.element.setAttributeNS(null,"fill-opacity",h.fillAlpha),this.endPath())}stroke(){const h=this.current;h.element&&(this._setStrokeAttributes(h.element),h.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(h,d=1){const M=this.current;let E=M.dashArray;d!==1&&E.length>0&&(E=E.map(function(y){return d*y})),h.setAttributeNS(null,"stroke",M.strokeColor),h.setAttributeNS(null,"stroke-opacity",M.strokeAlpha),h.setAttributeNS(null,"stroke-miterlimit",g(M.miterLimit)),h.setAttributeNS(null,"stroke-linecap",M.lineCap),h.setAttributeNS(null,"stroke-linejoin",M.lineJoin),h.setAttributeNS(null,"stroke-width",g(d*M.lineWidth)+"px"),h.setAttributeNS(null,"stroke-dasharray",E.map(g).join(" ")),h.setAttributeNS(null,"stroke-dashoffset",g(d*M.dashPhase)+"px")}eoFill(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width","1px"),h.setAttributeNS(null,"height","1px"),h.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(h)}paintImageXObject(h){const d=this.getObject(h);if(!d){(0,r.warn)(`Dependent image with object ID ${h} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(h,d){const M=h.width,E=h.height,y=m(h,this.forceDataSchema,!!d),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",g(M)),D.setAttributeNS(null,"height",g(E)),this.current.element=D,this.clip("nonzero");const R=this.svgFactory.createElement("svg:image");R.setAttributeNS(c,"xlink:href",y),R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y",g(-E)),R.setAttributeNS(null,"width",g(M)+"px"),R.setAttributeNS(null,"height",g(E)+"px"),R.setAttributeNS(null,"transform",`scale(${g(1/M)} ${g(-1/E)})`),d?d.append(R):this._ensureTransformGroup().append(R)}paintImageMaskXObject(h){const d=this.getObject(h.data,h);if(d.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const M=this.current,E=d.width,y=d.height,D=M.fillColor;M.maskId=`mask${L++}`;const R=this.svgFactory.createElement("svg:mask");R.setAttributeNS(null,"id",M.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",g(E)),z.setAttributeNS(null,"height",g(y)),z.setAttributeNS(null,"fill",D),z.setAttributeNS(null,"mask",`url(#${M.maskId})`),this.defs.append(R),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(d,R)}paintFormXObjectBegin(h,d){if(Array.isArray(h)&&h.length===6&&this.transform(h[0],h[1],h[2],h[3],h[4],h[5]),d){const M=d[2]-d[0],E=d[3]-d[1],y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x",d[0]),y.setAttributeNS(null,"y",d[1]),y.setAttributeNS(null,"width",g(M)),y.setAttributeNS(null,"height",g(E)),this.current.element=y,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(h){const d=this.svgFactory.create(h.width,h.height),M=this.svgFactory.createElement("svg:defs");d.append(M),this.defs=M;const E=this.svgFactory.createElement("svg:g");return E.setAttributeNS(null,"transform",P(h.transform)),d.append(E),this.svg=E,d}_ensureClipGroup(){if(!this.current.clipGroup){const h=this.svgFactory.createElement("svg:g");h.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(h),this.current.clipGroup=h}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=w},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class i{static textContent(r){const s=[],a={items:s,styles:Object.create(null)};function c(f){var m;if(!f)return;let u=null;const l=f.name;if(l==="#text")u=f.value;else if(i.shouldBuildText(l))(m=f==null?void 0:f.attributes)!=null&&m.textContent?u=f.attributes.textContent:f.value&&(u=f.value);else return;if(u!==null&&s.push({str:u}),!!f.children)for(const p of f.children)c(p)}return c(r),a}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}t.XfaText=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=P,t.updateTextLayer=v;var n=i(1),r=i(6);const s=1e5,a=30,c=.8,f=new Map;function u(L,F){let w;if(F&&n.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(L,L).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=L,w=x.getContext("2d",{alpha:!1})}return w}function l(L,F){const w=f.get(L);if(w)return w;const x=u(a,F);x.font=`${a}px ${L}`;const h=x.measureText("");let d=h.fontBoundingBoxAscent,M=Math.abs(h.fontBoundingBoxDescent);if(d){const y=d/(d+M);return f.set(L,y),x.canvas.width=x.canvas.height=0,y}x.strokeStyle="red",x.clearRect(0,0,a,a),x.strokeText("g",0,0);let E=x.getImageData(0,0,a,a).data;M=0;for(let y=E.length-1-3;y>=0;y-=4)if(E[y]>0){M=Math.ceil(y/4/a);break}x.clearRect(0,0,a,a),x.strokeText("A",0,a),E=x.getImageData(0,0,a,a).data,d=0;for(let y=0,D=E.length;y<D;y+=4)if(E[y]>0){d=a-Math.floor(y/4/a);break}if(x.canvas.width=x.canvas.height=0,d){const y=d/(d+M);return f.set(L,y),y}return f.set(L,c),c}function m(L,F,w){const x=document.createElement("span"),h={angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL,fontSize:0};L._textDivs.push(x);const d=n.Util.transform(L._transform,F.transform);let M=Math.atan2(d[1],d[0]);const E=w[F.fontName];E.vertical&&(M+=Math.PI/2);const y=Math.hypot(d[2],d[3]),D=y*l(E.fontFamily,L._isOffscreenCanvasSupported);let R,z;M===0?(R=d[4],z=d[5]-D):(R=d[4]+D*Math.sin(M),z=d[5]-D*Math.cos(M));const te="calc(var(--scale-factor)*",O=x.style;L._container===L._rootContainer?(O.left=`${(100*R/L._pageWidth).toFixed(2)}%`,O.top=`${(100*z/L._pageHeight).toFixed(2)}%`):(O.left=`${te}${R.toFixed(2)}px)`,O.top=`${te}${z.toFixed(2)}px)`),O.fontSize=`${te}${y.toFixed(2)}px)`,O.fontFamily=E.fontFamily,h.fontSize=y,x.setAttribute("role","presentation"),x.textContent=F.str,x.dir=F.dir,L._fontInspectorEnabled&&(x.dataset.fontName=F.fontName),M!==0&&(h.angle=M*(180/Math.PI));let X=!1;if(F.str.length>1)X=!0;else if(F.str!==" "&&F.transform[0]!==F.transform[3]){const J=Math.abs(F.transform[0]),q=Math.abs(F.transform[3]);J!==q&&Math.max(J,q)/Math.min(J,q)>1.5&&(X=!0)}X&&(h.canvasWidth=E.vertical?F.height:F.width),L._textDivProperties.set(x,h),L._isReadableStream&&L._layoutText(x)}function p(L){const{div:F,scale:w,properties:x,ctx:h,prevFontSize:d,prevFontFamily:M}=L,{style:E}=F;let y="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:D}=E,{canvasWidth:R,fontSize:z}=x;(d!==z||M!==D)&&(h.font=`${z*w}px ${D}`,L.prevFontSize=z,L.prevFontFamily=D);const{width:te}=h.measureText(F.textContent);te>0&&(y=`scaleX(${R*w/te})`)}x.angle!==0&&(y=`rotate(${x.angle}deg) ${y}`),y.length>0&&(E.transform=y)}function _(L){if(L._canceled)return;const F=L._textDivs,w=L._capability;if(F.length>s){w.resolve();return}if(!L._isReadableStream)for(const h of F)L._layoutText(h);w.resolve()}class g{constructor({textContentSource:F,container:w,viewport:x,textDivs:h,textDivProperties:d,textContentItemsStr:M,isOffscreenCanvasSupported:E}){var te;this._textContentSource=F,this._isReadableStream=F instanceof ReadableStream,this._container=this._rootContainer=w,this._textDivs=h||[],this._textContentItemsStr=M||[],this._isOffscreenCanvasSupported=E,this._fontInspectorEnabled=!!((te=globalThis.FontInspector)!=null&&te.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,E)};const{pageWidth:y,pageHeight:D,pageX:R,pageY:z}=x.rawDims;this._transform=[1,0,0,-1,-R,z+D],this._pageWidth=y,this._pageHeight=D,(0,r.setLayerDimensions)(w,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(F,w){for(const x of F){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),h.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),m(this,x,w)}}_layoutText(F){const w=this._layoutTextParams.properties=this._textDivProperties.get(F);if(this._layoutTextParams.div=F,p(this._layoutTextParams),w.hasText&&this._container.append(F),w.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const F=new n.PromiseCapability;let w=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:h,done:d})=>{if(d){F.resolve();return}Object.assign(w,h.styles),this._processItems(h.items,w),x()},F.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:h}=this._textContentSource;this._processItems(x,h),F.resolve()}else throw new Error('No "textContentSource" parameter specified.');F.promise.then(()=>{w=null,_(this)},this._capability.reject)}}t.TextLayerRenderTask=g;function P(L){!L.textContentSource&&(L.textContent||L.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),L.textContentSource=L.textContent||L.textContentStream);const{container:F,viewport:w}=L,x=getComputedStyle(F),h=x.getPropertyValue("visibility"),d=parseFloat(x.getPropertyValue("--scale-factor"));h==="visible"&&(!d||Math.abs(d-w.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const M=new g(L);return M._render(),M}function v({container:L,viewport:F,textDivs:w,textDivProperties:x,isOffscreenCanvasSupported:h,mustRotate:d=!0,mustRescale:M=!0}){if(d&&(0,r.setLayerDimensions)(L,{rotation:F.rotation}),M){const E=u(0,h),D={prevFontSize:null,prevFontFamily:null,div:null,scale:F.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E};for(const R of w)D.properties=x.get(R),D.div=R,p(D)}}},(e,t,i)=>{var l,m,p,_,g,P,v,L,F,w,x,mn,d,Ot,E,_n,D,vn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=i(1),r=i(4),s=i(28),a=i(33),c=i(6),f=i(34);const z=class z{constructor({uiManager:O,pageIndex:X,div:J,accessibilityManager:q,annotationLayer:H,viewport:ce,l10n:K}){$(this,x);$(this,d);$(this,E);$(this,D);$(this,l,void 0);$(this,m,!1);$(this,p,null);$(this,_,this.pointerup.bind(this));$(this,g,this.pointerdown.bind(this));$(this,P,new Map);$(this,v,!1);$(this,L,!1);$(this,F,!1);$(this,w,void 0);const Ee=[s.FreeTextEditor,a.InkEditor,f.StampEditor];if(!z._initialized){z._initialized=!0;for(const xe of Ee)xe.initialize(K)}O.registerEditorTypes(Ee),ee(this,w,O),this.pageIndex=X,this.div=J,ee(this,l,q),ee(this,p,H),this.viewport=ce,o(this,w).addLayer(this)}get isEmpty(){return o(this,P).size===0}updateToolbar(O){o(this,w).updateToolbar(O)}updateMode(O=o(this,w).getMode()){G(this,D,vn).call(this),O===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),O!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",O===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",O===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",O===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(O){if(!O&&o(this,w).getMode()!==n.AnnotationEditorType.INK)return;if(!O){for(const J of o(this,P).values())if(J.isEmpty()){J.setInBackground();return}}G(this,d,Ot).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(O){o(this,w).setEditingState(O)}addCommands(O){o(this,w).addCommands(O)}enable(){this.div.style.pointerEvents="auto";const O=new Set;for(const J of o(this,P).values())J.enableEditing(),J.annotationElementId&&O.add(J.annotationElementId);if(!o(this,p))return;const X=o(this,p).getEditableAnnotations();for(const J of X){if(J.hide(),o(this,w).isDeletedAnnotationElement(J.data.id)||O.has(J.data.id))continue;const q=this.deserialize(J);q&&(this.addOrRebuild(q),q.enableEditing())}}disable(){var X;ee(this,F,!0),this.div.style.pointerEvents="none";const O=new Set;for(const J of o(this,P).values()){if(J.disableEditing(),!J.annotationElementId||J.serialize()!==null){O.add(J.annotationElementId);continue}(X=this.getEditableAnnotation(J.annotationElementId))==null||X.show(),J.remove()}if(o(this,p)){const J=o(this,p).getEditableAnnotations();for(const q of J){const{id:H}=q.data;O.has(H)||o(this,w).isDeletedAnnotationElement(H)||q.show()}}G(this,D,vn).call(this),this.isEmpty&&(this.div.hidden=!0),ee(this,F,!1)}getEditableAnnotation(O){var X;return((X=o(this,p))==null?void 0:X.getEditableAnnotation(O))||null}setActiveEditor(O){o(this,w).getActive()!==O&&o(this,w).setActiveEditor(O)}enableClick(){this.div.addEventListener("pointerdown",o(this,g)),this.div.addEventListener("pointerup",o(this,_))}disableClick(){this.div.removeEventListener("pointerdown",o(this,g)),this.div.removeEventListener("pointerup",o(this,_))}attach(O){o(this,P).set(O.id,O);const{annotationElementId:X}=O;X&&o(this,w).isDeletedAnnotationElement(X)&&o(this,w).removeDeletedAnnotationElement(O)}detach(O){var X;o(this,P).delete(O.id),(X=o(this,l))==null||X.removePointerInTextLayer(O.contentDiv),!o(this,F)&&O.annotationElementId&&o(this,w).addDeletedAnnotationElement(O)}remove(O){this.detach(O),o(this,w).removeEditor(O),O.div.contains(document.activeElement)&&setTimeout(()=>{o(this,w).focusMainContainer()},0),O.div.remove(),O.isAttachedToDOM=!1,o(this,L)||this.addInkEditorIfNeeded(!1)}changeParent(O){var X;O.parent!==this&&(O.annotationElementId&&(o(this,w).addDeletedAnnotationElement(O.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(O),O.annotationElementId=null),this.attach(O),(X=O.parent)==null||X.detach(O),O.setParent(this),O.div&&O.isAttachedToDOM&&(O.div.remove(),this.div.append(O.div)))}add(O){if(this.changeParent(O),o(this,w).addEditor(O),this.attach(O),!O.isAttachedToDOM){const X=O.render();this.div.append(X),O.isAttachedToDOM=!0}O.fixAndSetPosition(),O.onceAdded(),o(this,w).addToAnnotationStorage(O)}moveEditorInDOM(O){var J;if(!O.isAttachedToDOM)return;const{activeElement:X}=document;O.div.contains(X)&&(O._focusEventsAllowed=!1,setTimeout(()=>{O.div.contains(document.activeElement)?O._focusEventsAllowed=!0:(O.div.addEventListener("focusin",()=>{O._focusEventsAllowed=!0},{once:!0}),X.focus())},0)),O._structTreeParentId=(J=o(this,l))==null?void 0:J.moveElementInDOM(this.div,O.div,O.contentDiv,!0)}addOrRebuild(O){O.needsToBeRebuilt()?O.rebuild():this.add(O)}addUndoableEditor(O){const X=()=>O._uiManager.rebuild(O),J=()=>{O.remove()};this.addCommands({cmd:X,undo:J,mustExec:!1})}getNextId(){return o(this,w).getId()}pasteEditor(O,X){o(this,w).updateToolbar(O),o(this,w).updateMode(O);const{offsetX:J,offsetY:q}=G(this,E,_n).call(this),H=this.getNextId(),ce=G(this,x,mn).call(this,{parent:this,id:H,x:J,y:q,uiManager:o(this,w),isCentered:!0,...X});ce&&this.add(ce)}deserialize(O){switch(O.annotationType??O.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(O,this,o(this,w));case n.AnnotationEditorType.INK:return a.InkEditor.deserialize(O,this,o(this,w));case n.AnnotationEditorType.STAMP:return f.StampEditor.deserialize(O,this,o(this,w))}return null}addNewEditor(){G(this,d,Ot).call(this,G(this,E,_n).call(this),!0)}setSelected(O){o(this,w).setSelected(O)}toggleSelected(O){o(this,w).toggleSelected(O)}isSelected(O){return o(this,w).isSelected(O)}unselect(O){o(this,w).unselect(O)}pointerup(O){const{isMac:X}=n.FeatureTest.platform;if(!(O.button!==0||O.ctrlKey&&X)&&O.target===this.div&&o(this,v)){if(ee(this,v,!1),!o(this,m)){ee(this,m,!0);return}if(o(this,w).getMode()===n.AnnotationEditorType.STAMP){o(this,w).unselectAll();return}G(this,d,Ot).call(this,O,!1)}}pointerdown(O){if(o(this,v)){ee(this,v,!1);return}const{isMac:X}=n.FeatureTest.platform;if(O.button!==0||O.ctrlKey&&X||O.target!==this.div)return;ee(this,v,!0);const J=o(this,w).getActive();ee(this,m,!J||J.isEmpty())}findNewParent(O,X,J){const q=o(this,w).findParent(X,J);return q===null||q===this?!1:(q.changeParent(O),!0)}destroy(){var O,X;((O=o(this,w).getActive())==null?void 0:O.parent)===this&&(o(this,w).commitOrRemove(),o(this,w).setActiveEditor(null));for(const J of o(this,P).values())(X=o(this,l))==null||X.removePointerInTextLayer(J.contentDiv),J.setParent(null),J.isAttachedToDOM=!1,J.div.remove();this.div=null,o(this,P).clear(),o(this,w).removeLayer(this)}render({viewport:O}){this.viewport=O,(0,c.setLayerDimensions)(this.div,O);for(const X of o(this,w).getEditors(this.pageIndex))this.add(X);this.updateMode()}update({viewport:O}){o(this,w).commitOrRemove(),this.viewport=O,(0,c.setLayerDimensions)(this.div,{rotation:O.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:O,pageHeight:X}=this.viewport.rawDims;return[O,X]}};l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,F=new WeakMap,w=new WeakMap,x=new WeakSet,mn=function(O){switch(o(this,w).getMode()){case n.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(O);case n.AnnotationEditorType.INK:return new a.InkEditor(O);case n.AnnotationEditorType.STAMP:return new f.StampEditor(O)}return null},d=new WeakSet,Ot=function(O,X){const J=this.getNextId(),q=G(this,x,mn).call(this,{parent:this,id:J,x:O.offsetX,y:O.offsetY,uiManager:o(this,w),isCentered:X});return q&&this.add(q),q},E=new WeakSet,_n=function(){const{x:O,y:X,width:J,height:q}=this.div.getBoundingClientRect(),H=Math.max(0,O),ce=Math.max(0,X),K=Math.min(window.innerWidth,O+J),Ee=Math.min(window.innerHeight,X+q),xe=(H+K)/2-O,B=(ce+Ee)/2-X,[b,T]=this.viewport.rotation%180===0?[xe,B]:[B,xe];return{offsetX:b,offsetY:T}},D=new WeakSet,vn=function(){ee(this,L,!0);for(const O of o(this,P).values())O.isEmpty()&&O.remove();ee(this,L,!1)},se(z,"_initialized",!1);let u=z;t.AnnotationEditorLayer=u},(e,t,i)=>{var f,u,l,m,p,_,g,P,v,L,fi,w,gi,h,pi,M,Pt,y,bn,R,mi,te,yn;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=i(1),r=i(5),s=i(4),a=i(29);const X=class X extends s.AnnotationEditor{constructor(H){super({...H,name:"freeTextEditor"});$(this,L);$(this,w);$(this,h);$(this,M);$(this,y);$(this,R);$(this,te);$(this,f,this.editorDivBlur.bind(this));$(this,u,this.editorDivFocus.bind(this));$(this,l,this.editorDivInput.bind(this));$(this,m,this.editorDivKeydown.bind(this));$(this,p,void 0);$(this,_,"");$(this,g,`${this.id}-editor`);$(this,P,void 0);$(this,v,null);ee(this,p,H.color||X._defaultColor||s.AnnotationEditor._defaultLineColor),ee(this,P,H.fontSize||X._defaultFontSize)}static get _keyboardManager(){const H=X.prototype,ce=xe=>xe.isEmpty(),K=r.AnnotationEditorUIManager.TRANSLATE_SMALL,Ee=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],H.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],H.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],H._translateEmpty,{args:[-K,0],checker:ce}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H._translateEmpty,{args:[-Ee,0],checker:ce}],[["ArrowRight","mac+ArrowRight"],H._translateEmpty,{args:[K,0],checker:ce}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H._translateEmpty,{args:[Ee,0],checker:ce}],[["ArrowUp","mac+ArrowUp"],H._translateEmpty,{args:[0,-K],checker:ce}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H._translateEmpty,{args:[0,-Ee],checker:ce}],[["ArrowDown","mac+ArrowDown"],H._translateEmpty,{args:[0,K],checker:ce}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H._translateEmpty,{args:[0,Ee],checker:ce}]]))}static initialize(H){s.AnnotationEditor.initialize(H,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ce=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ce.getPropertyValue("--freetext-padding"))}static updateDefaultParams(H,ce){switch(H){case n.AnnotationEditorParamsType.FREETEXT_SIZE:X._defaultFontSize=ce;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:X._defaultColor=ce;break}}updateParams(H,ce){switch(H){case n.AnnotationEditorParamsType.FREETEXT_SIZE:G(this,L,fi).call(this,ce);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:G(this,w,gi).call(this,ce);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,X._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,X._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,o(this,P)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,o(this,p)]]}_translateEmpty(H,ce){this._uiManager.translateSelectedEditors(H,ce,!0)}getInitialTranslation(){const H=this.parentScale;return[-X._internalPadding*H,-(X._internalPadding+o(this,P))*H]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",o(this,m)),this.editorDiv.addEventListener("focus",o(this,u)),this.editorDiv.addEventListener("blur",o(this,f)),this.editorDiv.addEventListener("input",o(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,g)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",o(this,m)),this.editorDiv.removeEventListener("focus",o(this,u)),this.editorDiv.removeEventListener("blur",o(this,f)),this.editorDiv.removeEventListener("input",o(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(H){this._focusEventsAllowed&&(super.focusin(H),H.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var H;if(this.width){G(this,te,yn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(H=this._initialOptions)!=null&&H.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const H=o(this,_),ce=ee(this,_,G(this,h,pi).call(this).trimEnd());if(H===ce)return;const K=Ee=>{if(ee(this,_,Ee),!Ee){this.remove();return}G(this,y,bn).call(this),this._uiManager.rebuild(this),G(this,M,Pt).call(this)};this.addCommands({cmd:()=>{K(ce)},undo:()=>{K(H)},mustExec:!1}),G(this,M,Pt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(H){this.enterInEditMode()}keydown(H){H.target===this.div&&H.key==="Enter"&&(this.enterInEditMode(),H.preventDefault())}editorDivKeydown(H){X._keyboardManager.exec(this,H)}editorDivFocus(H){this.isEditing=!0}editorDivBlur(H){this.isEditing=!1}editorDivInput(H){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let H,ce;this.width&&(H=this.x,ce=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,g)),this.enableEditing(),s.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ee=>{var xe;return(xe=this.editorDiv)==null?void 0:xe.setAttribute("aria-label",Ee)}),s.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ee=>{var xe;return(xe=this.editorDiv)==null?void 0:xe.setAttribute("default-content",Ee)}),this.editorDiv.contentEditable=!0;const{style:K}=this.editorDiv;if(K.fontSize=`calc(${o(this,P)}px * var(--scale-factor))`,K.color=o(this,p),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ee,xe]=this.parentDimensions;if(this.annotationElementId){const{position:B}=o(this,v);let[b,T]=this.getInitialTranslation();[b,T]=this.pageTranslationToScreen(b,T);const[C,I]=this.pageDimensions,[N,j]=this.pageTranslation;let Z,re;switch(this.rotation){case 0:Z=H+(B[0]-N)/C,re=ce+this.height-(B[1]-j)/I;break;case 90:Z=H+(B[0]-N)/C,re=ce-(B[1]-j)/I,[b,T]=[T,-b];break;case 180:Z=H-this.width+(B[0]-N)/C,re=ce-(B[1]-j)/I,[b,T]=[-b,-T];break;case 270:Z=H+(B[0]-N-this.height*I)/C,re=ce+(B[1]-j-this.width*C)/I,[b,T]=[-T,b];break}this.setAt(Z*Ee,re*xe,b,T)}else this.setAt(H*Ee,ce*xe,this.width*Ee,this.height*xe);G(this,y,bn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(H,ce,K){let Ee=null;if(H instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:B,fontColor:b},rect:T,rotation:C,id:I},textContent:N,textPosition:j,parent:{page:{pageNumber:Z}}}=H;if(!N||N.length===0)return null;Ee=H={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(b),fontSize:B,value:N.join(`
`),position:j,pageIndex:Z-1,rect:T,rotation:C,id:I,deleted:!1}}const xe=super.deserialize(H,ce,K);return ee(xe,P,H.fontSize),ee(xe,p,n.Util.makeHexColor(...H.color)),ee(xe,_,H.value),xe.annotationElementId=H.id||null,ee(xe,v,Ee),xe}serialize(H=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ce=X._internalPadding*this.parentScale,K=this.getRect(ce,ce),Ee=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,p)),xe={annotationType:n.AnnotationEditorType.FREETEXT,color:Ee,fontSize:o(this,P),value:o(this,_),pageIndex:this.pageIndex,rect:K,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return H?xe:this.annotationElementId&&!G(this,R,mi).call(this,xe)?null:(xe.id=this.annotationElementId,xe)}};f=new WeakMap,u=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakSet,fi=function(H){const ce=Ee=>{this.editorDiv.style.fontSize=`calc(${Ee}px * var(--scale-factor))`,this.translate(0,-(Ee-o(this,P))*this.parentScale),ee(this,P,Ee),G(this,M,Pt).call(this)},K=o(this,P);this.addCommands({cmd:()=>{ce(H)},undo:()=>{ce(K)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,gi=function(H){const ce=o(this,p);this.addCommands({cmd:()=>{ee(this,p,this.editorDiv.style.color=H)},undo:()=>{ee(this,p,this.editorDiv.style.color=ce)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,pi=function(){const H=this.editorDiv.getElementsByTagName("div");if(H.length===0)return this.editorDiv.innerText;const ce=[];for(const K of H)ce.push(K.innerText.replace(/\r\n?|\n/,""));return ce.join(`
`)},M=new WeakSet,Pt=function(){const[H,ce]=this.parentDimensions;let K;if(this.isAttachedToDOM)K=this.div.getBoundingClientRect();else{const{currentLayer:Ee,div:xe}=this,B=xe.style.display;xe.style.display="hidden",Ee.div.append(this.div),K=xe.getBoundingClientRect(),xe.remove(),xe.style.display=B}this.rotation%180===this.parentRotation%180?(this.width=K.width/H,this.height=K.height/ce):(this.width=K.height/H,this.height=K.width/ce),this.fixAndSetPosition()},y=new WeakSet,bn=function(){if(this.editorDiv.replaceChildren(),!!o(this,_))for(const H of o(this,_).split(`
`)){const ce=document.createElement("div");ce.append(H?document.createTextNode(H):document.createElement("br")),this.editorDiv.append(ce)}},R=new WeakSet,mi=function(H){const{value:ce,fontSize:K,color:Ee,rect:xe,pageIndex:B}=o(this,v);return H.value!==ce||H.fontSize!==K||H.rect.some((b,T)=>Math.abs(b-xe[T])>=1)||H.color.some((b,T)=>b!==Ee[T])||H.pageIndex!==B},te=new WeakSet,yn=function(H=!1){if(!this.annotationElementId)return;if(G(this,M,Pt).call(this),!H&&(this.width===0||this.height===0)){setTimeout(()=>G(this,te,yn).call(this,!0),0);return}const ce=X._internalPadding*this.parentScale;o(this,v).rect=this.getRect(ce,ce)},se(X,"_freeTextDefaultContent",""),se(X,"_internalPadding",0),se(X,"_defaultColor",null),se(X,"_defaultFontSize",10),se(X,"_type","freetext");let c=X;t.FreeTextEditor=c},(e,t,i)=>{var T,I,dt,j,_i,re,be,me,Ce,ae,we,_e,Le,Ie,Fe,fe,ue,ie,ne,ve,Me,Re,Be,vi,qe,Nt,Qe,wn,et,Sn,k,V,he,le,ge,ye,W,Pn,ke,Ae,Oe,Ve,bi,Te,Cn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=i(1),r=i(6),s=i(3),a=i(30),c=i(31),f=i(32);const u=1e3,l=9,m=new WeakSet;function p(Ue){return{width:Ue[2]-Ue[0],height:Ue[3]-Ue[1]}}class _{static create(Q){switch(Q.data.annotationType){case n.AnnotationType.LINK:return new P(Q);case n.AnnotationType.TEXT:return new v(Q);case n.AnnotationType.WIDGET:switch(Q.data.fieldType){case"Tx":return new F(Q);case"Btn":return Q.data.radioButton?new h(Q):Q.data.checkBox?new x(Q):new d(Q);case"Ch":return new M(Q);case"Sig":return new w(Q)}return new L(Q);case n.AnnotationType.POPUP:return new E(Q);case n.AnnotationType.FREETEXT:return new D(Q);case n.AnnotationType.LINE:return new R(Q);case n.AnnotationType.SQUARE:return new z(Q);case n.AnnotationType.CIRCLE:return new te(Q);case n.AnnotationType.POLYLINE:return new O(Q);case n.AnnotationType.CARET:return new J(Q);case n.AnnotationType.INK:return new q(Q);case n.AnnotationType.POLYGON:return new X(Q);case n.AnnotationType.HIGHLIGHT:return new H(Q);case n.AnnotationType.UNDERLINE:return new ce(Q);case n.AnnotationType.SQUIGGLY:return new K(Q);case n.AnnotationType.STRIKEOUT:return new Ee(Q);case n.AnnotationType.STAMP:return new xe(Q);case n.AnnotationType.FILEATTACHMENT:return new B(Q);default:return new g(Q)}}}const C=class C{constructor(Q,{isRenderable:S=!1,ignoreBorder:U=!1,createQuadrilaterals:Y=!1}={}){$(this,T,!1);this.isRenderable=S,this.data=Q.data,this.layer=Q.layer,this.linkService=Q.linkService,this.downloadManager=Q.downloadManager,this.imageResourcesPath=Q.imageResourcesPath,this.renderForms=Q.renderForms,this.svgFactory=Q.svgFactory,this.annotationStorage=Q.annotationStorage,this.enableScripting=Q.enableScripting,this.hasJSActions=Q.hasJSActions,this._fieldObjects=Q.fieldObjects,this.parent=Q.parent,S&&(this.container=this._createContainer(U)),Y&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Q,contentsObj:S,richText:U}){return!!(Q!=null&&Q.str||S!=null&&S.str||U!=null&&U.str)}get hasPopupData(){return C._hasPopupData(this.data)}_createContainer(Q){const{data:S,parent:{page:U,viewport:Y}}=this,oe=document.createElement("section");oe.setAttribute("data-annotation-id",S.id),this instanceof L||(oe.tabIndex=u),oe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&oe.setAttribute("aria-haspopup","dialog"),S.noRotate&&oe.classList.add("norotate");const{pageWidth:pe,pageHeight:Se,pageX:De,pageY:$e}=Y.rawDims;if(!S.rect||this instanceof E){const{rotation:Xe}=S;return!S.hasOwnCanvas&&Xe!==0&&this.setRotation(Xe,oe),oe}const{width:Ne,height:Je}=p(S.rect),je=n.Util.normalizeRect([S.rect[0],U.view[3]-S.rect[1]+U.view[1],S.rect[2],U.view[3]-S.rect[3]+U.view[1]]);if(!Q&&S.borderStyle.width>0){oe.style.borderWidth=`${S.borderStyle.width}px`;const Xe=S.borderStyle.horizontalCornerRadius,Ze=S.borderStyle.verticalCornerRadius;if(Xe>0||Ze>0){const nt=`calc(${Xe}px * var(--scale-factor)) / calc(${Ze}px * var(--scale-factor))`;oe.style.borderRadius=nt}else if(this instanceof h){const nt=`calc(${Ne}px * var(--scale-factor)) / calc(${Je}px * var(--scale-factor))`;oe.style.borderRadius=nt}switch(S.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:oe.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:oe.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:oe.style.borderBottomStyle="solid";break}const tt=S.borderColor||null;tt?(ee(this,T,!0),oe.style.borderColor=n.Util.makeHexColor(tt[0]|0,tt[1]|0,tt[2]|0)):oe.style.borderWidth=0}oe.style.left=`${100*(je[0]-De)/pe}%`,oe.style.top=`${100*(je[1]-$e)/Se}%`;const{rotation:We}=S;return S.hasOwnCanvas||We===0?(oe.style.width=`${100*Ne/pe}%`,oe.style.height=`${100*Je/Se}%`):this.setRotation(We,oe),oe}setRotation(Q,S=this.container){if(!this.data.rect)return;const{pageWidth:U,pageHeight:Y}=this.parent.viewport.rawDims,{width:oe,height:pe}=p(this.data.rect);let Se,De;Q%180===0?(Se=100*oe/U,De=100*pe/Y):(Se=100*pe/U,De=100*oe/Y),S.style.width=`${Se}%`,S.style.height=`${De}%`,S.setAttribute("data-main-rotation",(360-Q)%360)}get _commonActions(){const Q=(S,U,Y)=>{const oe=Y.detail[S],pe=oe[0],Se=oe.slice(1);Y.target.style[U]=a.ColorConverters[`${pe}_HTML`](Se),this.annotationStorage.setValue(this.data.id,{[U]:a.ColorConverters[`${pe}_rgb`](Se)})};return(0,n.shadow)(this,"_commonActions",{display:S=>{const{display:U}=S.detail,Y=U%2===1;this.container.style.visibility=Y?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Y,noPrint:U===1||U===2})},print:S=>{this.annotationStorage.setValue(this.data.id,{noPrint:!S.detail.print})},hidden:S=>{const{hidden:U}=S.detail;this.container.style.visibility=U?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:U,noView:U})},focus:S=>{setTimeout(()=>S.target.focus({preventScroll:!1}),0)},userName:S=>{S.target.title=S.detail.userName},readonly:S=>{S.target.disabled=S.detail.readonly},required:S=>{this._setRequired(S.target,S.detail.required)},bgColor:S=>{Q("bgColor","backgroundColor",S)},fillColor:S=>{Q("fillColor","backgroundColor",S)},fgColor:S=>{Q("fgColor","color",S)},textColor:S=>{Q("textColor","color",S)},borderColor:S=>{Q("borderColor","borderColor",S)},strokeColor:S=>{Q("strokeColor","borderColor",S)},rotation:S=>{const U=S.detail.rotation;this.setRotation(U),this.annotationStorage.setValue(this.data.id,{rotation:U})}})}_dispatchEventFromSandbox(Q,S){const U=this._commonActions;for(const Y of Object.keys(S.detail)){const oe=Q[Y]||U[Y];oe==null||oe(S)}}_setDefaultPropertiesFromJS(Q){if(!this.enableScripting)return;const S=this.annotationStorage.getRawValue(this.data.id);if(!S)return;const U=this._commonActions;for(const[Y,oe]of Object.entries(S)){const pe=U[Y];if(pe){const Se={detail:{[Y]:oe},target:Q};pe(Se),delete S[Y]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Q}=this.data;if(!Q)return;const[S,U,Y,oe]=this.data.rect;if(Q.length===1){const[,{x:Ze,y:tt},{x:nt,y:rt}]=Q[0];if(Y===Ze&&oe===tt&&S===nt&&U===rt)return}const{style:pe}=this.container;let Se;if(o(this,T)){const{borderColor:Ze,borderWidth:tt}=pe;pe.borderWidth=0,Se=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ze}" stroke-width="${tt}">`],this.container.classList.add("hasBorder")}const De=Y-S,$e=oe-U,{svgFactory:Ne}=this,Je=Ne.createElement("svg");Je.classList.add("quadrilateralsContainer"),Je.setAttribute("width",0),Je.setAttribute("height",0);const je=Ne.createElement("defs");Je.append(je);const We=Ne.createElement("clipPath"),Xe=`clippath_${this.data.id}`;We.setAttribute("id",Xe),We.setAttribute("clipPathUnits","objectBoundingBox"),je.append(We);for(const[,{x:Ze,y:tt},{x:nt,y:rt}]of Q){const it=Ne.createElement("rect"),st=(nt-S)/De,ct=(oe-tt)/$e,ut=(Ze-nt)/De,ti=(tt-rt)/$e;it.setAttribute("x",st),it.setAttribute("y",ct),it.setAttribute("width",ut),it.setAttribute("height",ti),We.append(it),Se==null||Se.push(`<rect vector-effect="non-scaling-stroke" x="${st}" y="${ct}" width="${ut}" height="${ti}"/>`)}o(this,T)&&(Se.push("</g></svg>')"),pe.backgroundImage=Se.join("")),this.container.append(Je),this.container.style.clipPath=`url(#${Xe})`}_createPopup(){const{container:Q,data:S}=this;Q.setAttribute("aria-haspopup","dialog");const U=new E({data:{color:S.color,titleObj:S.titleObj,modificationDate:S.modificationDate,contentsObj:S.contentsObj,richText:S.richText,parentRect:S.rect,borderStyle:0,id:`popup_${S.id}`,rotation:S.rotation},parent:this.parent,elements:[this]});this.parent.div.append(U.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Q,S=null){const U=[];if(this._fieldObjects){const Y=this._fieldObjects[Q];if(Y)for(const{page:oe,id:pe,exportValues:Se}of Y){if(oe===-1||pe===S)continue;const De=typeof Se=="string"?Se:null,$e=document.querySelector(`[data-element-id="${pe}"]`);if($e&&!m.has($e)){(0,n.warn)(`_getElementsByName - element not allowed: ${pe}`);continue}U.push({id:pe,exportValue:De,domElement:$e})}return U}for(const Y of document.getElementsByName(Q)){const{exportValue:oe}=Y,pe=Y.getAttribute("data-element-id");pe!==S&&m.has(Y)&&U.push({id:pe,exportValue:oe,domElement:Y})}return U}show(){var Q;this.container&&(this.container.hidden=!1),(Q=this.popup)==null||Q.maybeShow()}hide(){var Q;this.container&&(this.container.hidden=!0),(Q=this.popup)==null||Q.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Q=this.getElementsToTriggerPopup();if(Array.isArray(Q))for(const S of Q)S.classList.add("highlightArea");else Q.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Q,data:{id:S}}=this;this.container.addEventListener("dblclick",()=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("switchannotationeditormode",{source:this,mode:Q,editId:S})})}};T=new WeakMap;let g=C;class P extends g{constructor(S,U=null){super(S,{isRenderable:!0,ignoreBorder:!!(U!=null&&U.ignoreBorder),createQuadrilaterals:!0});$(this,I);$(this,j);this.isTooltipOnly=S.data.isTooltipOnly}render(){const{data:S,linkService:U}=this,Y=document.createElement("a");Y.setAttribute("data-element-id",S.id);let oe=!1;return S.url?(U.addLinkAttributes(Y,S.url,S.newWindow),oe=!0):S.action?(this._bindNamedAction(Y,S.action),oe=!0):S.attachment?(this._bindAttachment(Y,S.attachment),oe=!0):S.setOCGState?(G(this,j,_i).call(this,Y,S.setOCGState),oe=!0):S.dest?(this._bindLink(Y,S.dest),oe=!0):(S.actions&&(S.actions.Action||S.actions["Mouse Up"]||S.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Y,S),oe=!0),S.resetForm?(this._bindResetFormAction(Y,S.resetForm),oe=!0):this.isTooltipOnly&&!oe&&(this._bindLink(Y,""),oe=!0)),this.container.classList.add("linkAnnotation"),oe&&this.container.append(Y),this.container}_bindLink(S,U){S.href=this.linkService.getDestinationHash(U),S.onclick=()=>(U&&this.linkService.goToDestination(U),!1),(U||U==="")&&G(this,I,dt).call(this)}_bindNamedAction(S,U){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>(this.linkService.executeNamedAction(U),!1),G(this,I,dt).call(this)}_bindAttachment(S,U){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>{var Y;return(Y=this.downloadManager)==null||Y.openOrDownloadData(this.container,U.content,U.filename),!1},G(this,I,dt).call(this)}_bindJSAction(S,U){S.href=this.linkService.getAnchorUrl("");const Y=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const oe of Object.keys(U.actions)){const pe=Y.get(oe);pe&&(S[pe]=()=>{var Se;return(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:U.id,name:oe}}),!1})}S.onclick||(S.onclick=()=>!1),G(this,I,dt).call(this)}_bindResetFormAction(S,U){const Y=S.onclick;if(Y||(S.href=this.linkService.getAnchorUrl("")),G(this,I,dt).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Y||(S.onclick=()=>!1);return}S.onclick=()=>{var Je;Y==null||Y();const{fields:oe,refs:pe,include:Se}=U,De=[];if(oe.length!==0||pe.length!==0){const je=new Set(pe);for(const We of oe){const Xe=this._fieldObjects[We]||[];for(const{id:Ze}of Xe)je.add(Ze)}for(const We of Object.values(this._fieldObjects))for(const Xe of We)je.has(Xe.id)===Se&&De.push(Xe)}else for(const je of Object.values(this._fieldObjects))De.push(...je);const $e=this.annotationStorage,Ne=[];for(const je of De){const{id:We}=je;switch(Ne.push(We),je.type){case"text":{const Ze=je.defaultValue||"";$e.setValue(We,{value:Ze});break}case"checkbox":case"radiobutton":{const Ze=je.defaultValue===je.exportValues;$e.setValue(We,{value:Ze});break}case"combobox":case"listbox":{const Ze=je.defaultValue||"";$e.setValue(We,{value:Ze});break}default:continue}const Xe=document.querySelector(`[data-element-id="${We}"]`);if(Xe){if(!m.has(Xe)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${We}`);continue}}else continue;Xe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Je=this.linkService.eventBus)==null||Je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ne,name:"ResetForm"}})),!1}}}I=new WeakSet,dt=function(){this.container.setAttribute("data-internal-link","")},j=new WeakSet,_i=function(S,U){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>(this.linkService.executeSetOCGState(U),!1),G(this,I,dt).call(this)};class v extends g{constructor(Q){super(Q,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Q=document.createElement("img");return Q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Q.alt="[{{type}} Annotation]",Q.dataset.l10nId="text_annotation_type",Q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Q),this.container}}class L extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Q){var S;this.data.hasOwnCanvas&&(((S=Q.previousSibling)==null?void 0:S.nodeName)==="CANVAS"&&(Q.previousSibling.hidden=!0),Q.hidden=!1)}_getKeyModifier(Q){const{isWin:S,isMac:U}=n.FeatureTest.platform;return S&&Q.ctrlKey||U&&Q.metaKey}_setEventListener(Q,S,U,Y,oe){U.includes("mouse")?Q.addEventListener(U,pe=>{var Se;(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Y,value:oe(pe),shift:pe.shiftKey,modifier:this._getKeyModifier(pe)}})}):Q.addEventListener(U,pe=>{var Se;if(U==="blur"){if(!S.focused||!pe.relatedTarget)return;S.focused=!1}else if(U==="focus"){if(S.focused)return;S.focused=!0}oe&&((Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Y,value:oe(pe)}}))})}_setEventListeners(Q,S,U,Y){var oe,pe,Se;for(const[De,$e]of U)($e==="Action"||(oe=this.data.actions)!=null&&oe[$e])&&(($e==="Focus"||$e==="Blur")&&(S||(S={focused:!1})),this._setEventListener(Q,S,De,$e,Y),$e==="Focus"&&!((pe=this.data.actions)!=null&&pe.Blur)?this._setEventListener(Q,S,"blur","Blur",null):$e==="Blur"&&!((Se=this.data.actions)!=null&&Se.Focus)&&this._setEventListener(Q,S,"focus","Focus",null))}_setBackgroundColor(Q){const S=this.data.backgroundColor||null;Q.style.backgroundColor=S===null?"transparent":n.Util.makeHexColor(S[0],S[1],S[2])}_setTextStyle(Q){const S=["left","center","right"],{fontColor:U}=this.data.defaultAppearanceData,Y=this.data.defaultAppearanceData.fontSize||l,oe=Q.style;let pe;const Se=2,De=$e=>Math.round(10*$e)/10;if(this.data.multiLine){const $e=Math.abs(this.data.rect[3]-this.data.rect[1]-Se),Ne=Math.round($e/(n.LINE_FACTOR*Y))||1,Je=$e/Ne;pe=Math.min(Y,De(Je/n.LINE_FACTOR))}else{const $e=Math.abs(this.data.rect[3]-this.data.rect[1]-Se);pe=Math.min(Y,De($e/n.LINE_FACTOR))}oe.fontSize=`calc(${pe}px * var(--scale-factor))`,oe.color=n.Util.makeHexColor(U[0],U[1],U[2]),this.data.textAlignment!==null&&(oe.textAlign=S[this.data.textAlignment])}_setRequired(Q,S){S?Q.setAttribute("required",!0):Q.removeAttribute("required"),Q.setAttribute("aria-required",S)}}class F extends L{constructor(Q){const S=Q.renderForms||!Q.data.hasAppearance&&!!Q.data.fieldValue;super(Q,{isRenderable:S})}setPropertyOnSiblings(Q,S,U,Y){const oe=this.annotationStorage;for(const pe of this._getElementsByName(Q.name,Q.id))pe.domElement&&(pe.domElement[S]=U),oe.setValue(pe.id,{[Y]:U})}render(){var Y,oe;const Q=this.annotationStorage,S=this.data.id;this.container.classList.add("textWidgetAnnotation");let U=null;if(this.renderForms){const pe=Q.getValue(S,{value:this.data.fieldValue});let Se=pe.value||"";const De=Q.getValue(S,{charLimit:this.data.maxLen}).charLimit;De&&Se.length>De&&(Se=Se.slice(0,De));let $e=pe.formattedValue||((Y=this.data.textContent)==null?void 0:Y.join(`
`))||null;$e&&this.data.comb&&($e=$e.replaceAll(/\s+/g,""));const Ne={userValue:Se,formattedValue:$e,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(U=document.createElement("textarea"),U.textContent=$e??Se,this.data.doNotScroll&&(U.style.overflowY="hidden")):(U=document.createElement("input"),U.type="text",U.setAttribute("value",$e??Se),this.data.doNotScroll&&(U.style.overflowX="hidden")),this.data.hasOwnCanvas&&(U.hidden=!0),m.add(U),U.setAttribute("data-element-id",S),U.disabled=this.data.readOnly,U.name=this.data.fieldName,U.tabIndex=u,this._setRequired(U,this.data.required),De&&(U.maxLength=De),U.addEventListener("input",je=>{Q.setValue(S,{value:je.target.value}),this.setPropertyOnSiblings(U,"value",je.target.value,"value"),Ne.formattedValue=null}),U.addEventListener("resetform",je=>{const We=this.data.defaultFieldValue??"";U.value=Ne.userValue=We,Ne.formattedValue=null});let Je=je=>{const{formattedValue:We}=Ne;We!=null&&(je.target.value=We),je.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){U.addEventListener("focus",We=>{if(Ne.focused)return;const{target:Xe}=We;Ne.userValue&&(Xe.value=Ne.userValue),Ne.lastCommittedValue=Xe.value,Ne.commitKey=1,Ne.focused=!0}),U.addEventListener("updatefromsandbox",We=>{this.showElementAndHideCanvas(We.target);const Xe={value(Ze){Ne.userValue=Ze.detail.value??"",Q.setValue(S,{value:Ne.userValue.toString()}),Ze.target.value=Ne.userValue},formattedValue(Ze){const{formattedValue:tt}=Ze.detail;Ne.formattedValue=tt,tt!=null&&Ze.target!==document.activeElement&&(Ze.target.value=tt),Q.setValue(S,{formattedValue:tt})},selRange(Ze){Ze.target.setSelectionRange(...Ze.detail.selRange)},charLimit:Ze=>{var it;const{charLimit:tt}=Ze.detail,{target:nt}=Ze;if(tt===0){nt.removeAttribute("maxLength");return}nt.setAttribute("maxLength",tt);let rt=Ne.userValue;!rt||rt.length<=tt||(rt=rt.slice(0,tt),nt.value=Ne.userValue=rt,Q.setValue(S,{value:rt}),(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:rt,willCommit:!0,commitKey:1,selStart:nt.selectionStart,selEnd:nt.selectionEnd}}))}};this._dispatchEventFromSandbox(Xe,We)}),U.addEventListener("keydown",We=>{var tt;Ne.commitKey=1;let Xe=-1;if(We.key==="Escape"?Xe=0:We.key==="Enter"&&!this.data.multiLine?Xe=2:We.key==="Tab"&&(Ne.commitKey=3),Xe===-1)return;const{value:Ze}=We.target;Ne.lastCommittedValue!==Ze&&(Ne.lastCommittedValue=Ze,Ne.userValue=Ze,(tt=this.linkService.eventBus)==null||tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Ze,willCommit:!0,commitKey:Xe,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}}))});const je=Je;Je=null,U.addEventListener("blur",We=>{var Ze;if(!Ne.focused||!We.relatedTarget)return;Ne.focused=!1;const{value:Xe}=We.target;Ne.userValue=Xe,Ne.lastCommittedValue!==Xe&&((Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:Xe,willCommit:!0,commitKey:Ne.commitKey,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}})),je(We)}),(oe=this.data.actions)!=null&&oe.Keystroke&&U.addEventListener("beforeinput",We=>{var ct;Ne.lastCommittedValue=null;const{data:Xe,target:Ze}=We,{value:tt,selectionStart:nt,selectionEnd:rt}=Ze;let it=nt,st=rt;switch(We.inputType){case"deleteWordBackward":{const ut=tt.substring(0,nt).match(/\w*[^\w]*$/);ut&&(it-=ut[0].length);break}case"deleteWordForward":{const ut=tt.substring(nt).match(/^[^\w]*\w*/);ut&&(st+=ut[0].length);break}case"deleteContentBackward":nt===rt&&(it-=1);break;case"deleteContentForward":nt===rt&&(st+=1);break}We.preventDefault(),(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:tt,change:Xe||"",willCommit:!1,selStart:it,selEnd:st}})}),this._setEventListeners(U,Ne,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],We=>We.target.value)}if(Je&&U.addEventListener("blur",Je),this.data.comb){const We=(this.data.rect[2]-this.data.rect[0])/De;U.classList.add("comb"),U.style.letterSpacing=`calc(${We}px * var(--scale-factor) - 1ch)`}}else U=document.createElement("div"),U.textContent=this.data.fieldValue,U.style.verticalAlign="middle",U.style.display="table-cell";return this._setTextStyle(U),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class w extends L{constructor(Q){super(Q,{isRenderable:!!Q.data.hasOwnCanvas})}}class x extends L{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){const Q=this.annotationStorage,S=this.data,U=S.id;let Y=Q.getValue(U,{value:S.exportValue===S.fieldValue}).value;typeof Y=="string"&&(Y=Y!=="Off",Q.setValue(U,{value:Y})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const oe=document.createElement("input");return m.add(oe),oe.setAttribute("data-element-id",U),oe.disabled=S.readOnly,this._setRequired(oe,this.data.required),oe.type="checkbox",oe.name=S.fieldName,Y&&oe.setAttribute("checked",!0),oe.setAttribute("exportValue",S.exportValue),oe.tabIndex=u,oe.addEventListener("change",pe=>{const{name:Se,checked:De}=pe.target;for(const $e of this._getElementsByName(Se,U)){const Ne=De&&$e.exportValue===S.exportValue;$e.domElement&&($e.domElement.checked=Ne),Q.setValue($e.id,{value:Ne})}Q.setValue(U,{value:De})}),oe.addEventListener("resetform",pe=>{const Se=S.defaultFieldValue||"Off";pe.target.checked=Se===S.exportValue}),this.enableScripting&&this.hasJSActions&&(oe.addEventListener("updatefromsandbox",pe=>{const Se={value(De){De.target.checked=De.detail.value!=="Off",Q.setValue(U,{value:De.target.checked})}};this._dispatchEventFromSandbox(Se,pe)}),this._setEventListeners(oe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pe=>pe.target.checked)),this._setBackgroundColor(oe),this._setDefaultPropertiesFromJS(oe),this.container.append(oe),this.container}}class h extends L{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Q=this.annotationStorage,S=this.data,U=S.id;let Y=Q.getValue(U,{value:S.fieldValue===S.buttonValue}).value;typeof Y=="string"&&(Y=Y!==S.buttonValue,Q.setValue(U,{value:Y}));const oe=document.createElement("input");if(m.add(oe),oe.setAttribute("data-element-id",U),oe.disabled=S.readOnly,this._setRequired(oe,this.data.required),oe.type="radio",oe.name=S.fieldName,Y&&oe.setAttribute("checked",!0),oe.tabIndex=u,oe.addEventListener("change",pe=>{const{name:Se,checked:De}=pe.target;for(const $e of this._getElementsByName(Se,U))Q.setValue($e.id,{value:!1});Q.setValue(U,{value:De})}),oe.addEventListener("resetform",pe=>{const Se=S.defaultFieldValue;pe.target.checked=Se!=null&&Se===S.buttonValue}),this.enableScripting&&this.hasJSActions){const pe=S.buttonValue;oe.addEventListener("updatefromsandbox",Se=>{const De={value:$e=>{const Ne=pe===$e.detail.value;for(const Je of this._getElementsByName($e.target.name)){const je=Ne&&Je.id===U;Je.domElement&&(Je.domElement.checked=je),Q.setValue(Je.id,{value:je})}}};this._dispatchEventFromSandbox(De,Se)}),this._setEventListeners(oe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)}return this._setBackgroundColor(oe),this._setDefaultPropertiesFromJS(oe),this.container.append(oe),this.container}}class d extends P{constructor(Q){super(Q,{ignoreBorder:Q.data.hasAppearance})}render(){const Q=super.render();Q.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Q.title=this.data.alternativeText);const S=Q.lastChild;return this.enableScripting&&this.hasJSActions&&S&&(this._setDefaultPropertiesFromJS(S),S.addEventListener("updatefromsandbox",U=>{this._dispatchEventFromSandbox({},U)})),Q}}class M extends L{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Q=this.annotationStorage,S=this.data.id,U=Q.getValue(S,{value:this.data.fieldValue}),Y=document.createElement("select");m.add(Y),Y.setAttribute("data-element-id",S),Y.disabled=this.data.readOnly,this._setRequired(Y,this.data.required),Y.name=this.data.fieldName,Y.tabIndex=u;let oe=this.data.combo&&this.data.options.length>0;this.data.combo||(Y.size=this.data.options.length,this.data.multiSelect&&(Y.multiple=!0)),Y.addEventListener("resetform",Ne=>{const Je=this.data.defaultFieldValue;for(const je of Y.options)je.selected=je.value===Je});for(const Ne of this.data.options){const Je=document.createElement("option");Je.textContent=Ne.displayValue,Je.value=Ne.exportValue,U.value.includes(Ne.exportValue)&&(Je.setAttribute("selected",!0),oe=!1),Y.append(Je)}let pe=null;if(oe){const Ne=document.createElement("option");Ne.value=" ",Ne.setAttribute("hidden",!0),Ne.setAttribute("selected",!0),Y.prepend(Ne),pe=()=>{Ne.remove(),Y.removeEventListener("input",pe),pe=null},Y.addEventListener("input",pe)}const Se=Ne=>{const Je=Ne?"value":"textContent",{options:je,multiple:We}=Y;return We?Array.prototype.filter.call(je,Xe=>Xe.selected).map(Xe=>Xe[Je]):je.selectedIndex===-1?null:je[je.selectedIndex][Je]};let De=Se(!1);const $e=Ne=>{const Je=Ne.target.options;return Array.prototype.map.call(Je,je=>({displayValue:je.textContent,exportValue:je.value}))};return this.enableScripting&&this.hasJSActions?(Y.addEventListener("updatefromsandbox",Ne=>{const Je={value(je){pe==null||pe();const We=je.detail.value,Xe=new Set(Array.isArray(We)?We:[We]);for(const Ze of Y.options)Ze.selected=Xe.has(Ze.value);Q.setValue(S,{value:Se(!0)}),De=Se(!1)},multipleSelection(je){Y.multiple=!0},remove(je){const We=Y.options,Xe=je.detail.remove;We[Xe].selected=!1,Y.remove(Xe),We.length>0&&Array.prototype.findIndex.call(We,tt=>tt.selected)===-1&&(We[0].selected=!0),Q.setValue(S,{value:Se(!0),items:$e(je)}),De=Se(!1)},clear(je){for(;Y.length!==0;)Y.remove(0);Q.setValue(S,{value:null,items:[]}),De=Se(!1)},insert(je){const{index:We,displayValue:Xe,exportValue:Ze}=je.detail.insert,tt=Y.children[We],nt=document.createElement("option");nt.textContent=Xe,nt.value=Ze,tt?tt.before(nt):Y.append(nt),Q.setValue(S,{value:Se(!0),items:$e(je)}),De=Se(!1)},items(je){const{items:We}=je.detail;for(;Y.length!==0;)Y.remove(0);for(const Xe of We){const{displayValue:Ze,exportValue:tt}=Xe,nt=document.createElement("option");nt.textContent=Ze,nt.value=tt,Y.append(nt)}Y.options.length>0&&(Y.options[0].selected=!0),Q.setValue(S,{value:Se(!0),items:$e(je)}),De=Se(!1)},indices(je){const We=new Set(je.detail.indices);for(const Xe of je.target.options)Xe.selected=We.has(Xe.index);Q.setValue(S,{value:Se(!0)}),De=Se(!1)},editable(je){je.target.disabled=!je.detail.editable}};this._dispatchEventFromSandbox(Je,Ne)}),Y.addEventListener("input",Ne=>{var je;const Je=Se(!0);Q.setValue(S,{value:Je}),Ne.preventDefault(),(je=this.linkService.eventBus)==null||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S,name:"Keystroke",value:De,changeEx:Je,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Y,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ne=>Ne.target.value)):Y.addEventListener("input",function(Ne){Q.setValue(S,{value:Se(!0)})}),this.data.combo&&this._setTextStyle(Y),this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.append(Y),this.container}}class E extends g{constructor(Q){const{data:S,elements:U}=Q;super(Q,{isRenderable:g._hasPopupData(S)}),this.elements=U}render(){this.container.classList.add("popupAnnotation");const Q=new y({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),S=[];for(const U of this.elements)U.popup=Q,S.push(U.data.id),U.addHighlightArea();return this.container.setAttribute("aria-controls",S.map(U=>`${n.AnnotationPrefix}${U}`).join(",")),this.container}}class y{constructor({container:Q,color:S,elements:U,titleObj:Y,modificationDate:oe,contentsObj:pe,richText:Se,parent:De,rect:$e,parentRect:Ne,open:Je}){$(this,Be);$(this,qe);$(this,Qe);$(this,et);$(this,re,null);$(this,be,G(this,Be,vi).bind(this));$(this,me,G(this,et,Sn).bind(this));$(this,Ce,G(this,Qe,wn).bind(this));$(this,ae,G(this,qe,Nt).bind(this));$(this,we,null);$(this,_e,null);$(this,Le,null);$(this,Ie,null);$(this,Fe,null);$(this,fe,null);$(this,ue,!1);$(this,ie,null);$(this,ne,null);$(this,ve,null);$(this,Me,null);$(this,Re,!1);var We;ee(this,_e,Q),ee(this,Me,Y),ee(this,Le,pe),ee(this,ve,Se),ee(this,Fe,De),ee(this,we,S),ee(this,ne,$e),ee(this,fe,Ne),ee(this,Ie,U);const je=r.PDFDateString.toDateObject(oe);je&&ee(this,re,De.l10n.get("annotation_date_string",{date:je.toLocaleDateString(),time:je.toLocaleTimeString()})),this.trigger=U.flatMap(Xe=>Xe.getElementsToTriggerPopup());for(const Xe of this.trigger)Xe.addEventListener("click",o(this,ae)),Xe.addEventListener("mouseenter",o(this,Ce)),Xe.addEventListener("mouseleave",o(this,me)),Xe.classList.add("popupTriggerArea");for(const Xe of U)(We=Xe.container)==null||We.addEventListener("keydown",o(this,be));o(this,_e).hidden=!0,Je&&G(this,qe,Nt).call(this)}render(){if(o(this,ie))return;const{page:{view:Q},viewport:{rawDims:{pageWidth:S,pageHeight:U,pageX:Y,pageY:oe}}}=o(this,Fe),pe=ee(this,ie,document.createElement("div"));if(pe.className="popup",o(this,we)){const it=pe.style.outlineColor=n.Util.makeHexColor(...o(this,we));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?pe.style.backgroundColor=`color-mix(in srgb, ${it} 30%, white)`:pe.style.backgroundColor=n.Util.makeHexColor(...o(this,we).map(ct=>Math.floor(.7*(255-ct)+ct)))}const Se=document.createElement("span");Se.className="header";const De=document.createElement("h1");if(Se.append(De),{dir:De.dir,str:De.textContent}=o(this,Me),pe.append(Se),o(this,re)){const it=document.createElement("span");it.classList.add("popupDate"),o(this,re).then(st=>{it.textContent=st}),Se.append(it)}const $e=o(this,Le),Ne=o(this,ve);if(Ne!=null&&Ne.str&&(!($e!=null&&$e.str)||$e.str===Ne.str))f.XfaLayer.render({xfaHtml:Ne.html,intent:"richText",div:pe}),pe.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents($e);pe.append(it)}let Je=!!o(this,fe),je=Je?o(this,fe):o(this,ne);for(const it of o(this,Ie))if(!je||n.Util.intersect(it.data.rect,je)!==null){je=it.data.rect,Je=!0;break}const We=n.Util.normalizeRect([je[0],Q[3]-je[1]+Q[1],je[2],Q[3]-je[3]+Q[1]]),Ze=Je?je[2]-je[0]+5:0,tt=We[0]+Ze,nt=We[1],{style:rt}=o(this,_e);rt.left=`${100*(tt-Y)/S}%`,rt.top=`${100*(nt-oe)/U}%`,o(this,_e).append(pe)}_formatContents({str:Q,dir:S}){const U=document.createElement("p");U.classList.add("popupContent"),U.dir=S;const Y=Q.split(/(?:\r\n?|\n)/);for(let oe=0,pe=Y.length;oe<pe;++oe){const Se=Y[oe];U.append(document.createTextNode(Se)),oe<pe-1&&U.append(document.createElement("br"))}return U}forceHide(){ee(this,Re,this.isVisible),o(this,Re)&&(o(this,_e).hidden=!0)}maybeShow(){o(this,Re)&&(ee(this,Re,!1),o(this,_e).hidden=!1)}get isVisible(){return o(this,_e).hidden===!1}}re=new WeakMap,be=new WeakMap,me=new WeakMap,Ce=new WeakMap,ae=new WeakMap,we=new WeakMap,_e=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,fe=new WeakMap,ue=new WeakMap,ie=new WeakMap,ne=new WeakMap,ve=new WeakMap,Me=new WeakMap,Re=new WeakMap,Be=new WeakSet,vi=function(Q){Q.altKey||Q.shiftKey||Q.ctrlKey||Q.metaKey||(Q.key==="Enter"||Q.key==="Escape"&&o(this,ue))&&G(this,qe,Nt).call(this)},qe=new WeakSet,Nt=function(){ee(this,ue,!o(this,ue)),o(this,ue)?(G(this,Qe,wn).call(this),o(this,_e).addEventListener("click",o(this,ae)),o(this,_e).addEventListener("keydown",o(this,be))):(G(this,et,Sn).call(this),o(this,_e).removeEventListener("click",o(this,ae)),o(this,_e).removeEventListener("keydown",o(this,be)))},Qe=new WeakSet,wn=function(){o(this,ie)||this.render(),this.isVisible?o(this,ue)&&o(this,_e).classList.add("focused"):(o(this,_e).hidden=!1,o(this,_e).style.zIndex=parseInt(o(this,_e).style.zIndex)+1e3)},et=new WeakSet,Sn=function(){o(this,_e).classList.remove("focused"),!(o(this,ue)||!this.isVisible)&&(o(this,_e).hidden=!0,o(this,_e).style.zIndex=parseInt(o(this,_e).style.zIndex)-1e3)};class D extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Q.data.textContent,this.textPosition=Q.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Q=document.createElement("div");Q.classList.add("annotationTextContent"),Q.setAttribute("role","comment");for(const S of this.textContent){const U=document.createElement("span");U.textContent=S,Q.append(U)}this.container.append(Q)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=D;class R extends g{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0});$(this,k,null)}render(){this.container.classList.add("lineAnnotation");const S=this.data,{width:U,height:Y}=p(S.rect),oe=this.svgFactory.create(U,Y,!0),pe=ee(this,k,this.svgFactory.createElement("svg:line"));return pe.setAttribute("x1",S.rect[2]-S.lineCoordinates[0]),pe.setAttribute("y1",S.rect[3]-S.lineCoordinates[1]),pe.setAttribute("x2",S.rect[2]-S.lineCoordinates[2]),pe.setAttribute("y2",S.rect[3]-S.lineCoordinates[3]),pe.setAttribute("stroke-width",S.borderStyle.width||1),pe.setAttribute("stroke","transparent"),pe.setAttribute("fill","transparent"),oe.append(pe),this.container.append(oe),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,k)}addHighlightArea(){this.container.classList.add("highlightArea")}}k=new WeakMap;class z extends g{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0});$(this,V,null)}render(){this.container.classList.add("squareAnnotation");const S=this.data,{width:U,height:Y}=p(S.rect),oe=this.svgFactory.create(U,Y,!0),pe=S.borderStyle.width,Se=ee(this,V,this.svgFactory.createElement("svg:rect"));return Se.setAttribute("x",pe/2),Se.setAttribute("y",pe/2),Se.setAttribute("width",U-pe),Se.setAttribute("height",Y-pe),Se.setAttribute("stroke-width",pe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),oe.append(Se),this.container.append(oe),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,V)}addHighlightArea(){this.container.classList.add("highlightArea")}}V=new WeakMap;class te extends g{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0});$(this,he,null)}render(){this.container.classList.add("circleAnnotation");const S=this.data,{width:U,height:Y}=p(S.rect),oe=this.svgFactory.create(U,Y,!0),pe=S.borderStyle.width,Se=ee(this,he,this.svgFactory.createElement("svg:ellipse"));return Se.setAttribute("cx",U/2),Se.setAttribute("cy",Y/2),Se.setAttribute("rx",U/2-pe/2),Se.setAttribute("ry",Y/2-pe/2),Se.setAttribute("stroke-width",pe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),oe.append(Se),this.container.append(oe),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,he)}addHighlightArea(){this.container.classList.add("highlightArea")}}he=new WeakMap;class O extends g{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0});$(this,le,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const S=this.data,{width:U,height:Y}=p(S.rect),oe=this.svgFactory.create(U,Y,!0);let pe=[];for(const De of S.vertices){const $e=De.x-S.rect[0],Ne=S.rect[3]-De.y;pe.push($e+","+Ne)}pe=pe.join(" ");const Se=ee(this,le,this.svgFactory.createElement(this.svgElementName));return Se.setAttribute("points",pe),Se.setAttribute("stroke-width",S.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),oe.append(Se),this.container.append(oe),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,le)}addHighlightArea(){this.container.classList.add("highlightArea")}}le=new WeakMap;class X extends O{constructor(Q){super(Q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class q extends g{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0});$(this,ge,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const S=this.data,{width:U,height:Y}=p(S.rect),oe=this.svgFactory.create(U,Y,!0);for(const pe of S.inkLists){let Se=[];for(const $e of pe){const Ne=$e.x-S.rect[0],Je=S.rect[3]-$e.y;Se.push(`${Ne},${Je}`)}Se=Se.join(" ");const De=this.svgFactory.createElement(this.svgElementName);o(this,ge).push(De),De.setAttribute("points",Se),De.setAttribute("stroke-width",S.borderStyle.width||1),De.setAttribute("stroke","transparent"),De.setAttribute("fill","transparent"),!S.popupRef&&this.hasPopupData&&this._createPopup(),oe.append(De)}return this.container.append(oe),this.container}getElementsToTriggerPopup(){return o(this,ge)}addHighlightArea(){this.container.classList.add("highlightArea")}}ge=new WeakMap,t.InkAnnotationElement=q;class H extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ce extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class K extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ee extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xe extends g{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=xe;class B extends g{constructor(S){var oe;super(S,{isRenderable:!0});$(this,W);$(this,ye,null);const{filename:U,content:Y}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(U,!0),this.content=Y,(oe=this.linkService.eventBus)==null||oe.dispatch("fileattachmentannotation",{source:this,filename:U,content:Y})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:S,data:U}=this;let Y;U.hasAppearance||U.fillAlpha===0?Y=document.createElement("div"):(Y=document.createElement("img"),Y.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(U.name)?"paperclip":"pushpin"}.svg`,U.fillAlpha&&U.fillAlpha<1&&(Y.style=`filter: opacity(${Math.round(U.fillAlpha*100)}%);`)),Y.addEventListener("dblclick",G(this,W,Pn).bind(this)),ee(this,ye,Y);const{isMac:oe}=n.FeatureTest.platform;return S.addEventListener("keydown",pe=>{pe.key==="Enter"&&(oe?pe.metaKey:pe.ctrlKey)&&G(this,W,Pn).call(this)}),!U.popupRef&&this.hasPopupData?this._createPopup():Y.classList.add("popupTriggerArea"),S.append(Y),S}getElementsToTriggerPopup(){return o(this,ye)}addHighlightArea(){this.container.classList.add("highlightArea")}}ye=new WeakMap,W=new WeakSet,Pn=function(){var S;(S=this.downloadManager)==null||S.openOrDownloadData(this.container,this.content,this.filename)};class b{constructor({div:Q,accessibilityManager:S,annotationCanvasMap:U,l10n:Y,page:oe,viewport:pe}){$(this,Ve);$(this,Te);$(this,ke,null);$(this,Ae,null);$(this,Oe,new Map);this.div=Q,ee(this,ke,S),ee(this,Ae,U),this.l10n=Y,this.page=oe,this.viewport=pe,this.zIndex=0,this.l10n||(this.l10n=c.NullL10n)}async render(Q){const{annotations:S}=Q,U=this.div;(0,r.setLayerDimensions)(U,this.viewport);const Y=new Map,oe={data:null,layer:U,linkService:Q.linkService,downloadManager:Q.downloadManager,imageResourcesPath:Q.imageResourcesPath||"",renderForms:Q.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:Q.annotationStorage||new s.AnnotationStorage,enableScripting:Q.enableScripting===!0,hasJSActions:Q.hasJSActions,fieldObjects:Q.fieldObjects,parent:this,elements:null};for(const pe of S){if(pe.noHTML)continue;const Se=pe.annotationType===n.AnnotationType.POPUP;if(Se){const Ne=Y.get(pe.id);if(!Ne)continue;oe.elements=Ne}else{const{width:Ne,height:Je}=p(pe.rect);if(Ne<=0||Je<=0)continue}oe.data=pe;const De=_.create(oe);if(!De.isRenderable)continue;if(!Se&&pe.popupRef){const Ne=Y.get(pe.popupRef);Ne?Ne.push(De):Y.set(pe.popupRef,[De])}De.annotationEditorType>0&&o(this,Oe).set(De.data.id,De);const $e=De.render();pe.hidden&&($e.style.visibility="hidden"),G(this,Ve,bi).call(this,$e,pe.id)}G(this,Te,Cn).call(this),await this.l10n.translate(U)}update({viewport:Q}){const S=this.div;this.viewport=Q,(0,r.setLayerDimensions)(S,{rotation:Q.rotation}),G(this,Te,Cn).call(this),S.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Oe).values())}getEditableAnnotation(Q){return o(this,Oe).get(Q)}}ke=new WeakMap,Ae=new WeakMap,Oe=new WeakMap,Ve=new WeakSet,bi=function(Q,S){var Y;const U=Q.firstChild||Q;U.id=`${n.AnnotationPrefix}${S}`,this.div.append(Q),(Y=o(this,ke))==null||Y.moveElementInDOM(this.div,Q,U,!1)},Te=new WeakSet,Cn=function(){if(!o(this,Ae))return;const Q=this.div;for(const[S,U]of o(this,Ae)){const Y=Q.querySelector(`[data-annotation-id="${S}"]`);if(!Y)continue;const{firstChild:oe}=Y;oe?oe.nodeName==="CANVAS"?oe.replaceWith(U):oe.before(U):Y.append(U)}o(this,Ae).clear()},t.AnnotationLayer=b},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function i(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function n(s){return Math.max(0,Math.min(255,255*s))}class r{static CMYK_G([a,c,f,u]){return["G",1-Math.min(1,.3*a+.59*f+.11*c+u)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_rgb([a]){return a=n(a),[a,a,a]}static G_HTML([a]){const c=i(a);return`#${c}${c}${c}`}static RGB_G([a,c,f]){return["G",.3*a+.59*c+.11*f]}static RGB_rgb(a){return a.map(n)}static RGB_HTML(a){return`#${a.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([a,c,f,u]){return["RGB",1-Math.min(1,a+u),1-Math.min(1,f+u),1-Math.min(1,c+u)]}static CMYK_rgb([a,c,f,u]){return[n(1-Math.min(1,a+u)),n(1-Math.min(1,f+u)),n(1-Math.min(1,c+u))]}static CMYK_HTML(a){const c=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([a,c,f]){const u=1-a,l=1-c,m=1-f,p=Math.min(u,l,m);return["CMYK",u,l,m,p]}}t.ColorConverters=r},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function n(a,c){switch(a){case"find_match_count":a=`find_match_count[${c.total===1?"one":"other"}]`;break;case"find_match_count_limit":a=`find_match_count_limit[${c.limit===1?"one":"other"}]`;break}return i[a]||""}function r(a,c){return c?a.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(f,u)=>u in c?c[u]:"{{"+u+"}}"):a}const s={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(a,c=null,f=n(a,c)){return r(f,c)},async translate(a){}};t.NullL10n=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=i(25);class r{static setupStorage(a,c,f,u,l){const m=u.getValue(c,{value:null});switch(f.name){case"textarea":if(m.value!==null&&(a.textContent=m.value),l==="print")break;a.addEventListener("input",p=>{u.setValue(c,{value:p.target.value})});break;case"input":if(f.attributes.type==="radio"||f.attributes.type==="checkbox"){if(m.value===f.attributes.xfaOn?a.setAttribute("checked",!0):m.value===f.attributes.xfaOff&&a.removeAttribute("checked"),l==="print")break;a.addEventListener("change",p=>{u.setValue(c,{value:p.target.checked?p.target.getAttribute("xfaOn"):p.target.getAttribute("xfaOff")})})}else{if(m.value!==null&&a.setAttribute("value",m.value),l==="print")break;a.addEventListener("input",p=>{u.setValue(c,{value:p.target.value})})}break;case"select":if(m.value!==null){a.setAttribute("value",m.value);for(const p of f.children)p.attributes.value===m.value?p.attributes.selected=!0:p.attributes.hasOwnProperty("selected")&&delete p.attributes.selected}a.addEventListener("input",p=>{const _=p.target.options,g=_.selectedIndex===-1?"":_[_.selectedIndex].value;u.setValue(c,{value:g})});break}}static setAttributes({html:a,element:c,storage:f=null,intent:u,linkService:l}){const{attributes:m}=c,p=a instanceof HTMLAnchorElement;m.type==="radio"&&(m.name=`${m.name}-${u}`);for(const[_,g]of Object.entries(m))if(g!=null)switch(_){case"class":g.length&&a.setAttribute(_,g.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",g);break;case"style":Object.assign(a.style,g);break;case"textContent":a.textContent=g;break;default:(!p||_!=="href"&&_!=="newWindow")&&a.setAttribute(_,g)}p&&l.addLinkAttributes(a,m.href,m.newWindow),f&&m.dataId&&this.setupStorage(a,m.dataId,c,f)}static render(a){var P;const c=a.annotationStorage,f=a.linkService,u=a.xfaHtml,l=a.intent||"display",m=document.createElement(u.name);u.attributes&&this.setAttributes({html:m,element:u,intent:l,linkService:f});const p=[[u,-1,m]],_=a.div;if(_.append(m),a.viewport){const v=`matrix(${a.viewport.transform.join(",")})`;_.style.transform=v}l!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");const g=[];for(;p.length>0;){const[v,L,F]=p.at(-1);if(L+1===v.children.length){p.pop();continue}const w=v.children[++p.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const d=document.createTextNode(w.value);g.push(d),F.append(d);continue}const h=(P=w==null?void 0:w.attributes)!=null&&P.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(F.append(h),w.attributes&&this.setAttributes({html:h,element:w,storage:c,intent:l,linkService:f}),w.children&&w.children.length>0)p.push([w,-1,h]);else if(w.value){const d=document.createTextNode(w.value);n.XfaText.shouldBuildText(x)&&g.push(d),h.append(d)}}for(const v of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:g}}static update(a){const c=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=c,a.div.hidden=!1}}t.XfaLayer=r},(e,t,i)=>{var u,l,m,p,_,g,P,v,L,F,w,x,h,d,M,yi,y,wi,R,Si,te,Pi,X,An,q,Ci,ce,En,Ee,Ai,B,Ei,T,xi,I,Ti,j,Mi,re,ot,me,xn,ae,Vt,_e,$t,Ie,mt,fe,Tn,ie,Bt,ve,ki,Re,Mn,He,Fi,Ge,Li,Ke,kn,Pe,Ut,V,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=i(1),r=i(4),s=i(29),a=i(6),c=i(5);const le=class le extends r.AnnotationEditor{constructor(W){super({...W,name:"inkEditor"});$(this,M);$(this,y);$(this,R);$(this,te);$(this,X);$(this,q);$(this,ce);$(this,Ee);$(this,B);$(this,T);$(this,I);$(this,j);$(this,re);$(this,me);$(this,ae);$(this,_e);$(this,Ie);$(this,fe);$(this,ie);$(this,Ge);$(this,Ke);$(this,Pe);$(this,V);$(this,u,0);$(this,l,0);$(this,m,this.canvasPointermove.bind(this));$(this,p,this.canvasPointerleave.bind(this));$(this,_,this.canvasPointerup.bind(this));$(this,g,this.canvasPointerdown.bind(this));$(this,P,new Path2D);$(this,v,!1);$(this,L,!1);$(this,F,!1);$(this,w,null);$(this,x,0);$(this,h,0);$(this,d,null);this.color=W.color||null,this.thickness=W.thickness||null,this.opacity=W.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(W){r.AnnotationEditor.initialize(W,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(W,de){switch(W){case n.AnnotationEditorParamsType.INK_THICKNESS:le._defaultThickness=de;break;case n.AnnotationEditorParamsType.INK_COLOR:le._defaultColor=de;break;case n.AnnotationEditorParamsType.INK_OPACITY:le._defaultOpacity=de/100;break}}updateParams(W,de){switch(W){case n.AnnotationEditorParamsType.INK_THICKNESS:G(this,M,yi).call(this,de);break;case n.AnnotationEditorParamsType.INK_COLOR:G(this,y,wi).call(this,de);break;case n.AnnotationEditorParamsType.INK_OPACITY:G(this,R,Si).call(this,de);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,le._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,le._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(le._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||le._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||le._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??le._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(G(this,ae,Vt).call(this),G(this,_e,$t).call(this)),this.isAttachedToDOM||(this.parent.add(this),G(this,Ie,mt).call(this)),G(this,V,_t).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,o(this,w).disconnect(),ee(this,w,null),super.remove())}setParent(W){!this.parent&&W?this._uiManager.removeShouldRescale(this):this.parent&&W===null&&this._uiManager.addShouldRescale(this),super.setParent(W)}onScaleChanging(){const[W,de]=this.parentDimensions,ke=this.width*W,Ae=this.height*de;this.setDimensions(ke,Ae)}enableEditMode(){o(this,v)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",o(this,g)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",o(this,g)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){o(this,v)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ee(this,v,!0),this.div.classList.add("disabled"),G(this,V,_t).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(W){this._focusEventsAllowed&&(super.focusin(W),this.enableEditMode())}canvasPointerdown(W){W.button!==0||!this.isInEditMode()||o(this,v)||(this.setInForeground(),W.preventDefault(),W.type!=="mouse"&&this.div.focus(),G(this,q,Ci).call(this,W.offsetX,W.offsetY))}canvasPointermove(W){W.preventDefault(),G(this,ce,En).call(this,W.offsetX,W.offsetY)}canvasPointerup(W){W.preventDefault(),G(this,me,xn).call(this,W)}canvasPointerleave(W){G(this,me,xn).call(this,W)}get isResizable(){return!this.isEmpty()&&o(this,v)}render(){if(this.div)return this.div;let W,de;this.width&&(W=this.x,de=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ze=>{var Te;return(Te=this.div)==null?void 0:Te.setAttribute("aria-label",ze)});const[ke,Ae,Oe,Ve]=G(this,te,Pi).call(this);if(this.setAt(ke,Ae,0,0),this.setDims(Oe,Ve),G(this,ae,Vt).call(this),this.width){const[ze,Te]=this.parentDimensions;this.setAspectRatio(this.width*ze,this.height*Te),this.setAt(W*ze,de*Te,this.width*ze,this.height*Te),ee(this,F,!0),G(this,Ie,mt).call(this),this.setDims(this.width*ze,this.height*Te),G(this,re,ot).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return G(this,_e,$t).call(this),this.div}setDimensions(W,de){const ke=Math.round(W),Ae=Math.round(de);if(o(this,x)===ke&&o(this,h)===Ae)return;ee(this,x,ke),ee(this,h,Ae),this.canvas.style.visibility="hidden";const[Oe,Ve]=this.parentDimensions;this.width=W/Oe,this.height=de/Ve,this.fixAndSetPosition(),o(this,v)&&G(this,fe,Tn).call(this,W,de),G(this,Ie,mt).call(this),G(this,re,ot).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(W,de,ke){var oe,pe,Se;if(W instanceof s.InkAnnotationElement)return null;const Ae=super.deserialize(W,de,ke);Ae.thickness=W.thickness,Ae.color=n.Util.makeHexColor(...W.color),Ae.opacity=W.opacity;const[Oe,Ve]=Ae.pageDimensions,ze=Ae.width*Oe,Te=Ae.height*Ve,Ye=Ae.parentScale,Ue=W.thickness/2;ee(Ae,v,!0),ee(Ae,x,Math.round(ze)),ee(Ae,h,Math.round(Te));const{paths:Q,rect:S,rotation:U}=W;for(let{bezier:De}of Q){De=G(oe=le,He,Fi).call(oe,De,S,U);const $e=[];Ae.paths.push($e);let Ne=Ye*(De[0]-Ue),Je=Ye*(De[1]-Ue);for(let We=2,Xe=De.length;We<Xe;We+=6){const Ze=Ye*(De[We]-Ue),tt=Ye*(De[We+1]-Ue),nt=Ye*(De[We+2]-Ue),rt=Ye*(De[We+3]-Ue),it=Ye*(De[We+4]-Ue),st=Ye*(De[We+5]-Ue);$e.push([[Ne,Je],[Ze,tt],[nt,rt],[it,st]]),Ne=it,Je=st}const je=G(this,ve,ki).call(this,$e);Ae.bezierPath2D.push(je)}const Y=G(pe=Ae,Ke,kn).call(pe);return ee(Ae,l,Math.max(r.AnnotationEditor.MIN_SIZE,Y[2]-Y[0])),ee(Ae,u,Math.max(r.AnnotationEditor.MIN_SIZE,Y[3]-Y[1])),G(Se=Ae,fe,Tn).call(Se,ze,Te),Ae}serialize(){if(this.isEmpty())return null;const W=this.getRect(0,0),de=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:de,thickness:this.thickness,opacity:this.opacity,paths:G(this,Ge,Li).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,W),pageIndex:this.pageIndex,rect:W,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};u=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,F=new WeakMap,w=new WeakMap,x=new WeakMap,h=new WeakMap,d=new WeakMap,M=new WeakSet,yi=function(W){const de=this.thickness;this.addCommands({cmd:()=>{this.thickness=W,G(this,V,_t).call(this)},undo:()=>{this.thickness=de,G(this,V,_t).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,wi=function(W){const de=this.color;this.addCommands({cmd:()=>{this.color=W,G(this,re,ot).call(this)},undo:()=>{this.color=de,G(this,re,ot).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,Si=function(W){W/=100;const de=this.opacity;this.addCommands({cmd:()=>{this.opacity=W,G(this,re,ot).call(this)},undo:()=>{this.opacity=de,G(this,re,ot).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},te=new WeakSet,Pi=function(){const{parentRotation:W,parentDimensions:[de,ke]}=this;switch(W){case 90:return[0,ke,ke,de];case 180:return[de,ke,de,ke];case 270:return[de,0,ke,de];default:return[0,0,de,ke]}},X=new WeakSet,An=function(){const{ctx:W,color:de,opacity:ke,thickness:Ae,parentScale:Oe,scaleFactor:Ve}=this;W.lineWidth=Ae*Oe/Ve,W.lineCap="round",W.lineJoin="round",W.miterLimit=10,W.strokeStyle=`${de}${(0,c.opacityToHex)(ke)}`},q=new WeakSet,Ci=function(W,de){this.canvas.addEventListener("contextmenu",a.noContextMenu),this.canvas.addEventListener("pointerleave",o(this,p)),this.canvas.addEventListener("pointermove",o(this,m)),this.canvas.addEventListener("pointerup",o(this,_)),this.canvas.removeEventListener("pointerdown",o(this,g)),this.isEditing=!0,o(this,F)||(ee(this,F,!0),G(this,Ie,mt).call(this),this.thickness||(this.thickness=le._defaultThickness),this.color||(this.color=le._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=le._defaultOpacity)),this.currentPath.push([W,de]),ee(this,L,!1),G(this,X,An).call(this),ee(this,d,()=>{G(this,T,xi).call(this),o(this,d)&&window.requestAnimationFrame(o(this,d))}),window.requestAnimationFrame(o(this,d))},ce=new WeakSet,En=function(W,de){const[ke,Ae]=this.currentPath.at(-1);if(this.currentPath.length>1&&W===ke&&de===Ae)return;const Oe=this.currentPath;let Ve=o(this,P);if(Oe.push([W,de]),ee(this,L,!0),Oe.length<=2){Ve.moveTo(...Oe[0]),Ve.lineTo(W,de);return}Oe.length===3&&(ee(this,P,Ve=new Path2D),Ve.moveTo(...Oe[0])),G(this,I,Ti).call(this,Ve,...Oe.at(-3),...Oe.at(-2),W,de)},Ee=new WeakSet,Ai=function(){if(this.currentPath.length===0)return;const W=this.currentPath.at(-1);o(this,P).lineTo(...W)},B=new WeakSet,Ei=function(W,de){ee(this,d,null),W=Math.min(Math.max(W,0),this.canvas.width),de=Math.min(Math.max(de,0),this.canvas.height),G(this,ce,En).call(this,W,de),G(this,Ee,Ai).call(this);let ke;if(this.currentPath.length!==1)ke=G(this,j,Mi).call(this);else{const Te=[W,de];ke=[[Te,Te.slice(),Te.slice(),Te]]}const Ae=o(this,P),Oe=this.currentPath;this.currentPath=[],ee(this,P,new Path2D);const Ve=()=>{this.allRawPaths.push(Oe),this.paths.push(ke),this.bezierPath2D.push(Ae),this.rebuild()},ze=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(G(this,ae,Vt).call(this),G(this,_e,$t).call(this)),G(this,V,_t).call(this))};this.addCommands({cmd:Ve,undo:ze,mustExec:!0})},T=new WeakSet,xi=function(){if(!o(this,L))return;ee(this,L,!1);const W=Math.ceil(this.thickness*this.parentScale),de=this.currentPath.slice(-3),ke=de.map(Ve=>Ve[0]),Ae=de.map(Ve=>Ve[1]);Math.min(...ke)-W,Math.max(...ke)+W,Math.min(...Ae)-W,Math.max(...Ae)+W;const{ctx:Oe}=this;Oe.save(),Oe.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ve of this.bezierPath2D)Oe.stroke(Ve);Oe.stroke(o(this,P)),Oe.restore()},I=new WeakSet,Ti=function(W,de,ke,Ae,Oe,Ve,ze){const Te=(de+Ae)/2,Ye=(ke+Oe)/2,Ue=(Ae+Ve)/2,Q=(Oe+ze)/2;W.bezierCurveTo(Te+2*(Ae-Te)/3,Ye+2*(Oe-Ye)/3,Ue+2*(Ae-Ue)/3,Q+2*(Oe-Q)/3,Ue,Q)},j=new WeakSet,Mi=function(){const W=this.currentPath;if(W.length<=2)return[[W[0],W[0],W.at(-1),W.at(-1)]];const de=[];let ke,[Ae,Oe]=W[0];for(ke=1;ke<W.length-2;ke++){const[S,U]=W[ke],[Y,oe]=W[ke+1],pe=(S+Y)/2,Se=(U+oe)/2,De=[Ae+2*(S-Ae)/3,Oe+2*(U-Oe)/3],$e=[pe+2*(S-pe)/3,Se+2*(U-Se)/3];de.push([[Ae,Oe],De,$e,[pe,Se]]),[Ae,Oe]=[pe,Se]}const[Ve,ze]=W[ke],[Te,Ye]=W[ke+1],Ue=[Ae+2*(Ve-Ae)/3,Oe+2*(ze-Oe)/3],Q=[Te+2*(Ve-Te)/3,Ye+2*(ze-Ye)/3];return de.push([[Ae,Oe],Ue,Q,[Te,Ye]]),de},re=new WeakSet,ot=function(){if(this.isEmpty()){G(this,ie,Bt).call(this);return}G(this,X,An).call(this);const{canvas:W,ctx:de}=this;de.setTransform(1,0,0,1,0,0),de.clearRect(0,0,W.width,W.height),G(this,ie,Bt).call(this);for(const ke of this.bezierPath2D)de.stroke(ke)},me=new WeakSet,xn=function(W){this.canvas.removeEventListener("pointerleave",o(this,p)),this.canvas.removeEventListener("pointermove",o(this,m)),this.canvas.removeEventListener("pointerup",o(this,_)),this.canvas.addEventListener("pointerdown",o(this,g)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",a.noContextMenu)},10),G(this,B,Ei).call(this,W.offsetX,W.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ae=new WeakSet,Vt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(W=>{var de;return(de=this.canvas)==null?void 0:de.setAttribute("aria-label",W)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},_e=new WeakSet,$t=function(){ee(this,w,new ResizeObserver(W=>{const de=W[0].contentRect;de.width&&de.height&&this.setDimensions(de.width,de.height)})),o(this,w).observe(this.div)},Ie=new WeakSet,mt=function(){if(!o(this,F))return;const[W,de]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*W),this.canvas.height=Math.ceil(this.height*de),G(this,ie,Bt).call(this)},fe=new WeakSet,Tn=function(W,de){const ke=G(this,Pe,Ut).call(this),Ae=(W-ke)/o(this,l),Oe=(de-ke)/o(this,u);this.scaleFactor=Math.min(Ae,Oe)},ie=new WeakSet,Bt=function(){const W=G(this,Pe,Ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+W,this.translationY*this.scaleFactor+W)},ve=new WeakSet,ki=function(W){const de=new Path2D;for(let ke=0,Ae=W.length;ke<Ae;ke++){const[Oe,Ve,ze,Te]=W[ke];ke===0&&de.moveTo(...Oe),de.bezierCurveTo(Ve[0],Ve[1],ze[0],ze[1],Te[0],Te[1])}return de},Re=new WeakSet,Mn=function(W,de,ke){const[Ae,Oe,Ve,ze]=de;switch(ke){case 0:for(let Te=0,Ye=W.length;Te<Ye;Te+=2)W[Te]+=Ae,W[Te+1]=ze-W[Te+1];break;case 90:for(let Te=0,Ye=W.length;Te<Ye;Te+=2){const Ue=W[Te];W[Te]=W[Te+1]+Ae,W[Te+1]=Ue+Oe}break;case 180:for(let Te=0,Ye=W.length;Te<Ye;Te+=2)W[Te]=Ve-W[Te],W[Te+1]+=Oe;break;case 270:for(let Te=0,Ye=W.length;Te<Ye;Te+=2){const Ue=W[Te];W[Te]=Ve-W[Te+1],W[Te+1]=ze-Ue}break;default:throw new Error("Invalid rotation")}return W},He=new WeakSet,Fi=function(W,de,ke){const[Ae,Oe,Ve,ze]=de;switch(ke){case 0:for(let Te=0,Ye=W.length;Te<Ye;Te+=2)W[Te]-=Ae,W[Te+1]=ze-W[Te+1];break;case 90:for(let Te=0,Ye=W.length;Te<Ye;Te+=2){const Ue=W[Te];W[Te]=W[Te+1]-Oe,W[Te+1]=Ue-Ae}break;case 180:for(let Te=0,Ye=W.length;Te<Ye;Te+=2)W[Te]=Ve-W[Te],W[Te+1]-=Oe;break;case 270:for(let Te=0,Ye=W.length;Te<Ye;Te+=2){const Ue=W[Te];W[Te]=ze-W[Te+1],W[Te+1]=Ve-Ue}break;default:throw new Error("Invalid rotation")}return W},Ge=new WeakSet,Li=function(W,de,ke,Ae){var Ye,Ue;const Oe=[],Ve=this.thickness/2,ze=W*de+Ve,Te=W*ke+Ve;for(const Q of this.paths){const S=[],U=[];for(let Y=0,oe=Q.length;Y<oe;Y++){const[pe,Se,De,$e]=Q[Y],Ne=W*pe[0]+ze,Je=W*pe[1]+Te,je=W*Se[0]+ze,We=W*Se[1]+Te,Xe=W*De[0]+ze,Ze=W*De[1]+Te,tt=W*$e[0]+ze,nt=W*$e[1]+Te;Y===0&&(S.push(Ne,Je),U.push(Ne,Je)),S.push(je,We,Xe,Ze,tt,nt),U.push(je,We),Y===oe-1&&U.push(tt,nt)}Oe.push({bezier:G(Ye=le,Re,Mn).call(Ye,S,Ae,this.rotation),points:G(Ue=le,Re,Mn).call(Ue,U,Ae,this.rotation)})}return Oe},Ke=new WeakSet,kn=function(){let W=1/0,de=-1/0,ke=1/0,Ae=-1/0;for(const Oe of this.paths)for(const[Ve,ze,Te,Ye]of Oe){const Ue=n.Util.bezierBoundingBox(...Ve,...ze,...Te,...Ye);W=Math.min(W,Ue[0]),ke=Math.min(ke,Ue[1]),de=Math.max(de,Ue[2]),Ae=Math.max(Ae,Ue[3])}return[W,ke,de,Ae]},Pe=new WeakSet,Ut=function(){return o(this,v)?Math.ceil(this.thickness*this.parentScale):0},V=new WeakSet,_t=function(W=!1){if(this.isEmpty())return;if(!o(this,v)){G(this,re,ot).call(this);return}const de=G(this,Ke,kn).call(this),ke=G(this,Pe,Ut).call(this);ee(this,l,Math.max(r.AnnotationEditor.MIN_SIZE,de[2]-de[0])),ee(this,u,Math.max(r.AnnotationEditor.MIN_SIZE,de[3]-de[1]));const Ae=Math.ceil(ke+o(this,l)*this.scaleFactor),Oe=Math.ceil(ke+o(this,u)*this.scaleFactor),[Ve,ze]=this.parentDimensions;this.width=Ae/Ve,this.height=Oe/ze,this.setAspectRatio(Ae,Oe);const Te=this.translationX,Ye=this.translationY;this.translationX=-de[0],this.translationY=-de[1],G(this,Ie,mt).call(this),G(this,re,ot).call(this),ee(this,x,Ae),ee(this,h,Oe),this.setDims(Ae,Oe);const Ue=W?ke/this.scaleFactor/2:0;this.translate(Te-this.translationX-Ue,Ye-this.translationY-Ue)},$(le,ve),$(le,Re),$(le,He),se(le,"_defaultColor",null),se(le,"_defaultOpacity",1),se(le,"_defaultThickness",1),se(le,"_type","ink");let f=le;t.InkEditor=f},(e,t,i)=>{var f,u,l,m,p,_,g,P,v,L,F,Ct,x,At,d,Ht,E,Fn,D,Ri,z,Di,O,Ln,J,jt,H,Ii;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=i(1),r=i(4),s=i(6),a=i(29);const K=class K extends r.AnnotationEditor{constructor(B){super({...B,name:"stampEditor"});$(this,F);$(this,x);$(this,d);$(this,E);$(this,D);$(this,z);$(this,O);$(this,J);$(this,H);$(this,f,null);$(this,u,null);$(this,l,null);$(this,m,null);$(this,p,null);$(this,_,null);$(this,g,null);$(this,P,null);$(this,v,!1);$(this,L,!1);ee(this,m,B.bitmapUrl),ee(this,p,B.bitmapFile)}static initialize(B){r.AnnotationEditor.initialize(B)}static get supportedTypes(){const B=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",B.map(b=>`image/${b}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(B){return this.supportedTypes.includes(B)}static paste(B,b){b.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:B.getAsFile()})}remove(){var B,b;o(this,u)&&(ee(this,f,null),this._uiManager.imageManager.deleteId(o(this,u)),(B=o(this,_))==null||B.remove(),ee(this,_,null),(b=o(this,g))==null||b.disconnect(),ee(this,g,null)),super.remove()}rebuild(){if(!this.parent){o(this,u)&&G(this,d,Ht).call(this);return}super.rebuild(),this.div!==null&&(o(this,u)&&G(this,d,Ht).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(o(this,l)||o(this,f)||o(this,m)||o(this,p))}get isResizable(){return!0}render(){if(this.div)return this.div;let B,b;if(this.width&&(B=this.x,b=this.y),super.render(),this.div.hidden=!0,o(this,f)?G(this,E,Fn).call(this):G(this,d,Ht).call(this),this.width){const[T,C]=this.parentDimensions;this.setAt(B*T,b*C,this.width*T,this.height*C)}return this.div}static deserialize(B,b,T){if(B instanceof a.StampAnnotationElement)return null;const C=super.deserialize(B,b,T),{rect:I,bitmapUrl:N,bitmapId:j,isSvg:Z,accessibilityData:re}=B;j&&T.imageManager.isValidId(j)?ee(C,u,j):ee(C,m,N),ee(C,v,Z);const[be,me]=C.pageDimensions;return C.width=(I[2]-I[0])/be,C.height=(I[3]-I[1])/me,re&&(C.altTextData=re),C}serialize(B=!1,b=null){if(this.isEmpty())return null;const T={annotationType:n.AnnotationEditorType.STAMP,bitmapId:o(this,u),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,v),structTreeParentId:this._structTreeParentId};if(B)return T.bitmapUrl=G(this,J,jt).call(this,!0),T.accessibilityData=this.altTextData,T;const{decorative:C,altText:I}=this.altTextData;if(!C&&I&&(T.accessibilityData={type:"Figure",alt:I}),b===null)return T;b.stamps||(b.stamps=new Map);const N=o(this,v)?(T.rect[2]-T.rect[0])*(T.rect[3]-T.rect[1]):null;if(!b.stamps.has(o(this,u)))b.stamps.set(o(this,u),{area:N,serialized:T}),T.bitmap=G(this,J,jt).call(this,!1);else if(o(this,v)){const j=b.stamps.get(o(this,u));N>j.area&&(j.area=N,j.serialized.bitmap.close(),j.serialized.bitmap=G(this,J,jt).call(this,!1))}return T}};f=new WeakMap,u=new WeakMap,l=new WeakMap,m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,F=new WeakSet,Ct=function(B,b=!1){if(!B){this.remove();return}ee(this,f,B.bitmap),b||(ee(this,u,B.id),ee(this,v,B.isSvg)),G(this,E,Fn).call(this)},x=new WeakSet,At=function(){ee(this,l,null),this._uiManager.enableWaiting(!1),o(this,_)&&this.div.focus()},d=new WeakSet,Ht=function(){if(o(this,u)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,u)).then(b=>G(this,F,Ct).call(this,b,!0)).finally(()=>G(this,x,At).call(this));return}if(o(this,m)){const b=o(this,m);ee(this,m,null),this._uiManager.enableWaiting(!0),ee(this,l,this._uiManager.imageManager.getFromUrl(b).then(T=>G(this,F,Ct).call(this,T)).finally(()=>G(this,x,At).call(this)));return}if(o(this,p)){const b=o(this,p);ee(this,p,null),this._uiManager.enableWaiting(!0),ee(this,l,this._uiManager.imageManager.getFromFile(b).then(T=>G(this,F,Ct).call(this,T)).finally(()=>G(this,x,At).call(this)));return}const B=document.createElement("input");B.type="file",B.accept=K.supportedTypesStr,ee(this,l,new Promise(b=>{B.addEventListener("change",async()=>{if(!B.files||B.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const T=await this._uiManager.imageManager.getFromFile(B.files[0]);G(this,F,Ct).call(this,T)}b()}),B.addEventListener("cancel",()=>{this.remove(),b()})}).finally(()=>G(this,x,At).call(this))),B.click()},E=new WeakSet,Fn=function(){const{div:B}=this;let{width:b,height:T}=o(this,f);const[C,I]=this.pageDimensions,N=.75;if(this.width)b=this.width*C,T=this.height*I;else if(b>N*C||T>N*I){const be=Math.min(N*C/b,N*I/T);b*=be,T*=be}const[j,Z]=this.parentDimensions;this.setDims(b*j/C,T*Z/I),this._uiManager.enableWaiting(!1);const re=ee(this,_,document.createElement("canvas"));B.append(re),B.hidden=!1,G(this,O,Ln).call(this,b,T),G(this,H,Ii).call(this),o(this,L)||(this.parent.addUndoableEditor(this),ee(this,L,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},D=new WeakSet,Ri=function(B,b){var N;const[T,C]=this.parentDimensions;this.width=B/T,this.height=b/C,this.setDims(B,b),(N=this._initialOptions)!=null&&N.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,o(this,P)!==null&&clearTimeout(o(this,P)),ee(this,P,setTimeout(()=>{ee(this,P,null),G(this,O,Ln).call(this,B,b)},200))},z=new WeakSet,Di=function(B,b){const{width:T,height:C}=o(this,f);let I=T,N=C,j=o(this,f);for(;I>2*B||N>2*b;){const Z=I,re=N;I>2*B&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2)),N>2*b&&(N=N>=16384?Math.floor(N/2)-1:Math.ceil(N/2));const be=new OffscreenCanvas(I,N);be.getContext("2d").drawImage(j,0,0,Z,re,0,0,I,N),j=be.transferToImageBitmap()}return j},O=new WeakSet,Ln=function(B,b){B=Math.ceil(B),b=Math.ceil(b);const T=o(this,_);if(!T||T.width===B&&T.height===b)return;T.width=B,T.height=b;const C=o(this,v)?o(this,f):G(this,z,Di).call(this,B,b),I=T.getContext("2d");I.filter=this._uiManager.hcmFilter,I.drawImage(C,0,0,C.width,C.height,0,0,B,b)},J=new WeakSet,jt=function(B){if(B){if(o(this,v)){const C=this._uiManager.imageManager.getSvgUrl(o(this,u));if(C)return C}const b=document.createElement("canvas");return{width:b.width,height:b.height}=o(this,f),b.getContext("2d").drawImage(o(this,f),0,0),b.toDataURL()}if(o(this,v)){const[b,T]=this.pageDimensions,C=Math.round(this.width*b*s.PixelsPerInch.PDF_TO_CSS_UNITS),I=Math.round(this.height*T*s.PixelsPerInch.PDF_TO_CSS_UNITS),N=new OffscreenCanvas(C,I);return N.getContext("2d").drawImage(o(this,f),0,0,o(this,f).width,o(this,f).height,0,0,C,I),N.transferToImageBitmap()}return structuredClone(o(this,f))},H=new WeakSet,Ii=function(){ee(this,g,new ResizeObserver(B=>{const b=B[0].contentRect;b.width&&b.height&&G(this,D,Ri).call(this,b.width,b.height)})),o(this,g).observe(this.div)},se(K,"_type","stamp");let c=K;t.StampEditor=c}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),c=__w_pdfjs_require__(29),f=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,pdf_viewer={exports:{}};(function(e,t){(function(n,r){e.exports=n.pdfjsViewer=r()})(globalThis,()=>(()=>{var i=[,(a,c,f)=>{var J,q,H,ce,Oi,Ee,Rn,B,Dn,T,Ni,I,Vi,j,$i,re,In,me,Bi,ae,Ui,_e,Wt,Ie,Et,fe,vt,ie,Hi,ve,On,Re,Nn,He,zt,Ge,ji,Ke,Vn,Pe,$n,V,xt;Object.defineProperty(c,"__esModule",{value:!0}),c.PDFFindController=c.FindState=void 0;var u=f(2),l=f(3),m=f(4);const p={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};c.FindState=p;const _=250,g=-50,P=-400,v={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},L=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let F;const w=new RegExp("\\p{M}+","gu"),x=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),h=new RegExp("([^\\p{M}])\\p{M}*$","u"),d=new RegExp("^\\p{M}*([^\\p{M}])","u"),M=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,E=new Map,y="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",D=new Map;let R=null,z=null;function te(le){const ge=[];let ye;for(;(ye=M.exec(le))!==null;){let{index:Q}=ye;for(const S of ye[0]){let U=E.get(S);U||(U=S.normalize("NFD").length,E.set(S,U)),ge.push([U,Q++])}}let W;if(ge.length===0&&R)W=R;else if(ge.length>0&&z)W=z;else{const Q=Object.keys(v).join(""),S=(0,l.getNormalizeWithNFKC)(),oe=`([${Q}])|([${S}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;ge.length===0?W=R=new RegExp(oe+"|(\\u0000)","gum"):W=z=new RegExp(oe+`|(${y})`,"gum")}const de=[];for(;(ye=w.exec(le))!==null;)de.push([ye[0].length,ye.index]);let ke=le.normalize("NFD");const Ae=[[0,0]];let Oe=0,Ve=0,ze=0,Te=0,Ye=0,Ue=!1;return ke=ke.replace(W,(Q,S,U,Y,oe,pe,Se,De,$e,Ne)=>{var Je,je,We;if(Ne-=Te,S){const Xe=v[S],Ze=Xe.length;for(let tt=1;tt<Ze;tt++)Ae.push([Ne-ze+tt,ze-tt]);return ze-=Ze-1,Xe}if(U){let Xe=D.get(U);Xe||(Xe=U.normalize("NFKC"),D.set(U,Xe));const Ze=Xe.length;for(let tt=1;tt<Ze;tt++)Ae.push([Ne-ze+tt,ze-tt]);return ze-=Ze-1,Xe}if(Y)return Ue=!0,Ne+Ye===((Je=de[Oe])==null?void 0:Je[1])?++Oe:(Ae.push([Ne-1-ze+1,ze-1]),ze-=1,Te+=1),Ae.push([Ne-ze+1,ze]),Te+=1,Ye+=1,Y.charAt(0);if(oe){const Xe=oe.endsWith(`
`),Ze=Xe?oe.length-2:oe.length;Ue=!0;let tt=Ze;Ne+Ye===((je=de[Oe])==null?void 0:je[1])&&(tt-=de[Oe][0],++Oe);for(let nt=1;nt<=tt;nt++)Ae.push([Ne-1-ze+nt,ze-nt]);return ze-=tt,Te+=tt,Xe?(Ne+=Ze-1,Ae.push([Ne-ze+1,1+ze]),ze+=1,Te+=1,Ye+=1,oe.slice(0,Ze)):oe}if(pe){const Xe=pe.length-2;return Ae.push([Ne-ze+Xe,1+ze]),ze+=1,Te+=1,Ye+=1,pe.slice(0,-2)}if(Se){const Xe=Se.length-1;return Ae.push([Ne-ze+Xe,ze]),Te+=1,Ye+=1,Se.slice(0,-1)}if(De)return Ae.push([Ne-ze+1,ze-1]),ze-=1,Te+=1,Ye+=1," ";if(Ne+Ye===((We=ge[Ve])==null?void 0:We[1])){const Xe=ge[Ve][0]-1;++Ve;for(let Ze=1;Ze<=Xe;Ze++)Ae.push([Ne-(ze-Ze),ze-Ze]);ze-=Xe,Te+=Xe}return $e}),Ae.push([ke.length,ze]),[ke,Ae,Ue]}function O(le,ge,ye){if(!le)return[ge,ye];const W=ge,de=ge+ye-1;let ke=(0,u.binarySearchFirstItem)(le,Te=>Te[0]>=W);le[ke][0]>W&&--ke;let Ae=(0,u.binarySearchFirstItem)(le,Te=>Te[0]>=de,ke);le[Ae][0]>de&&--Ae;const Oe=W+le[ke][1],ze=de+le[Ae][1]+1-Oe;return[Oe,ze]}class X{constructor({linkService:ge,eventBus:ye,updateMatchesCountOnProgress:W=!0}){$(this,ce);$(this,Ee);$(this,B);$(this,T);$(this,I);$(this,j);$(this,re);$(this,me);$(this,ae);$(this,_e);$(this,Ie);$(this,fe);$(this,ie);$(this,ve);$(this,Re);$(this,He);$(this,Ge);$(this,Ke);$(this,Pe);$(this,V);$(this,J,null);$(this,q,!0);$(this,H,0);this._linkService=ge,this._eventBus=ye,ee(this,q,W),this.onIsPageVisible=null,G(this,Ee,Rn).call(this),ye._on("find",G(this,ce,Oi).bind(this)),ye._on("findbarclose",G(this,Ge,ji).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return o(this,J)}setDocument(ge){this._pdfDocument&&G(this,Ee,Rn).call(this),ge&&(this._pdfDocument=ge,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ge=null,selectedLeft:ye=0,pageIndex:W=-1,matchIndex:de=-1}){if(!this._scrollMatches||!ge)return;if(de===-1||de!==this._selected.matchIdx)return;if(W===-1||W!==this._selected.pageIdx)return;this._scrollMatches=!1;const ke={top:g,left:ye+P};(0,u.scrollIntoView)(ge,ke,!0)}}J=new WeakMap,q=new WeakMap,H=new WeakMap,ce=new WeakSet,Oi=function(ge){if(!ge)return;ge.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof ge.query=="string"&&(ge.query=ge.query.match(/\S+/g)));const ye=this._pdfDocument,{type:W}=ge;(o(this,J)===null||G(this,T,Ni).call(this,ge))&&(this._dirtyMatch=!0),ee(this,J,ge),W!=="highlightallchange"&&G(this,V,xt).call(this,p.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ye&&this._pdfDocument!==ye)return;G(this,ae,Ui).call(this);const de=!this._highlightMatches,ke=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),W?this._dirtyMatch?G(this,fe,vt).call(this):W==="again"?(G(this,fe,vt).call(this),de&&o(this,J).highlightAll&&G(this,Ie,Et).call(this)):W==="highlightallchange"?(ke?G(this,fe,vt).call(this):this._highlightMatches=!0,G(this,Ie,Et).call(this)):G(this,fe,vt).call(this):this._findTimeout=setTimeout(()=>{G(this,fe,vt).call(this),this._findTimeout=null},_)})},Ee=new WeakSet,Rn=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],ee(this,H,0),ee(this,J,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new m.PromiseCapability},B=new WeakSet,Dn=function(){const{query:ge}=o(this,J);return typeof ge=="string"?(ge!==this._rawQuery&&(this._rawQuery=ge,[this._normalizedQuery]=te(ge)),this._normalizedQuery):(ge||[]).filter(ye=>!!ye).map(ye=>te(ye)[0])},T=new WeakSet,Ni=function(ge){var Ae;const ye=ge.query,W=o(this,J).query,de=typeof ye;if(de!==typeof W)return!0;if(de==="string"){if(ye!==W)return!0}else if(JSON.stringify(ye)!==JSON.stringify(W))return!0;switch(ge.type){case"again":const Oe=this._selected.pageIdx+1,Ve=this._linkService;return Oe>=1&&Oe<=Ve.pagesCount&&Oe!==Ve.page&&!(((Ae=this.onIsPageVisible)==null?void 0:Ae.call(this,Oe))??!0);case"highlightallchange":return!1}return!0},I=new WeakSet,Vi=function(ge,ye,W){let de=ge.slice(0,ye).match(h);if(de){const ke=ge.charCodeAt(ye),Ae=de[1].charCodeAt(0);if((0,l.getCharacterType)(ke)===(0,l.getCharacterType)(Ae))return!1}if(de=ge.slice(ye+W).match(d),de){const ke=ge.charCodeAt(ye+W-1),Ae=de[1].charCodeAt(0);if((0,l.getCharacterType)(ke)===(0,l.getCharacterType)(Ae))return!1}return!0},j=new WeakSet,$i=function(ge,ye,W,de){const ke=this._pageMatches[W]=[],Ae=this._pageMatchesLength[W]=[];if(!ge)return;const Oe=this._pageDiffs[W];let Ve;for(;(Ve=ge.exec(de))!==null;){if(ye&&!G(this,I,Vi).call(this,de,Ve.index,Ve[0].length))continue;const[ze,Te]=O(Oe,Ve.index,Ve[0].length);Te&&(ke.push(ze),Ae.push(Te))}},re=new WeakSet,In=function(ge,ye){const{matchDiacritics:W}=o(this,J);let de=!1;ge=ge.replaceAll(x,(Ae,Oe,Ve,ze,Te,Ye)=>Oe?`[ ]*\\${Oe}[ ]*`:Ve?`[ ]*${Ve}[ ]*`:ze?"[ ]+":W?Te||Ye:Te?L.has(Te.charCodeAt(0))?Te:"":ye?(de=!0,`${Ye}\\p{M}*`):Ye);const ke="[ ]*";return ge.endsWith(ke)&&(ge=ge.slice(0,ge.length-ke.length)),W&&ye&&(F||(F=String.fromCharCode(...L)),de=!0,ge=`${ge}(?=[${F}]|[^\\p{M}]|$)`),[de,ge]},me=new WeakSet,Bi=function(ge){let ye=o(this,B,Dn);if(ye.length===0)return;const{caseSensitive:W,entireWord:de}=o(this,J),ke=this._pageContents[ge],Ae=this._hasDiacritics[ge];let Oe=!1;typeof ye=="string"?[Oe,ye]=G(this,re,In).call(this,ye,Ae):ye=ye.sort().reverse().map(Te=>{const[Ye,Ue]=G(this,re,In).call(this,Te,Ae);return Oe||(Oe=Ye),`(${Ue})`}).join("|");const Ve=`g${Oe?"u":""}${W?"":"i"}`;ye=ye?new RegExp(ye,Ve):null,G(this,j,$i).call(this,ye,de,ge,ke),o(this,J).highlightAll&&G(this,_e,Wt).call(this,ge),this._resumePageIdx===ge&&(this._resumePageIdx=null,G(this,ve,On).call(this));const ze=this._pageMatches[ge].length;this._matchesCountTotal+=ze,o(this,q)?ze>0&&G(this,Pe,$n).call(this):++ht(this,H)._===this._linkService.pagesCount&&G(this,Pe,$n).call(this)},ae=new WeakSet,Ui=function(){if(this._extractTextPromises.length>0)return;let ge=Promise.resolve();const ye={disableNormalization:!0};for(let W=0,de=this._linkService.pagesCount;W<de;W++){const ke=new m.PromiseCapability;this._extractTextPromises[W]=ke.promise,ge=ge.then(()=>this._pdfDocument.getPage(W+1).then(Ae=>Ae.getTextContent(ye)).then(Ae=>{const Oe=[];for(const Ve of Ae.items)Oe.push(Ve.str),Ve.hasEOL&&Oe.push(`
`);[this._pageContents[W],this._pageDiffs[W],this._hasDiacritics[W]]=te(Oe.join("")),ke.resolve()},Ae=>{console.error(`Unable to get text content for page ${W+1}`,Ae),this._pageContents[W]="",this._pageDiffs[W]=null,this._hasDiacritics[W]=!1,ke.resolve()}))}},_e=new WeakSet,Wt=function(ge){this._scrollMatches&&this._selected.pageIdx===ge&&(this._linkService.page=ge+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ge})},Ie=new WeakSet,Et=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},fe=new WeakSet,vt=function(){const ge=o(this,J).findPrevious,ye=this._linkService.page-1,W=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ye,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,ee(this,H,0),this._matchesCountTotal=0,G(this,Ie,Et).call(this);for(let Ae=0;Ae<W;Ae++)this._pendingFindMatches.has(Ae)||(this._pendingFindMatches.add(Ae),this._extractTextPromises[Ae].then(()=>{this._pendingFindMatches.delete(Ae),G(this,me,Bi).call(this,Ae)}))}if(o(this,B,Dn).length===0){G(this,V,xt).call(this,p.FOUND);return}if(this._resumePageIdx)return;const ke=this._offset;if(this._pagesToSearch=W,ke.matchIdx!==null){const Ae=this._pageMatches[ke.pageIdx].length;if(!ge&&ke.matchIdx+1<Ae||ge&&ke.matchIdx>0){ke.matchIdx=ge?ke.matchIdx-1:ke.matchIdx+1,G(this,He,zt).call(this,!0);return}G(this,Re,Nn).call(this,ge)}G(this,ve,On).call(this)},ie=new WeakSet,Hi=function(ge){const ye=this._offset,W=ge.length,de=o(this,J).findPrevious;return W?(ye.matchIdx=de?W-1:0,G(this,He,zt).call(this,!0),!0):(G(this,Re,Nn).call(this,de),ye.wrapped&&(ye.matchIdx=null,this._pagesToSearch<0)?(G(this,He,zt).call(this,!1),!0):!1)},ve=new WeakSet,On=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let ge=null;do{const ye=this._offset.pageIdx;if(ge=this._pageMatches[ye],!ge){this._resumePageIdx=ye;break}}while(!G(this,ie,Hi).call(this,ge))},Re=new WeakSet,Nn=function(ge){const ye=this._offset,W=this._linkService.pagesCount;ye.pageIdx=ge?ye.pageIdx-1:ye.pageIdx+1,ye.matchIdx=null,this._pagesToSearch--,(ye.pageIdx>=W||ye.pageIdx<0)&&(ye.pageIdx=ge?W-1:0,ye.wrapped=!0)},He=new WeakSet,zt=function(ge=!1){let ye=p.NOT_FOUND;const W=this._offset.wrapped;if(this._offset.wrapped=!1,ge){const de=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ye=W?p.WRAPPED:p.FOUND,de!==-1&&de!==this._selected.pageIdx&&G(this,_e,Wt).call(this,de)}G(this,V,xt).call(this,ye,o(this,J).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,G(this,_e,Wt).call(this,this._selected.pageIdx))},Ge=new WeakSet,ji=function(ge){const ye=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ye&&this._pdfDocument!==ye||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),G(this,V,xt).call(this,p.FOUND),this._highlightMatches=!1,G(this,Ie,Et).call(this))})},Ke=new WeakSet,Vn=function(){var ke;const{pageIdx:ge,matchIdx:ye}=this._selected;let W=0,de=this._matchesCountTotal;if(ye!==-1){for(let Ae=0;Ae<ge;Ae++)W+=((ke=this._pageMatches[Ae])==null?void 0:ke.length)||0;W+=ye+1}return(W<1||W>de)&&(W=de=0),{current:W,total:de}},Pe=new WeakSet,$n=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:G(this,Ke,Vn).call(this)})},V=new WeakSet,xt=function(ge,ye=!1){var W;!o(this,q)&&(o(this,H)!==this._linkService.pagesCount||ge===p.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ge,previous:ye,matchesCount:G(this,Ke,Vn).call(this),rawQuery:((W=o(this,J))==null?void 0:W.query)??null})},c.PDFFindController=X},(a,c)=>{var we,_e,Le,Ie,Fe;Object.defineProperty(c,"__esModule",{value:!0}),c.animationStarted=c.VERTICAL_PADDING=c.UNKNOWN_SCALE=c.TextLayerMode=c.SpreadMode=c.SidebarView=c.ScrollMode=c.SCROLLBAR_PADDING=c.RenderingStates=c.ProgressBar=c.PresentationModeState=c.OutputScale=c.MIN_SCALE=c.MAX_SCALE=c.MAX_AUTO_SCALE=c.DEFAULT_SCALE_VALUE=c.DEFAULT_SCALE_DELTA=c.DEFAULT_SCALE=c.CursorTool=c.AutoPrintRegExp=void 0,c.apiPageLayoutToViewerModes=be,c.apiPageModeToSidebarView=me,c.approximateFraction=J,c.backtrackBeforeAllVisibleElements=ce,c.binarySearchFirstItem=X,c.docStyle=void 0,c.getActiveOrFocusedElement=re,c.getPageSizeInches=H,c.getVisibleElements=K,c.isPortraitOrientation=C,c.isValidRotation=B,c.isValidScrollMode=b,c.isValidSpreadMode=T,c.normalizeWheelEventDelta=xe,c.normalizeWheelEventDirection=Ee,c.parseQueryString=z,c.removeNullCharacters=O,c.roundToDivide=q,c.scrollIntoView=D,c.toggleCheckedBtn=Ce,c.toggleExpandedBtn=ae,c.watchScroll=R;const f="auto";c.DEFAULT_SCALE_VALUE=f;const u=1;c.DEFAULT_SCALE=u;const l=1.1;c.DEFAULT_SCALE_DELTA=l;const m=.1;c.MIN_SCALE=m;const p=10;c.MAX_SCALE=p;const _=0;c.UNKNOWN_SCALE=_;const g=1.25;c.MAX_AUTO_SCALE=g;const P=40;c.SCROLLBAR_PADDING=P;const v=5;c.VERTICAL_PADDING=v;const L={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};c.RenderingStates=L;const F={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};c.PresentationModeState=F;const w={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};c.SidebarView=w;const x={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};c.TextLayerMode=x;const h={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};c.ScrollMode=h;const d={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};c.SpreadMode=d;const M={SELECT:0,HAND:1,ZOOM:2};c.CursorTool=M;const E=/\bprint\s*\(/;c.AutoPrintRegExp=E;class y{constructor(){const ue=window.devicePixelRatio||1;this.sx=ue,this.sy=ue}get scaled(){return this.sx!==1||this.sy!==1}}c.OutputScale=y;function D(fe,ue,ie=!1){let ne=fe.offsetParent;if(!ne){console.error("offsetParent is not set -- cannot scroll");return}let ve=fe.offsetTop+fe.clientTop,Me=fe.offsetLeft+fe.clientLeft;for(;ne.clientHeight===ne.scrollHeight&&ne.clientWidth===ne.scrollWidth||ie&&(ne.classList.contains("markedContent")||getComputedStyle(ne).overflow==="hidden");)if(ve+=ne.offsetTop,Me+=ne.offsetLeft,ne=ne.offsetParent,!ne)return;ue&&(ue.top!==void 0&&(ve+=ue.top),ue.left!==void 0&&(Me+=ue.left,ne.scrollLeft=Me)),ne.scrollTop=ve}function R(fe,ue){const ie=function(Me){ve||(ve=window.requestAnimationFrame(function(){ve=null;const Be=fe.scrollLeft,He=ne.lastX;Be!==He&&(ne.right=Be>He),ne.lastX=Be;const qe=fe.scrollTop,Ge=ne.lastY;qe!==Ge&&(ne.down=qe>Ge),ne.lastY=qe,ue(ne)}))},ne={right:!0,down:!0,lastX:fe.scrollLeft,lastY:fe.scrollTop,_eventHandler:ie};let ve=null;return fe.addEventListener("scroll",ie,!0),ne}function z(fe){const ue=new Map;for(const[ie,ne]of new URLSearchParams(fe))ue.set(ie.toLowerCase(),ne);return ue}const te=/[\x01-\x1F]/g;function O(fe,ue=!1){return typeof fe!="string"?(console.error("The argument must be a string."),fe):(ue&&(fe=fe.replaceAll(te," ")),fe.replaceAll("\0",""))}function X(fe,ue,ie=0){let ne=ie,ve=fe.length-1;if(ve<0||!ue(fe[ve]))return fe.length;if(ue(fe[ne]))return ne;for(;ne<ve;){const Me=ne+ve>>1,Re=fe[Me];ue(Re)?ve=Me:ne=Me+1}return ne}function J(fe){if(Math.floor(fe)===fe)return[fe,1];const ue=1/fe,ie=8;if(ue>ie)return[1,ie];if(Math.floor(ue)===ue)return[1,ue];const ne=fe>1?ue:fe;let ve=0,Me=1,Re=1,Be=1;for(;;){const qe=ve+Re,Ge=Me+Be;if(Ge>ie)break;ne<=qe/Ge?(Re=qe,Be=Ge):(ve=qe,Me=Ge)}let He;return ne-ve/Me<Re/Be-ne?He=ne===fe?[ve,Me]:[Me,ve]:He=ne===fe?[Re,Be]:[Be,Re],He}function q(fe,ue){const ie=fe%ue;return ie===0?fe:Math.round(fe-ie+ue)}function H({view:fe,userUnit:ue,rotate:ie}){const[ne,ve,Me,Re]=fe,Be=ie%180!==0,He=(Me-ne)/72*ue,qe=(Re-ve)/72*ue;return{width:Be?qe:He,height:Be?He:qe}}function ce(fe,ue,ie){if(fe<2)return fe;let ne=ue[fe].div,ve=ne.offsetTop+ne.clientTop;ve>=ie&&(ne=ue[fe-1].div,ve=ne.offsetTop+ne.clientTop);for(let Me=fe-2;Me>=0&&(ne=ue[Me].div,!(ne.offsetTop+ne.clientTop+ne.clientHeight<=ve));--Me)fe=Me;return fe}function K({scrollEl:fe,views:ue,sortByVisibility:ie=!1,horizontal:ne=!1,rtl:ve=!1}){const Me=fe.scrollTop,Re=Me+fe.clientHeight,Be=fe.scrollLeft,He=Be+fe.clientWidth;function qe(le){const ge=le.div;return ge.offsetTop+ge.clientTop+ge.clientHeight>Me}function Ge(le){const ge=le.div,ye=ge.offsetLeft+ge.clientLeft,W=ye+ge.clientWidth;return ve?ye<He:W>Be}const Qe=[],Ke=new Set,et=ue.length;let Pe=X(ue,ne?Ge:qe);Pe>0&&Pe<et&&!ne&&(Pe=ce(Pe,ue,Me));let k=ne?He:-1;for(let le=Pe;le<et;le++){const ge=ue[le],ye=ge.div,W=ye.offsetLeft+ye.clientLeft,de=ye.offsetTop+ye.clientTop,ke=ye.clientWidth,Ae=ye.clientHeight,Oe=W+ke,Ve=de+Ae;if(k===-1)Ve>=Re&&(k=Ve);else if((ne?W:de)>k)break;if(Ve<=Me||de>=Re||Oe<=Be||W>=He)continue;const ze=Math.max(0,Me-de)+Math.max(0,Ve-Re),Te=Math.max(0,Be-W)+Math.max(0,Oe-He),Ye=(Ae-ze)/Ae,Ue=(ke-Te)/ke,Q=Ye*Ue*100|0;Qe.push({id:ge.id,x:W,y:de,view:ge,percent:Q,widthPercent:Ue*100|0}),Ke.add(ge.id)}const V=Qe[0],he=Qe.at(-1);return ie&&Qe.sort(function(le,ge){const ye=le.percent-ge.percent;return Math.abs(ye)>.001?-ye:le.id-ge.id}),{first:V,last:he,views:Qe,ids:Ke}}function Ee(fe){let ue=Math.hypot(fe.deltaX,fe.deltaY);const ie=Math.atan2(fe.deltaY,fe.deltaX);return-.25*Math.PI<ie&&ie<.75*Math.PI&&(ue=-ue),ue}function xe(fe){const ue=fe.deltaMode;let ie=Ee(fe);const ne=30,ve=30;return ue===WheelEvent.DOM_DELTA_PIXEL?ie/=ne*ve:ue===WheelEvent.DOM_DELTA_LINE&&(ie/=ve),ie}function B(fe){return Number.isInteger(fe)&&fe%90===0}function b(fe){return Number.isInteger(fe)&&Object.values(h).includes(fe)&&fe!==h.UNKNOWN}function T(fe){return Number.isInteger(fe)&&Object.values(d).includes(fe)&&fe!==d.UNKNOWN}function C(fe){return fe.width<=fe.height}const I=new Promise(function(fe){window.requestAnimationFrame(fe)});c.animationStarted=I;const N=document.documentElement.style;c.docStyle=N;function j(fe,ue,ie){return Math.min(Math.max(fe,ue),ie)}class Z{constructor(ue){$(this,we,null);$(this,_e,null);$(this,Le,0);$(this,Ie,null);$(this,Fe,!0);ee(this,we,ue.classList),ee(this,Ie,ue.style)}get percent(){return o(this,Le)}set percent(ue){if(ee(this,Le,j(ue,0,100)),isNaN(ue)){o(this,we).add("indeterminate");return}o(this,we).remove("indeterminate"),o(this,Ie).setProperty("--progressBar-percent",`${o(this,Le)}%`)}setWidth(ue){if(!ue)return;const ne=ue.parentNode.offsetWidth-ue.offsetWidth;ne>0&&o(this,Ie).setProperty("--progressBar-end-offset",`${ne}px`)}setDisableAutoFetch(ue=5e3){isNaN(o(this,Le))||(o(this,_e)&&clearTimeout(o(this,_e)),this.show(),ee(this,_e,setTimeout(()=>{ee(this,_e,null),this.hide()},ue)))}hide(){o(this,Fe)&&(ee(this,Fe,!1),o(this,we).add("hidden"))}show(){o(this,Fe)||(ee(this,Fe,!0),o(this,we).remove("hidden"))}}we=new WeakMap,_e=new WeakMap,Le=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,c.ProgressBar=Z;function re(){let fe=document,ue=fe.activeElement||fe.querySelector(":focus");for(;ue!=null&&ue.shadowRoot;)fe=ue.shadowRoot,ue=fe.activeElement||fe.querySelector(":focus");return ue}function be(fe){let ue=h.VERTICAL,ie=d.NONE;switch(fe){case"SinglePage":ue=h.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ue=h.PAGE;case"TwoColumnLeft":ie=d.ODD;break;case"TwoPageRight":ue=h.PAGE;case"TwoColumnRight":ie=d.EVEN;break}return{scrollMode:ue,spreadMode:ie}}function me(fe){switch(fe){case"UseNone":return w.NONE;case"UseThumbs":return w.THUMBS;case"UseOutlines":return w.OUTLINE;case"UseAttachments":return w.ATTACHMENTS;case"UseOC":return w.LAYERS}return w.NONE}function Ce(fe,ue,ie=null){fe.classList.toggle("toggled",ue),fe.setAttribute("aria-checked",ue),ie==null||ie.classList.toggle("hidden",!ue)}function ae(fe,ue,ie=null){fe.classList.toggle("toggled",ue),fe.setAttribute("aria-expanded",ue),ie==null||ie.classList.toggle("hidden",!ue)}},(a,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterType=void 0,c.getCharacterType=w,c.getNormalizeWithNFKC=h;const f={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};c.CharacterType=f;function u(d){return d<11904}function l(d){return(d&65408)===0}function m(d){return d>=97&&d<=122||d>=65&&d<=90}function p(d){return d>=48&&d<=57}function _(d){return d===32||d===9||d===13||d===10}function g(d){return d>=13312&&d<=40959||d>=63744&&d<=64255}function P(d){return d>=12448&&d<=12543}function v(d){return d>=12352&&d<=12447}function L(d){return d>=65376&&d<=65439}function F(d){return(d&65408)===3584}function w(d){return u(d)?l(d)?_(d)?f.SPACE:m(d)||p(d)||d===95?f.ALPHA_LETTER:f.PUNCT:F(d)?f.THAI_LETTER:d===160?f.SPACE:f.ALPHA_LETTER:g(d)?f.HAN_LETTER:P(d)?f.KATAKANA_LETTER:v(d)?f.HIRAGANA_LETTER:L(d)?f.HALFWIDTH_KATAKANA_LETTER:f.ALPHA_LETTER}let x;function h(){return x||(x=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),x}},a=>{a.exports=globalThis.pdfjsLib},(a,c,f)=>{var P,v,Bn,F,Wi;Object.defineProperty(c,"__esModule",{value:!0}),c.SimpleLinkService=c.PDFLinkService=c.LinkTarget=void 0;var u=f(2);const l="noopener noreferrer nofollow",m={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};c.LinkTarget=m;function p(h,{url:d,target:M,rel:E,enabled:y=!0}={}){if(!d||typeof d!="string")throw new Error('A valid "url" parameter must provided.');y?h.href=h.title=d:(h.href="",h.title=`Disabled: ${d}`,h.onclick=()=>!1);let D="";switch(M){case m.NONE:break;case m.SELF:D="_self";break;case m.BLANK:D="_blank";break;case m.PARENT:D="_parent";break;case m.TOP:D="_top";break}h.target=D,h.rel=typeof E=="string"?E:l}const x=class x{constructor({eventBus:d,externalLinkTarget:M=null,externalLinkRel:E=null,ignoreDestinationZoom:y=!1}={}){$(this,v);$(this,P,new Map);this.eventBus=d,this.externalLinkTarget=M,this.externalLinkRel=E,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=y,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(d,M=null){this.baseUrl=M,this.pdfDocument=d,o(this,P).clear()}setViewer(d){this.pdfViewer=d}setHistory(d){this.pdfHistory=d}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get rotation(){return this.pdfViewer.pagesRotation}set rotation(d){this.pdfViewer.pagesRotation=d}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(d){if(!this.pdfDocument)return;let M,E;if(typeof d=="string"?(M=d,E=await this.pdfDocument.getDestination(d)):(M=null,E=await d),!Array.isArray(E)){console.error(`PDFLinkService.goToDestination: "${E}" is not a valid destination array, for dest="${d}".`);return}G(this,v,Bn).call(this,d,M,E)}goToPage(d){if(!this.pdfDocument)return;const M=typeof d=="string"&&this.pdfViewer.pageLabelToPageNumber(d)||d|0;if(!(Number.isInteger(M)&&M>0&&M<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${d}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(M)),this.pdfViewer.scrollPageIntoView({pageNumber:M})}addLinkAttributes(d,M,E=!1){p(d,{url:M,target:E?m.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(d){if(typeof d=="string"){if(d.length>0)return this.getAnchorUrl("#"+escape(d))}else if(Array.isArray(d)){const M=JSON.stringify(d);if(M.length>0)return this.getAnchorUrl("#"+escape(M))}return this.getAnchorUrl("")}getAnchorUrl(d){return this.baseUrl?this.baseUrl+d:d}setHash(d){var y;if(!this.pdfDocument)return;let M,E;if(d.includes("=")){const D=(0,u.parseQueryString)(d);if(D.has("search")){const R=D.get("search").replaceAll('"',""),z=D.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:z?R:R.match(/\S+/g)})}if(D.has("page")&&(M=D.get("page")|0||1),D.has("zoom")){const R=D.get("zoom").split(","),z=R[0],te=parseFloat(z);z.includes("Fit")?z==="Fit"||z==="FitB"?E=[null,{name:z}]:z==="FitH"||z==="FitBH"||z==="FitV"||z==="FitBV"?E=[null,{name:z},R.length>1?R[1]|0:null]:z==="FitR"?R.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):E=[null,{name:z},R[1]|0,R[2]|0,R[3]|0,R[4]|0]:console.error(`PDFLinkService.setHash: "${z}" is not a valid zoom value.`):E=[null,{name:"XYZ"},R.length>1?R[1]|0:null,R.length>2?R[2]|0:null,te?te/100:z]}E?this.pdfViewer.scrollPageIntoView({pageNumber:M||this.page,destArray:E,allowNegativeOffset:!0}):M&&(this.page=M),D.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:D.get("pagemode")}),D.has("nameddest")&&this.goToDestination(D.get("nameddest"))}else{E=unescape(d);try{E=JSON.parse(E),Array.isArray(E)||(E=E.toString())}catch{}if(typeof E=="string"||G(y=x,F,Wi).call(y,E)){this.goToDestination(E);return}console.error(`PDFLinkService.setHash: "${unescape(d)}" is not a valid destination.`)}}executeNamedAction(d){var M,E;switch(d){case"GoBack":(M=this.pdfHistory)==null||M.back();break;case"GoForward":(E=this.pdfHistory)==null||E.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:d})}async executeSetOCGState(d){const M=this.pdfDocument,E=await this.pdfViewer.optionalContentConfigPromise;if(M!==this.pdfDocument)return;let y;for(const D of d.state){switch(D){case"ON":case"OFF":case"Toggle":y=D;continue}switch(y){case"ON":E.setVisibility(D,!0);break;case"OFF":E.setVisibility(D,!1);break;case"Toggle":const R=E.getGroup(D);R&&E.setVisibility(D,!R.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(E)}cachePageRef(d,M){if(!M)return;const E=M.gen===0?`${M.num}R`:`${M.num}R${M.gen}`;o(this,P).set(E,d)}_cachedPageNumber(d){if(!d)return null;const M=d.gen===0?`${d.num}R`:`${d.num}R${d.gen}`;return o(this,P).get(M)||null}};P=new WeakMap,v=new WeakSet,Bn=function(d,M=null,E){const y=E[0];let D;if(typeof y=="object"&&y!==null){if(D=this._cachedPageNumber(y),!D){this.pdfDocument.getPageIndex(y).then(R=>{this.cachePageRef(R+1,y),G(this,v,Bn).call(this,d,M,E)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${y}" is not a valid page reference, for dest="${d}".`)});return}}else if(Number.isInteger(y))D=y+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${y}" is not a valid destination reference, for dest="${d}".`);return}if(!D||D<1||D>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${D}" is not a valid page number, for dest="${d}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:M,explicitDest:E,pageNumber:D})),this.pdfViewer.scrollPageIntoView({pageNumber:D,destArray:E,ignoreDestinationZoom:this._ignoreDestinationZoom})},F=new WeakSet,Wi=function(d){if(!Array.isArray(d))return!1;const M=d.length;if(M<2)return!1;const E=d[0];if(!(typeof E=="object"&&Number.isInteger(E.num)&&Number.isInteger(E.gen))&&!(Number.isInteger(E)&&E>=0))return!1;const y=d[1];if(!(typeof y=="object"&&typeof y.name=="string"))return!1;let D=!0;switch(y.name){case"XYZ":if(M!==5)return!1;break;case"Fit":case"FitB":return M===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(M!==3)return!1;break;case"FitR":if(M!==6)return!1;D=!1;break;default:return!1}for(let R=2;R<M;R++){const z=d[R];if(!(typeof z=="number"||D&&z===null))return!1}return!0},$(x,F);let _=x;c.PDFLinkService=_;class g{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(d){}get rotation(){return 0}set rotation(d){}get isInPresentationMode(){return!1}async goToDestination(d){}goToPage(d){}addLinkAttributes(d,M,E=!1){p(d,{url:M,enabled:this.externalLinkEnabled})}getDestinationHash(d){return"#"}getAnchorUrl(d){return"#"}setHash(d){}executeNamedAction(d){}executeSetOCGState(d){}cachePageRef(d,M){}}c.SimpleLinkService=g},(a,c,f)=>{var _,g,Un;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationLayerBuilder=void 0;var u=f(4),l=f(7),m=f(2);class p{constructor({pageDiv:L,pdfPage:F,linkService:w,downloadManager:x,annotationStorage:h=null,imageResourcesPath:d="",renderForms:M=!0,l10n:E=l.NullL10n,enableScripting:y=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:R=null,annotationCanvasMap:z=null,accessibilityManager:te=null}){$(this,g);$(this,_,null);this.pageDiv=L,this.pdfPage=F,this.linkService=w,this.downloadManager=x,this.imageResourcesPath=d,this.renderForms=M,this.l10n=E,this.annotationStorage=h,this.enableScripting=y,this._hasJSActionsPromise=D||Promise.resolve(!1),this._fieldObjectsPromise=R||Promise.resolve(null),this._annotationCanvasMap=z,this._accessibilityManager=te,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=w.eventBus}async render(L,F="display"){var M;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:L.clone({dontFlip:!0})});return}const[w,x,h]=await Promise.all([this.pdfPage.getAnnotations({intent:F}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const d=this.div=document.createElement("div");if(d.className="annotationLayer",this.pageDiv.append(d),w.length===0){this.hide();return}this.annotationLayer=new u.AnnotationLayer({div:d,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:L.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:w,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:x,fieldObjects:h}),this.linkService.isInPresentationMode&&G(this,g,Un).call(this,m.PresentationModeState.FULLSCREEN),o(this,_)||(ee(this,_,E=>{G(this,g,Un).call(this,E.state)}),(M=this._eventBus)==null||M._on("presentationmodechanged",o(this,_)))}cancel(){var L;this._cancelled=!0,o(this,_)&&((L=this._eventBus)==null||L._off("presentationmodechanged",o(this,_)),ee(this,_,null))}hide(){this.div&&(this.div.hidden=!0)}}_=new WeakMap,g=new WeakSet,Un=function(L){if(!this.div)return;let F=!1;switch(L){case m.PresentationModeState.FULLSCREEN:F=!0;break;case m.PresentationModeState.NORMAL:break;default:return}for(const w of this.div.childNodes)w.hasAttribute("data-internal-link")||(w.inert=F)},c.AnnotationLayerBuilder=p},(a,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NullL10n=void 0,c.getL10nFallback=u;const f={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};f.print_progress_percent="{{progress}}%";function u(p,_){switch(p){case"find_match_count":p=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":p=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return f[p]||""}function l(p,_){return _?p.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,P)=>P in _?_[P]:"{{"+P+"}}"):p}const m={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(p,_=null,g=u(p,_)){return l(g,_)},async translate(p){}};c.NullL10n=m},(a,c,f)=>{var p;Object.defineProperty(c,"__esModule",{value:!0}),c.DownloadManager=void 0;var u=f(4);function l(_,g){const P=document.createElement("a");if(!P.click)throw new Error('DownloadManager: "a.click()" is not supported.');P.href=_,P.target="_parent","download"in P&&(P.download=g),(document.body||document.documentElement).append(P),P.click(),P.remove()}class m{constructor(){$(this,p,new WeakMap)}downloadUrl(g,P,v){if(!(0,u.createValidAbsoluteUrl)(g,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${g}`);return}l(g+"#pdfjs.action=download",P)}downloadData(g,P,v){const L=URL.createObjectURL(new Blob([g],{type:v}));l(L,P)}openOrDownloadData(g,P,v){const F=(0,u.isPdfFile)(v)?"application/pdf":"";return this.downloadData(P,v,F),!1}download(g,P,v,L){const F=URL.createObjectURL(g);l(F,v)}}p=new WeakMap,c.DownloadManager=m},(a,c)=>{var p;Object.defineProperty(c,"__esModule",{value:!0}),c.WaitOnType=c.EventBus=c.AutomationEventBus=void 0,c.waitOnEventOrTimeout=u;const f={EVENT:"event",TIMEOUT:"timeout"};c.WaitOnType=f;function u({target:_,name:g,delay:P=0}){return new Promise(function(v,L){if(typeof _!="object"||!(g&&typeof g=="string")||!(Number.isInteger(P)&&P>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function F(d){_ instanceof l?_._off(g,w):_.removeEventListener(g,w),h&&clearTimeout(h),v(d)}const w=F.bind(null,f.EVENT);_ instanceof l?_._on(g,w):_.addEventListener(g,w);const x=F.bind(null,f.TIMEOUT),h=setTimeout(x,P)})}class l{constructor(){$(this,p,Object.create(null))}on(g,P,v=null){this._on(g,P,{external:!0,once:v==null?void 0:v.once})}off(g,P,v=null){this._off(g,P,{external:!0,once:v==null?void 0:v.once})}dispatch(g,P){const v=o(this,p)[g];if(!v||v.length===0)return;let L;for(const{listener:F,external:w,once:x}of v.slice(0)){if(x&&this._off(g,F),w){(L||(L=[])).push(F);continue}F(P)}if(L){for(const F of L)F(P);L=null}}_on(g,P,v=null){var F;((F=o(this,p))[g]||(F[g]=[])).push({listener:P,external:(v==null?void 0:v.external)===!0,once:(v==null?void 0:v.once)===!0})}_off(g,P,v=null){const L=o(this,p)[g];if(L){for(let F=0,w=L.length;F<w;F++)if(L[F].listener===P){L.splice(F,1);return}}}}p=new WeakMap,c.EventBus=l;class m extends l{dispatch(g,P){throw new Error("Not implemented: AutomationEventBus.dispatch")}}c.AutomationEventBus=m},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GenericL10n=void 0,f(11);var u=f(7);const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function m(_){return l[_==null?void 0:_.toLowerCase()]||_}class p{constructor(g){const{webL10n:P}=document;this._lang=g,this._ready=new Promise((v,L)=>{P.setLanguage(m(g),()=>{v(P)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(g,P=null,v=(0,u.getL10nFallback)(g,P)){return(await this._ready).get(g,P,v)}async translate(g){return(await this._ready).translate(g)}}c.GenericL10n=p},()=>{document.webL10n=function(a,c){var f={},u="",l="textContent",m="",p={},_="loading",g=!0;function P(){return c.querySelectorAll('link[type="application/l10n"]')}function v(){var O=c.querySelector('script[type="application/l10n"]');return O?JSON.parse(O.innerHTML):null}function L(O){return O?O.querySelectorAll("*[data-l10n-id]"):[]}function F(O){if(!O)return{};var X=O.getAttribute("data-l10n-id"),J=O.getAttribute("data-l10n-args"),q={};if(J)try{q=JSON.parse(J)}catch{console.warn("could not parse arguments for #"+X)}return{id:X,args:q}}function w(O,X,J){X=X||function(ce){},J=J||function(){};var q=new XMLHttpRequest;q.open("GET",O,g),q.overrideMimeType&&q.overrideMimeType("text/plain; charset=utf-8"),q.onreadystatechange=function(){q.readyState==4&&(q.status==200||q.status===0?X(q.responseText):J())},q.onerror=J,q.ontimeout=J;try{q.send(null)}catch{J()}}function x(O,X,J,q){var H=O.replace(/[^\/]*$/,"")||"./";function ce(Ee){return Ee.lastIndexOf("\\")<0?Ee:Ee.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function K(Ee,xe){var B={},b=/^\s*|\s*$/,T=/^\s*#|^\s*$/,C=/^\s*\[(.*)\]\s*$/,I=/^\s*@import\s+url\((.*)\)\s*$/i,N=/^([^=\s]*)\s*=\s*(.+)$/;function j(re,be,me){var Ce=re.replace(b,"").split(/[\r\n]+/),ae="*",we=X.split("-",1)[0],_e=!1,Le="";function Ie(){for(;;){if(!Ce.length){me();return}var Fe=Ce.shift();if(!T.test(Fe)){if(be){if(Le=C.exec(Fe),Le){ae=Le[1].toLowerCase(),_e=ae!=="*"&&ae!==X&&ae!==we;continue}else if(_e)continue;if(Le=I.exec(Fe),Le){Z(H+Le[1],Ie);return}}var fe=Fe.match(N);fe&&fe.length==3&&(B[fe[1]]=ce(fe[2]))}}}Ie()}function Z(re,be){w(re,function(me){j(me,!1,be)},function(){console.warn(re+" not found."),be()})}j(Ee,!0,function(){xe(B)})}w(O,function(Ee){u+=Ee,K(Ee,function(xe){for(var B in xe){var b,T,C=B.lastIndexOf(".");C>0?(b=B.substring(0,C),T=B.substring(C+1)):(b=B,T=l),f[b]||(f[b]={}),f[b][T]=xe[B]}J&&J()})},q)}function h(O,X){O&&(O=O.toLowerCase()),X=X||function(){},d(),m=O;var J=P(),q=J.length;if(q===0){var H=v();if(H&&H.locales&&H.default_locale){if(console.log("using the embedded JSON directory, early way out"),f=H.locales[O],!f){var ce=H.default_locale.toLowerCase();for(var K in H.locales)if(K=K.toLowerCase(),K===O){f=H.locales[O];break}else K===ce&&(f=H.locales[ce])}X()}else console.log("no resource to load, early way out");_="complete";return}var Ee=null,xe=0;Ee=function(){xe++,xe>=q&&(X(),_="complete")};function B(C){var I=C.href;this.load=function(N,j){x(I,N,j,function(){console.warn(I+" not found."),console.warn('"'+N+'" resource not found'),m="",j()})}}for(var b=0;b<q;b++){var T=new B(J[b]);T.load(O,Ee)}}function d(){f={},u="",m=""}function M(O){var X={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function J(K,Ee){return Ee.indexOf(K)!==-1}function q(K,Ee,xe){return Ee<=K&&K<=xe}var H={0:function(K){return"other"},1:function(K){return q(K%100,3,10)?"few":K===0?"zero":q(K%100,11,99)?"many":K==2?"two":K==1?"one":"other"},2:function(K){return K!==0&&K%10===0?"many":K==2?"two":K==1?"one":"other"},3:function(K){return K==1?"one":"other"},4:function(K){return q(K,0,1)?"one":"other"},5:function(K){return q(K,0,2)&&K!=2?"one":"other"},6:function(K){return K===0?"zero":K%10==1&&K%100!=11?"one":"other"},7:function(K){return K==2?"two":K==1?"one":"other"},8:function(K){return q(K,3,6)?"few":q(K,7,10)?"many":K==2?"two":K==1?"one":"other"},9:function(K){return K===0||K!=1&&q(K%100,1,19)?"few":K==1?"one":"other"},10:function(K){return q(K%10,2,9)&&!q(K%100,11,19)?"few":K%10==1&&!q(K%100,11,19)?"one":"other"},11:function(K){return q(K%10,2,4)&&!q(K%100,12,14)?"few":K%10===0||q(K%10,5,9)||q(K%100,11,14)?"many":K%10==1&&K%100!=11?"one":"other"},12:function(K){return q(K,2,4)?"few":K==1?"one":"other"},13:function(K){return q(K%10,2,4)&&!q(K%100,12,14)?"few":K!=1&&q(K%10,0,1)||q(K%10,5,9)||q(K%100,12,14)?"many":K==1?"one":"other"},14:function(K){return q(K%100,3,4)?"few":K%100==2?"two":K%100==1?"one":"other"},15:function(K){return K===0||q(K%100,2,10)?"few":q(K%100,11,19)?"many":K==1?"one":"other"},16:function(K){return K%10==1&&K!=11?"one":"other"},17:function(K){return K==3?"few":K===0?"zero":K==6?"many":K==2?"two":K==1?"one":"other"},18:function(K){return K===0?"zero":q(K,0,2)&&K!==0&&K!=2?"one":"other"},19:function(K){return q(K,2,10)?"few":q(K,0,1)?"one":"other"},20:function(K){return(q(K%10,3,4)||K%10==9)&&!(q(K%100,10,19)||q(K%100,70,79)||q(K%100,90,99))?"few":K%1e6===0&&K!==0?"many":K%10==2&&!J(K%100,[12,72,92])?"two":K%10==1&&!J(K%100,[11,71,91])?"one":"other"},21:function(K){return K===0?"zero":K==1?"one":"other"},22:function(K){return q(K,0,1)||q(K,11,99)?"one":"other"},23:function(K){return q(K%10,1,2)||K%20===0?"one":"other"},24:function(K){return q(K,3,10)||q(K,13,19)?"few":J(K,[2,12])?"two":J(K,[1,11])?"one":"other"}},ce=X[O.replace(/-.*$/,"")];return ce in H?H[ce]:(console.warn("plural form unknown for ["+O+"]"),function(){return"other"})}p.plural=function(O,X,J,q){var H=parseFloat(X);if(isNaN(H)||q!=l)return O;p._pluralRules||(p._pluralRules=M(m));var ce="["+p._pluralRules(H)+"]";return H===0&&J+"[zero]"in f?O=f[J+"[zero]"][q]:H==1&&J+"[one]"in f?O=f[J+"[one]"][q]:H==2&&J+"[two]"in f?O=f[J+"[two]"][q]:J+ce in f?O=f[J+ce][q]:J+"[other]"in f&&(O=f[J+"[other]"][q]),O};function E(O,X,J){var q=f[O];if(!q){if(console.warn("#"+O+" is undefined."),!J)return null;q=J}var H={};for(var ce in q){var K=q[ce];K=y(K,X,O,ce),K=D(K,X,O),H[ce]=K}return H}function y(O,X,J,q){var H=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ce=H.exec(O);if(!ce||!ce.length)return O;var K=ce[1],Ee=ce[2],xe;if(X&&Ee in X?xe=X[Ee]:Ee in f&&(xe=f[Ee]),K in p){var B=p[K];O=B(O,xe,J,q)}return O}function D(O,X,J){var q=/\{\{\s*(.+?)\s*\}\}/g;return O.replace(q,function(H,ce){return X&&ce in X?X[ce]:ce in f?f[ce]:(console.log("argument {{"+ce+"}} for #"+J+" is undefined."),H)})}function R(O){var X=F(O);if(X.id){var J=E(X.id,X.args);if(!J){console.warn("#"+X.id+" is undefined.");return}if(J[l]){if(z(O)===0)O[l]=J[l];else{for(var q=O.childNodes,H=!1,ce=0,K=q.length;ce<K;ce++)q[ce].nodeType===3&&/\S/.test(q[ce].nodeValue)&&(H?q[ce].nodeValue="":(q[ce].nodeValue=J[l],H=!0));if(!H){var Ee=c.createTextNode(J[l]);O.prepend(Ee)}}delete J[l]}for(var xe in J)O[xe]=J[xe]}}function z(O){if(O.children)return O.children.length;if(typeof O.childElementCount<"u")return O.childElementCount;for(var X=0,J=0;J<O.childNodes.length;J++)X+=O.nodeType===1?1:0;return X}function te(O){O=O||c.documentElement;for(var X=L(O),J=X.length,q=0;q<J;q++)R(X[q]);R(O)}return{get:function(O,X,J){var q=O.lastIndexOf("."),H=l;q>0&&(H=O.substring(q+1),O=O.substring(0,q));var ce;J&&(ce={},ce[H]=J);var K=E(O,X,ce);return K&&H in K?K[H]:"{{"+O+"}}"},getData:function(){return f},getText:function(){return u},getLanguage:function(){return m},setLanguage:function(O,X){h(O,function(){X&&X()})},getDirection:function(){var O=["ar","he","fa","ps","ur"],X=m.split("-",1)[0];return O.indexOf(X)>=0?"rtl":"ltr"},translate:te,getReadyState:function(){return _},ready:function(O){if(O)_=="complete"||_=="interactive"?a.setTimeout(function(){O()}):c.addEventListener&&c.addEventListener("localized",function X(){c.removeEventListener("localized",X),O()});else return}}}(window,document)},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFHistory=void 0,c.isDestArraysEqual=L,c.isDestHashesEqual=v;var u=f(2),l=f(9);const m=1e3,p=50,_=1e3;function g(){return document.location.hash}class P{constructor({linkService:w,eventBus:x}){this.linkService=w,this.eventBus=x,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",h=>{this._isPagesLoaded=!!h.pagesCount},{once:!0})})}initialize({fingerprint:w,resetHistory:x=!1,updateUrl:h=!1}){if(!w||typeof w!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const d=this._fingerprint!==""&&this._fingerprint!==w;this._fingerprint=w,this._updateUrl=h===!0,this._initialized=!0,this._bindEvents();const M=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=g(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(M,!0)||x){const{hash:y,page:D,rotation:R}=this._parseCurrentHash(!0);if(!y||d||x){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:y,page:D,rotation:R},!0);return}const E=M.destination;this._updateInternalState(E,M.uid,!0),E.rotation!==void 0&&(this._initialRotation=E.rotation),E.dest?(this._initialBookmark=JSON.stringify(E.dest),this._destination.page=null):E.hash?this._initialBookmark=E.hash:E.page&&(this._initialBookmark=`page=${E.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:w=null,explicitDest:x,pageNumber:h}){if(!this._initialized)return;if(w&&typeof w!="string"){console.error(`PDFHistory.push: "${w}" is not a valid namedDest parameter.`);return}else if(Array.isArray(x)){if(!this._isValidPage(h)&&(h!==null||this._destination)){console.error(`PDFHistory.push: "${h}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${x}" is not a valid explicitDest parameter.`);return}const d=w||JSON.stringify(x);if(!d)return;let M=!1;if(this._destination&&(v(this._destination.hash,d)||L(this._destination.dest,x))){if(this._destination.page)return;M=!0}this._popStateInProgress&&!M||(this._pushOrReplaceState({dest:x,hash:d,page:h,rotation:this.linkService.rotation},M),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(w){var x;if(this._initialized){if(!this._isValidPage(w)){console.error(`PDFHistory.pushPage: "${w}" is not a valid page number.`);return}((x=this._destination)==null?void 0:x.page)!==w&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${w}`,page:w,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const w=window.history.state;this._isValidState(w)&&w.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const w=window.history.state;this._isValidState(w)&&w.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(w,x=!1){const h=x||!this._destination,d={fingerprint:this._fingerprint,uid:h?this._uid:this._uid+1,destination:w};this._updateInternalState(w,d.uid);let M;if(this._updateUrl&&(w!=null&&w.hash)){const E=document.location.href.split("#")[0];E.startsWith("file://")||(M=`${E}#${w.hash}`)}h?window.history.replaceState(d,"",M):window.history.pushState(d,"",M)}_tryPushCurrentPosition(w=!1){if(!this._position)return;let x=this._position;if(w&&(x=Object.assign(Object.create(null),this._position),x.temporary=!0),!this._destination){this._pushOrReplaceState(x);return}if(this._destination.temporary){this._pushOrReplaceState(x,!0);return}if(this._destination.hash===x.hash||!this._destination.page&&this._numPositionUpdates<=p)return;let h=!1;if(this._destination.page>=x.first&&this._destination.page<=x.page){if(this._destination.dest!==void 0||!this._destination.first)return;h=!0}this._pushOrReplaceState(x,h)}_isValidPage(w){return Number.isInteger(w)&&w>0&&w<=this.linkService.pagesCount}_isValidState(w,x=!1){if(!w)return!1;if(w.fingerprint!==this._fingerprint)if(x){if(typeof w.fingerprint!="string"||w.fingerprint.length!==this._fingerprint.length)return!1;const[h]=performance.getEntriesByType("navigation");if((h==null?void 0:h.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(w.uid)||w.uid<0||w.destination===null||typeof w.destination!="object")}_updateInternalState(w,x,h=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),h&&(w!=null&&w.temporary)&&delete w.temporary,this._destination=w,this._uid=x,this._maxUid=Math.max(this._maxUid,x),this._numPositionUpdates=0}_parseCurrentHash(w=!1){const x=unescape(g()).substring(1),h=(0,u.parseQueryString)(x),d=h.get("nameddest")||"";let M=h.get("page")|0;return(!this._isValidPage(M)||w&&d.length>0)&&(M=null),{hash:x,page:M,rotation:this.linkService.rotation}}_updateViewarea({location:w}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:w.pdfOpenParams.substring(1),page:this.linkService.page,first:w.pageNumber,rotation:w.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},_))}_popState({state:w}){const x=g(),h=this._currentHash!==x;if(this._currentHash=x,!w){this._uid++;const{hash:M,page:E,rotation:y}=this._parseCurrentHash();this._pushOrReplaceState({hash:M,page:E,rotation:y},!0);return}if(!this._isValidState(w))return;this._popStateInProgress=!0,h&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:m}).then(()=>{this._blockHashChange--}));const d=w.destination;this._updateInternalState(d,w.uid,!0),(0,u.isValidRotation)(d.rotation)&&(this.linkService.rotation=d.rotation),d.dest?this.linkService.goToDestination(d.dest):d.hash?this.linkService.setHash(d.hash):d.page&&(this.linkService.page=d.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}c.PDFHistory=P;function v(F,w){return typeof F!="string"||typeof w!="string"?!1:F===w||(0,u.parseQueryString)(F).get("nameddest")===w}function L(F,w){function x(h,d){if(typeof h!=typeof d||Array.isArray(h)||Array.isArray(d))return!1;if(h!==null&&typeof h=="object"&&d!==null){if(Object.keys(h).length!==Object.keys(d).length)return!1;for(const M in h)if(!x(h[M],d[M]))return!1;return!0}return h===d||Number.isNaN(h)&&Number.isNaN(d)}if(!(Array.isArray(F)&&Array.isArray(w))||F.length!==w.length)return!1;for(let h=0,d=F.length;h<d;h++)if(!x(F[h],w[h]))return!1;return!0}},(a,c,f)=>{var E,y,D,R,z,te,O,X,J,q,H,Gt,K,Hn,xe,jn,b,Wn,C,zn,N,zi,Z,Gi,be,Gn;Object.defineProperty(c,"__esModule",{value:!0}),c.PDFPageView=void 0;var u=f(4),l=f(2),m=f(14),p=f(6),_=f(15),g=f(7),P=f(5),v=f(16),L=f(17),F=f(18),w=f(19),x=f(20);const h=_.compatibilityParams.maxCanvasPixels||16777216,d=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new P.SimpleLinkService}});class M{constructor(ae){$(this,H);$(this,K);$(this,xe);$(this,b);$(this,C);$(this,N);$(this,Z);$(this,be);$(this,E,u.AnnotationMode.ENABLE_FORMS);$(this,y,!1);$(this,D,null);$(this,R,null);$(this,z,null);$(this,te,null);$(this,O,l.RenderingStates.INITIAL);$(this,X,l.TextLayerMode.ENABLE);$(this,J,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});$(this,q,new WeakMap);var Ie;const we=ae.container,_e=ae.defaultViewport;this.id=ae.id,this.renderingId="page"+this.id,ee(this,D,ae.layerProperties||d),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=ae.scale||l.DEFAULT_SCALE,this.viewport=_e,this.pdfPageRotate=_e.rotation,this._optionalContentConfigPromise=ae.optionalContentConfigPromise||null,ee(this,X,ae.textLayerMode??l.TextLayerMode.ENABLE),ee(this,E,ae.annotationMode??u.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=ae.imageResourcesPath||"",this.isOffscreenCanvasSupported=ae.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=ae.maxCanvasPixels??h,this.pageColors=ae.pageColors||null,this.eventBus=ae.eventBus,this.renderingQueue=ae.renderingQueue,this.l10n=ae.l10n||g.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((Ie=this.renderingQueue)!=null&&Ie.hasViewer()),this._container=we,ae.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const Le=document.createElement("div");if(Le.className="page",Le.setAttribute("data-page-number",this.id),Le.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Fe=>{Le.setAttribute("aria-label",Fe)}),this.div=Le,G(this,H,Gt).call(this),we==null||we.append(Le),this._isStandalone){we==null||we.style.setProperty("--scale-factor",this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:Fe}=ae;Fe&&Fe.then(fe=>{Fe===this._optionalContentConfigPromise&&(o(this,J).initialOptionalContent=fe.hasInitialVisibility)})}}get renderingState(){return o(this,O)}set renderingState(ae){if(ae!==o(this,O))switch(ee(this,O,ae),o(this,R)&&(clearTimeout(o(this,R)),ee(this,R,null)),ae){case l.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case l.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),ee(this,R,setTimeout(()=>{this.div.classList.add("loading"),ee(this,R,null)},0));break;case l.RenderingStates.INITIAL:case l.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(ae){var _e,Le,Ie;this._isStandalone&&(((_e=this.pageColors)==null?void 0:_e.foreground)==="CanvasText"||((Le=this.pageColors)==null?void 0:Le.background)==="Canvas")&&((Ie=this._container)==null||Ie.style.setProperty("--hcm-highligh-filter",ae.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=ae,this.pdfPageRotate=ae.rotate;const we=(this.rotation+this.pdfPageRotate)%360;this.viewport=ae.getViewport({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:we}),G(this,H,Gt).call(this),this.reset()}destroy(){var ae;this.reset(),(ae=this.pdfPage)==null||ae.cleanup()}get _textHighlighter(){return(0,u.shadow)(this,"_textHighlighter",new F.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:o(this,D).call(this).findController}))}_resetZoomLayer(ae=!1){if(!this.zoomLayer)return;const we=this.zoomLayer.firstChild;o(this,q).delete(we),we.width=0,we.height=0,ae&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:ae=!1,keepAnnotationLayer:we=!1,keepAnnotationEditorLayer:_e=!1,keepXfaLayer:Le=!1,keepTextLayer:Ie=!1}={}){var Re,Be,He,qe,Ge;this.cancelRendering({keepAnnotationLayer:we,keepAnnotationEditorLayer:_e,keepXfaLayer:Le,keepTextLayer:Ie}),this.renderingState=l.RenderingStates.INITIAL;const Fe=this.div,fe=Fe.childNodes,ue=ae&&this.zoomLayer||null,ie=we&&((Re=this.annotationLayer)==null?void 0:Re.div)||null,ne=_e&&((Be=this.annotationEditorLayer)==null?void 0:Be.div)||null,ve=Le&&((He=this.xfaLayer)==null?void 0:He.div)||null,Me=Ie&&((qe=this.textLayer)==null?void 0:qe.div)||null;for(let Qe=fe.length-1;Qe>=0;Qe--){const Ke=fe[Qe];switch(Ke){case ue:case ie:case ne:case ve:case Me:continue}Ke.remove()}Fe.removeAttribute("data-loaded"),ie&&this.annotationLayer.hide(),ne&&this.annotationEditorLayer.hide(),ve&&this.xfaLayer.hide(),Me&&this.textLayer.hide(),(Ge=this.structTreeLayer)==null||Ge.hide(),ue||(this.canvas&&(o(this,q).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:ae=0,rotation:we=null,optionalContentConfigPromise:_e=null,drawingDelay:Le=-1}){var Fe;this.scale=ae||this.scale,typeof we=="number"&&(this.rotation=we),_e instanceof Promise&&(this._optionalContentConfigPromise=_e,_e.then(fe=>{_e===this._optionalContentConfigPromise&&(o(this,J).initialOptionalContent=fe.hasInitialVisibility)})),o(this,J).directDrawing=!0;const Ie=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Ie}),G(this,H,Gt).call(this),this._isStandalone&&((Fe=this._container)==null||Fe.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let fe=!1;if(o(this,y)){if(this.maxCanvasPixels===0)fe=!0;else if(this.maxCanvasPixels>0){const{width:ie,height:ne}=this.viewport,{sx:ve,sy:Me}=this.outputScale;fe=(Math.floor(ie)*ve|0)*(Math.floor(ne)*Me|0)>this.maxCanvasPixels}}const ue=!fe&&Le>=0&&Le<1e3;if(ue||fe){if(ue&&this.renderingState!==l.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:Le}),this.renderingState=l.RenderingStates.FINISHED,o(this,J).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!ue,hideTextLayer:ue}),ue)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:o(this,te)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:ae=!1,keepAnnotationEditorLayer:we=!1,keepXfaLayer:_e=!1,keepTextLayer:Le=!1,cancelExtraDelay:Ie=0}={}){var Fe;this.renderTask&&(this.renderTask.cancel(Ie),this.renderTask=null),this.resume=null,this.textLayer&&(!Le||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!ae||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!we||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!_e||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(Fe=this._textHighlighter)==null||Fe.disable())}cssTransform({target:ae,redrawAnnotationLayer:we=!1,redrawAnnotationEditorLayer:_e=!1,redrawXfaLayer:Le=!1,redrawTextLayer:Ie=!1,hideTextLayer:Fe=!1}){var ue;if(!ae.hasAttribute("zooming")){ae.setAttribute("zooming",!0);const{style:ie}=ae;ie.width=ie.height=""}const fe=o(this,q).get(ae);if(this.viewport!==fe){const ie=this.viewport.rotation-fe.rotation,ne=Math.abs(ie);let ve=1,Me=1;if(ne===90||ne===270){const{width:Re,height:Be}=this.viewport;ve=Be/Re,Me=Re/Be}ae.style.transform=`rotate(${ie}deg) scale(${ve}, ${Me})`}we&&this.annotationLayer&&G(this,K,Hn).call(this),_e&&this.annotationEditorLayer&&G(this,xe,jn).call(this),Le&&this.xfaLayer&&G(this,b,Wn).call(this),this.textLayer&&(Fe?(this.textLayer.hide(),(ue=this.structTreeLayer)==null||ue.hide()):Ie&&G(this,C,zn).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(ae,we){return this.viewport.convertToPdfPoint(ae,we)}async draw(){this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:ae,l10n:we,pageColors:_e,pdfPage:Le,viewport:Ie}=this;if(!Le)throw this.renderingState=l.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=l.RenderingStates.RUNNING;const Fe=document.createElement("div");if(Fe.classList.add("canvasWrapper"),ae.append(Fe),!this.textLayer&&o(this,X)!==l.TextLayerMode.DISABLE&&!Le.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new L.TextAccessibilityManager),this.textLayer=new w.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:o(this,X)===l.TextLayerMode.ENABLE_PERMISSIONS}),ae.append(this.textLayer.div)),!this.annotationLayer&&o(this,E)!==u.AnnotationMode.DISABLE){const{annotationStorage:k,downloadManager:V,enableScripting:he,fieldObjectsPromise:le,hasJSActionsPromise:ge,linkService:ye}=o(this,D).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new p.AnnotationLayerBuilder({pageDiv:ae,pdfPage:Le,annotationStorage:k,imageResourcesPath:this.imageResourcesPath,renderForms:o(this,E)===u.AnnotationMode.ENABLE_FORMS,linkService:ye,downloadManager:V,l10n:we,enableScripting:he,hasJSActionsPromise:ge,fieldObjectsPromise:le,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const fe=k=>{if(Me==null||Me(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=l.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,k()};return}k()},{width:ue,height:ie}=Ie,ne=document.createElement("canvas");ne.setAttribute("role","presentation"),ne.hidden=!0;const ve=!!(_e!=null&&_e.background&&(_e!=null&&_e.foreground));let Me=k=>{(!ve||k)&&(ne.hidden=!1,Me=null)};Fe.append(ne),this.canvas=ne;const Re=ne.getContext("2d",{alpha:!1}),Be=this.outputScale=new l.OutputScale;if(this.maxCanvasPixels===0){const k=1/this.scale;Be.sx*=k,Be.sy*=k,ee(this,y,!0)}else if(this.maxCanvasPixels>0){const k=ue*ie,V=Math.sqrt(this.maxCanvasPixels/k);Be.sx>V||Be.sy>V?(Be.sx=V,Be.sy=V,ee(this,y,!0)):ee(this,y,!1)}const He=(0,l.approximateFraction)(Be.sx),qe=(0,l.approximateFraction)(Be.sy);ne.width=(0,l.roundToDivide)(ue*Be.sx,He[0]),ne.height=(0,l.roundToDivide)(ie*Be.sy,qe[0]);const{style:Ge}=ne;Ge.width=(0,l.roundToDivide)(ue,He[1])+"px",Ge.height=(0,l.roundToDivide)(ie,qe[1])+"px",o(this,q).set(ne,Ie);const Qe=Be.scaled?[Be.sx,0,0,Be.sy,0,0]:null,Ke={canvasContext:Re,transform:Qe,viewport:Ie,annotationMode:o(this,E),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:_e},et=this.renderTask=this.pdfPage.render(Ke);et.onContinue=fe;const Pe=et.promise.then(async()=>{var k;if(Me==null||Me(!0),await G(this,be,Gn).call(this,et),G(this,C,zn).call(this),this.annotationLayer&&await G(this,K,Hn).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:V}=o(this,D).call(this);if(!V)return;this.annotationEditorLayer=new m.AnnotationEditorLayerBuilder({uiManager:V,pageDiv:ae,pdfPage:Le,l10n:we,accessibilityManager:this._accessibilityManager,annotationLayer:(k=this.annotationLayer)==null?void 0:k.annotationLayer})}G(this,xe,jn).call(this)},k=>(k instanceof u.RenderingCancelledException||Me==null||Me(!0),G(this,be,Gn).call(this,et,k)));if(Le.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&ae.append(this.xfaLayer.div);else{const{annotationStorage:k,linkService:V}=o(this,D).call(this);this.xfaLayer=new x.XfaLayerBuilder({pageDiv:ae,pdfPage:Le,annotationStorage:k,linkService:V})}G(this,b,Wn).call(this)}return ae.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Pe}setPageLabel(ae){this.pageLabel=typeof ae=="string"?ae:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:ae,initialOptionalContent:we,regularAnnotations:_e}=o(this,J);return ae&&we&&_e?this.canvas:null}}E=new WeakMap,y=new WeakMap,D=new WeakMap,R=new WeakMap,z=new WeakMap,te=new WeakMap,O=new WeakMap,X=new WeakMap,J=new WeakMap,q=new WeakMap,H=new WeakSet,Gt=function(){const{viewport:ae}=this;if(this.pdfPage){if(o(this,z)===ae.rotation)return;ee(this,z,ae.rotation)}(0,u.setLayerDimensions)(this.div,ae,!0,!1)},K=new WeakSet,Hn=async function(){let ae=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(we){console.error(`#renderAnnotationLayer: "${we}".`),ae=we}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:ae})}},xe=new WeakSet,jn=async function(){let ae=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(we){console.error(`#renderAnnotationEditorLayer: "${we}".`),ae=we}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:ae})}},b=new WeakSet,Wn=async function(){let ae=null;try{const we=await this.xfaLayer.render(this.viewport,"display");we!=null&&we.textDivs&&this._textHighlighter&&G(this,Z,Gi).call(this,we.textDivs)}catch(we){console.error(`#renderXfaLayer: "${we}".`),ae=we}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:ae})}},C=new WeakSet,zn=async function(){const{pdfPage:ae,textLayer:we,viewport:_e}=this;if(!we)return;let Le=null;try{if(!we.renderingDone){const Ie=ae.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});we.setTextContentSource(Ie)}await we.render(_e)}catch(Ie){if(Ie instanceof u.AbortException)return;console.error(`#renderTextLayer: "${Ie}".`),Le=Ie}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:we.numTextDivs,error:Le}),G(this,N,zi).call(this)},N=new WeakSet,zi=async function(){var _e,Le,Ie;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new v.StructTreeLayerBuilder);const ae=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),we=(_e=this.structTreeLayer)==null?void 0:_e.render(ae);we&&((Le=this.canvas)==null||Le.append(we)),(Ie=this.structTreeLayer)==null||Ie.show()},Z=new WeakSet,Gi=async function(ae){const we=await this.pdfPage.getTextContent(),_e=[];for(const Le of we.items)_e.push(Le.str);this._textHighlighter.setTextMapping(ae,_e),this._textHighlighter.enable()},be=new WeakSet,Gn=async function(ae,we=null){if(ae===this.renderTask&&(this.renderTask=null),we instanceof u.RenderingCancelledException){ee(this,te,null);return}if(ee(this,te,we),this.renderingState=l.RenderingStates.FINISHED,this._resetZoomLayer(!0),o(this,J).regularAnnotations=!ae.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:o(this,te)}),we)throw we},c.PDFPageView=M},(a,c,f)=>{var p,_;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationEditorLayerBuilder=void 0;var u=f(4),l=f(7);class m{constructor(P){$(this,p,null);$(this,_,void 0);this.pageDiv=P.pageDiv,this.pdfPage=P.pdfPage,this.accessibilityManager=P.accessibilityManager,this.l10n=P.l10n||l.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,ee(this,_,P.uiManager),ee(this,p,P.annotationLayer||null)}async render(P,v="display"){if(v!=="display"||this._cancelled)return;const L=P.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:L}),this.show();return}const F=this.div=document.createElement("div");F.className="annotationEditorLayer",F.tabIndex=0,F.hidden=!0,F.dir=o(this,_).direction,this.pageDiv.append(F),this.annotationEditorLayer=new u.AnnotationEditorLayer({uiManager:o(this,_),div:F,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:L,annotationLayer:o(this,p)});const w={viewport:L,div:F,annotations:null,intent:v};this.annotationEditorLayer.render(w),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}p=new WeakMap,_=new WeakMap,c.AnnotationEditorLayerBuilder=m},(a,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.compatibilityParams=c.OptionKind=c.AppOptions=void 0;const f=Object.create(null);c.compatibilityParams=f;{const _=navigator.userAgent||"",g=navigator.platform||"",P=navigator.maxTouchPoints||1,v=/Android/.test(_),L=/\b(iPad|iPhone|iPod)(?=;)/.test(_)||g==="MacIntel"&&P>1;(function(){(L||v)&&(f.maxCanvasPixels=5242880)})()}const u={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};c.OptionKind=u;const l={annotationEditorMode:{value:0,kind:u.VIEWER+u.PREFERENCE},annotationMode:{value:2,kind:u.VIEWER+u.PREFERENCE},cursorToolOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},defaultZoomDelay:{value:400,kind:u.VIEWER+u.PREFERENCE},defaultZoomValue:{value:"",kind:u.VIEWER+u.PREFERENCE},disableHistory:{value:!1,kind:u.VIEWER},disablePageLabels:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePermissions:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableScripting:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableStampEditor:{value:!0,kind:u.VIEWER+u.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:u.VIEWER},externalLinkTarget:{value:0,kind:u.VIEWER+u.PREFERENCE},historyUpdateUrl:{value:!1,kind:u.VIEWER+u.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},imageResourcesPath:{value:"./images/",kind:u.VIEWER},maxCanvasPixels:{value:16777216,kind:u.VIEWER},forcePageColors:{value:!1,kind:u.VIEWER+u.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:u.VIEWER+u.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:u.VIEWER+u.PREFERENCE},pdfBugEnabled:{value:!1,kind:u.VIEWER+u.PREFERENCE},printResolution:{value:150,kind:u.VIEWER},sidebarViewOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},scrollModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},spreadModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},textLayerMode:{value:1,kind:u.VIEWER+u.PREFERENCE},viewerCssTheme:{value:0,kind:u.VIEWER+u.PREFERENCE},viewOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},cMapPacked:{value:!0,kind:u.API},cMapUrl:{value:"../web/cmaps/",kind:u.API},disableAutoFetch:{value:!1,kind:u.API+u.PREFERENCE},disableFontFace:{value:!1,kind:u.API+u.PREFERENCE},disableRange:{value:!1,kind:u.API+u.PREFERENCE},disableStream:{value:!1,kind:u.API+u.PREFERENCE},docBaseUrl:{value:"",kind:u.API},enableXfa:{value:!0,kind:u.API+u.PREFERENCE},fontExtraProperties:{value:!1,kind:u.API},isEvalSupported:{value:!0,kind:u.API},isOffscreenCanvasSupported:{value:!0,kind:u.API},maxImageSize:{value:-1,kind:u.API},pdfBug:{value:!1,kind:u.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:u.API},verbosity:{value:1,kind:u.API},workerPort:{value:null,kind:u.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:u.WORKER}};l.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:u.VIEWER},l.disablePreferences={value:!1,kind:u.VIEWER},l.locale={value:navigator.language||"en-US",kind:u.VIEWER},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:u.VIEWER};const m=Object.create(null);class p{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(g){const P=m[g];if(P!==void 0)return P;const v=l[g];if(v!==void 0)return f[g]??v.value}static getAll(g=null){const P=Object.create(null);for(const v in l){const L=l[v];if(g){if(!(g&L.kind))continue;if(g===u.PREFERENCE){const w=L.value,x=typeof w;if(x==="boolean"||x==="string"||x==="number"&&Number.isInteger(w)){P[v]=w;continue}throw new Error(`Invalid type for preference: ${v}`)}}const F=m[v];P[v]=F!==void 0?F:f[v]??L.value}return P}static set(g,P){m[g]=P}static setAll(g){for(const P in g)m[P]=g[P]}static remove(g){delete m[g]}}c.AppOptions=p,p._hasUserOptions=function(){return Object.keys(m).length>0}},(a,c,f)=>{var _,g,Xn,v,qn;Object.defineProperty(c,"__esModule",{value:!0}),c.StructTreeLayerBuilder=void 0;var u=f(2);const l={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},m=/^H(\d+)$/;class p{constructor(){$(this,g);$(this,v);$(this,_,void 0)}get renderingDone(){return o(this,_)!==void 0}render(w){if(o(this,_)!==void 0)return o(this,_);const x=G(this,v,qn).call(this,w);return x==null||x.classList.add("structTree"),ee(this,_,x)}hide(){o(this,_)&&!o(this,_).hidden&&(o(this,_).hidden=!0)}show(){var w;(w=o(this,_))!=null&&w.hidden&&(o(this,_).hidden=!1)}}_=new WeakMap,g=new WeakSet,Xn=function(w,x){const{alt:h,id:d,lang:M}=w;h!==void 0&&x.setAttribute("aria-label",(0,u.removeNullCharacters)(h)),d!==void 0&&x.setAttribute("aria-owns",d),M!==void 0&&x.setAttribute("lang",(0,u.removeNullCharacters)(M,!0))},v=new WeakSet,qn=function(w){if(!w)return null;const x=document.createElement("span");if("role"in w){const{role:h}=w,d=h.match(m);d?(x.setAttribute("role","heading"),x.setAttribute("aria-level",d[1])):l[h]&&x.setAttribute("role",l[h])}if(G(this,g,Xn).call(this,w,x),w.children)if(w.children.length===1&&"id"in w.children[0])G(this,g,Xn).call(this,w.children[0],x);else for(const h of w.children)x.append(G(this,v,qn).call(this,h));return x},c.StructTreeLayerBuilder=p},(a,c,f)=>{var m,p,_,g,P,Xt,L,Kn;Object.defineProperty(c,"__esModule",{value:!0}),c.TextAccessibilityManager=void 0;var u=f(2);const w=class w{constructor(){$(this,L);$(this,m,!1);$(this,p,null);$(this,_,new Map);$(this,g,new Map)}setTextMapping(h){ee(this,p,h)}enable(){if(o(this,m))throw new Error("TextAccessibilityManager is already enabled.");if(!o(this,p))throw new Error("Text divs and strings have not been set.");if(ee(this,m,!0),ee(this,p,o(this,p).slice()),o(this,p).sort(G(w,P,Xt)),o(this,_).size>0){const h=o(this,p);for(const[d,M]of o(this,_)){if(!document.getElementById(d)){o(this,_).delete(d);continue}G(this,L,Kn).call(this,d,h[M])}}for(const[h,d]of o(this,g))this.addPointerInTextLayer(h,d);o(this,g).clear()}disable(){o(this,m)&&(o(this,g).clear(),ee(this,p,null),ee(this,m,!1))}removePointerInTextLayer(h){if(!o(this,m)){o(this,g).delete(h);return}const d=o(this,p);if(!d||d.length===0)return;const{id:M}=h,E=o(this,_).get(M);if(E===void 0)return;const y=d[E];o(this,_).delete(M);let D=y.getAttribute("aria-owns");D!=null&&D.includes(M)&&(D=D.split(" ").filter(R=>R!==M).join(" "),D?y.setAttribute("aria-owns",D):(y.removeAttribute("aria-owns"),y.setAttribute("role","presentation")))}addPointerInTextLayer(h,d){const{id:M}=h;if(!M)return null;if(!o(this,m))return o(this,g).set(h,d),null;d&&this.removePointerInTextLayer(h);const E=o(this,p);if(!E||E.length===0)return null;const y=(0,u.binarySearchFirstItem)(E,te=>{var O;return G(O=w,P,Xt).call(O,h,te)<0}),D=Math.max(0,y-1),R=E[D];G(this,L,Kn).call(this,M,R),o(this,_).set(M,D);const z=R.parentNode;return z!=null&&z.classList.contains("markedContent")?z.id:null}moveElementInDOM(h,d,M,E){const y=this.addPointerInTextLayer(M,E);if(!h.hasChildNodes())return h.append(d),y;const D=Array.from(h.childNodes).filter(te=>te!==d);if(D.length===0)return y;const R=M||d,z=(0,u.binarySearchFirstItem)(D,te=>{var O;return G(O=w,P,Xt).call(O,R,te)<0});return z===0?D[0].before(d):D[z-1].after(d),y}};m=new WeakMap,p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakSet,Xt=function(h,d){const M=h.getBoundingClientRect(),E=d.getBoundingClientRect();if(M.width===0&&M.height===0)return 1;if(E.width===0&&E.height===0)return-1;const y=M.y,D=M.y+M.height,R=M.y+M.height/2,z=E.y,te=E.y+E.height,O=E.y+E.height/2;if(R<=z&&O>=D)return-1;if(O<=y&&R>=te)return 1;const X=M.x+M.width/2,J=E.x+E.width/2;return X-J},L=new WeakSet,Kn=function(h,d){const M=d.getAttribute("aria-owns");M!=null&&M.includes(h)||d.setAttribute("aria-owns",M?`${M} ${h}`:h),d.removeAttribute("role")},$(w,P);let l=w;c.TextAccessibilityManager=l},(a,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TextHighlighter=void 0;class f{constructor({findController:l,eventBus:m,pageIndex:p}){this.findController=l,this.matches=[],this.eventBus=m,this.pageIdx=p,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,m){this.textDivs=l,this.textContentItemsStr=m}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||l.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(l,m){if(!l)return[];const{textContentItemsStr:p}=this;let _=0,g=0;const P=p.length-1,v=[];for(let L=0,F=l.length;L<F;L++){let w=l[L];for(;_!==P&&w>=g+p[_].length;)g+=p[_].length,_++;_===p.length&&console.error("Could not find a matching mapping");const x={begin:{divIdx:_,offset:w-g}};for(w+=m[L];_!==P&&w>g+p[_].length;)g+=p[_].length,_++;x.end={divIdx:_,offset:w-g},v.push(x)}return v}_renderMatches(l){if(l.length===0)return;const{findController:m,pageIdx:p}=this,{textContentItemsStr:_,textDivs:g}=this,P=p===m.selected.pageIdx,v=m.selected.matchIdx,L=m.state.highlightAll;let F=null;const w={divIdx:-1,offset:void 0};function x(D,R){const z=D.divIdx;return g[z].textContent="",h(z,0,D.offset,R)}function h(D,R,z,te){let O=g[D];if(O.nodeType===Node.TEXT_NODE){const q=document.createElement("span");O.before(q),q.append(O),g[D]=q,O=q}const X=_[D].substring(R,z),J=document.createTextNode(X);if(te){const q=document.createElement("span");return q.className=`${te} appended`,q.append(J),O.append(q),te.includes("selected")?q.offsetLeft:0}return O.append(J),0}let d=v,M=d+1;if(L)d=0,M=l.length;else if(!P)return;let E=-1,y=-1;for(let D=d;D<M;D++){const R=l[D],z=R.begin;if(z.divIdx===E&&z.offset===y)continue;E=z.divIdx,y=z.offset;const te=R.end,O=P&&D===v,X=O?" selected":"";let J=0;if(!F||z.divIdx!==F.divIdx?(F!==null&&h(F.divIdx,F.offset,w.offset),x(z)):h(F.divIdx,F.offset,z.offset),z.divIdx===te.divIdx)J=h(z.divIdx,z.offset,te.offset,"highlight"+X);else{J=h(z.divIdx,z.offset,w.offset,"highlight begin"+X);for(let q=z.divIdx+1,H=te.divIdx;q<H;q++)g[q].className="highlight middle"+X;x(te,"highlight end"+X)}F=te,O&&m.scrollMatchIntoView({element:g[z.divIdx],selectedLeft:J,pageIndex:p,matchIndex:v})}F&&h(F.divIdx,F.offset,w.offset)}_updateMatches(l=!1){if(!this.enabled&&!l)return;const{findController:m,matches:p,pageIdx:_}=this,{textContentItemsStr:g,textDivs:P}=this;let v=-1;for(const w of p){const x=Math.max(v,w.begin.divIdx);for(let h=x,d=w.end.divIdx;h<=d;h++){const M=P[h];M.textContent=g[h],M.className=""}v=w.end.divIdx+1}if(!(m!=null&&m.highlightMatches)||l)return;const L=m.pageMatches[_]||null,F=m.pageMatchesLength[_]||null;this.matches=this._convertMatches(L,F),this._renderMatches(this.matches)}}c.TextHighlighter=f},(a,c,f)=>{var p,_,g,P,v,Xi,F,qi;Object.defineProperty(c,"__esModule",{value:!0}),c.TextLayerBuilder=void 0;var u=f(4),l=f(2);class m{constructor({highlighter:h=null,accessibilityManager:d=null,isOffscreenCanvasSupported:M=!0,enablePermissions:E=!1}){$(this,v);$(this,F);$(this,p,!1);$(this,_,0);$(this,g,0);$(this,P,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=h,this.accessibilityManager=d,this.isOffscreenCanvasSupported=M,ee(this,p,E===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(h){var E,y,D;if(!o(this,P))throw new Error('No "textContentSource" parameter specified.');const d=h.scale*(globalThis.devicePixelRatio||1),{rotation:M}=h;if(this.renderingDone){const R=M!==o(this,_),z=d!==o(this,g);(R||z)&&(this.hide(),(0,u.updateTextLayer)({container:this.div,viewport:h,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:z,mustRotate:R}),ee(this,g,d),ee(this,_,M)),this.show();return}this.cancel(),(E=this.highlighter)==null||E.setTextMapping(this.textDivs,this.textContentItemsStr),(y=this.accessibilityManager)==null||y.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,u.renderTextLayer)({textContentSource:o(this,P),container:this.div,viewport:h,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,G(this,v,Xi).call(this),ee(this,g,d),ee(this,_,M),this.show(),(D=this.accessibilityManager)==null||D.enable()}hide(){var h;this.div.hidden||((h=this.highlighter)==null||h.disable(),this.div.hidden=!0)}show(){var h;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(h=this.highlighter)==null||h.enable())}cancel(){var h,d;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(h=this.highlighter)==null||h.disable(),(d=this.accessibilityManager)==null||d.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(h){this.cancel(),ee(this,P,h)}}p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakSet,Xi=function(){this.renderingDone=!0;const h=document.createElement("div");h.className="endOfContent",this.div.append(h),G(this,F,qi).call(this)},F=new WeakSet,qi=function(){const{div:h}=this;h.addEventListener("mousedown",d=>{const M=h.querySelector(".endOfContent");if(!M)return;let E=d.target!==h;if(E&&(E=getComputedStyle(M).getPropertyValue("-moz-user-select")!=="none"),E){const y=h.getBoundingClientRect(),D=Math.max(0,(d.pageY-y.top)/y.height);M.style.top=(D*100).toFixed(2)+"%"}M.classList.add("active")}),h.addEventListener("mouseup",()=>{const d=h.querySelector(".endOfContent");d&&(d.style.top="",d.classList.remove("active"))}),h.addEventListener("copy",d=>{if(!o(this,p)){const M=document.getSelection();d.clipboardData.setData("text/plain",(0,l.removeNullCharacters)((0,u.normalizeUnicode)(M.toString())))}d.preventDefault(),d.stopPropagation()})},c.TextLayerBuilder=m},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.XfaLayerBuilder=void 0;var u=f(4);class l{constructor({pageDiv:p,pdfPage:_,annotationStorage:g=null,linkService:P,xfaHtml:v=null}){this.pageDiv=p,this.pdfPage=_,this.annotationStorage=g,this.linkService=P,this.xfaHtml=v,this.div=null,this._cancelled=!1}async render(p,_="display"){if(_==="print"){const v={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_},L=document.createElement("div");return this.pageDiv.append(L),v.div=L,u.XfaLayer.render(v)}const g=await this.pdfPage.getXfa();if(this._cancelled||!g)return{textDivs:[]};const P={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:g,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:_};return this.div?u.XfaLayer.update(P):(this.div=document.createElement("div"),this.pageDiv.append(this.div),P.div=this.div,u.XfaLayer.render(P))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}c.XfaLayerBuilder=l},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFScriptingManager=void 0;var u=f(22),l=f(23);class m extends l.PDFScriptingManager{constructor(_){_.externalServices||window.addEventListener("updatefromsandbox",g=>{_.eventBus.dispatch("updatefromsandbox",{source:window,detail:g.detail})}),_.externalServices||(_.externalServices={createScripting:({sandboxBundleSrc:g})=>new u.GenericScripting(g)}),_.docProperties||(_.docProperties=g=>(0,u.docProperties)(g)),super(_)}}c.PDFScriptingManager=m},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GenericScripting=void 0,c.docProperties=l;var u=f(4);async function l(p){const _="",g=_.split("#")[0];let{info:P,metadata:v,contentDispositionFilename:L,contentLength:F}=await p.getMetadata();if(!F){const{length:w}=await p.getDownloadInfo();F=w}return{...P,baseURL:g,filesize:F,filename:L||(0,u.getPdfFilenameFromUrl)(_),metadata:v==null?void 0:v.getRaw(),authors:v==null?void 0:v.get("dc:creator"),numPages:p.numPages,URL:_}}class m{constructor(_){this._ready=(0,u.loadScript)(_,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(_){(await this._ready).create(_)}async dispatchEventInSandbox(_){const g=await this._ready;setTimeout(()=>g.dispatchEvent(_),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}c.GenericScripting=m},(a,c,f)=>{var p,_,g,P,v,L,F,w,x,h,d,M,Ki,y,qt,R,Yn,te,Yi,X,Tt;Object.defineProperty(c,"__esModule",{value:!0}),c.PDFScriptingManager=void 0;var u=f(2),l=f(4);class m{constructor({eventBus:H,sandboxBundleSrc:ce=null,externalServices:K=null,docProperties:Ee=null}){$(this,M);$(this,y);$(this,R);$(this,te);$(this,X);$(this,p,null);$(this,_,null);$(this,g,null);$(this,P,null);$(this,v,null);$(this,L,null);$(this,F,null);$(this,w,!1);$(this,x,null);$(this,h,null);$(this,d,null);ee(this,P,H),ee(this,x,ce),ee(this,v,K),ee(this,g,Ee)}setViewer(H){ee(this,F,H)}async setDocument(H){var xe;if(o(this,L)&&await G(this,X,Tt).call(this),ee(this,L,H),!H)return;const[ce,K,Ee]=await Promise.all([H.getFieldObjects(),H.getCalculationOrderIds(),H.getJSActions()]);if(!ce&&!Ee){await G(this,X,Tt).call(this);return}if(H===o(this,L)){try{ee(this,h,G(this,te,Yi).call(this))}catch(B){console.error(`setDocument: "${B.message}".`),await G(this,X,Tt).call(this);return}this._internalEvents.set("updatefromsandbox",B=>{(B==null?void 0:B.source)===window&&G(this,M,Ki).call(this,B.detail)}),this._internalEvents.set("dispatcheventinsandbox",B=>{var b;(b=o(this,h))==null||b.dispatchEventInSandbox(B.detail)}),this._internalEvents.set("pagechanging",({pageNumber:B,previous:b})=>{B!==b&&(G(this,R,Yn).call(this,b),G(this,y,qt).call(this,B))}),this._internalEvents.set("pagerendered",({pageNumber:B})=>{this._pageOpenPending.has(B)&&B===o(this,F).currentPageNumber&&G(this,y,qt).call(this,B)}),this._internalEvents.set("pagesdestroy",async()=>{var B,b;await G(this,R,Yn).call(this,o(this,F).currentPageNumber),await((B=o(this,h))==null?void 0:B.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(b=o(this,p))==null||b.resolve()});for(const[B,b]of this._internalEvents)o(this,P)._on(B,b);try{const B=await o(this,g).call(this,H);if(H!==o(this,L))return;await o(this,h).createSandbox({objects:ce,calculationOrder:K,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...B,actions:Ee}}),o(this,P).dispatch("sandboxcreated",{source:this})}catch(B){console.error(`setDocument: "${B.message}".`),await G(this,X,Tt).call(this);return}await((xe=o(this,h))==null?void 0:xe.dispatchEventInSandbox({id:"doc",name:"Open"})),await G(this,y,qt).call(this,o(this,F).currentPageNumber,!0),Promise.resolve().then(()=>{H===o(this,L)&&ee(this,w,!0)})}}async dispatchWillSave(){var H;return(H=o(this,h))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var H;return(H=o(this,h))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var H;if(o(this,h)){await((H=o(this,d))==null?void 0:H.promise),ee(this,d,new l.PromiseCapability);try{await o(this,h).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(ce){throw o(this,d).resolve(),ee(this,d,null),ce}await o(this,d).promise}}async dispatchDidPrint(){var H;return(H=o(this,h))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var H;return((H=o(this,_))==null?void 0:H.promise)||null}get ready(){return o(this,w)}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}}p=new WeakMap,_=new WeakMap,g=new WeakMap,P=new WeakMap,v=new WeakMap,L=new WeakMap,F=new WeakMap,w=new WeakMap,x=new WeakMap,h=new WeakMap,d=new WeakMap,M=new WeakSet,Ki=async function(H){var C,I;const ce=o(this,F),K=ce.isInPresentationMode||ce.isChangingPresentationMode,{id:Ee,siblings:xe,command:B,value:b}=H;if(!Ee){switch(B){case"clear":console.clear();break;case"error":console.error(b);break;case"layout":if(!K){const N=(0,u.apiPageLayoutToViewerModes)(b);ce.spreadMode=N.spreadMode}break;case"page-num":ce.currentPageNumber=b+1;break;case"print":await ce.pagesPromise,o(this,P).dispatch("print",{source:this});break;case"println":console.log(b);break;case"zoom":K||(ce.currentScaleValue=b);break;case"SaveAs":o(this,P).dispatch("download",{source:this});break;case"FirstPage":ce.currentPageNumber=1;break;case"LastPage":ce.currentPageNumber=ce.pagesCount;break;case"NextPage":ce.nextPage();break;case"PrevPage":ce.previousPage();break;case"ZoomViewIn":K||ce.increaseScale();break;case"ZoomViewOut":K||ce.decreaseScale();break;case"WillPrintFinished":(C=o(this,d))==null||C.resolve(),ee(this,d,null);break}return}if(K&&H.focus)return;delete H.id,delete H.siblings;const T=xe?[Ee,...xe]:[Ee];for(const N of T){const j=document.querySelector(`[data-element-id="${N}"]`);j?j.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:H})):(I=o(this,L))==null||I.annotationStorage.setValue(N,H)}},y=new WeakSet,qt=async function(H,ce=!1){const K=o(this,L),Ee=this._visitedPages;if(ce&&ee(this,p,new l.PromiseCapability),!o(this,p))return;const xe=o(this,F).getPageView(H-1);if((xe==null?void 0:xe.renderingState)!==u.RenderingStates.FINISHED){this._pageOpenPending.add(H);return}this._pageOpenPending.delete(H);const B=(async()=>{var T,C;const b=await(Ee.has(H)?null:(T=xe.pdfPage)==null?void 0:T.getJSActions());K===o(this,L)&&await((C=o(this,h))==null?void 0:C.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:H,actions:b}))})();Ee.set(H,B)},R=new WeakSet,Yn=async function(H){var xe;const ce=o(this,L),K=this._visitedPages;if(!o(this,p)||this._pageOpenPending.has(H))return;const Ee=K.get(H);Ee&&(K.set(H,null),await Ee,ce===o(this,L)&&await((xe=o(this,h))==null?void 0:xe.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:H})))},te=new WeakSet,Yi=function(){if(ee(this,_,new l.PromiseCapability),o(this,h))throw new Error("#initScripting: Scripting already exists.");return o(this,v).createScripting({sandboxBundleSrc:o(this,x)})},X=new WeakSet,Tt=async function(){var H,ce,K;if(!o(this,h)){ee(this,L,null),(H=o(this,_))==null||H.resolve();return}o(this,p)&&(await Promise.race([o(this,p).promise,new Promise(Ee=>{setTimeout(Ee,1e3)})]).catch(()=>{}),ee(this,p,null)),ee(this,L,null);try{await o(this,h).destroySandbox()}catch{}(ce=o(this,d))==null||ce.reject(new Error("Scripting destroyed.")),ee(this,d,null);for(const[Ee,xe]of this._internalEvents)o(this,P)._off(Ee,xe);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),ee(this,h,null),ee(this,w,!1),(K=o(this,_))==null||K.resolve()},c.PDFScriptingManager=m},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFSinglePageViewer=void 0;var u=f(2),l=f(25);class m extends l.PDFViewer{_resetView(){super._resetView(),this._scrollMode=u.ScrollMode.PAGE,this._spreadMode=u.SpreadMode.NONE}set scrollMode(_){}_updateScrollMode(){}set spreadMode(_){}_updateSpreadMode(){}}c.PDFSinglePageViewer=m},(a,c,f)=>{var x,h,d,Zn,E,y,D,R,z,te,O,X,J,q,H,ce,K,Ee,xe,B,b,T,Zi,I,Qi,j,Ji,re,er,me,Mt,ae,Kt,_e,tr,Ie,Qn,fe,nr,ie,lt,ve,Jn,Re,ir,He,rr,Ge,ei,Ke,sr;Object.defineProperty(c,"__esModule",{value:!0}),c.PagesCountLimit=c.PDFViewer=c.PDFPageViewBuffer=void 0;var u=f(4),l=f(2),m=f(7),p=f(13),_=f(26),g=f(5);const P=10,v={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};c.PagesCountLimit=v;function L(Pe){return Object.values(u.AnnotationEditorType).includes(Pe)&&Pe!==u.AnnotationEditorType.DISABLE}class F{constructor(k){$(this,d);$(this,x,new Set);$(this,h,0);ee(this,h,k)}push(k){const V=o(this,x);V.has(k)&&V.delete(k),V.add(k),V.size>o(this,h)&&G(this,d,Zn).call(this)}resize(k,V=null){ee(this,h,k);const he=o(this,x);if(V){const le=he.size;let ge=1;for(const ye of he)if(V.has(ye.id)&&(he.delete(ye),he.add(ye)),++ge>le)break}for(;he.size>o(this,h);)G(this,d,Zn).call(this)}has(k){return o(this,x).has(k)}[Symbol.iterator](){return o(this,x).keys()}}x=new WeakMap,h=new WeakMap,d=new WeakSet,Zn=function(){const k=o(this,x).keys().next().value;k==null||k.destroy(),o(this,x).delete(k)},c.PDFPageViewBuffer=F;class w{constructor(k){$(this,T);$(this,I);$(this,j);$(this,re);$(this,me);$(this,ae);$(this,_e);$(this,Ie);$(this,fe);$(this,ie);$(this,ve);$(this,Re);$(this,He);$(this,Ge);$(this,Ke);$(this,E,null);$(this,y,null);$(this,D,u.AnnotationEditorType.NONE);$(this,R,null);$(this,z,u.AnnotationMode.ENABLE_FORMS);$(this,te,null);$(this,O,null);$(this,X,!1);$(this,J,!1);$(this,q,null);$(this,H,!1);$(this,ce,0);$(this,K,new ResizeObserver(G(this,Ke,sr).bind(this)));$(this,Ee,null);$(this,xe,null);$(this,B,null);$(this,b,l.TextLayerMode.ENABLE);var he,le;const V="3.11.174";if(u.version!==V)throw new Error(`The API version "${u.version}" does not match the Viewer version "${V}".`);if(this.container=k.container,this.viewer=k.viewer||k.container.firstElementChild,((he=this.container)==null?void 0:he.tagName)!=="DIV"||((le=this.viewer)==null?void 0:le.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");o(this,K).observe(this.container),this.eventBus=k.eventBus,this.linkService=k.linkService||new g.SimpleLinkService,this.downloadManager=k.downloadManager||null,this.findController=k.findController||null,ee(this,y,k.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=ge=>this._getVisiblePages().ids.has(ge)),this._scriptingManager=k.scriptingManager||null,ee(this,b,k.textLayerMode??l.TextLayerMode.ENABLE),ee(this,z,k.annotationMode??u.AnnotationMode.ENABLE_FORMS),ee(this,D,k.annotationEditorMode??u.AnnotationEditorType.NONE),this.imageResourcesPath=k.imageResourcesPath||"",this.enablePrintAutoRotate=k.enablePrintAutoRotate||!1,this.removePageBorders=k.removePageBorders||!1,k.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),k.maxCanvasPixels=0),this.isOffscreenCanvasSupported=k.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=k.maxCanvasPixels,this.l10n=k.l10n||m.NullL10n,ee(this,X,k.enablePermissions||!1),this.pageColors=k.pageColors||null,this.defaultRenderingQueue=!k.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=k.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),G(this,Ge,ei).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:ge,pdfPage:ye})=>{const W=this._pages[ge-1];o(this,E).has(W)||ye==null||ye.cleanup()})}get pagesCount(){return this._pages.length}getPageView(k){return this._pages[k]}getCachedPageViews(){return new Set(o(this,E))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(k=>k==null?void 0:k.pdfPage)}get renderForms(){return o(this,z)===u.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(k){if(!Number.isInteger(k))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(k,!0)||console.error(`currentPageNumber: "${k}" is not a valid page.`))}_setCurrentPageNumber(k,V=!1){var le;if(this._currentPageNumber===k)return V&&G(this,ve,Jn).call(this),!0;if(!(0<k&&k<=this.pagesCount))return!1;const he=this._currentPageNumber;return this._currentPageNumber=k,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:k,pageLabel:((le=this._pageLabels)==null?void 0:le[k-1])??null,previous:he}),V&&G(this,ve,Jn).call(this),!0}get currentPageLabel(){var k;return((k=this._pageLabels)==null?void 0:k[this._currentPageNumber-1])??null}set currentPageLabel(k){if(!this.pdfDocument)return;let V=k|0;if(this._pageLabels){const he=this._pageLabels.indexOf(k);he>=0&&(V=he+1)}this._setCurrentPageNumber(V,!0)||console.error(`currentPageLabel: "${k}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(k){if(isNaN(k))throw new Error("Invalid numeric scale.");this.pdfDocument&&G(this,ie,lt).call(this,k,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(k){this.pdfDocument&&G(this,ie,lt).call(this,k,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(k){if(!(0,l.isValidRotation)(k))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(k%=360,k<0&&(k+=360),this._pagesRotation===k))return;this._pagesRotation=k;const V=this._currentPageNumber;this.refresh(!0,{rotation:k}),this._currentScaleValue&&G(this,ie,lt).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:k,pageNumber:V}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const k=[],V=[];for(let he=1,le=this.pdfDocument.numPages;he<=le;++he){if(o(this,H))return null;V.length=0;const ge=await this.pdfDocument.getPage(he),{items:ye}=await ge.getTextContent();for(const W of ye)W.str&&V.push(W.str),W.hasEOL&&V.push(`
`);k.push((0,l.removeNullCharacters)(V.join("")))}return k.join(`
`)}setDocument(k){var ye,W;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(ye=this.findController)==null||ye.setDocument(null),(W=this._scriptingManager)==null||W.setDocument(null),o(this,R)&&(o(this,R).destroy(),ee(this,R,null))),this.pdfDocument=k,!k)return;const V=k.numPages,he=k.getPage(1),le=k.getOptionalContentConfig(),ge=o(this,X)?k.getPermissions():Promise.resolve();if(V>v.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const de=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:de})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:V})},()=>{}),this._onBeforeDraw=de=>{const ke=this._pages[de.pageNumber-1];ke&&o(this,E).push(ke)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=de=>{de.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:de.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,o(this,xe)&&(document.removeEventListener("visibilitychange",o(this,xe)),ee(this,xe,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([he,ge]).then(([de,ke])=>{var S,U;if(k!==this.pdfDocument)return;this._firstPageCapability.resolve(de),this._optionalContentConfigPromise=le;const{annotationEditorMode:Ae,annotationMode:Oe,textLayerMode:Ve}=G(this,I,Qi).call(this,ke);if(Ve!==l.TextLayerMode.DISABLE){const Y=ee(this,q,document.createElement("div"));Y.id="hiddenCopyElement",this.viewer.before(Y)}if(Ae!==u.AnnotationEditorType.DISABLE){const Y=Ae;k.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):L(Y)?(ee(this,R,new u.AnnotationEditorUIManager(this.container,this.viewer,o(this,y),this.eventBus,k,this.pageColors)),Y!==u.AnnotationEditorType.NONE&&o(this,R).updateMode(Y)):console.error(`Invalid AnnotationEditor mode: ${Y}`)}const ze=G(this,T,Zi).bind(this),Te=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,Ye=this.currentScale,Ue=de.getViewport({scale:Ye*u.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ue.scale),(((S=this.pageColors)==null?void 0:S.foreground)==="CanvasText"||((U=this.pageColors)==null?void 0:U.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",k.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let Y=1;Y<=V;++Y){const oe=new p.PDFPageView({container:Te,eventBus:this.eventBus,id:Y,scale:Ye,defaultViewport:Ue.clone(),optionalContentConfigPromise:le,renderingQueue:this.renderingQueue,textLayerMode:Ve,annotationMode:Oe,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:ze});this._pages.push(oe)}const Q=this._pages[0];Q&&(Q.setPdfPage(de),this.linkService.cachePageRef(1,de.ref)),this._scrollMode===l.ScrollMode.PAGE?G(this,me,Mt).call(this):this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),G(this,j,Ji).call(this).then(async()=>{var oe,pe;if((oe=this.findController)==null||oe.setDocument(k),(pe=this._scriptingManager)==null||pe.setDocument(k),o(this,q)&&(ee(this,O,G(this,re,er).bind(this,Ve)),document.addEventListener("copy",o(this,O))),o(this,R)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:o(this,D)}),k.loadingParams.disableAutoFetch||V>v.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Y=V-1;if(Y<=0){this._pagesCapability.resolve();return}for(let Se=2;Se<=V;++Se){const De=k.getPage(Se).then($e=>{const Ne=this._pages[Se-1];Ne.pdfPage||Ne.setPdfPage($e),this.linkService.cachePageRef(Se,$e.ref),--Y===0&&this._pagesCapability.resolve()},$e=>{console.error(`Unable to get page ${Se} to initialize viewer`,$e),--Y===0&&this._pagesCapability.resolve()});Se%v.PAUSE_EAGER_PAGE_INIT===0&&await De}}),this.eventBus.dispatch("pagesinit",{source:this}),k.getMetadata().then(({info:Y})=>{k===this.pdfDocument&&Y.Language&&(this.viewer.lang=Y.Language)}),this.defaultRenderingQueue&&this.update()}).catch(de=>{console.error("Unable to initialize viewer",de),this._pagesCapability.reject(de)})}setPageLabels(k){var V;if(this.pdfDocument){k?Array.isArray(k)&&this.pdfDocument.numPages===k.length?this._pageLabels=k:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let he=0,le=this._pages.length;he<le;he++)this._pages[he].setPageLabel(((V=this._pageLabels)==null?void 0:V[he])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,ee(this,E,new F(P)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new u.PromiseCapability,this._onePageRenderedCapability=new u.PromiseCapability,this._pagesCapability=new u.PromiseCapability,this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,ee(this,Ee,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),o(this,xe)&&(document.removeEventListener("visibilitychange",o(this,xe)),ee(this,xe,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),o(this,q)&&(document.removeEventListener("copy",o(this,O)),ee(this,O,null),o(this,q).remove(),ee(this,q,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(k){if(!this._pageLabels)return null;const V=this._pageLabels.indexOf(k);return V<0?null:V+1}scrollPageIntoView({pageNumber:k,destArray:V=null,allowNegativeOffset:he=!1,ignoreDestinationZoom:le=!1}){if(!this.pdfDocument)return;const ge=Number.isInteger(k)&&this._pages[k-1];if(!ge){console.error(`scrollPageIntoView: "${k}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!V){this._setCurrentPageNumber(k,!0);return}let ye=0,W=0,de=0,ke=0,Ae,Oe;const Ve=ge.rotation%180!==0,ze=(Ve?ge.height:ge.width)/ge.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,Te=(Ve?ge.width:ge.height)/ge.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS;let Ye=0;switch(V[1].name){case"XYZ":ye=V[2],W=V[3],Ye=V[4],ye=ye!==null?ye:0,W=W!==null?W:Te;break;case"Fit":case"FitB":Ye="page-fit";break;case"FitH":case"FitBH":W=V[2],Ye="page-width",W===null&&this._location?(ye=this._location.left,W=this._location.top):(typeof W!="number"||W<0)&&(W=Te);break;case"FitV":case"FitBV":ye=V[2],de=ze,ke=Te,Ye="page-height";break;case"FitR":ye=V[2],W=V[3],de=V[4]-ye,ke=V[5]-W;let U=l.SCROLLBAR_PADDING,Y=l.VERTICAL_PADDING;this.removePageBorders&&(U=Y=0),Ae=(this.container.clientWidth-U)/de/u.PixelsPerInch.PDF_TO_CSS_UNITS,Oe=(this.container.clientHeight-Y)/ke/u.PixelsPerInch.PDF_TO_CSS_UNITS,Ye=Math.min(Math.abs(Ae),Math.abs(Oe));break;default:console.error(`scrollPageIntoView: "${V[1].name}" is not a valid destination type.`);return}if(le||(Ye&&Ye!==this._currentScale?this.currentScaleValue=Ye:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),Ye==="page-fit"&&!V[4]){G(this,ae,Kt).call(this,ge);return}const Ue=[ge.viewport.convertToViewportPoint(ye,W),ge.viewport.convertToViewportPoint(ye+de,W+ke)];let Q=Math.min(Ue[0][0],Ue[1][0]),S=Math.min(Ue[0][1],Ue[1][1]);he||(Q=Math.max(Q,0),S=Math.max(S,0)),G(this,ae,Kt).call(this,ge,{left:Q,top:S})}_updateLocation(k){const V=this._currentScale,he=this._currentScaleValue,le=parseFloat(he)===V?Math.round(V*1e4)/100:he,ge=k.id,ye=this._pages[ge-1],W=this.container,de=ye.getPagePoint(W.scrollLeft-k.x,W.scrollTop-k.y),ke=Math.round(de[0]),Ae=Math.round(de[1]);let Oe=`#page=${ge}`;this.isInPresentationMode||(Oe+=`&zoom=${le},${ke},${Ae}`),this._location={pageNumber:ge,scale:le,top:Ae,left:ke,rotation:this._pagesRotation,pdfOpenParams:Oe}}update(){const k=this._getVisiblePages(),V=k.views,he=V.length;if(he===0)return;const le=Math.max(P,2*he+1);o(this,E).resize(le,k.ids),this.renderingQueue.renderHighestPriority(k);const ge=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),ye=this._currentPageNumber;let W=!1;for(const de of V){if(de.percent<100)break;if(de.id===ye&&ge){W=!0;break}}this._setCurrentPageNumber(W?ye:V[0].id),this._updateLocation(k.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(k){return this.container.contains(k)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const k=this._scrollMode===l.ScrollMode.PAGE?o(this,Ee).pages:this._pages,V=this._scrollMode===l.ScrollMode.HORIZONTAL,he=V&&this._isContainerRtl;return(0,l.getVisibleElements)({scrollEl:this.container,views:k,sortByVisibility:!0,horizontal:V,rtl:he})}cleanup(){for(const k of this._pages)k.renderingState!==l.RenderingStates.FINISHED&&k.reset()}_cancelRendering(){for(const k of this._pages)k.cancelRendering()}forceRendering(k){const V=k||this._getVisiblePages(),he=G(this,He,rr).call(this,V),le=this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL,ge=this.renderingQueue.getHighestPriority(V,this._pages,he,le);return ge?(G(this,Re,ir).call(this,ge).then(()=>{this.renderingQueue.renderView(ge)}),!0):!1}get hasEqualPageSizes(){const k=this._pages[0];for(let V=1,he=this._pages.length;V<he;++V){const le=this._pages[V];if(le.width!==k.width||le.height!==k.height)return!1}return!0}getPagesOverview(){let k;return this._pages.map(V=>{const he=V.pdfPage.getViewport({scale:1}),le=(0,l.isPortraitOrientation)(he);if(k===void 0)k=le;else if(this.enablePrintAutoRotate&&le!==k)return{width:he.height,height:he.width,rotation:(he.rotation-90)%360};return{width:he.width,height:he.height,rotation:he.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(k){if(!(k instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${k}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=k,this.refresh(!1,{optionalContentConfigPromise:k}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:k}))}get scrollMode(){return this._scrollMode}set scrollMode(k){if(this._scrollMode!==k){if(!(0,l.isValidScrollMode)(k))throw new Error(`Invalid scroll mode: ${k}`);this.pagesCount>v.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=k,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:k}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(k=null){const V=this._scrollMode,he=this.viewer;he.classList.toggle("scrollHorizontal",V===l.ScrollMode.HORIZONTAL),he.classList.toggle("scrollWrapped",V===l.ScrollMode.WRAPPED),!(!this.pdfDocument||!k)&&(V===l.ScrollMode.PAGE?G(this,me,Mt).call(this):this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&G(this,ie,lt).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(k,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(k){if(this._spreadMode!==k){if(!(0,l.isValidSpreadMode)(k))throw new Error(`Invalid spread mode: ${k}`);this._spreadMode=k,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:k}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(k=null){if(!this.pdfDocument)return;const V=this.viewer,he=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)G(this,me,Mt).call(this);else if(V.textContent="",this._spreadMode===l.SpreadMode.NONE)for(const le of this._pages)V.append(le.div);else{const le=this._spreadMode-1;let ge=null;for(let ye=0,W=he.length;ye<W;++ye)ge===null?(ge=document.createElement("div"),ge.className="spread",V.append(ge)):ye%2===le&&(ge=ge.cloneNode(!1),V.append(ge)),ge.append(he[ye].div)}k&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&G(this,ie,lt).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(k,!0),this.update())}_getPageAdvance(k,V=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:he}=this._getVisiblePages(),le=new Map;for(const{id:ge,y:ye,percent:W,widthPercent:de}of he){if(W===0||de<100)continue;let ke=le.get(ye);ke||le.set(ye,ke||(ke=[])),ke.push(ge)}for(const ge of le.values()){const ye=ge.indexOf(k);if(ye===-1)continue;const W=ge.length;if(W===1)break;if(V)for(let de=ye-1,ke=0;de>=ke;de--){const Ae=ge[de],Oe=ge[de+1]-1;if(Ae<Oe)return k-Oe}else for(let de=ye+1,ke=W;de<ke;de++){const Ae=ge[de],Oe=ge[de-1]+1;if(Ae>Oe)return Oe-k}if(V){const de=ge[0];if(de<k)return k-de+1}else{const de=ge[W-1];if(de>k)return de-k+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const he=this._spreadMode-1;if(V&&k%2!==he)break;if(!V&&k%2===he)break;const{views:le}=this._getVisiblePages(),ge=V?k-1:k+1;for(const{id:ye,percent:W,widthPercent:de}of le)if(ye===ge){if(W>0&&de===100)return 2;break}break}}return 1}nextPage(){const k=this._currentPageNumber,V=this.pagesCount;if(k>=V)return!1;const he=this._getPageAdvance(k,!1)||1;return this.currentPageNumber=Math.min(k+he,V),!0}previousPage(){const k=this._currentPageNumber;if(k<=1)return!1;const V=this._getPageAdvance(k,!0)||1;return this.currentPageNumber=Math.max(k-V,1),!0}increaseScale({drawingDelay:k,scaleFactor:V,steps:he}={}){if(!this.pdfDocument)return;let le=this._currentScale;if(V>1)le=Math.round(le*V*100)/100;else{he??(he=1);do le=Math.ceil((le*l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&le<l.MAX_SCALE)}G(this,ie,lt).call(this,Math.min(l.MAX_SCALE,le),{noScroll:!1,drawingDelay:k})}decreaseScale({drawingDelay:k,scaleFactor:V,steps:he}={}){if(!this.pdfDocument)return;let le=this._currentScale;if(V>0&&V<1)le=Math.round(le*V*100)/100;else{he??(he=1);do le=Math.floor((le/l.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&le>l.MIN_SCALE)}G(this,ie,lt).call(this,Math.max(l.MIN_SCALE,le),{noScroll:!1,drawingDelay:k})}get containerTopLeft(){return o(this,te)||ee(this,te,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return o(this,R)?o(this,D):u.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:k,editId:V=null}){if(!o(this,R))throw new Error("The AnnotationEditor is not enabled.");if(o(this,D)!==k){if(!L(k))throw new Error(`Invalid AnnotationEditor mode: ${k}`);this.pdfDocument&&(ee(this,D,k),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:k}),o(this,R).updateMode(k,V))}}set annotationEditorParams({type:k,value:V}){if(!o(this,R))throw new Error("The AnnotationEditor is not enabled.");o(this,R).updateParams(k,V)}refresh(k=!1,V=Object.create(null)){if(this.pdfDocument){for(const he of this._pages)he.update(V);o(this,B)!==null&&(clearTimeout(o(this,B)),ee(this,B,null)),k||this.update()}}}E=new WeakMap,y=new WeakMap,D=new WeakMap,R=new WeakMap,z=new WeakMap,te=new WeakMap,O=new WeakMap,X=new WeakMap,J=new WeakMap,q=new WeakMap,H=new WeakMap,ce=new WeakMap,K=new WeakMap,Ee=new WeakMap,xe=new WeakMap,B=new WeakMap,b=new WeakMap,T=new WeakSet,Zi=function(){const k=this;return{get annotationEditorUIManager(){return o(k,R)},get annotationStorage(){var V;return(V=k.pdfDocument)==null?void 0:V.annotationStorage},get downloadManager(){return k.downloadManager},get enableScripting(){return!!k._scriptingManager},get fieldObjectsPromise(){var V;return(V=k.pdfDocument)==null?void 0:V.getFieldObjects()},get findController(){return k.findController},get hasJSActionsPromise(){var V;return(V=k.pdfDocument)==null?void 0:V.hasJSActions()},get linkService(){return k.linkService}}},I=new WeakSet,Qi=function(k){const V={annotationEditorMode:o(this,D),annotationMode:o(this,z),textLayerMode:o(this,b)};return k&&(!k.includes(u.PermissionFlag.COPY)&&o(this,b)===l.TextLayerMode.ENABLE&&(V.textLayerMode=l.TextLayerMode.ENABLE_PERMISSIONS),k.includes(u.PermissionFlag.MODIFY_CONTENTS)||(V.annotationEditorMode=u.AnnotationEditorType.DISABLE),!k.includes(u.PermissionFlag.MODIFY_ANNOTATIONS)&&!k.includes(u.PermissionFlag.FILL_INTERACTIVE_FORMS)&&o(this,z)===u.AnnotationMode.ENABLE_FORMS&&(V.annotationMode=u.AnnotationMode.ENABLE)),V},j=new WeakSet,Ji=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const k=new Promise(V=>{ee(this,xe,()=>{document.visibilityState==="hidden"&&(V(),document.removeEventListener("visibilitychange",o(this,xe)),ee(this,xe,null))}),document.addEventListener("visibilitychange",o(this,xe))});return Promise.race([this._onePageRenderedCapability.promise,k])},re=new WeakSet,er=function(k,V){const he=document.getSelection(),{focusNode:le,anchorNode:ge}=he;if(ge&&le&&he.containsNode(o(this,q))){if(o(this,J)||k===l.TextLayerMode.ENABLE_PERMISSIONS){V.preventDefault(),V.stopPropagation();return}ee(this,J,!0);const ye=this.container.style.cursor;this.container.style.cursor="wait";const W=de=>ee(this,H,de.key==="Escape");window.addEventListener("keydown",W),this.getAllText().then(async de=>{de!==null&&await navigator.clipboard.writeText(de)}).catch(de=>{console.warn(`Something goes wrong when extracting the text: ${de.message}`)}).finally(()=>{ee(this,J,!1),ee(this,H,!1),window.removeEventListener("keydown",W),this.container.style.cursor=ye}),V.preventDefault(),V.stopPropagation()}},me=new WeakSet,Mt=function(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const k=this._currentPageNumber,V=o(this,Ee),he=this.viewer;if(he.textContent="",V.pages.length=0,this._spreadMode===l.SpreadMode.NONE&&!this.isInPresentationMode){const le=this._pages[k-1];he.append(le.div),V.pages.push(le)}else{const le=new Set,ge=this._spreadMode-1;ge===-1?le.add(k-1):k%2!==ge?(le.add(k-1),le.add(k)):(le.add(k-2),le.add(k-1));const ye=document.createElement("div");if(ye.className="spread",this.isInPresentationMode){const W=document.createElement("div");W.className="dummyPage",ye.append(W)}for(const W of le){const de=this._pages[W];de&&(ye.append(de.div),V.pages.push(de))}he.append(ye)}V.scrollDown=k>=V.previousPageNumber,V.previousPageNumber=k},ae=new WeakSet,Kt=function(k,V=null){const{div:he,id:le}=k;if(this._currentPageNumber!==le&&this._setCurrentPageNumber(le),this._scrollMode===l.ScrollMode.PAGE&&(G(this,me,Mt).call(this),this.update()),!V&&!this.isInPresentationMode){const ge=he.offsetLeft+he.clientLeft,ye=ge+he.clientWidth,{scrollLeft:W,clientWidth:de}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||ge<W||ye>W+de)&&(V={left:0,top:0})}(0,l.scrollIntoView)(he,V),!this._currentScaleValue&&this._location&&(this._location=null)},_e=new WeakSet,tr=function(k){return k===this._currentScale||Math.abs(k-this._currentScale)<1e-15},Ie=new WeakSet,Qn=function(k,V,{noScroll:he=!1,preset:le=!1,drawingDelay:ge=-1}){if(this._currentScaleValue=V.toString(),G(this,_e,tr).call(this,k)){le&&this.eventBus.dispatch("scalechanging",{source:this,scale:k,presetValue:V});return}this.viewer.style.setProperty("--scale-factor",k*u.PixelsPerInch.PDF_TO_CSS_UNITS);const ye=ge>=0&&ge<1e3;if(this.refresh(!0,{scale:k,drawingDelay:ye?ge:-1}),ye&&ee(this,B,setTimeout(()=>{ee(this,B,null),this.refresh()},ge)),this._currentScale=k,!he){let W=this._currentPageNumber,de;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(W=this._location.pageNumber,de=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:W,destArray:de,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:k,presetValue:le?V:void 0}),this.defaultRenderingQueue&&this.update()},fe=new WeakSet,nr=function(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1},ie=new WeakSet,lt=function(k,V){let he=parseFloat(k);if(he>0)V.preset=!1,G(this,Ie,Qn).call(this,he,k,V);else{const le=this._pages[this._currentPageNumber-1];if(!le)return;let ge=l.SCROLLBAR_PADDING,ye=l.VERTICAL_PADDING;this.isInPresentationMode?(ge=ye=4,this._spreadMode!==l.SpreadMode.NONE&&(ge*=2)):this.removePageBorders?ge=ye=0:this._scrollMode===l.ScrollMode.HORIZONTAL&&([ge,ye]=[ye,ge]);const W=(this.container.clientWidth-ge)/le.width*le.scale/o(this,fe,nr),de=(this.container.clientHeight-ye)/le.height*le.scale;switch(k){case"page-actual":he=1;break;case"page-width":he=W;break;case"page-height":he=de;break;case"page-fit":he=Math.min(W,de);break;case"auto":const ke=(0,l.isPortraitOrientation)(le)?W:Math.min(de,W);he=Math.min(l.MAX_AUTO_SCALE,ke);break;default:console.error(`#setScale: "${k}" is an unknown zoom value.`);return}V.preset=!0,G(this,Ie,Qn).call(this,he,k,V)}},ve=new WeakSet,Jn=function(){const k=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&G(this,ie,lt).call(this,this._currentScaleValue,{noScroll:!0}),G(this,ae,Kt).call(this,k)},Re=new WeakSet,ir=async function(k){var V,he;if(k.pdfPage)return k.pdfPage;try{const le=await this.pdfDocument.getPage(k.id);return k.pdfPage||k.setPdfPage(le),(he=(V=this.linkService)._cachedPageNumber)!=null&&he.call(V,le.ref)||this.linkService.cachePageRef(k.id,le.ref),le}catch(le){return console.error("Unable to get page for page view",le),null}},He=new WeakSet,rr=function(k){var V,he;if(((V=k.first)==null?void 0:V.id)===1)return!0;if(((he=k.last)==null?void 0:he.id)===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return o(this,Ee).scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ge=new WeakSet,ei=function(k=this.container.clientHeight){k!==o(this,ce)&&(ee(this,ce,k),l.docStyle.setProperty("--viewer-container-height",`${k}px`))},Ke=new WeakSet,sr=function(k){for(const V of k)if(V.target===this.container){G(this,Ge,ei).call(this,Math.floor(V.borderBoxSize[0].blockSize)),ee(this,te,null);break}},c.PDFViewer=w},(a,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFRenderingQueue=void 0;var u=f(4),l=f(2);const m=3e4;class p{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(g){this.pdfViewer=g}setThumbnailViewer(g){this.pdfThumbnailViewer=g}isHighestPriority(g){return this.highestPriorityPage===g.renderingId}renderHighestPriority(g){var P;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(g)&&(this.isThumbnailViewEnabled&&((P=this.pdfThumbnailViewer)!=null&&P.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),m)))}getHighestPriority(g,P,v,L=!1){const F=g.views,w=F.length;if(w===0)return null;for(let E=0;E<w;E++){const y=F[E].view;if(!this.isViewFinished(y))return y}const x=g.first.id,h=g.last.id;if(h-x+1>w){const E=g.ids;for(let y=1,D=h-x;y<D;y++){const R=v?x+y:h-y;if(E.has(R))continue;const z=P[R-1];if(!this.isViewFinished(z))return z}}let d=v?h:x-2,M=P[d];return M&&!this.isViewFinished(M)||L&&(d+=v?1:-1,M=P[d],M&&!this.isViewFinished(M))?M:null}isViewFinished(g){return g.renderingState===l.RenderingStates.FINISHED}renderView(g){switch(g.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=g.renderingId,g.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=g.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=g.renderingId,g.draw().finally(()=>{this.renderHighestPriority()}).catch(P=>{P instanceof u.RenderingCancelledException||console.error(`renderView: "${P}"`)});break}return!0}}c.PDFRenderingQueue=p}],n={};function r(a){var c=n[a];if(c!==void 0)return c.exports;var f=n[a]={exports:{}};return i[a](f,f.exports,r),f.exports}var s={};return(()=>{var a=s;Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return l.AnnotationLayerBuilder}}),Object.defineProperty(a,"DownloadManager",{enumerable:!0,get:function(){return m.DownloadManager}}),Object.defineProperty(a,"EventBus",{enumerable:!0,get:function(){return p.EventBus}}),Object.defineProperty(a,"FindState",{enumerable:!0,get:function(){return c.FindState}}),Object.defineProperty(a,"GenericL10n",{enumerable:!0,get:function(){return _.GenericL10n}}),Object.defineProperty(a,"LinkTarget",{enumerable:!0,get:function(){return f.LinkTarget}}),Object.defineProperty(a,"NullL10n",{enumerable:!0,get:function(){return g.NullL10n}}),Object.defineProperty(a,"PDFFindController",{enumerable:!0,get:function(){return c.PDFFindController}}),Object.defineProperty(a,"PDFHistory",{enumerable:!0,get:function(){return P.PDFHistory}}),Object.defineProperty(a,"PDFLinkService",{enumerable:!0,get:function(){return f.PDFLinkService}}),Object.defineProperty(a,"PDFPageView",{enumerable:!0,get:function(){return v.PDFPageView}}),Object.defineProperty(a,"PDFScriptingManager",{enumerable:!0,get:function(){return L.PDFScriptingManager}}),Object.defineProperty(a,"PDFSinglePageViewer",{enumerable:!0,get:function(){return F.PDFSinglePageViewer}}),Object.defineProperty(a,"PDFViewer",{enumerable:!0,get:function(){return w.PDFViewer}}),Object.defineProperty(a,"ProgressBar",{enumerable:!0,get:function(){return u.ProgressBar}}),Object.defineProperty(a,"RenderingStates",{enumerable:!0,get:function(){return u.RenderingStates}}),Object.defineProperty(a,"ScrollMode",{enumerable:!0,get:function(){return u.ScrollMode}}),Object.defineProperty(a,"SimpleLinkService",{enumerable:!0,get:function(){return f.SimpleLinkService}}),Object.defineProperty(a,"SpreadMode",{enumerable:!0,get:function(){return u.SpreadMode}}),Object.defineProperty(a,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return x.StructTreeLayerBuilder}}),Object.defineProperty(a,"TextLayerBuilder",{enumerable:!0,get:function(){return h.TextLayerBuilder}}),Object.defineProperty(a,"XfaLayerBuilder",{enumerable:!0,get:function(){return d.XfaLayerBuilder}}),Object.defineProperty(a,"parseQueryString",{enumerable:!0,get:function(){return u.parseQueryString}});var c=r(1),f=r(5),u=r(2),l=r(6),m=r(8),p=r(9),_=r(10),g=r(7),P=r(12),v=r(13),L=r(21),F=r(24),w=r(25),x=r(16),h=r(19),d=r(20)})(),s})())})(pdf_viewer);var pdf_viewerExports=pdf_viewer.exports,define_import_meta_env_default={BASE_URL:"/zasudi-solid/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=e=>{let t;const i=new Set,n=(l,m)=>{const p=typeof l=="function"?l(t):l;if(!Object.is(p,t)){const _=t;t=m??(typeof p!="object"||p===null)?p:Object.assign({},t,p),i.forEach(g=>g(t,_))}},r=()=>t,f={setState:n,getState:r,getInitialState:()=>u,subscribe:l=>(i.add(l),()=>i.delete(l)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},u=t=e(n,r,f);return f},createStore=e=>e?createStoreImpl(e):createStoreImpl;function __awaiter(e,t,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function c(l){try{u(n.next(l))}catch(m){a(m)}}function f(l){try{u(n.throw(l))}catch(m){a(m)}}function u(l){l.done?s(l.value):r(l.value).then(c,f)}u((n=n.apply(e,t||[])).next())})}function __classPrivateFieldGet(e,t,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,i,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,i):r?r.value=i:t.set(e,i),i}typeof SuppressedError=="function"&&SuppressedError;const RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class OutputScale{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}}function scrollIntoView(e,t,i=!1){let n=e.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let r=e.offsetTop+e.clientTop,s=e.offsetLeft+e.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden");)if(r+=n.offsetTop,s+=n.offsetLeft,n=n.offsetParent,!n)return;t&&(t.top!==void 0&&(r+=t.top),t.left!==void 0&&(s+=t.left,n.scrollLeft=s)),n.scrollTop=r,n.scrollLeft=s}function watchScroll(e,t){const i=function(s){r||(r=window.requestAnimationFrame(function(){r=null;const c=e.scrollLeft,f=n.lastX;c!==f&&(n.right=c>f),n.lastX=c;const u=e.scrollTop,l=n.lastY;u!==l&&(n.down=u>l),n.lastY=u,t(n)}))},n={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:i};let r=null;return e.addEventListener("scroll",i,!0),n}function binarySearchFirstItem(e,t,i=0){let n=i,r=e.length-1;if(r<0||!t(e[r]))return e.length;if(t(e[n]))return n;for(;n<r;){const s=n+r>>1,a=e[s];t(a)?r=s:n=s+1}return n}function getPageSizeInches({view:e,userUnit:t,rotate:i}){const[n,r,s,a]=e,c=i%180!==0,f=(s-n)/72*t,u=(a-r)/72*t;return{width:c?u:f,height:c?f:u}}function backtrackBeforeAllVisibleElements(e,t,i){if(e<2)return e;let n=t[e].div,r=n.offsetTop+n.clientTop;r>=i&&(n=t[e-1].div,r=n.offsetTop+n.clientTop);for(let s=e-2;s>=0&&(n=t[s].div,!(n.offsetTop+n.clientTop+n.clientHeight<=r));--s)e=s;return e}function getVisibleElements({scrollEl:e,views:t,sortByVisibility:i=!1,horizontal:n=!1,rtl:r=!1}){const s=e.scrollTop,a=s+e.clientHeight,c=e.scrollLeft,f=c+e.clientWidth;function u(F){const w=F.div;return w.offsetTop+w.clientTop+w.clientHeight>s}function l(F){const w=F.div,x=w.offsetLeft+w.clientLeft,h=x+w.clientWidth;return r?x<f:h>c}const m=[],p=new Set,_=t.length;let g=binarySearchFirstItem(t,n?l:u);g>0&&g<_&&!n&&(g=backtrackBeforeAllVisibleElements(g,t,s));let P=n?f:-1;for(let F=g;F<_;F++){const w=t[F],x=w.div,h=x.offsetLeft+x.clientLeft,d=x.offsetTop+x.clientTop,M=x.clientWidth,E=x.clientHeight,y=h+M,D=d+E;if(P===-1)D>=a&&(P=D);else if((n?h:d)>P)break;if(D<=s||d>=a||y<=c||h>=f)continue;const R=Math.max(0,s-d)+Math.max(0,D-a),z=Math.max(0,c-h)+Math.max(0,y-f),te=(E-R)/E,O=(M-z)/M,X=te*O*100|0;m.push({id:w.id,x:h,y:d,view:w,percent:X,widthPercent:O*100|0}),p.add(w.id)}const v=m[0],L=m.at(-1);return i&&m.sort(function(F,w){const x=F.percent-w.percent;return Math.abs(x)>.001?-x:F.id-w.id}),{first:v,last:L,views:m,ids:p}}function normalizeWheelEventDirection(e){let t=Math.hypot(e.deltaX,e.deltaY);const i=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(t=-t),t}function normalizeWheelEventDelta(e){const t=e.deltaMode;let i=normalizeWheelEventDirection(e);const n=30,r=30;return t===WheelEvent.DOM_DELTA_PIXEL?i/=n*r:t===WheelEvent.DOM_DELTA_LINE&&(i/=r),i}function isValidRotation(e){return Number.isInteger(e)&&e%90===0}function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(ScrollMode).includes(e)&&e!==ScrollMode.UNKNOWN}function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(SpreadMode).includes(e)&&e!==SpreadMode.UNKNOWN}function isPortraitOrientation(e){return e.width<=e.height}new Promise(function(e){window.requestAnimationFrame(e)});document.documentElement.style;const CLEANUP_TIMEOUT=3e4;class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){var i,n;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!(!((i=this.pdfViewer)===null||i===void 0)&&i.forceRendering(t))&&(this.isThumbnailViewEnabled&&(!((n=this.pdfThumbnailViewer)===null||n===void 0)&&n.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)))}getHighestPriority(t,i,n,r=!1){const s=t.views,a=s.length;if(a===0)return null;for(let m=0;m<a;m++){const p=s[m].view;if(!this.isViewFinished(p))return p}const c=t.first.id,f=t.last.id;if(f-c+1>a){const m=t.ids;for(let p=1,_=f-c;p<_;p++){const g=n?c+p:f-p;if(m.has(g))continue;const P=i[g-1];if(!this.isViewFinished(P))return P}}let u=n?f:c-2,l=i[u];return l&&!this.isViewFinished(l)||r&&(u+=n?1:-1,l=i[u],l&&!this.isViewFinished(l))?l:null}isViewFinished(t){return t.renderingState===RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(i=>{i instanceof pdfExports.RenderingCancelledException||console.error(`renderView: "${i}"`)});break}return!0}}var _a,_TempImageFactory_tempCanvas;const DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3;class TempImageFactory{static getCanvas(t,i){const n=__classPrivateFieldSet(this,_a,__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas)||document.createElement("canvas"),"f",_TempImageFactory_tempCanvas);n.width=t,n.height=i;const r=n.getContext("2d",{alpha:!1});r.save(),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,t,i),r.restore();const s=n.getContext("2d");return[n,s]}static destroyCanvas(){const t=__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas);t&&(t.width=0,t.height=0),__classPrivateFieldSet(this,_a,null,"f",_TempImageFactory_tempCanvas)}}_a=TempImageFactory;_TempImageFactory_tempCanvas={value:null};class PDFThumbnailView{constructor({container:t,eventBus:i,id:n,defaultViewport:r,optionalContentConfigPromise:s,linkService:a,renderingQueue:c,l10n:f,pageColors:u,store:l,thumbnailWidth:m}){this.container=t,this.eventBus=i,this.id=n,this.renderingId="thumbnail"+n,this.pageLabel=null,this.store=l,this.loaded=!1,this.pdfPage=null,this.rotation=0,this.viewport=r,this.pdfPageRotate=r.rotation,this._optionalContentConfigPromise=s||null,this.pageColors=u||null,this.linkService=a,this.renderingQueue=c,this.renderTask=null,this.renderingState=RenderingStates.INITIAL,this.resume=null;const p=this.viewport.width,_=this.viewport.height,g=p/_;this.canvasWidth=m,this.canvasHeight=this.canvasWidth/g|0,this.scale=this.canvasWidth/p,this.l10n=f,this.canvas=null,this.src=null;const P=document.createElement("div");P.className="thumbnail pdfSlickThumbHolder",P.setAttribute("data-page-number",this.id.toString()),this.div=P,t.append(P)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const i=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:i}),this.reset()}reset(){this.cancelRendering(),this.renderingState=RenderingStates.INITIAL;const t=this.viewport.width,i=this.viewport.height,n=t/i;this.canvasHeight=this.canvasWidth/n|0,this.scale=this.canvasWidth/t,this.div.removeAttribute("data-loaded"),this.loaded=!1,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas)}update({rotation:t=null}){typeof t=="number"&&(this.rotation=t);const i=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:i}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(t=1){const i=document.createElement("canvas"),n=i.getContext("2d",{alpha:!1}),r=new OutputScale;i.width=t*this.canvasWidth*r.sx|0,i.height=t*this.canvasHeight*r.sy|0;const s=r.scaled?[r.sx,0,0,r.sy,0,0]:null;return{ctx:n,canvas:i,transform:s}}_convertCanvasToImage(t){if(this.renderingState!==RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const i=this._reduceImage(t);this.src=i.toDataURL(),this.div.setAttribute("data-loaded","true"),this.loaded=!0,this.store.getState()._setThumbnailView(this.id,this),i.width=0,i.height=0}draw(){if(this.renderingState!==RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();const{pdfPage:t}=this;if(!t)return this.renderingState=RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates.RUNNING;const i=(m=null)=>__awaiter(this,void 0,void 0,function*(){if(u===this.renderTask&&(this.renderTask=null),!(m instanceof pdfExports.RenderingCancelledException)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(r),m))throw m}),{ctx:n,canvas:r,transform:s}=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),a=this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),c=m=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=RenderingStates.PAUSED,this.resume=()=>{this.renderingState=RenderingStates.RUNNING,m()};return}m()},f={canvasContext:n,transform:s,viewport:a,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},u=this.renderTask=t.render(f);u.onContinue=c;const l=u.promise.then(function(){return i(null)},function(m){return i(m)});return l.finally(()=>{r.width=0,r.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),l}setImage(t){if(this.renderingState!==RenderingStates.INITIAL)return;const{thumbnailCanvas:i,pdfPage:n,scale:r}=t;i&&(this.pdfPage||this.setPdfPage(n),!(r<this.scale)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(i)))}_reduceImage(t){const{ctx:i,canvas:n}=this._getPageDrawContext();if(t.width<=2*n.width)return i.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n;let r=n.width<<MAX_NUM_SCALING_STEPS,s=n.height<<MAX_NUM_SCALING_STEPS;const[a,c]=TempImageFactory.getCanvas(r,s);for(;r>t.width||s>t.height;)r>>=1,s>>=1;for(c.drawImage(t,0,0,t.width,t.height,0,0,r,s);r>2*n.width;)c.drawImage(a,0,0,r,s,0,0,r>>1,s>>1),r>>=1,s>>=1;return i.drawImage(a,0,0,r,s,0,0,n.width,n.height),n}get _thumbPageTitle(){var t;return this.l10n.get("thumb_page_title",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}get _thumbPageCanvas(){var t;return this.l10n.get("thumb_page_canvas",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}setPageLabel(t){this.pageLabel=typeof t=="string"?t:null}}var _PDFThumbnailViewer_instances,_PDFThumbnailViewer_ensurePdfPageLoaded,_PDFThumbnailViewer_getScrollAhead;const THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected";class PDFThumbnailViewer{constructor({container:t,eventBus:i,linkService:n,renderingQueue:r,l10n:s,pageColors:a,store:c,thumbnailWidth:f}){_PDFThumbnailViewer_instances.add(this),this.container=t,this.eventBus=i,this.linkService=n,this.renderingQueue=r,this.l10n=s,this.pageColors=a||null,this._thumbnails=[],this._currentPageNumber=0,this._pagesRotation=0,this._pageLabels=[],this.pdfDocument=null,this.store=c,this.thumbnailWidth=f,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(t){return this._thumbnails[t]}_getVisibleThumbs(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument)return;const i=this._thumbnails[t-1];if(!i){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}t!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),i.div.classList.add(THUMBNAIL_SELECTED_CLASS));const n=this._getVisibleThumbs(),{first:r,last:s,views:a}=n;if(a.length>0){let c=!1;if(t<=r.id||t>=(s==null?void 0:s.id))c=!0;else for(const{id:f,percent:u}of a)if(f===t){c=u<100;break}c&&scrollIntoView(i.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=t,this.forceRendering()}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!isValidRotation(t))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===t)return;this._pagesRotation=t;const i={rotation:t};for(const n of this._thumbnails)n.update(i)}cleanup(){for(const t of this._thumbnails)t.renderingState!==RenderingStates.FINISHED&&t.reset();TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=[],this._pagesRotation=0,this.container.textContent=""}setDocument(t){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=t,!t)return;const i=t.getPage(1),n=t.getOptionalContentConfig();i.then(r=>{var s;const a=t.numPages,c=r.getViewport({scale:1});for(let u=1;u<=a;++u){const l=new PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:u,defaultViewport:c.clone(),optionalContentConfigPromise:n,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors,store:this.store,thumbnailWidth:this.thumbnailWidth});this._thumbnails.push(l)}(s=this._thumbnails[0])===null||s===void 0||s.setPdfPage(r),this._thumbnails[this._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS),this.store.getState()._setThumbnailsViews(this._thumbnails)}).catch(r=>{console.error("Unable to initialize thumbnail viewer",r)})}_cancelRendering(){for(const t of this._thumbnails)t.cancelRendering()}setPageLabels(t){var i,n;if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=[],console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=[];for(let r=0,s=this._thumbnails.length;r<s;r++)this._thumbnails[r].setPageLabel((n=(i=this._pageLabels)===null||i===void 0?void 0:i[r])!==null&&n!==void 0?n:null)}}forceRendering(){const t=this._getVisibleThumbs(),i=__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_getScrollAhead).call(this,t),n=this.renderingQueue.getHighestPriority(t,this._thumbnails,i);return n?(__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_ensurePdfPageLoaded).call(this,n).then(()=>{this.renderingQueue.renderView(n)}),!0):!1}}_PDFThumbnailViewer_instances=new WeakSet,_PDFThumbnailViewer_ensurePdfPageLoaded=function e(t){var i;return __awaiter(this,void 0,void 0,function*(){if(t!=null&&t.pdfPage)return t.pdfPage;try{const n=yield(i=this.pdfDocument)===null||i===void 0?void 0:i.getPage(t.id);return t!=null&&t.pdfPage||t.setPdfPage(n),n}catch(n){return console.error("Unable to get page for thumb view",n),null}})},_PDFThumbnailViewer_getScrollAhead=function e(t){var i,n;return((i=t.first)===null||i===void 0?void 0:i.id)===1?!0:((n=t.last)===null||n===void 0?void 0:n.id)===this._thumbnails.length?!1:this.scroll.down};var _OverlayManager_overlays,_OverlayManager_active;class OverlayManager{constructor(){_OverlayManager_overlays.set(this,new WeakMap),_OverlayManager_active.set(this,null)}get active(){return __classPrivateFieldGet(this,_OverlayManager_active,"f")}register(t,i=!1){return __awaiter(this,void 0,void 0,function*(){if(typeof t!="object")throw new Error("Not enough parameters.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay is already registered.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").set(t,{canForceClose:i}),t.addEventListener("cancel",()=>{__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})})}unregister(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay cannot be removed while it is active.")}else throw new Error("The overlay does not exist.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").delete(t)})}open(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay is already active.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").get(t).canForceClose)yield this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");__classPrivateFieldSet(this,_OverlayManager_active,t,"f"),t.showModal()})}close(t=__classPrivateFieldGet(this,_OverlayManager_active,"f")){return __awaiter(this,void 0,void 0,function*(){if(!t||!__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay does not exist.");if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")!==t)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");t.close(),__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})}}_OverlayManager_overlays=new WeakMap,_OverlayManager_active=new WeakMap;function getXfaHtmlForPrinting(e,t){const i=t.allXfaHtml,n=new pdf_viewerExports.SimpleLinkService,r=Math.round(pdfExports.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const s of i==null?void 0:i.children){const a=document.createElement("div");a.className="xfaPrintedPage",e.append(a);const c=new pdf_viewerExports.XfaLayerBuilder({pageDiv:a,pdfPage:null,annotationStorage:t.annotationStorage,linkService:n,xfaHtml:s}),f=pdfExports.getXfaPageViewport(s,{scale:r});c.render(f,"print")}}let activeService=null,dialog=null,overlayManager=new OverlayManager;function renderPage(e,t,i,n,r,s,a){const c=activeService.scratchCanvas,f=r/pdfExports.PixelsPerInch.PDF;c.width=Math.floor(n.width*f),c.height=Math.floor(n.height*f);const u=c.getContext("2d");return u.save(),u.fillStyle="rgb(255, 255, 255)",u.fillRect(0,0,c.width,c.height),u.restore(),Promise.all([t.getPage(i),a]).then(function([l,m]){const p={canvasContext:u,transform:[f,0,0,f,0,0],viewport:l.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:pdfExports.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:s,printAnnotationStorage:m};return l.render(p).promise})}class PDFPrintService{constructor(t,i,n,r,s=null,a=null,c){this.pdfDocument=t,this.pagesOverview=i,this.printContainer=n,this._printResolution=r||150,this._optionalContentConfigPromise=s||t.getOptionalContentConfig(),this._printAnnotationStoragePromise=a||Promise.resolve(),this.l10n=c,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const t=document.querySelector("body");t==null||t.setAttribute("data-pdfjsprinting","true"),this.pagesOverview.every(r=>r.width===this.pagesOverview[0].width&&r.height===this.pagesOverview[0].height,this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");const n=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+n.width+"pt "+n.height+"pt;}",t==null||t.append(this.pageStyleSheet)}destroy(){if(activeService!==this)return;this.printContainer.textContent="";const t=document.querySelector("body");t==null||t.removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,activeService=null,ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)})}renderPages(){if(this.pdfDocument.isPureXfa)return getXfaHtmlForPrinting(this.printContainer,this.pdfDocument),Promise.resolve();const t=this.pagesOverview.length,i=(n,r)=>{if(this.throwIfInactive(),++this.currentPage>=t){renderProgress(t,t,this.l10n),n();return}const s=this.currentPage;renderProgress(s,t,this.l10n),renderPage(this,this.pdfDocument,s+1,this.pagesOverview[s],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){i(n,r)},r)};return new Promise(i)}useRenderedPage(){this.throwIfInactive();const t=document.createElement("img"),i=this.scratchCanvas;"toBlob"in i?i.toBlob(function(r){t.src=URL.createObjectURL(r)}):t.src=i.toDataURL();const n=document.createElement("div");return n.className="printedPage",n.append(t),this.printContainer.append(n),new Promise(function(r,s){t.onload=r,t.onerror=s})}performPrint(){return this.throwIfInactive(),new Promise(t=>{setTimeout(()=>{if(!this.active){t();return}print.call(window),setTimeout(t,20)},0)})}get active(){return this===activeService}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const print=window.print;window.print=function(){if(activeService){console.warn("Ignored window.print() because of a pending print job.");return}ensureOverlay().then(function(){activeService&&overlayManager.open(dialog)});try{dispatchEvent("beforeprint")}finally{if(!activeService){console.error("Expected print service to be initialized."),ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)});return}const e=activeService;activeService.renderPages().then(function(){return e.performPrint()}).catch(function(){}).then(function(){e.active&&abort()})}};function dispatchEvent(e){const t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom"),window.dispatchEvent(t)}function abort(){activeService&&(activeService.destroy(),dispatchEvent("afterprint"))}function renderProgress(e,t,i){dialog||(dialog=document.getElementById("printServiceDialog"));const n=Math.round(100*e/t),r=dialog.querySelector("progress"),s=dialog.querySelector(".relative-progress");r.value=n,i.get("print_progress_percent",{progress:n}).then(a=>{s.textContent=a})}window.addEventListener("keydown",function(e){e.keyCode===80&&(e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey&&(window.print(),e.preventDefault(),e.stopImmediatePropagation())},!0);if("onbeforeprint"in window){const e=function(t){t.detail!=="custom"&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",e),window.addEventListener("afterprint",e)}let overlayPromise;function ensureOverlay(){if(!overlayPromise){if(!overlayManager)throw new Error("The overlay manager has not yet been initialized.");dialog||(dialog=document.getElementById("printServiceDialog")),overlayPromise=overlayManager.register(dialog,!0),document.getElementById("printCancel").onclick=abort,dialog.addEventListener("close",abort)}return overlayPromise}const PDFPrintServiceFactory={instance:{supportsPrinting:!0,createPrintService(e,t,i,n,r,s,a){if(activeService)throw new Error("The print service is created and active.");return activeService=new PDFPrintService(e,t,i,n,r,s,a),activeService}}};var _PDFPresentationMode_instances,_PDFPresentationMode_state,_PDFPresentationMode_args,_PDFPresentationMode_mouseWheel,_PDFPresentationMode_notifyStateChange,_PDFPresentationMode_enter,_PDFPresentationMode_exit,_PDFPresentationMode_mouseDown,_PDFPresentationMode_contextMenu,_PDFPresentationMode_showControls,_PDFPresentationMode_hideControls,_PDFPresentationMode_resetMouseScrollState,_PDFPresentationMode_touchSwipe,_PDFPresentationMode_addWindowListeners,_PDFPresentationMode_removeWindowListeners,_PDFPresentationMode_fullscreenChange,_PDFPresentationMode_addFullscreenChangeListeners,_PDFPresentationMode_removeFullscreenChangeListeners;const DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6;class PDFPresentationMode{constructor({container:t,pdfViewer:i,eventBus:n}){_PDFPresentationMode_instances.add(this),_PDFPresentationMode_state.set(this,PresentationModeState.UNKNOWN),_PDFPresentationMode_args.set(this,null),this.container=t,this.pdfViewer=i,this.eventBus=n,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){return __awaiter(this,void 0,void 0,function*(){const{container:t,pdfViewer:i}=this;if(this.active||!i.pagesCount||!t.requestFullscreen)return!1;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.CHANGING);const n=t.requestFullscreen();__classPrivateFieldSet(this,_PDFPresentationMode_args,{pageNumber:i.currentPageNumber,scaleValue:i.currentScaleValue,scrollMode:i.scrollMode,spreadMode:null,annotationEditorMode:null},"f"),i.spreadMode!==SpreadMode.NONE&&!(i.pageViewsReady&&i.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode=i.spreadMode),i.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode=i.annotationEditorMode);try{return yield n,i.focus(),!0}catch{__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL)}return!1})}get active(){return __classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.CHANGING||__classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.FULLSCREEN}}_PDFPresentationMode_state=new WeakMap,_PDFPresentationMode_args=new WeakMap,_PDFPresentationMode_instances=new WeakSet,_PDFPresentationMode_mouseWheel=function e(t){if(!this.active)return;t.preventDefault();const i=normalizeWheelEventDelta(t),n=Date.now(),r=this.mouseScrollTimeStamp;if(!(n>r&&n-r<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&i<0||this.mouseScrollDelta<0&&i>0)&&__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.mouseScrollDelta+=i,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){const s=this.mouseScrollDelta;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),(s>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=n)}},_PDFPresentationMode_notifyStateChange=function e(t){__classPrivateFieldSet(this,_PDFPresentationMode_state,t,"f"),this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})},_PDFPresentationMode_enter=function e(){var t;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(()=>{this.pdfViewer.scrollMode=ScrollMode.PAGE,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode!==null&&(this.pdfViewer.spreadMode=SpreadMode.NONE),this.pdfViewer.currentPageNumber=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").pageNumber,this.pdfViewer.currentScaleValue="page-fit",__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).call(this),this.contextMenuOpen=!1,(t=window.getSelection())===null||t===void 0||t.removeAllRanges()},_PDFPresentationMode_exit=function e(){const t=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(()=>{var i;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL),this.pdfViewer.scrollMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scrollMode,((i=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f"))===null||i===void 0?void 0:i.spreadMode)!==null&&(this.pdfViewer.spreadMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode),this.pdfViewer.currentScaleValue=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scaleValue,this.pdfViewer.currentPageNumber=t,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode),__classPrivateFieldSet(this,_PDFPresentationMode_args,null,"f")},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_hideControls).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.contextMenuOpen=!1},_PDFPresentationMode_mouseDown=function e(t){var i;if(this.contextMenuOpen){this.contextMenuOpen=!1,t.preventDefault();return}t.button===0&&(t.target.href&&(!((i=t.target.parentNode)===null||i===void 0)&&i.hasAttribute("data-internal-link"))||(t.preventDefault(),t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},_PDFPresentationMode_contextMenu=function e(){this.contextMenuOpen=!0},_PDFPresentationMode_showControls=function e(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)},_PDFPresentationMode_hideControls=function e(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)},_PDFPresentationMode_resetMouseScrollState=function e(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},_PDFPresentationMode_touchSwipe=function e(t){if(this.active){if(t.touches.length>1){this.touchSwipeState=null;return}switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=t.touches[0].pageX,this.touchSwipeState.endY=t.touches[0].pageY,t.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let i=0;const n=this.touchSwipeState.endX-this.touchSwipeState.startX,r=this.touchSwipeState.endY-this.touchSwipeState.startY,s=Math.abs(Math.atan2(r,n));Math.abs(n)>SWIPE_MIN_DISTANCE_THRESHOLD&&(s<=SWIPE_ANGLE_THRESHOLD||s>=Math.PI-SWIPE_ANGLE_THRESHOLD)?i=n:Math.abs(r)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(s-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(i=r),i>0?this.pdfViewer.previousPage():i<0&&this.pdfViewer.nextPage();break}}},_PDFPresentationMode_addWindowListeners=function e(){this.showControlsBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).bind(this),this.mouseDownBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseDown).bind(this),this.mouseWheelBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseWheel).bind(this),this.resetMouseScrollStateBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).bind(this),this.contextMenuBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_contextMenu).bind(this),this.touchSwipeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},_PDFPresentationMode_removeWindowListeners=function e(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},_PDFPresentationMode_fullscreenChange=function e(){document.fullscreenElement?__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_enter).call(this):__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_exit).call(this)},_PDFPresentationMode_addFullscreenChangeListeners=function e(){this.fullscreenChangeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},_PDFPresentationMode_removeFullscreenChangeListeners=function e(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind};const initialState={isDocumentLoaded:!1,pagesReady:!1,url:null,numPages:0,pageNumber:0,scale:0,scaleValue:"auto",pagesRotation:0,spreadMode:SpreadMode.UNKNOWN,scrollMode:ScrollMode.UNKNOWN,documentOutline:null,attachments:new Map,thumbnails:new Map,thumbnailViews:new Map,annotationEditorMode:pdfExports.AnnotationEditorType.NONE,pdfSlick:null},create=()=>createStore((e,t)=>Object.assign(Object.assign({},initialState),{_setThumbnailView:(i,n)=>{const r=new Map(t().thumbnails),s=new Map(t().thumbnailViews),{canvasWidth:a,canvasHeight:c,scale:f,rotation:u,loaded:l,pageLabel:m,src:p=null}=n;s.set(i,n),r.set(i,{pageNumber:i,width:a,height:c,scale:f,rotation:u,loaded:l,pageLabel:m,src:p}),e({thumbnailViews:s,thumbnails:r})},_setThumbnailsViews:i=>{const n=new Map(i.map(s=>[s.id,s])),r=new Map(i.map(s=>{const{canvasWidth:a,canvasHeight:c,scale:f,rotation:u,loaded:l,pageLabel:m,src:p=null}=s;return[s.id,{pageNumber:s.id,width:a,height:c,scale:f,rotation:u,loaded:l,pageLabel:m,src:p}]}));e({thumbnailViews:n,thumbnails:r})}}));var _PDFSlick_instances,_PDFSlick_renderingQueue,_PDFSlick_container,_PDFSlick_viewerContainer,_PDFSlick_thumbsContainer,_PDFSlick_annotationMode,_PDFSlick_annotationEditorMode,_PDFSlick_initializePageLabels,_PDFSlick_parseDocumentInfo,_PDFSlick_parsePageSize,_PDFSlick_initInternalEventListeners,_PDFSlick_onDocumentReady,_PDFSlick_onRotationChanging,_PDFSlick_onSwitchSpreadMode,_PDFSlick_onSwitchScrollMode,_PDFSlick_onScaleChanging,_PDFSlick_onPageChanging,_PDFSlick_onPageRendered;pdfExports.GlobalWorkerOptions.workerSrc=`//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`;const US_PAGE_NAMES={"8.5x11":"Letter","8.5x14":"Legal"},METRIC_PAGE_NAMES={"297x420":"A3","210x297":"A4"};function getPageName(e,t,i){const n=t?e.width:e.height,r=t?e.height:e.width;return i[`${n}x${r}`]}class PDFSlick{constructor({container:t,viewer:i,thumbs:n,store:r=create(),options:s}){var a,c,f,u,l,m,p,_,g,P,v,L,F;_PDFSlick_instances.add(this),_PDFSlick_renderingQueue.set(this,void 0),_PDFSlick_container.set(this,void 0),_PDFSlick_viewerContainer.set(this,void 0),_PDFSlick_thumbsContainer.set(this,void 0),this.downloadManager=null,this.findController=null,this.pdfPresentationMode=null,this.document=null,_PDFSlick_annotationMode.set(this,void 0),_PDFSlick_annotationEditorMode.set(this,void 0),__classPrivateFieldSet(this,_PDFSlick_container,t,"f"),__classPrivateFieldSet(this,_PDFSlick_viewerContainer,i,"f"),__classPrivateFieldSet(this,_PDFSlick_thumbsContainer,n,"f"),this.l10n=(a=s==null?void 0:s.l10n)!==null&&a!==void 0?a:pdf_viewerExports.NullL10n,this.downloadManager=new pdf_viewerExports.DownloadManager,this.textLayerMode=(c=s==null?void 0:s.textLayerMode)!==null&&c!==void 0?c:TextLayerMode.ENABLE,__classPrivateFieldSet(this,_PDFSlick_annotationMode,(f=s==null?void 0:s.annotationMode)!==null&&f!==void 0?f:pdfExports.AnnotationMode.ENABLE_FORMS,"f"),__classPrivateFieldSet(this,_PDFSlick_annotationEditorMode,(u=s==null?void 0:s.annotationEditorMode)!==null&&u!==void 0?u:pdfExports.AnnotationEditorType.NONE,"f"),this.removePageBorders=(l=s==null?void 0:s.removePageBorders)!==null&&l!==void 0?l:!1,this.singlePageViewer=(m=s==null?void 0:s.singlePageViewer)!==null&&m!==void 0?m:!1,this.enablePrintAutoRotate=(p=s==null?void 0:s.enablePrintAutoRotate)!==null&&p!==void 0?p:!1,this.useOnlyCssZoom=(_=s==null?void 0:s.useOnlyCssZoom)!==null&&_!==void 0?_:!1,this.pageColors=(g=s==null?void 0:s.pageColors)!==null&&g!==void 0?g:null,this.maxCanvasPixels=(P=s==null?void 0:s.maxCanvasPixels)!==null&&P!==void 0?P:16777216,this.printResolution=(v=s==null?void 0:s.printResolution)!==null&&v!==void 0?v:96,this.thumbnailWidth=(L=s==null?void 0:s.thumbnailWidth)!==null&&L!==void 0?L:125,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.l10n=pdf_viewerExports.NullL10n,this.store=r;const w=new PDFRenderingQueue;w.onIdle=this._cleanup.bind(this),w.isThumbnailViewEnabled=!0,__classPrivateFieldSet(this,_PDFSlick_renderingQueue,w,"f");const x=new pdf_viewerExports.EventBus,h=new pdf_viewerExports.PDFLinkService({eventBus:x,externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",ignoreDestinationZoom:!1}),d=Object.assign(Object.assign({container:t},i&&{viewer:i}),{eventBus:x,linkService:h,renderingQueue:w,defaultRenderingQueue:!0,textLayerMode:this.textLayerMode,l10n:this.l10n,annotationMode:__classPrivateFieldGet(this,_PDFSlick_annotationMode,"f"),annotationEditorMode:__classPrivateFieldGet(this,_PDFSlick_annotationEditorMode,"f"),removePageBorders:this.removePageBorders,imageResourcesPath:"/images/",useOnlyCssZoom:this.useOnlyCssZoom}),M=this.singlePageViewer?new pdf_viewerExports.PDFSinglePageViewer(d):new pdf_viewerExports.PDFViewer(d);w.setViewer(M),n&&(this.thumbnailViewer=new PDFThumbnailViewer({container:n,eventBus:x,linkService:h,renderingQueue:w,l10n:this.l10n,pageColors:this.pageColors,store:r,thumbnailWidth:this.thumbnailWidth}),w.setThumbnailViewer(this.thumbnailViewer)),document.fullscreenEnabled&&(this.pdfPresentationMode=new PDFPresentationMode({container:t,pdfViewer:M,eventBus:x})),this.eventBus=x,this.linkService=h,this.viewer=M,this.linkService.setViewer(M);const E=(F=s==null?void 0:s.scaleValue)!==null&&F!==void 0?F:"auto";this.store.setState({scaleValue:E})}loadDocument(t,i){var n,r,s,a,c;return __awaiter(this,void 0,void 0,function*(){if(this.url&&typeof this.url=="string")try{URL.revokeObjectURL(this.url)}catch{}(n=this.document)===null||n===void 0||n.destroy(),(r=this.viewer)===null||r===void 0||r.cleanup(),t instanceof URL?this.url=t.toString():this.url=t;const f=(s=i==null?void 0:i.filename)!==null&&s!==void 0?s:pdfExports.getPdfFilenameFromUrl((a=this.url)===null||a===void 0?void 0:a.toString());this.filename=f;const u=yield pdfExports.getDocument(t).promise;this.document=u,this.viewer.setDocument(this.document),this.linkService.setDocument(this.document),this.thumbnailViewer&&((c=this.thumbnailViewer)===null||c===void 0||c.setDocument(u)),__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initInternalEventListeners).call(this),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initializePageLabels).call(this),this.store.setState({filename:f,numPages:u.numPages,pageNumber:1,isDocumentLoaded:!0,url:t.toString()});const l=yield u.getAttachments(),m=new Map(Object.keys(l??{}).sort((p,_)=>p.toLowerCase().localeCompare(_.toLowerCase())).map(p=>[p,l[p]]));this.store.setState({attachments:m}),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parseDocumentInfo).call(this),this.forceRendering()})}forceRendering(t=!0){__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").printing=!!this.printService,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").isThumbnailViewEnabled=t,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").renderHighestPriority()}gotoPage(t){this.linkService.goToPage(t)}openOrDownloadData(t,i,n){var r;(r=this.downloadManager)===null||r===void 0||r.openOrDownloadData(t,i,n)}download(){var t,i;return __awaiter(this,void 0,void 0,function*(){const n=this.url,{filename:r}=this;try{const s=yield this.document.getData(),a=new Blob([s],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(a,n,r,{})}catch{yield(i=this.downloadManager)===null||i===void 0?void 0:i.downloadUrl(n,r,{})}})}save(){var t;return __awaiter(this,void 0,void 0,function*(){const i=this.url,{filename:n}=this;try{const r=yield this.document.saveDocument(),s=new Blob([r],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(s,i,n,{})}catch(r){console.error(`Error when saving the document: ${r.message}`),yield this.download()}finally{}})}downloadOrSave(){var t;const{annotationStorage:i}=(t=this.document)!==null&&t!==void 0?t:{};i&&i.size>0?this.save():this.download()}get supportsPrinting(){return PDFPrintServiceFactory.instance.supportsPrinting}beforePrint(){if(this.printService||!this.supportsPrinting)return;if(!this.viewer.pageViewsReady){this.l10n.get("printing_not_ready").then(a=>{window.alert(a)});return}const t=this.viewer.getPagesOverview(),i=document.getElementById("printContainer"),n=this.printResolution,r=this.viewer.optionalContentConfigPromise,s=PDFPrintServiceFactory.instance.createPrintService(this.document,t,i,n,r,null,this.l10n);this.printService=s,this.forceRendering(),s.layout()}afterPrint(){var t;this.printService&&(this.printService.destroy(),this.printService=null,(t=this.document)===null||t===void 0||t.annotationStorage.resetModified()),this.forceRendering()}requestPresentationMode(){var t;(t=this.pdfPresentationMode)===null||t===void 0||t.request()}triggerPrinting(){this.supportsPrinting&&window.print()}_cleanup(){var t;if(this.document)try{this.viewer.cleanup(),(t=this.thumbnailViewer)===null||t===void 0||t.cleanup(),this.document.cleanup()}catch(i){console.error("Unable to perform cleanup",i)}}setAnnotationEditorMode(t){this.viewer.annotationEditorMode={mode:t},this.store.setState({annotationEditorMode:t})}setAnnotationEditorParams(t){const i=Array.isArray(t)?t:[t];for(const n of i)this.viewer.annotationEditorParams=n}setSpreadMode(t){isValidSpreadMode(t)&&(this.viewer.spreadMode=t,this.dispatch("switchspreadmode",{mode:t}))}setScrollMode(t){isValidScrollMode(t)&&(this.viewer.scrollMode=t,this.dispatch("switchscrollmode",{mode:t}))}setRotation(t){isValidRotation(t)&&(this.viewer.pagesRotation=t)}getPagesOverview(){var t,i;try{return(i=(t=this.viewer)===null||t===void 0?void 0:t.getPagesOverview())!==null&&i!==void 0?i:[]}catch{return[]}}increaseScale(){this.viewer.increaseScale()}decreaseScale(){this.viewer.decreaseScale()}set currentScaleValue(t){this.viewer.currentScaleValue=t}set currentScale(t){this.viewer.currentScale=t}getPageView(t){return this.viewer.getPageView(t)}on(t,i,n){this.eventBus.on(t,i,n)}off(t,i,n){this.eventBus.off(t,i,n)}dispatch(t,i){this.eventBus.dispatch(t,i)}}_PDFSlick_renderingQueue=new WeakMap,_PDFSlick_container=new WeakMap,_PDFSlick_viewerContainer=new WeakMap,_PDFSlick_thumbsContainer=new WeakMap,_PDFSlick_annotationMode=new WeakMap,_PDFSlick_annotationEditorMode=new WeakMap,_PDFSlick_instances=new WeakSet,_PDFSlick_initializePageLabels=function e(){var t;return __awaiter(this,void 0,void 0,function*(){const n=(t=yield this.document.getPageLabels())!==null&&t!==void 0?t:[],r=n.length;let s=0,a=0;for(let u=0;u<r;u++){const l=n[u];if(l===(u+1).toString())s++;else if(l==="")a++;else break}if(s>=r||a>=r)return;const{viewer:c,thumbnailViewer:f}=this;c.setPageLabels(n),f==null||f.setPageLabels(n)})},_PDFSlick_parseDocumentInfo=function e(){return __awaiter(this,void 0,void 0,function*(){const{info:t,contentLength:i}=yield this.document.getMetadata(),n=yield this.document.getPage(this.store.getState().pageNumber).then(r=>__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parsePageSize).call(this,getPageSizeInches(r),0));this.store.setState({filesize:i,title:t.Title,author:t.Author,subject:t.Subject,keywords:t.Keywords,creator:t.Creator,producer:t.Producer,version:t.PDFFormatVersion,creationDate:pdfExports.PDFDateString.toDateObject(t.CreationDate),modificationDate:pdfExports.PDFDateString.toDateObject(t.ModDate),isLinearized:t.IsLinearized,pageSize:n})})},_PDFSlick_parsePageSize=function e(t,i){return __awaiter(this,void 0,void 0,function*(){if(!t)return;i%180!==0&&(t={width:t.height,height:t.width});const n=isPortraitOrientation(t);let r={width:Math.round(t.width*100)/100,height:Math.round(t.height*100)/100},s={width:Math.round(t.width*25.4*10)/10,height:Math.round(t.height*25.4*10)/10},a=getPageName(r,n,US_PAGE_NAMES)||getPageName(s,n,METRIC_PAGE_NAMES);if(!a&&!(Number.isInteger(s.width)&&Number.isInteger(s.height))){const p={width:t.width*25.4,height:t.height*25.4},_={width:Math.round(s.width),height:Math.round(s.height)};Math.abs(p.width-_.width)<.1&&Math.abs(p.height-_.height)<.1&&(a=getPageName(_,n,METRIC_PAGE_NAMES),a&&(r={width:Math.round(_.width/25.4*100)/100,height:Math.round(_.height/25.4*100)/100},s=_))}const[{width:c,height:f},u,l,m]=yield Promise.all([r,this.l10n.get("document_properties_page_size_unit_inches"),a&&this.l10n.get(`document_properties_page_size_name_${a.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${n?"portrait":"landscape"}`)]);return{width:c.toLocaleString(),height:f.toLocaleString(),unit:u,name:l,orientation:m}})},_PDFSlick_initInternalEventListeners=function e(){this.eventBus._on("pagesinit",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onDocumentReady).bind(this)),this.eventBus._on("scalechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onScaleChanging).bind(this)),this.eventBus._on("pagechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageChanging).bind(this)),this.eventBus._on("pagerendered",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageRendered).bind(this)),this.eventBus._on("rotationchanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onRotationChanging).bind(this)),this.eventBus._on("switchspreadmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchSpreadMode).bind(this)),this.eventBus._on("switchscrollmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchScrollMode).bind(this)),this.eventBus._on("beforeprint",this.beforePrint.bind(this)),this.eventBus._on("afterprint",this.afterPrint.bind(this)),window.onbeforeprint=t=>{this.eventBus.dispatch("beforeprint",{source:window})},window.onafterprint=t=>{this.eventBus.dispatch("afterprint",{source:window})}},_PDFSlick_onDocumentReady=function e({source:t}){var i;return __awaiter(this,void 0,void 0,function*(){const n=yield(i=this.document)===null||i===void 0?void 0:i.getOutline(),r=this.store.getState().scaleValue;t.currentScale=1,t.currentScaleValue="auto",this.store.setState({documentOutline:n,pageNumber:1,scaleValue:r,pagesReady:!0})})},_PDFSlick_onRotationChanging=function e({pagesRotation:t,pageNumber:i}){this.store.setState({pagesRotation:t}),this.thumbnailViewer&&(this.thumbnailViewer.pagesRotation=t),this.forceRendering(),this.viewer.currentPageNumber=i},_PDFSlick_onSwitchSpreadMode=function e({mode:t}){this.store.setState({spreadMode:t})},_PDFSlick_onSwitchScrollMode=function e({mode:t}){this.store.setState({scrollMode:t})},_PDFSlick_onScaleChanging=function e({scale:t,presetValue:i}){this.store.setState({scale:t,scaleValue:i}),this.viewer.update()},_PDFSlick_onPageChanging=function e({pageNumber:t}){var i;(i=this.thumbnailViewer)===null||i===void 0||i.scrollThumbnailIntoView(t),this.store.setState({pageNumber:t})},_PDFSlick_onPageRendered=function e({pageNumber:t,error:i}){var n;if(__classPrivateFieldGet(this,_PDFSlick_thumbsContainer,"f")){const r=this.viewer.getPageView(t-1),s=(n=this.thumbnailViewer)===null||n===void 0?void 0:n.getThumbnail(t-1);r&&s&&s.setImage(r)}};var ELEMENT_SIZE_FALLBACK={width:null,height:null};function getElementSize(e){if(!e)return{...ELEMENT_SIZE_FALLBACK};const{width:t,height:i}=e.getBoundingClientRect();return{width:t,height:i}}function createElementSize(e){const t=typeof e=="function",[i,n]=createStaticStore(t?ELEMENT_SIZE_FALLBACK:getElementSize(e)),r=new ResizeObserver(([s])=>n(getElementSize(s.target)));return onCleanup(()=>r.disconnect()),t?createEffect(()=>{const s=e();s&&(n(getElementSize(s)),r.observe(s),onCleanup(()=>r.unobserve(s)))}):(r.observe(e),onCleanup(()=>r.unobserve(e))),i}var _tmpl$$1$1=template('<div id=viewerContainer><div id=viewer class="pdfSlickViewer pdfViewer">');function PDFSlickViewer(e){const[t,i]=createSignal(),n=createElementSize(t);return createEffect(()=>{var r;n.width&&n.height&&(e.store.pdfSlick&&(e.store.scaleValue==="auto"||e.store.scaleValue==="page-fit"||e.store.scaleValue==="page-width")&&(e.store.pdfSlick.viewer.currentScaleValue=e.store.scaleValue),(r=e.store.pdfSlick)==null||r.viewer.update())}),(()=>{var r=_tmpl$$1$1();return use(s=>{e.viewerRef(s),i(s)},r),r.style.setProperty("position","absolute"),r.style.setProperty("inset","0"),createRenderEffect(()=>className(r,`pdfSlickContainer ${e.class??""}`)),r})()}var _tmpl$$a=template("<div>");function PDFSlickThumbnails(e){const[t,i]=createSignal(),n=createElementSize(t);return createEffect(()=>{var r;n.width&&n.height&&((r=e.store.pdfSlick)==null||r.forceRendering())}),(()=>{var r=_tmpl$$a();return use(s=>{e.thumbsRef(s),i(s)},r),r.style.setProperty("position","absolute"),r.style.setProperty("overflow","auto"),r.style.setProperty("inset","0"),insert(r,createComponent(For,{get each(){return Array.from(e.store.thumbnailViews)},children:([s,a])=>createComponent(Portal,{get mount(){return a.div},get children(){return e.children({pageNumber:s,width:a.canvasWidth,height:a.canvasHeight,scale:a.scale,src:(a==null?void 0:a.src)??null,rotation:a.rotation,pageLabel:a.pageLabel,loaded:a.loaded})}})})),createRenderEffect(s=>{var a=e.class??"",c=e.classList??{};return a!==s.e&&className(r,s.e=a),s.t=classList(r,c,s.t),s},{e:void 0,t:void 0}),r})()}function useStore(e,t=e.getState,i){const n=t(e.getState()),[r,s]=createStore$1(n),a=(f,u)=>{const l=t(u),m=t(f);i!==void 0&&i(l,m)||s(reconcile(m))},c=e.subscribe(a);return onCleanup(()=>c()),r}const usePDFSlick=(e,t)=>{const[i,n]=createSignal(!1),[r,s]=createSignal(!1),[a,c]=createSignal(null),[f,u]=createSignal(null),[l,m]=createSignal(null),p=create(),_=useStore(p),g=v=>{c(v),s(!0)},P=v=>{u(v)};return createEffect(()=>{if(e&&r()){const v=new PDFSlick({container:a(),thumbs:f(),store:p,options:t});m(v),p.setState({pdfSlick:v}),v.loadDocument(e,t).then(()=>n(!0))}}),{isDocumentLoaded:i,viewerRef:g,thumbsRef:P,pdfSlick:l,pdfSlickStore:_,PDFSlickViewer,PDFSlickThumbnails}};var _tmpl$$9=template("<div class=pdf-viewer-wrapper>");function PDFViewer(e){const{viewerRef:t,pdfSlickStore:i,PDFSlickViewer:n}=usePDFSlick(e.pdfFilePath,{});return(()=>{var r=_tmpl$$9();return r.style.setProperty("position","relative"),r.style.setProperty("height","500px"),insert(r,createComponent(n,{store:i,viewerRef:t})),r})()}const demoPdf="/zasudi-solid/assets/demo-BKTSgfO1.pdf";var _tmpl$$8=template("<div>"),_tmpl$2$7=template("<div>Unknown item."),_tmpl$3$6=template("<tr><td colspan=2>Неосновательное обогащение:</td><td colspan=8>"),_tmpl$4$5=template("<div><table><thead><tr><th rowspan=2 colspan=1>Долг</th><th colspan=2>Период начисления</th><th colspan=2>Периоды</th><th colspan=2>Процент</th><th rowspan=2>Формула</th><th colspan=2>Начислено</th></tr><tr><th>с</th><th>по</th><th>%</th><th>неуст.</th><th>польз.</th><th>неуст.</th><th>процент</th><th>неустойка</th></tr></thead><tbody><tr><td colspan=7></td><td>Итого:</td><td></td><td></td></tr><tr><td colspan=2>Долг:</td><td colspan=8></td></tr><tr><td colspan=2></td><td colspan=8>"),_tmpl$5$4=template("<tr class=checkpoint><td>. </td><td><br></td><td><br></td><td></td><td></td><td></td><td></td><td></td><td></td><td>");function Demo(){const[e,t]=createSignal("raschet"),i=()=>{switch(e()){case"raschet":return;case"prilojenie":return"Приложения";case"pdf":return"Заявление о вынесении судебного приказа";default:return"Unknown item"}};return(()=>{var n=_tmpl$$8();return insert(n,createComponent(QuestionSection,{get question(){return i()},get children(){return createComponent(Switch,{get fallback(){return _tmpl$2$7()},get children(){return[createComponent(Match,{get when(){return e()==="raschet"},get children(){return createComponent(Raschet,{checkpoints:testCheckpoints,result:testResult})}}),createComponent(Match,{get when(){return e()==="prilojenie"},get children(){return createComponent(Prilojenie,{})}}),createComponent(Match,{get when(){return e()==="pdf"},get children(){return createComponent(PdfThing,{})}})]}})}}),null),insert(n,createComponent(QuestionSection,{get children(){return createComponent(ListBox,{items:[{text:"Расчёт исковых требований ",value:"raschet"},{text:"Приложения",value:"prilojenie"},{text:"Заявление о вынесении судебного приказа",value:"pdf"}],get value(){return e()},setValue:t})}}),null),n})()}function Prilojenie(){const[e,t]=createSignal("");return(()=>{var i=_tmpl$$8();return insert(i,createComponent(TextField,{icon:"no-space",label:"Наименование",get value(){return e()},setValue:t}),null),insert(i,createComponent(BigGreenButton,{thin:!0,text:"Добавить приложение",onClick:()=>{}}),null),createRenderEffect(()=>className(i,demo["demo-name"])),i})()}function PdfThing(){return createComponent(PDFViewer,{pdfFilePath:demoPdf})}function round(e){return e.toFixed(2)}function roundTemplate(e,...t){return e.map(i=>{const n=t.shift();if(n===void 0)return i;if(n==0||typeof n!="number")return i+n;if(n){const r=n.toFixed(2);return+r.split(".")[1]>0?i+r:i+n}else return i}).join("")}function Raschet(e){const[t,i]=createSignal("2023-02-01"),[n,r]=createSignal(!1);return[(()=>{var s=_tmpl$$8();return insert(s,createComponent(BigGreenButton,{thin:!0,text:"Расчёт",onClick:()=>{}}),null),insert(s,createComponent(BigGreenButton,{thin:!0,text:"Документ",onClick:()=>{}}),null),createRenderEffect(()=>className(s,demo["raschet-buttons"])),s})(),createComponent(QuestionSection,{question:"Демонстрация расчёта исковых требований",noPaddingTop:!0,get children(){var s=_tmpl$4$5(),a=s.firstChild,c=a.firstChild,f=c.nextSibling,u=f.firstChild,l=u.firstChild,m=l.nextSibling,p=m.nextSibling,_=p.nextSibling,g=u.nextSibling,P=g.firstChild,v=P.nextSibling,L=g.nextSibling,F=L.firstChild,w=F.nextSibling;return insert(f,createComponent(For,{get each(){return e.checkpoints},children:(x,h)=>createComponent(TableRow,{value:x,get i(){return h()}})}),u),insert(p,()=>round(e.result.percent)),insert(_,()=>round(e.result.fee)),insert(v,()=>roundTemplate`${e.result.debt+e.result.enrichment.value} + ${e.result.percent} + ${e.result.fee} = ${e.result.final+e.result.enrichment.value}`),insert(F,()=>`Госпошлина (${["arb","sou"][e.result.courtType]}):`),insert(w,()=>roundTemplate`${e.result.gosposhlina.formula} = ${e.result.gosposhlina.amount}`),insert(f,createComponent(Show,{get when(){return e.result.enrichment.value>=50},get children(){var x=_tmpl$3$6(),h=x.firstChild,d=h.nextSibling;return insert(d,()=>roundTemplate`${e.result.enrichment.formula} = ${e.result.enrichment.value}`),createRenderEffect(()=>className(x,demo.final)),x}}),null),createRenderEffect(x=>{var h=demo["rounded-fix"],d=demo["calculator-table"],M=demo.total,E=demo.final,y=demo.final;return h!==x.e&&className(s,x.e=h),d!==x.t&&className(a,x.t=d),M!==x.a&&className(u,x.a=M),E!==x.o&&className(g,x.o=E),y!==x.i&&className(L,x.i=y),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s}}),createComponent(TextField,{type:"date",label:"Предполагаемая дата подачи иска",get value(){return t()},setValue:i}),createComponent(Checkbox,{label:"Рассчитать неустойку по ставке ЦБ, в случае если размер неустойки слишком велик",get value(){return n()},setValue:r})]}function TableRow(e){const t=()=>{let a=e.value,c=a.info.type;if(c==="payment"){let f=a;f.info.amountIncrease>=f.info.amountDecrease?c+="-increase":c+="-decrease"}return c},i=()=>{const a=e.value;return a.debt??a.enrichment??0},n=(a,c,f)=>a.info.oneDay?"":a.percentDisabled&&(c==="percent"||c==="percentPeriod")||a.feeDisabled&&(c==="fee"||c==="feePeriod")?"-":(f==null?void 0:f.toString())??"",r=a=>{const c={percent:"%",money:"р."},f={day:"д",week:"н",month:"м",year:"г",all:"весь"};try{return`${a.amount}${c[a.type]}/${f[a.period]}`}catch{return"err"}},s=a=>a.includes("T")&&a.includes("Z")?new Date(a).toLocaleDateString("ru"):a;return(()=>{var a=_tmpl$5$4(),c=a.firstChild,f=c.firstChild,u=c.nextSibling,l=u.firstChild,m=u.nextSibling,p=m.firstChild,_=m.nextSibling,g=_.nextSibling,P=g.nextSibling,v=P.nextSibling,L=v.nextSibling,F=L.nextSibling,w=F.nextSibling;return insert(c,()=>e.i,f),insert(c,i,null),insert(u,()=>s(e.value.from),l),insert(m,()=>s(n(e.value,"to",e.value.to)),p),insert(_,()=>s(n(e.value,"percentPeriod",e.value.percentPeriod))),insert(g,()=>n(e.value,"feePeriod",e.value.feePeriod)),insert(P,()=>n(e.value,"percent",r(e.value.percentData))),insert(v,()=>n(e.value,"fee",r(e.value.feeData))),insert(L,()=>e.value.formula),insert(F,()=>round(e.value.calculatedPercent)),insert(w,()=>round(e.value.calculatedFee)),createRenderEffect(()=>setAttribute(a,"data-type",t())),a})()}const testCheckpoints=[{from:"2015-01-01T00:00:00.000Z",terminated:!1,enrichment:0,info:{type:"start",oneDay:!1},debt:0,to:"2018-01-09T00:00:00.000Z",percentPeriod:36,feePeriod:1105,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:10.5,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:1,formula:"0 x 36 x 10% ",calculatedPercent:0,calculatedFee:0},{from:"2022-07-24T21:00:00.000Z",enrichment:0,terminated:!1,info:{terminated:!1,rate:8,type:"rate",oneDay:!1},debt:0,to:"2023-01-31T00:00:00.000Z",percentPeriod:6,feePeriod:191,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 x 6 x 10% + 0 x 191 / 365 x 8%",calculatedPercent:0,calculatedFee:0},{from:"2018-01-10T00:00:00.000Z",terminated:!1,enrichment:0,info:{type:"deadline",oneDay:!1},debt:0,to:"2018-02-10T21:00:00.000Z",percentPeriod:1,feePeriod:33,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8.25,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 x 1 x 10% + 0 x 33 / 365 x 8.25%",calculatedPercent:0,calculatedFee:0},{from:"2023-12-31T21:00:00.000Z",terminated:!1,enrichment:4e5,info:{type:"leapYear",oneDay:!1},debt:1e5,to:"2024-04-23T09:51:47.308Z",percentPeriod:3,feePeriod:114,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"100000 x 3 x 10% + 100000 x 114 / 366 x 8%",calculatedPercent:3e4,calculatedFee:2491.8032786885246},{from:"2023-02-01T00:00:00.000Z",terminated:!1,enrichment:4e5,info:{amountIncrease:5e5,amountDecrease:0,type:"payment",oneDay:!0},debt:1e5,to:null,percentPeriod:null,feePeriod:null,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"0 + 500000 = 500000 ",calculatedPercent:0,calculatedFee:0},{from:"2023-02-01T00:00:00.000Z",terminated:!1,enrichment:4e5,info:{type:"synthetic",oneDay:!1},debt:1e5,to:"2023-12-30T21:00:00.000Z",percentPeriod:10,feePeriod:334,percentData:{amount:10,type:"percent",period:"month",rateAffected:!1},feeData:{amount:8,type:"percent",period:"year",rateAffected:!0,one300th:!1},percentDisabled:0,feeDisabled:0,formula:"100000 x 10 x 10% + 100000 x 334 / 365 x 8%",calculatedPercent:1e5,calculatedFee:7320.54794520548}],testResult={debt:1e5,debtBeforeTermination:1e5,percent:13e4,fee:9812.351223894004,final:239812.35122389402,gosposhlina:{amount:15796.247024477881,formula:"7000 + (639812.35 - 200000) x 0.02"},courtType:1,enrichment:{formula:"500000 - 100000",value:4e5},startDate:"2015-01-01T00:00:00.000Z",endDate:"2018-01-09T00:00:00.000Z",haltDate:"2024-04-23T09:51:47.308Z"},account={"screen-toggle":"_screen-toggle_v78yv_1","social-buttons":"_social-buttons_v78yv_19"},googleIcon="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.65607%2011.3123L1.54646%208.36233C0.55916%2010.3575%205.85938e-05%2012.6076%200%2014.9999C0%2017.359%200.565137%2019.613%201.56762%2021.6259L6.65572%2018.6883C6.15387%2017.5583%205.86951%2016.3119%205.86957%2014.9999C5.86963%2013.688%206.15416%2012.442%206.65607%2011.3123ZM24.8394%203.67782C22.2032%201.38481%2018.7585%20-0.00251611%2014.9896%203.42595e-06C9.83332%200.00346046%205.23102%202.63584%202.52697%206.66938L7.64074%209.62192C9.30369%207.35352%2011.979%205.86952%2015.0002%205.86957C17.2025%205.86963%2019.2214%206.6569%2020.7983%207.96143C21.1843%208.28071%2021.7485%208.25147%2022.1027%207.89727L24.8878%205.11225C25.2894%204.71065%2025.2679%204.05047%2024.8394%203.67782ZM29.8973%2013.2645C29.8389%2012.7679%2029.4214%2012.392%2028.9215%2012.392L16.6305%2012.3914C16.0903%2012.3914%2015.6522%2012.8293%2015.6522%2013.3696V17.2794C15.6522%2017.8197%2016.0902%2018.2577%2016.6305%2018.2577H23.5181C22.8837%2019.9088%2021.7818%2021.3282%2020.3789%2022.36L23.3044%2027.4271C26.2491%2025.4316%2028.488%2022.4146%2029.4741%2018.853C30.0103%2016.9165%2030.1068%2015.044%2029.8973%2013.2645ZM18.6873%2023.3426C17.5591%2023.8453%2016.3136%2024.1304%2015.0002%2024.1305C11.9756%2024.1306%209.30182%2022.6465%207.64004%2020.379L2.54807%2023.3189C5.22943%2027.3127%209.78018%2030%2015.0001%2030C17.3597%2030%2019.6057%2029.4231%2021.6146%2028.413L18.6873%2023.3426Z'%20fill='%231C4681'/%3e%3c/svg%3e",vkIcon="/zasudi-solid/assets/vk-BL0sNE1B.svg",mailruIcon="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.5118%2015C19.5118%2017.4879%2017.4879%2019.5118%2015%2019.5118C12.5121%2019.5118%2010.4882%2017.4879%2010.4882%2015C10.4882%2012.5121%2012.5121%2010.4882%2015%2010.4882C17.4879%2010.4882%2019.5118%2012.5121%2019.5118%2015ZM15%200C6.72857%200%200%206.72857%200%2015C0%2023.2714%206.72857%2030%2015%2030C18.03%2030%2020.9518%2029.0979%2023.4493%2027.3911L23.4921%2027.3611L21.4714%2025.0125L21.4371%2025.0339C19.515%2026.2714%2017.2886%2026.925%2015%2026.925C8.42464%2026.925%203.075%2021.5754%203.075%2015C3.075%208.42464%208.42464%203.075%2015%203.075C21.5754%203.075%2026.925%208.42464%2026.925%2015C26.925%2015.8518%2026.8296%2016.7143%2026.6443%2017.5629C26.2671%2019.1111%2025.1829%2019.5846%2024.3696%2019.5225C23.5511%2019.4561%2022.5932%2018.8732%2022.5868%2017.4461V16.3586V15C22.5868%2010.8161%2019.1839%207.41321%2015%207.41321C10.8161%207.41321%207.41321%2010.8161%207.41321%2015C7.41321%2019.1839%2010.8161%2022.5868%2015%2022.5868C17.0325%2022.5868%2018.9386%2021.7929%2020.3754%2020.3475C21.2111%2021.6482%2022.5729%2022.4636%2024.1232%2022.5879C24.2561%2022.5986%2024.3921%2022.6039%2024.5261%2022.6039C25.6179%2022.6039%2026.6989%2022.2386%2027.5711%2021.5775C28.47%2020.8939%2029.1418%2019.9071%2029.5125%2018.7211C29.5714%2018.5293%2029.6807%2018.0911%2029.6807%2018.0879L29.6839%2018.0718C29.9025%2017.1204%2030%2016.1721%2030%2015C30%206.72857%2023.2714%200%2015%200Z'%20fill='%231C4681'/%3e%3c/svg%3e",lockIcon="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.04585%206.00736V8.09563H3.9069C3.03236%208.09563%202.32129%208.8067%202.32129%209.68124V18.4144C2.32129%2019.2889%203.03236%2020%203.9069%2020H16.0933C16.9678%2020%2017.6789%2019.2889%2017.6789%2018.4144V9.67716C17.6789%208.80262%2016.9678%208.09154%2016.0933%208.09154H16.0524V6.00327C16.0524%202.69309%2013.3593%200%2010.0491%200C6.73894%200.00408664%204.04585%202.69718%204.04585%206.00736ZM10.94%2014.434C10.8174%2014.5239%2010.7847%2014.6097%2010.7847%2014.7528C10.7888%2015.3944%2010.7888%2016.0319%2010.7888%2016.6735C10.8011%2016.9391%2010.6662%2017.2007%2010.4292%2017.3192C9.86931%2017.6052%209.30944%2017.2047%209.30944%2016.6735V16.6694C9.30944%2016.0278%209.30944%2015.3862%209.31352%2014.7446C9.31352%2014.6138%209.28492%2014.528%209.17049%2014.4422C8.59019%2014.0131%208.39812%2013.2816%208.68827%2012.64C8.97025%2012.0147%209.66089%2011.6469%2010.3107%2011.7777C11.034%2011.9248%2011.5367%2012.5051%2011.5448%2013.2284C11.5448%2013.7311%2011.3446%2014.1398%2010.94%2014.434ZM6.67356%206.00736C6.67356%204.14385%208.1897%202.63179%2010.0491%202.63179C11.9126%202.63179%2013.4247%204.14794%2013.4247%206.00736V8.09563H6.67356V6.00736Z'%20fill='%231C4681'/%3e%3c/svg%3e";var _tmpl$$7=template("<div>"),_tmpl$2$6=template("<div><button><img>Вход</button><button><img>Регистрация"),_tmpl$3$5=template("<button><img>");function Account(){const[e,t]=createSignal("login");return(()=>{var i=_tmpl$$7();return insert(i,createComponent(ScreenToggle,{get screen(){return e()},setScreen:t}),null),insert(i,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return e()==="login"},get children(){return createComponent(Login,{})}}),createComponent(Match,{get when(){return e()==="register"},get children(){return createComponent(Register,{})}})]}}),null),i})()}function ScreenToggle(e){return(()=>{var t=_tmpl$2$6(),i=t.firstChild,n=i.firstChild,r=i.nextSibling,s=r.firstChild;return i.$$click=()=>e.setScreen("login"),setAttribute(n,"src",userIcon),r.$$click=()=>e.setScreen("register"),setAttribute(s,"src",lockIcon),createRenderEffect(a=>{var c=account["screen-toggle"],f=e.screen==="login",u=e.screen==="register";return c!==a.e&&className(t,a.e=c),f!==a.t&&setAttribute(i,"data-active",a.t=f),u!==a.a&&setAttribute(r,"data-active",a.a=u),a},{e:void 0,t:void 0,a:void 0}),t})()}function Login(){const[e,t]=createSignal(""),[i,n]=createSignal("");return(()=>{var r=_tmpl$$7();return insert(r,createComponent(QuestionSection,{question:"Войти с помощью других ресурсов",get children(){var s=_tmpl$$7();return insert(s,createComponent(SocialButton,{icon:googleIcon,onClick:()=>{}}),null),insert(s,createComponent(SocialButton,{icon:vkIcon,onClick:()=>{}}),null),insert(s,createComponent(SocialButton,{icon:mailruIcon,onClick:()=>{}}),null),createRenderEffect(()=>className(s,account["social-buttons"])),s}}),null),insert(r,createComponent(QuestionSection,{question:"Или используйте номер телефона",get children(){return[createComponent(TextField,{icon:"no-space",label:"Телефон",get value(){return e()},setValue:t}),createComponent(TextField,{icon:"no-space",label:"Пароль",get value(){return i()},setValue:n})]}}),null),r})()}function Register(){const[e,t]=createSignal(""),[i,n]=createSignal(""),[r,s]=createSignal(!1);return(()=>{var a=_tmpl$$7();return insert(a,createComponent(QuestionSection,{question:"Регистрация",get children(){return[createComponent(TextField,{icon:"no-space",label:"Телефон",get value(){return e()},setValue:t}),createComponent(TextField,{icon:"no-space",label:"Пароль",get value(){return i()},setValue:n}),createComponent(TextField,{icon:"no-space",label:"Подтверждение пароля",get value(){return i()},setValue:n}),createComponent(Checkbox,{label:"Согласен с условиями",get value(){return r()},setValue:s}),(()=>{var c=_tmpl$$7();return insert(c,createComponent(BigGreenButton,{text:"Зарегистрироваться",onClick:()=>{}})),createRenderEffect(()=>className(c,account[""])),c})()]}})),a})()}function SocialButton(e){return(()=>{var t=_tmpl$3$5(),i=t.firstChild;return t.$$click=()=>e.onClick(),createRenderEffect(()=>setAttribute(i,"src",e.icon)),t})()}delegateEvents(["click"]);var _tmpl$$6=template("<button><div></div><div>"),_tmpl$2$5=template("<div>"),_tmpl$3$4=template("<h1>TODO"),_tmpl$4$4=template("<div><div><div id=navbar-portal-mobile></div></div><div><h2></h2><div>"),_tmpl$5$3=template("<h1><div></div><div>");function FlowProgressCrumb(e){return(()=>{var t=_tmpl$$6(),i=t.firstChild,n=i.nextSibling;return t.$$click=()=>e.onClick(),insert(i,()=>e.index+1),insert(n,()=>e.text),createRenderEffect(r=>classList(t,{[flow["flow-crumb"]]:!0,active:e.active()},r)),t})()}function FlowCrumbs(e){return(()=>{var t=_tmpl$2$5();return insert(t,createComponent(For,{get each(){return Object.entries(e.crumbs)},children:([i,n],r)=>{const[s,a]=e.crumbSignal,[c,f]=e.subcrumbSignal;return createComponent(FlowProgressCrumb,{text:i,get index(){return r()},active:()=>s()===r(),subcrumb:c,get subcrumbCount(){return n.length},onClick:()=>{f(0),a(r())}})}})),createRenderEffect(()=>className(t,flow["flow-progress-wrapper"])),t})()}function FlowPlaceholder(){return _tmpl$3$4()}function DocumentFlow(){const[e,t]=createSignal(0),[i,n]=createSignal(0),r={Займодавец:[["",Account],[Zaimodavec]],Заёмщик:[[Zaemshik]],Договор:[[Dogovor]],"Срок возврата":[[SrokVozvrata]],Проценты:[[Fee]],Неустойка:[[Penalty]],Доказательства:[[Proofs]],Суд:[[Court]],Демо:[[Demo],[FlowPlaceholder],[FlowPlaceholder]]},s=Object.entries(r),a=s.map(([p,_])=>_.length);s.reduce((p,[_,g])=>p+g.length,0);const c=()=>{const p=i(),_=s[e()][1].length;p===_-1?(n(0),t(g=>g+1)):n(g=>g+1)},f=()=>{if(i()===0){const _=e();t(_-1),n(a[_-1]-1)}else n(_=>_-1)},u=()=>{const p=s[e()][1][i()][0];return typeof p=="string"?p:s[e()][0]},l=()=>{const p=s[e()][1][i()];return typeof p[0]=="string"?p[1]:p[0]},m=createMediaQuery("(width < 1266px)");return[createComponent(Portal,{ref:p=>(p.style.display="contents",p.className="portal-wrap"),get mount(){return createMemo(()=>!!m())()?document.getElementById("navbar-portal-mobile"):document.getElementById("navbar-portal")},get children(){return createComponent(FlowCrumbs,{crumbs:r,crumbSignal:[e,t],subcrumbSignal:[i,n]})}}),(()=>{var p=_tmpl$4$4(),_=p.firstChild,g=_.firstChild,P=_.nextSibling,v=P.firstChild,L=v.nextSibling;return g.style.setProperty("display","contents"),insert(_,createComponent(Show,{get when(){return!m()},get children(){return createComponent(UserHelper,{})}}),null),insert(P,createComponent(Show,{get when(){return m()},get children(){return createComponent(UserHelper,{})}}),v),insert(v,u),insert(P,createComponent(ErrorBoundary,{fallback:(F,w)=>createComponent(Rethrower,{err:F,reset:w}),get children(){return createComponent(DocumentProvider,{get initialDocument(){return unproxifyDeep(new FlowType)},get children(){return[createComponent(CourtReactToFlow,{}),createComponent(Dynamic,{get component(){return l()}})]}})}}),L),insert(L,createComponent(Show,{get when(){return e()>0},get children(){return createComponent(BigGreenButton,{text:"Назад",get class(){return flow["flow-back-button"]},onClick:f})}}),null),insert(L,createComponent(Show,{get when(){return createMemo(()=>e()<s.length)()&&i()<=a[e()]-1},get children(){return createComponent(BigGreenButton,{text:"Сохранить и продолжить",onClick:c})}}),null),createRenderEffect(F=>{var w=flow["flow-page"],x=flow["flow-left-side"],h=flow["flow-right-side"],d=flow["flow-control-buttons"];return w!==F.e&&className(p,F.e=w),x!==F.t&&className(_,F.t=x),h!==F.a&&className(P,F.a=h),d!==F.o&&className(L,F.o=d),F},{e:void 0,t:void 0,a:void 0,o:void 0}),p})()]}function Rethrower(e){return onMount(()=>{throw e.err}),(()=>{var t=_tmpl$5$3(),i=t.firstChild,n=i.nextSibling;return insert(i,()=>e.err.toString()),n.style.setProperty("height","0.5em"),insert(t,createComponent(BigGreenButton,{text:"Clear error",onClick:()=>e.reset()}),null),t})()}delegateEvents(["click"]);const auth={"auth-form":"_auth-form_194dp_1","password-wrapper":"_password-wrapper_194dp_23","password-strength-indicator":"_password-strength-indicator_194dp_61","password-strength-indicator-bar":"_password-strength-indicator-bar_194dp_73","button-wrapper":"_button-wrapper_194dp_113","proceed-button":"_proceed-button_194dp_129","change-action-link":"_change-action-link_194dp_151","phone-confirm-form":"_phone-confirm-form_194dp_171","code-check-suspense":"_code-check-suspense_194dp_191"};var _tmpl$$5=template("<div>Неверный логин или пароль"),_tmpl$2$4=template("<div>Вы уже вошли"),_tmpl$3$3=template("<div>Что-то пошло не так"),_tmpl$4$3=template("<form><label><input type=checkbox>Запомнить меня</label><div><button>Войти");function LogIn(){const[e,t]=createSignal(""),[i,n]=createSignal(""),[r,s]=createSignal(!1),[a,c]=createSignal("not-attempted"),[f,u]=useAuth(),l=async(m,p,_)=>{await fetch(BACKEND_URL+"/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:m,password:p,remember_me:_}),credentials:"include"}).then(g=>g.status).then(g=>{g===200?(u(),c("ok")):g===304?(u(),console.log("already logged in"),c("already")):g===401?(console.log("invalid phone or password (or no account)"),c("invalid")):(console.log("something went wrong"),c("fail"))})};return(()=>{var m=_tmpl$4$3(),p=m.firstChild,_=p.firstChild,g=p.nextSibling,P=g.firstChild;return m.addEventListener("submit",v=>{v.preventDefault(),c("not-attempted"),l(e(),i(),r())}),insert(m,createComponent(TextField,{type:"tel",label:"Телефон",example:"+7 012 345 67 89",pattern:"(8|\\+7)? ?[0-9]{3} ?[0-9]{3} ?[0-9]{2} ?[0-9]{2}",get value(){return e()},setValue:t}),p),insert(m,createComponent(TextField,{type:"password",label:"Пароль",get value(){return i()},setValue:n}),p),_.addEventListener("change",v=>s(v.currentTarget.checked)),insert(g,createComponent(A,{get class(){return auth["change-action-link"]},href:"/sign-up",children:"Зарегестрироваться"}),P),insert(m,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return a()==="ok"},get children(){return createComponent(Navigate,{href:"/"})}}),createComponent(Match,{get when(){return a()==="invalid"},get children(){return _tmpl$$5()}}),createComponent(Match,{get when(){return a()==="already"},get children(){return _tmpl$2$4()}}),createComponent(Match,{get when(){return a()==="fail"},get children(){return _tmpl$3$3()}})]}}),null),createRenderEffect(v=>{var L=auth["auth-form"],F=auth["button-wrapper"],w=auth["proceed-button"];return L!==v.e&&className(m,v.e=L),F!==v.t&&className(g,v.t=F),w!==v.a&&className(P,v.a=w),v},{e:void 0,t:void 0,a:void 0}),createRenderEffect(()=>_.checked=r()),m})()}const showPasswordIcon="/zasudi-solid/assets/view-C-7VnmhL.png",hidePasswordIcon="/zasudi-solid/assets/hide-CcLQG700.png";var _tmpl$$4=template("<form><div></div><div><button><img></button></div><div><div></div></div><div>"),_tmpl$2$3=template("<form><div></div><p>На ваш телефон <strong>(<!>)</strong> был отправлен четырёхзначный код подтверждения. Пожалуйста, введите его в поле ниже.");function SignUpComponents(){useAuth();const e=createSignal("+7 012 345 67 89");return[createComponent(Route,{path:"/sign-up",component:()=>createComponent(Navigate,{href:"/sign-up/credentials"})}),createComponent(Route,{path:"/sign-up/credentials",component:()=>createComponent(SignUpCredentials,{phone:e})}),createComponent(Route,{path:"/sign-up/confirm",component:()=>createComponent(SignUpConfirm,{phone:e})})]}function SignUpCredentials(e){const[t,i]=createSignal(""),[n,r]=createSignal(!1),s=createResource(e.phone[0],async f=>new Promise(u=>{setTimeout(()=>{u(!1)},500)})),a=6,c=createMemo(()=>{const f=t();let u=0,l="bad";return f.length<8?[.05,l]:(f.match(/[A-Z]/)&&u++,f.match(/[a-z]/)&&u++,f.match(/[0-9]/)&&u++,f.match(/[^0-9a-zA-Z]/)&&u++,f.length>18&&u++,f.length>11&&u++,u<2?l="bad":u<4?l="normal":l="good",[u/a,l])});return(()=>{var f=_tmpl$$4(),u=f.firstChild,l=u.nextSibling,m=l.firstChild,p=m.firstChild,_=l.nextSibling,g=_.firstChild,P=_.nextSibling;return f.$$click=v=>{v.target===v.currentTarget&&v.preventDefault()},insert(f,createComponent(TextField,{type:"tel",label:"Телефон",example:"+7 012 345 67 89",pattern:"((8|\\+7) )?[0-9]{3} ?[0-9]{3} ?[0-9]{2} ?[0-9]{2}",get value(){return e.phone[0]()},get setValue(){return e.phone[1]}}),u),insert(u,createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return s[0].loading},children:"..."}),createComponent(Match,{get when(){return!s[0].loading},get children(){return s[0]()?"Пользователь уже существует":"ок"}})]}})),insert(l,createComponent(TextField,{get type(){return n()?"text":"password"},label:"Пароль",get value(){return t()},setValue:i}),m),m.$$click=()=>r(v=>!v),insert(P,createComponent(A,{get class(){return auth["change-action-link"]},href:"/log-in",children:"Войти"}),null),insert(P,createComponent(A,{href:"/sign-up/confirm",get class(){return auth["proceed-button"]},children:"Зарегестрироваться"}),null),createRenderEffect(v=>{var L=auth["auth-form"],F=auth["password-wrapper"],w=n()?showPasswordIcon:hidePasswordIcon,x=n()?"Показать пароль":"Скрыть пароль",h=auth["password-strength-indicator"],d=c()[0],M={[auth["password-strength-indicator-bar"]]:!0,[c()[1]]:!0},E=auth["button-wrapper"];return L!==v.e&&className(f,v.e=L),F!==v.t&&className(l,v.t=F),w!==v.a&&setAttribute(p,"src",v.a=w),x!==v.o&&setAttribute(p,"alt",v.o=x),h!==v.i&&className(_,v.i=h),d!==v.n&&((v.n=d)!=null?_.style.setProperty("--password-strength-percentage",d):_.style.removeProperty("--password-strength-percentage")),v.s=classList(g,M,v.s),E!==v.h&&className(P,v.h=E),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),f})()}function SignUpConfirm(e){const[t,i]=createSignal(""),n=createResource(()=>t().length===4?t():"",async r=>new Promise(s=>setTimeout(()=>{s(),console.log("code ",r)},1e3)));return(()=>{var r=_tmpl$2$3(),s=r.firstChild,a=s.nextSibling,c=a.firstChild,f=c.nextSibling,u=f.firstChild,l=u.nextSibling;return l.nextSibling,insert(f,()=>e.phone[0](),l),insert(r,createComponent(TextField,{type:"number",label:"Код подтверждения",pattern:"[0-9]{4}",get value(){return t().substring(0,4)},setValue:i}),null),createRenderEffect(m=>{var p=`${auth["auth-form"]} ${auth["phone-confirm-form"]}`,_=auth["code-check-suspense"],g=!!n[0].loading;return p!==m.e&&className(r,m.e=p),_!==m.t&&className(s,m.t=_),g!==m.a&&s.classList.toggle("active",m.a=g),m},{e:void 0,t:void 0,a:void 0}),r})()}delegateEvents(["click"]);var _tmpl$$3=template("<div>");function FlowWidth(e){return(()=>{var t=_tmpl$$3();return insert(t,()=>e.children),createRenderEffect(i=>{var n=flow["flow-width"],r=e.center?"auto":void 0;return n!==i.e&&className(t,i.e=n),r!==i.t&&((i.t=r)!=null?t.style.setProperty("margin",r):t.style.removeProperty("margin")),i},{e:void 0,t:void 0}),t})()}const mydocuments={"control-wrapper":"_control-wrapper_17qfj_1","document-display-header":"_document-display-header_17qfj_29","document-display-header-item":"_document-display-header-item_17qfj_41","document-display-body":"_document-display-body_17qfj_49","document-display-grid":"_document-display-grid_17qfj_63","document-display-grid-checked":"_document-display-grid-checked_17qfj_135"};var _tmpl$$2=template("<div>"),_tmpl$2$2=template("<div><div><div></div><div>Название</div><div>Дата создания</div><div>Дата последнего изменения"),_tmpl$3$2=template("<div><h3>Пусто"),_tmpl$4$2=template("<div><div><input type=radio></div><div></div><div></div><div></div><button><img src=/src/assets/menu.svg>"),_tmpl$5$2=template("<h1>Мои документы");function DocumentDisplay(e){const t=()=>e.documents?Object.values(e.documents):[];return(()=>{var i=_tmpl$2$2(),n=i.firstChild;return insert(i,createComponent(Show,{get when(){return t().length!==0},get fallback(){return(()=>{var r=_tmpl$3$2(),s=r.firstChild;return s.style.setProperty("text-align","center"),r})()},get children(){var r=_tmpl$$2();return insert(r,createComponent(For,{get each(){return t()},children:(s,a)=>(()=>{var c=_tmpl$4$2(),f=c.firstChild,u=f.firstChild,l=f.nextSibling,m=l.nextSibling,p=m.nextSibling,_=p.nextSibling;return c.$$click=()=>e.setCurrentDocument(s.uid),insert(l,()=>s.name),insert(m,()=>new Date(s.created*1e3).toLocaleString("ru-RU")),insert(p,()=>new Date(s.changed*1e3).toLocaleString("ru-RU")),_.$$click=()=>e.deleteDocument(s.uid),createRenderEffect(g=>{var P=mydocuments["document-display-grid"],v=mydocuments["document-display-grid-checked"];return P!==g.e&&className(c,g.e=P),v!==g.t&&className(f,g.t=v),g},{e:void 0,t:void 0}),createRenderEffect(()=>u.checked=e.currentDocument===s.uid),c})()})),createRenderEffect(()=>className(r,mydocuments["document-display-body"])),r}}),null),createRenderEffect(r=>{var s=mydocuments["document-display"],a=mydocuments["document-display-header"]+" "+mydocuments["document-display-grid"];return s!==r.e&&className(i,r.e=s),a!==r.t&&className(n,r.t=a),r},{e:void 0,t:void 0}),i})()}function MyDocuments(){const[e,t]=useAuth();createEffect(()=>console.log("userData",e()));const i=()=>e().userData.documents?Object.values(e().userData.documents)[0].uid:null,[n,r]=createSignal(i()),s=async()=>{let c=null;for(;c===""||c===null;)if(c=prompt("Название"),c===null)return;await fetch("http://localhost:3001/flow/new-document",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:c})}).then(f=>f.json()).then(f=>{console.log("new document",f),t()}).catch(f=>{console.log(f)})},a=async c=>{const f=n();await fetch("http://localhost:3001/flow/delete-document",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({document_uid:c})}).then(u=>(console.log("deleted document",u.status),f===c&&r(i()),t(),u)).catch(u=>{console.log(u)})};return createComponent(FlowWidth,{center:!0,get children(){return[_tmpl$5$2(),(()=>{var c=_tmpl$$2();return insert(c,createComponent(BigGreenButton,{text:"Создать +",onClick:s})),createRenderEffect(()=>className(c,mydocuments["control-wrapper"])),c})(),createComponent(Show,{get when(){return n()},get children(){return createComponent(DocumentDisplay,{get currentDocument(){return n()},setCurrentDocument:r,deleteDocument:a,get documents(){return e().userData.documents}})}})]}})}delegateEvents(["click"]);var _tmpl$$1=template("<h1>Учётная запись"),_tmpl$2$1=template("<div>Номер телефона: "),_tmpl$3$1=template("<div>Документы: <!> создано (<!>)"),_tmpl$4$1=template("<br>"),_tmpl$5$1=template("<button>Выйти");function Profile(){const[e,t]=useAuth();return createComponent(FlowWidth,{center:!0,get children(){return[_tmpl$$1(),(()=>{var i=_tmpl$2$1();return i.firstChild,insert(i,()=>e().userData.phone,null),i})(),(()=>{var i=_tmpl$3$1(),n=i.firstChild,r=n.nextSibling,s=r.nextSibling,a=s.nextSibling;return a.nextSibling,insert(i,()=>Object.values(e().userData.documents).length,r),insert(i,createComponent(A,{href:"/documents",children:"Перейти к документам"}),a),i})(),_tmpl$4$1(),(()=>{var i=_tmpl$5$1();return i.$$click=()=>{fetch(BACKEND_URL+"/user/logout",{method:"POST",credentials:"include"}).then(()=>{t()})},i})()]}})}delegateEvents(["click"]);var _tmpl$=template("<div>"),_tmpl$2=template("<nav><div id=navbar-portal></div><div class=right-section></div><a tabindex=0 class=skip-to-content href=#main-content>Skip to content"),_tmpl$3=template("<main class=style-wrapper id=main-content>"),_tmpl$4=template("<footer class=copyright-banner>Все права защищены. Zasudi© 2019-2024"),_tmpl$5=template("<h1>Not found");function Navbar(){const[e]=useAuth();return createEffect(()=>{console.log("useAuth",e())}),(()=>{var t=_tmpl$2(),i=t.firstChild,n=i.nextSibling;return insert(t,createComponent(A,{href:"/",get children(){return createComponent(ZasudiLogo,{class:"logo",scale:.8})}}),i),i.style.setProperty("display","contents"),insert(n,createComponent(Show,{get when(){return e().loggedIn},get fallback(){return[(()=>{var r=_tmpl$();return insert(r,createComponent(A,{href:"/sign-up",children:"Создать аккаунт"})),r})(),(()=>{var r=_tmpl$();return insert(r,createComponent(A,{href:"/log-in",children:"Войти"})),r})()]},get children(){return[(()=>{var r=_tmpl$();return insert(r,createComponent(A,{href:"/documents",children:"Мои документы"})),r})(),(()=>{var r=_tmpl$();return insert(r,createComponent(A,{href:"/profile",get children(){return e().userData.phone}})),r})()]}})),t})()}const initUserData=(e,t)=>({loggedIn:e,userData:e?{phone:t.phone,documents:t.documents}:{}}),BACKEND_URL="http://localhost:3001",AuthContext=createContext();function useAuth(){return useContext(AuthContext)}function App(){const e=async()=>{const s=await fetch(BACKEND_URL+"/user/user-data",{method:"GET",credentials:"include"}).then(async a=>[a.status,await a.text()]).then(([a,c])=>{console.log("status",a);const f=a===200;return initUserData(f,f?JSON.parse(c):null)}).catch(a=>(a instanceof SyntaxError?console.log("invalid json",a):console.log("other error",a),initUserData(!1,null)));return console.log("authenficated",s),s},[t,i]=createSignal(null),n=()=>{e().then(s=>i(s))};n();let r=!1;return createEffect(()=>{!r&&t()&&(r=!0),r&&!t()&&console.error("user data is null again")}),createComponent(Show,{get when(){return t()},get children(){return createComponent(AuthContext.Provider,{value:[t,n],get children(){return[createComponent(Navbar,{}),(()=>{var s=_tmpl$3();return insert(s,createComponent(Routes,{get children(){return[createComponent(Route,{path:"/",component:LandingPage}),createComponent(Route,{path:"/document-flow",component:DocumentFlow}),createComponent(SignUpComponents,{}),createComponent(Route,{path:"/log-in",get element(){return createMemo(()=>!!t().loggedIn)()?createComponent(Navigate,{href:"/"}):createComponent(LogIn,{})}}),createComponent(Route,{path:"/profile",get element(){return createMemo(()=>!t().loggedIn)()?createComponent(Navigate,{href:"/log-in"}):createComponent(Profile,{})}}),createComponent(Route,{path:"/documents",get element(){return createMemo(()=>!t().loggedIn)()?createComponent(Navigate,{href:"/log-in"}):createComponent(MyDocuments,{})}}),createComponent(Route,{path:"*",get element(){return(()=>{var a=_tmpl$5();return a.style.setProperty("text-align","center"),a})()}})]}})),s})(),_tmpl$4()]}})}})}const root=document.getElementById("root");function clickOutside(e,t){const i=n=>{var r;return!e.contains(n.target)&&((r=t())==null?void 0:r(n.target))};document.body.addEventListener("click",i),onCleanup(()=>document.body.removeEventListener("click",i))}render(()=>createComponent(Router,{base:"/",get source(){return hashIntegration()},get children(){return createComponent(App,{})}}),root);
