import{c as C,w as _,e as E,k as d,f as g,l as u,s as x,x as T,N as F,L as i,m as w,J as S,K as I,F as N,S as K,C as L,A as R,t as v}from"./index-BUGSF_1t.js";var b=v("<img alt=icon>"),k=v("<div>"),A=v("<div tabindex=-1>"),J=v("<div tabindex=0><div>"),M=v("<span>");function B(t){const s=()=>{let r;if(typeof t.value=="string"?r=t.items.find(e=>e.value===t.value):r=t.items[t.value],!r)throw console.error("DropdownSelect: value not found in item array:",t.value,t.items),Error(`DropdownSelect: value not found in item array: ${JSON.stringify(t.value)} ${JSON.stringify(t.items)}`);return r},[c,l]=C(!1),o=r=>{t.setValue(r),l(!1)},f=r=>{let e=!0,n=0;for(const a of r)a.value!==void 0?n++:e=!1;if(n!==r.length&&n!==0)throw console.error("DropdownSelect: all items or no items must be keyed.",n,"are keyed instead in",r),Error(`DropdownSelect: all items or no items must be keyed. ${n} out of ${r.length} are keyed instead.`);return e},D=_(()=>f(t.items),f(t.items)),h=()=>{var r;return((r=s())==null?void 0:r.icon)??t.defaultIcon};let y,m;E(()=>{if(!c()){const r=getComputedStyle(m).getPropertyValue("--dropdown-transition-duration");if(r==="")return;const n=(a=>a.includes("ms")?+a.replace("ms",""):a.includes("s")?+a.replace("s","")*1e3:null)(r);if(n===null)throw Error(`fix your css: '${r.toString()}'`);setTimeout(()=>{m.scrollTop=0},n)}});const O=r=>{c()&&!m.contains(r.relatedTarget)&&l(!1)};return(()=>{var r=k();return d(r,g(T,{get when(){return h()},get children(){var e=b();return u(()=>x(e,"src",h())),e}}),null),d(r,g(K,{shadow:!0,ref(e){var n=y;typeof n=="function"?n(e):y=e},onClick:e=>{e.target===e.currentTarget&&l(n=>!n),F(t.value)},onKeyDown:e=>{e.target===e.currentTarget&&(e.key==="Enter"||e.key===" ")&&(l(n=>!n),e.preventDefault())},tabIndex:0,get class(){return i["dropdown-select-item"]},get children(){return[(()=>{var e=k();return d(e,()=>{var n;return((n=s())==null?void 0:n.text)??"<undefined>"}),u(()=>w(e,i["dropdown-select-selected-text"])),e})(),(()=>{var e=A(),n=m;return typeof n=="function"?S(n,e):m=e,S(I,e,()=>a=>{c()&&a!==y&&l(!1)}),d(e,g(N,{get each(){return t.items},children:(a,$)=>g(P,{get icon(){return a.icon},get text(){return a.text},get selected(){return a===s()},get onClick(){return D()?()=>o(a.value):()=>o($())},get onFocusOut(){return $()===t.items.length-1||$()===0?O:void 0}})})),u(()=>w(e,i["dropdown-select-details"])),e})(),(()=>{var e=k();return u(()=>w(e,i["dropdown-select-caret"])),e})()]}}),null),u(e=>L(r,{[i["dropdown-select"]]:!0,open:c(),[i["dropdown-select-taller-rows"]]:t.tallerRows},e)),r})()}function P(t){return(()=>{var s=J(),c=s.firstChild;return s.$$focusout=l=>{var o;return(o=t.onFocusOut)==null?void 0:o.call(t,l)},s.$$click=()=>t.onClick(),d(s,(()=>{var l=_(()=>!!t.icon);return()=>l()?(()=>{var o=b();return u(()=>x(o,"src",t.icon)),o})():(()=>{var o=M();return o.style.setProperty("min-width","24px"),o})()})(),c),d(c,()=>t.text),u(l=>{var o=i["dropdown-select-item"],f=!!t.selected;return o!==l.e&&w(s,l.e=o),f!==l.t&&s.classList.toggle("selected",l.t=f),l},{e:void 0,t:void 0}),s})()}R(["click","focusout"]);export{B as D};
