import{h as C,z as _,k as E,i as d,l as g,c as u,p as k,S as F,a as w,H as b,I,F as T,b as N,d as R,t as m}from"./index-CQiPjXso.js";import{s as K,b as i,S as L}from"./DocumentFlow-BPOldJNx.js";var x=m("<img alt=icon>"),h=m("<div>"),M=m("<div tabindex=-1>"),A=m("<div tabindex=0><div>"),J=m("<span>");function B(t){const s=()=>{let r;if(typeof t.value=="string"?r=t.items.find(e=>e.value===t.value):r=t.items[t.value],!r)throw console.error("DropdownSelect: value not found in item array:",t.value,t.items),Error(`DropdownSelect: value not found in item array: ${JSON.stringify(t.value)} ${JSON.stringify(t.items)}`);return r},[c,l]=C(!1),a=r=>{t.setValue(r),l(!1)},f=r=>{let e=!0,n=0;for(const o of r)o.value!==void 0?n++:e=!1;if(n!==r.length&&n!==0)throw console.error("DropdownSelect: all items or no items must be keyed.",n,"are keyed instead in",r),Error(`DropdownSelect: all items or no items must be keyed. ${n} out of ${r.length} are keyed instead.`);return e},D=_(()=>f(t.items),f(t.items)),S=()=>{var r;return((r=s())==null?void 0:r.icon)??t.defaultIcon};let y,v;E(()=>{if(!c()){const r=getComputedStyle(v).getPropertyValue("--dropdown-transition-duration");if(r==="")return;const n=(o=>o.includes("ms")?+o.replace("ms",""):o.includes("s")?+o.replace("s","")*1e3:null)(r);if(n===null)throw Error(`fix your css: '${r.toString()}'`);setTimeout(()=>{v.scrollTop=0},n)}});const O=r=>{c()&&!v.contains(r.relatedTarget)&&l(!1)};return(()=>{var r=h();return d(r,g(F,{get when(){return S()},get children(){var e=x();return u(()=>k(e,"src",S())),e}}),null),d(r,g(L,{shadow:!0,ref(e){var n=y;typeof n=="function"?n(e):y=e},onClick:e=>{e.target===e.currentTarget&&l(n=>!n)},onKeyDown:e=>{e.target===e.currentTarget&&(e.key==="Enter"||e.key===" ")&&(l(n=>!n),e.preventDefault())},onFocus:()=>K(t.value),tabIndex:0,get class(){return i["dropdown-select-item"]},get children(){return[(()=>{var e=h();return d(e,()=>{var n;return((n=s())==null?void 0:n.text)??"<undefined>"}),u(()=>w(e,i["dropdown-select-selected-text"])),e})(),(()=>{var e=M(),n=v;return typeof n=="function"?b(n,e):v=e,b(I,e,()=>o=>{c()&&o!==y&&l(!1)}),d(e,g(T,{get each(){return t.items},children:(o,$)=>g(P,{get icon(){return o.icon},get text(){return o.text},get selected(){return o===s()},get onClick(){return D()?()=>a(o.value):()=>a($())},get onFocusOut(){return $()===t.items.length-1||$()===0?O:void 0}})})),u(()=>w(e,i["dropdown-select-details"])),e})(),(()=>{var e=h();return u(()=>w(e,i["dropdown-select-caret"])),e})()]}}),null),u(e=>{var n=t.disabled?!0:void 0,o={[i["dropdown-select"]]:!0,open:c(),[i["dropdown-select-taller-rows"]]:t.tallerRows};return n!==e.e&&k(r,"data-disabled",e.e=n),e.t=N(r,o,e.t),e},{e:void 0,t:void 0}),r})()}function P(t){return(()=>{var s=A(),c=s.firstChild;return s.$$focusout=l=>{var a;return(a=t.onFocusOut)==null?void 0:a.call(t,l)},s.$$click=()=>t.onClick(),d(s,(()=>{var l=_(()=>!!t.icon);return()=>l()?(()=>{var a=x();return u(()=>k(a,"src",t.icon)),a})():(()=>{var a=J();return a.style.setProperty("min-width","24px"),a})()})(),c),d(c,()=>t.text),u(l=>{var a=i["dropdown-select-item"],f=!!t.selected;return a!==l.e&&w(s,l.e=a),f!==l.t&&s.classList.toggle("selected",l.t=f),l},{e:void 0,t:void 0}),s})()}R(["click","focusout"]);export{B as D};
