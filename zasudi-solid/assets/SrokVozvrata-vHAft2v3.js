import{i as o,l as t,C as w,M as v,t as y,c as S,a as z,h as _,z as b,S as q}from"./index-CJwTej7D.js";import{Q as d,T as i}from"./TextField-BlZifFvP.js";import{D as $}from"./DropdownSelect-BN9pC9ke.js";import{u as C,d as c,r as U,V as E,W as F,X as H,Y as N,Z as M,_ as R,$ as O,B as m,a0 as T}from"./DocumentFlow-DLrAGQ6P.js";import{c as B,p as I,D as G}from"./Proofs-BylrPJIM.js";import{R as D}from"./RadioGroup-A9oWCaRG.js";import{C as x}from"./Checkbox-BrUttJ43.js";const L={"period-grid":"_period-grid_xztcy_1"};var k=y("<div>"),Q=y("<h3>Будет добавлено <!> <!>.");function re(e,l){let a;switch(e.type){case"date":a=new Date(e.date);break;case"period":const n=+e.period,u=e.periodUnit,h={day:1,week:7,month:30,year:365};if(isNaN(n)||!(u in h))return null;a=new Date(l.getTime()+n*h[u]);break;case"hire":a=new Date;break;case"not-specified":a=null;break;case"on-demand":a=new Date;break;default:a=null;break}return a===null||isNaN(a.valueOf())?null:a}function le(){const[e,l]=C(),a=(n,u)=>l("srokVozvrata",n,U(u));return(()=>{var n=k();return o(n,t(d,{get children(){return t(D,{items:[{label:"Сумма займа подлежит единовременному возврату до конкретной даты",value:"date"},{label:"Сумма займа предоставлена на опредлённый срок",value:"period"},{label:"Договором предусмотрена рассрочка возврата займа",value:"hire"},{label:"В договоре отсутствует условие о сроке (дате) возврата займа",value:"not-specified"},{label:"Срок возврата займа определён моментом востребования",value:"on-demand"}],get value(){return e.srokVozvrata.type},setValue:u=>{switch(u){case"date":l("srokVozvrata",c(new M));break;case"period":l("srokVozvrata",c(new N));break;case"hire":l("srokVozvrata",c(new H));break;case"not-specified":l("srokVozvrata",c(new F));break;case"on-demand":l("srokVozvrata",c(new E));break;default:throw new Error("Unknown srokVozvrata type")}},get children(){return t(w,{get children(){return[t(v,{get when(){return e.srokVozvrata.type==="date"},get children(){return t(d,{get children(){return t(W,{get value(){return e.srokVozvrata},setValue:a})}})}}),t(v,{get when(){return e.srokVozvrata.type==="period"},get children(){return t(d,{get children(){return t(X,{get value(){return e.srokVozvrata},setValue:a})}})}}),t(v,{get when(){return e.srokVozvrata.type==="hire"},get children(){return t(d,{get children(){return t(Y,{get value(){return e.srokVozvrata},setValue:a})}})}}),t(v,{get when(){return e.srokVozvrata.type==="on-demand"},get children(){return t(d,{get children(){return t(Z,{get value(){return e.srokVozvrata},setValue:a})}})}})]}})}})}})),n})()}function W(e){return[t(i,{type:"date",label:"Дата возврата",get value(){return e.value.date},setValue:l=>e.setValue("date",l)}),t(i,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:l=>e.setValue("clause",l)})]}function X(e){return(()=>{var l=k();return o(l,t(i,{label:"Займ предоставлен на",get value(){return e.value.period},setValue:a=>e.setValue("period",a)}),null),o(l,t($,{items:[{text:"Дней",value:"day"},{text:"Недель",value:"week"},{text:"Месяцев",value:"month"},{text:"Лет",value:"year"}],get value(){return e.value.periodUnit},setValue:a=>e.setValue("periodUnit",a)}),null),o(l,t(i,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:a=>e.setValue("clause",a)}),null),S(()=>z(l,L["period-grid"])),l})()}function Y(e){const l=(n,u)=>{e.setValue("hire",{...e.value.hire,[n]:u})},a=(n,u)=>{e.setValue("hire",{...e.value.hire,[n]:u})};return t(D,{items:[{label:"Рассрочка на равные ежемесячные платежи",value:"equal"},{label:"Рассрочка на разные по суммам и датам платежи",value:"unequal"}],get value(){return e.value.hire.type},setValue:n=>{switch(n){case"equal":e.setValue("hire",c(new O));break;case"unequal":e.setValue("hire",c(new R));break;default:throw new Error("Unknown hire type")}},get children(){return t(w,{get children(){return[t(v,{get when(){return e.value.hire.type==="equal"},get children(){return t(d,{get children(){return t(j,{get value(){return e.value.hire},setValue:l})}})}}),t(v,{get when(){return e.value.hire.type==="unequal"},get children(){return[t(d,{children:"Вы сможете добавить платежи на экране «Доказательства»"}),t(x,{label:"Заёмщик ни разу не платил по рассрочке",get value(){return e.value.hire.neverPaid},setValue:n=>a("neverPaid",n)})]}})]}})}})}function Z(e){return t(i,{label:"Пункт договора с данным условием",get value(){return e.value.clause},setValue:l=>e.setValue("clause",l)})}function j(e){const[l,a]=_(!1),n=b(()=>B(e.value),[],{equals:(r,s)=>r.length===s.length&&r.every((V,g)=>V.date===s[g].date&&V.sum===s[g].sum)}),u=()=>n().length!==0,h=()=>{if(n().length===11)return"доказательств";const r=n().length%10;return r===1?"доказательство":r>=2&&r<=4?"доказательства":"доказательств"};return[t(G,{onClose:()=>a(!1),get show(){return l()},get children(){return[t(d,{question:"Рассрочка",get children(){return[t(i,{icon:"no-space",label:"Размер одного платежа",get value(){return e.value.sum},setValue:r=>e.setValue("sum",r)}),t(i,{icon:"no-space",label:"День месяца, в который нужно произвести платёж",get value(){return e.value.paymentDay},setValue:r=>e.setValue("paymentDay",r)}),t(i,{icon:"no-space",type:"date",min:"1990-01-01",label:"С",get value(){return e.value.dateStart},setValue:r=>e.setValue("dateStart",r)}),t(i,{icon:"no-space",type:"date",get min(){return e.value.dateStart},get max(){return new Date().toISOString().split("T")[0]},label:"По",get value(){return e.value.dateEnd},setValue:r=>e.setValue("dateEnd",r)}),t(i,{icon:"no-space",get max(){return e.value.dateEnd},type:"date",label:"Дата последнего произведённого платежа заёмщика",get value(){return e.value.dateLastPaid},setValue:r=>e.setValue("dateLastPaid",r),get disabled(){return e.value.neverPaid}}),t(x,{label:"Заёмщик ни разу не платил по рассрочке",get value(){return e.value.neverPaid},setValue:r=>e.setValue("neverPaid",r)}),t(i,{icon:"no-space",label:"Пункт договора с условием о рассрочке",get value(){return e.value.clause},setValue:r=>e.setValue("clause",r)})]}}),t(d,{get children(){return[b(()=>u()),(()=>{var r=k();return o(r,t(q,{get when(){return u()},get children(){var s=Q(),V=s.firstChild,g=V.nextSibling,P=g.nextSibling,f=P.nextSibling;return f.nextSibling,s.style.setProperty("margin","0"),o(s,()=>n().length,g),o(s,h,f),s}}),null),o(r,t(m,{text:"Закрыть",get class(){return T["flow-back-button"]},onClick:()=>a(!1)}),null),o(r,t(m,{text:"Готово",get disabled(){return!u()},onClick:()=>a(!1)}),null),S(()=>z(r,I["adder-buttons"])),r})()]}})]}}),t(m,{thin:!0,text:"Настроить рассрочку",onClick:()=>{a(!0)}})]}export{re as calculateReturnDate,le as default};
