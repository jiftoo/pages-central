var ss=Object.defineProperty;var rs=(z,t,L)=>t in z?ss(z,t,{enumerable:!0,configurable:!0,writable:!0,value:L}):z[t]=L;var tt=(z,t,L)=>(rs(z,typeof t!="symbol"?t+"":t,L),L),Yt=(z,t,L)=>{if(!t.has(z))throw TypeError("Cannot "+L)};var e=(z,t,L)=>(Yt(z,t,"read from private field"),L?L.call(z):t.get(z)),I=(z,t,L)=>{if(t.has(z))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(z):t.set(z,L)},Z=(z,t,L,n)=>(Yt(z,t,"write to private field"),n?n.call(z,L):t.set(z,L),L);var dt=(z,t,L,n)=>({set _(g){Z(z,t,g,L)},get _(){return e(z,t,n)}}),j=(z,t,L)=>(Yt(z,t,"access private method"),L);import{m as untrack,f as batch,g as getListener,h as createSignal,q as sharedConfig,v as onCleanup,k as createEffect,H as use,c as createRenderEffect,a as className,i as insert,l as createComponent,P as Portal,F as For,b as classList,t as template,C as Switch,M as Match}from"./index-CQiPjXso.js";import{Q as QuestionSection,T as TextField}from"./TextField-C-lKYZ4W.js";import{x as isObject,y as accessWith,z as createStore$1,r as reconcile,B as BigGreenButton}from"./DocumentFlow-BPOldJNx.js";import{L as ListBox}from"./Proofs-DFoJVMgO.js";import{g as getAugmentedNamespace}from"./_commonjsHelpers-IkB594pC.js";import{C as Calculator}from"./Court-B45_5g7w.js";import"./RadioGroup-mQMpjHja.js";import"./Checkbox-DX-q6fZB.js";import"./DropdownSelect-xhVFJVYr.js";import"./SrokVozvrata-CSoFGWTq.js";function createStaticStore(z){const t={...z},L={...z},n={},g=O=>{let R=n[O];if(!R){if(!getListener())return t[O];n[O]=R=createSignal(t[O],{internal:!0}),delete t[O]}return R[0]()};for(const O in z)Object.defineProperty(L,O,{get:()=>g(O),enumerable:!0});const V=(O,R)=>{const T=n[O];if(T)return T[1](R);O in t&&(t[O]=accessWith(R,[t[O]]))};return[L,(O,R)=>{if(isObject(O)){const T=untrack(()=>Object.entries(accessWith(O,L)));batch(()=>{for(const[c,r]of T)V(c,()=>r)})}else V(O,R);return L}]}const demo={"demo-name":"_demo-name_1lm9s_1","raschet-buttons":"_raschet-buttons_1lm9s_10","calculator-table":"_calculator-table_1lm9s_35","rounded-fix":"_rounded-fix_1lm9s_67","checkpoint-glow":"_checkpoint-glow_1lm9s_185","checkpoint-start":"_checkpoint-start_1lm9s_188","checkpoint-deadline":"_checkpoint-deadline_1lm9s_191","checkpoint-payment-decrease":"_checkpoint-payment-decrease_1lm9s_194","checkpoint-payment-increase":"_checkpoint-payment-increase_1lm9s_197","checkpoint-change":"_checkpoint-change_1lm9s_200","checkpoint-change-term":"_checkpoint-change-term_1lm9s_203","checkpoint-leapYear":"_checkpoint-leapYear_1lm9s_206","checkpoint-charge":"_checkpoint-charge_1lm9s_209","checkpoint-synthetic":"_checkpoint-synthetic_1lm9s_212","checkpoint-idk":"_checkpoint-idk_1lm9s_215"};function commonjsRequire(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,L){module.exports=t.pdfjsLib=L()})(globalThis,()=>(()=>{var __webpack_modules__=[,(z,t)=>{var Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=le,t.bytesToString=ne,t.createValidAbsoluteUrl=Ee,t.getModificationDate=Le,t.getUuid=Ke,t.getVerbosityLevel=q,t.info=J,t.isArrayBuffer=me,t.isArrayEqual=Te,t.isNodeJS=void 0,t.normalizeUnicode=Ge,t.objectFromMap=se,t.objectSize=Pe,t.setVerbosityLevel=E,t.shadow=we,t.string32=pe,t.stringToBytes=_e,t.stringToPDFString=oe,t.stringToUTF8String=te,t.unreachable=H,t.utf8StringToString=ee,t.warn=Y;const L=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=L;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const g=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=g;const V=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=V;const O=1.35;t.LINE_FACTOR=O;const R=.35;t.LINE_DESCENT_FACTOR=R;const T=R/O;t.BASELINE_FACTOR=T;const c={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=c;const r={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=r;const D="pdfjs_internal_editor_";t.AnnotationEditorPrefix=D;const M={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=M;const b={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=b;const u={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=u;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=v;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=f;const C={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=C;const w={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=w;const p={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=p;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=S;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=s;const i={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=i;const y={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=y;const m={O:"PageOpen",C:"PageClose"};t.PageActionEventType=m;const h={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=h;const F={NONE:0,BINARY:1};t.CMapCompressionType=F;const A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=A;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let ie=h.WARNINGS;function E(ye){Number.isInteger(ye)&&(ie=ye)}function q(){return ie}function J(ye){ie>=h.INFOS&&console.log(`Info: ${ye}`)}function Y(ye){ie>=h.WARNINGS&&console.log(`Warning: ${ye}`)}function H(ye){throw new Error(ye)}function le(ye,_){ye||H(_)}function $(ye){switch(ye==null?void 0:ye.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(ye,_=null,k=null){if(!ye)return null;try{if(k&&typeof ye=="string"){if(k.addDefaultProtocol&&ye.startsWith("www.")){const ae=ye.match(/\./g);(ae==null?void 0:ae.length)>=2&&(ye=`http://${ye}`)}if(k.tryConvertEncoding)try{ye=te(ye)}catch{}}const he=_?new URL(ye,_):new URL(ye);if($(he))return he}catch{}return null}function we(ye,_,k,he=!1){return Object.defineProperty(ye,_,{value:k,enumerable:!he,configurable:!0,writable:!1}),k}const N=function(){function _(k,he){this.constructor===_&&H("Cannot initialize BaseException."),this.message=k,this.name=he}return _.prototype=new Error,_.constructor=_,_}();t.BaseException=N;class a extends N{constructor(_,k){super(_,"PasswordException"),this.code=k}}t.PasswordException=a;class d extends N{constructor(_,k){super(_,"UnknownErrorException"),this.details=k}}t.UnknownErrorException=d;class l extends N{constructor(_){super(_,"InvalidPDFException")}}t.InvalidPDFException=l;class P extends N{constructor(_){super(_,"MissingPDFException")}}t.MissingPDFException=P;class x extends N{constructor(_,k){super(_,"UnexpectedResponseException"),this.status=k}}t.UnexpectedResponseException=x;class U extends N{constructor(_){super(_,"FormatError")}}t.FormatError=U;class K extends N{constructor(_){super(_,"AbortException")}}t.AbortException=K;function ne(ye){(typeof ye!="object"||(ye==null?void 0:ye.length)===void 0)&&H("Invalid argument for bytesToString");const _=ye.length,k=8192;if(_<k)return String.fromCharCode.apply(null,ye);const he=[];for(let ae=0;ae<_;ae+=k){const ue=Math.min(ae+k,_),ve=ye.subarray(ae,ue);he.push(String.fromCharCode.apply(null,ve))}return he.join("")}function _e(ye){typeof ye!="string"&&H("Invalid argument for stringToBytes");const _=ye.length,k=new Uint8Array(_);for(let he=0;he<_;++he)k[he]=ye.charCodeAt(he)&255;return k}function pe(ye){return String.fromCharCode(ye>>24&255,ye>>16&255,ye>>8&255,ye&255)}function Pe(ye){return Object.keys(ye).length}function se(ye){const _=Object.create(null);for(const[k,he]of ye)_[k]=he;return _}function be(){const ye=new Uint8Array(4);return ye[0]=1,new Uint32Array(ye.buffer,0,1)[0]===1}function ge(){try{return new Function(""),!0}catch{return!1}}class Fe{static get isLittleEndian(){return we(this,"isLittleEndian",be())}static get isEvalSupported(){return we(this,"isEvalSupported",ge())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?we(this,"platform",{isWin:!1,isMac:!1}):we(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var _,k;return we(this,"isCSSRoundSupported",(k=(_=globalThis.CSS)==null?void 0:_.supports)==null?void 0:k.call(_,"width: round(1.5px, 1px)"))}}t.FeatureTest=Fe;const De=[...Array(256).keys()].map(ye=>ye.toString(16).padStart(2,"0"));class xe{static makeHexColor(_,k,he){return`#${De[_]}${De[k]}${De[he]}`}static scaleMinMax(_,k){let he;_[0]?(_[0]<0&&(he=k[0],k[0]=k[1],k[1]=he),k[0]*=_[0],k[1]*=_[0],_[3]<0&&(he=k[2],k[2]=k[3],k[3]=he),k[2]*=_[3],k[3]*=_[3]):(he=k[0],k[0]=k[2],k[2]=he,he=k[1],k[1]=k[3],k[3]=he,_[1]<0&&(he=k[2],k[2]=k[3],k[3]=he),k[2]*=_[1],k[3]*=_[1],_[2]<0&&(he=k[0],k[0]=k[1],k[1]=he),k[0]*=_[2],k[1]*=_[2]),k[0]+=_[4],k[1]+=_[4],k[2]+=_[5],k[3]+=_[5]}static transform(_,k){return[_[0]*k[0]+_[2]*k[1],_[1]*k[0]+_[3]*k[1],_[0]*k[2]+_[2]*k[3],_[1]*k[2]+_[3]*k[3],_[0]*k[4]+_[2]*k[5]+_[4],_[1]*k[4]+_[3]*k[5]+_[5]]}static applyTransform(_,k){const he=_[0]*k[0]+_[1]*k[2]+k[4],ae=_[0]*k[1]+_[1]*k[3]+k[5];return[he,ae]}static applyInverseTransform(_,k){const he=k[0]*k[3]-k[1]*k[2],ae=(_[0]*k[3]-_[1]*k[2]+k[2]*k[5]-k[4]*k[3])/he,ue=(-_[0]*k[1]+_[1]*k[0]+k[4]*k[1]-k[5]*k[0])/he;return[ae,ue]}static getAxialAlignedBoundingBox(_,k){const he=this.applyTransform(_,k),ae=this.applyTransform(_.slice(2,4),k),ue=this.applyTransform([_[0],_[3]],k),ve=this.applyTransform([_[2],_[1]],k);return[Math.min(he[0],ae[0],ue[0],ve[0]),Math.min(he[1],ae[1],ue[1],ve[1]),Math.max(he[0],ae[0],ue[0],ve[0]),Math.max(he[1],ae[1],ue[1],ve[1])]}static inverseTransform(_){const k=_[0]*_[3]-_[1]*_[2];return[_[3]/k,-_[1]/k,-_[2]/k,_[0]/k,(_[2]*_[5]-_[4]*_[3])/k,(_[4]*_[1]-_[5]*_[0])/k]}static singularValueDecompose2dScale(_){const k=[_[0],_[2],_[1],_[3]],he=_[0]*k[0]+_[1]*k[2],ae=_[0]*k[1]+_[1]*k[3],ue=_[2]*k[0]+_[3]*k[2],ve=_[2]*k[1]+_[3]*k[3],W=(he+ve)/2,ce=Math.sqrt((he+ve)**2-4*(he*ve-ue*ae))/2,Me=W+ce||1,Ae=W-ce||1;return[Math.sqrt(Me),Math.sqrt(Ae)]}static normalizeRect(_){const k=_.slice(0);return _[0]>_[2]&&(k[0]=_[2],k[2]=_[0]),_[1]>_[3]&&(k[1]=_[3],k[3]=_[1]),k}static intersect(_,k){const he=Math.max(Math.min(_[0],_[2]),Math.min(k[0],k[2])),ae=Math.min(Math.max(_[0],_[2]),Math.max(k[0],k[2]));if(he>ae)return null;const ue=Math.max(Math.min(_[1],_[3]),Math.min(k[1],k[3])),ve=Math.min(Math.max(_[1],_[3]),Math.max(k[1],k[3]));return ue>ve?null:[he,ue,ae,ve]}static bezierBoundingBox(_,k,he,ae,ue,ve,W,ce){const Me=[],Ae=[[],[]];let ke,Oe,je,Ce,qe,Ve,Q,o;for(let fe=0;fe<2;++fe){if(fe===0?(Oe=6*_-12*he+6*ue,ke=-3*_+9*he-9*ue+3*W,je=3*he-3*_):(Oe=6*k-12*ae+6*ve,ke=-3*k+9*ae-9*ve+3*ce,je=3*ae-3*k),Math.abs(ke)<1e-12){if(Math.abs(Oe)<1e-12)continue;Ce=-je/Oe,0<Ce&&Ce<1&&Me.push(Ce);continue}Q=Oe*Oe-4*je*ke,o=Math.sqrt(Q),!(Q<0)&&(qe=(-Oe+o)/(2*ke),0<qe&&qe<1&&Me.push(qe),Ve=(-Oe-o)/(2*ke),0<Ve&&Ve<1&&Me.push(Ve))}let B=Me.length,X;const re=B;for(;B--;)Ce=Me[B],X=1-Ce,Ae[0][B]=X*X*X*_+3*X*X*Ce*he+3*X*Ce*Ce*ue+Ce*Ce*Ce*W,Ae[1][B]=X*X*X*k+3*X*X*Ce*ae+3*X*Ce*Ce*ve+Ce*Ce*Ce*ce;return Ae[0][re]=_,Ae[1][re]=k,Ae[0][re+1]=W,Ae[1][re+1]=ce,Ae[0].length=Ae[1].length=re+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}t.Util=xe;const de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(ye){if(ye[0]>="ï"){let k;if(ye[0]==="þ"&&ye[1]==="ÿ"?k="utf-16be":ye[0]==="ÿ"&&ye[1]==="þ"?k="utf-16le":ye[0]==="ï"&&ye[1]==="»"&&ye[2]==="¿"&&(k="utf-8"),k)try{const he=new TextDecoder(k,{fatal:!0}),ae=_e(ye);return he.decode(ae)}catch(he){Y(`stringToPDFString: "${he}".`)}}const _=[];for(let k=0,he=ye.length;k<he;k++){const ae=de[ye.charCodeAt(k)];_.push(ae?String.fromCharCode(ae):ye.charAt(k))}return _.join("")}function te(ye){return decodeURIComponent(escape(ye))}function ee(ye){return unescape(encodeURIComponent(ye))}function me(ye){return typeof ye=="object"&&(ye==null?void 0:ye.byteLength)!==void 0}function Te(ye,_){if(ye.length!==_.length)return!1;for(let k=0,he=ye.length;k<he;k++)if(ye[k]!==_[k])return!1;return!0}function Le(ye=new Date){return[ye.getUTCFullYear().toString(),(ye.getUTCMonth()+1).toString().padStart(2,"0"),ye.getUTCDate().toString().padStart(2,"0"),ye.getUTCHours().toString().padStart(2,"0"),ye.getUTCMinutes().toString().padStart(2,"0"),ye.getUTCSeconds().toString().padStart(2,"0")].join("")}class Be{constructor(){I(this,Ze,!1);this.promise=new Promise((_,k)=>{this.resolve=he=>{Z(this,Ze,!0),_(he)},this.reject=he=>{Z(this,Ze,!0),k(he)}})}get settled(){return e(this,Ze)}}Ze=new WeakMap,t.PromiseCapability=Be;let Ue=null,$e=null;function Ge(ye){return Ue||(Ue=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$e=new Map([["ﬅ","ſt"]])),ye.replaceAll(Ue,(_,k,he)=>k?k.normalize("NFKC"):$e.get(he))}function Ke(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ye=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ye);else for(let _=0;_<32;_++)ye[_]=Math.floor(Math.random()*255);return ne(ye)}const Xe="pdfjs_internal_id_";t.AnnotationPrefix=Xe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var z,L,n,g,ut,O,xt,T,c,r,D,M,b,u,v,f,Ft,w,p,Kt,s,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(m){if(typeof m=="string"||m instanceof URL?m={url:m}:(0,_util.isArrayBuffer)(m)&&(m={data:m}),typeof m!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:F}=h,A=m.url?getUrlProp(m.url):null,G=m.data?getDataProp(m.data):null,ie=m.httpHeaders||null,E=m.withCredentials===!0,q=m.password??null,J=m.range instanceof PDFDataRangeTransport?m.range:null,Y=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let H=m.worker instanceof PDFWorker?m.worker:null;const le=m.verbosity,$=typeof m.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(m.docBaseUrl)?m.docBaseUrl:null,Ee=typeof m.cMapUrl=="string"?m.cMapUrl:null,we=m.cMapPacked!==!1,N=m.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof m.standardFontDataUrl=="string"?m.standardFontDataUrl:null,d=m.StandardFontDataFactory||DefaultStandardFontDataFactory,l=m.stopAtErrors!==!0,P=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,x=m.isEvalSupported!==!1,U=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!_util.isNodeJS,K=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,ne=typeof m.disableFontFace=="boolean"?m.disableFontFace:_util.isNodeJS,_e=m.fontExtraProperties===!0,pe=m.enableXfa===!0,Pe=m.ownerDocument||globalThis.document,se=m.disableRange===!0,be=m.disableStream===!0,ge=m.disableAutoFetch===!0,Fe=m.pdfBug===!0,De=J?J.length:m.length??NaN,xe=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!_util.isNodeJS&&!ne,de=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:N===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&Ee&&a&&(0,_display_utils.isValidFetchUrl)(Ee,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),oe=m.canvasFactory||new DefaultCanvasFactory({ownerDocument:Pe}),te=m.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:Pe}),ee=null;(0,_util.setVerbosityLevel)(le);const me={canvasFactory:oe,filterFactory:te};if(de||(me.cMapReaderFactory=new N({baseUrl:Ee,isCompressed:we}),me.standardFontDataFactory=new d({baseUrl:a})),!H){const Be={verbosity:le,port:_worker_options.GlobalWorkerOptions.workerPort};H=Be.port?PDFWorker.fromPort(Be):new PDFWorker(Be),h._worker=H}const Te={docId:F,apiVersion:"3.11.174",data:G,password:q,disableAutoFetch:ge,rangeChunkSize:Y,length:De,docBaseUrl:$,enableXfa:pe,evaluatorOptions:{maxImageSize:P,disableFontFace:ne,ignoreErrors:l,isEvalSupported:x,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:K,fontExtraProperties:_e,useSystemFonts:xe,cMapUrl:de?Ee:null,standardFontDataUrl:de?a:null}},Le={ignoreErrors:l,isEvalSupported:x,disableFontFace:ne,fontExtraProperties:_e,enableXfa:pe,ownerDocument:Pe,disableAutoFetch:ge,pdfBug:Fe,styleElement:ee};return H.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Be=_fetchDocument(H,Te),Ue=new Promise(function($e){let Ge;J?Ge=new _transport_stream.PDFDataTransportStream({length:De,initialData:J.initialData,progressiveDone:J.progressiveDone,contentDispositionFilename:J.contentDispositionFilename,disableRange:se,disableStream:be},J):G||(Ge=(Xe=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Xe):(0,_display_utils.isValidFetchUrl)(Xe.url)?new _displayFetch_stream.PDFFetchStream(Xe):new _displayNetwork.PDFNetworkStream(Xe))({url:A,length:De,httpHeaders:ie,withCredentials:E,rangeChunkSize:Y,disableRange:se,disableStream:be})),$e(Ge)});return Promise.all([Be,Ue]).then(function([$e,Ge]){if(h.destroyed)throw new Error("Loading aborted");const Ke=new _message_handler.MessageHandler(F,$e,H.port),Xe=new WorkerTransport(Ke,h,Ge,Le,me);h._transport=Xe,Ke.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(m,h){if(m.destroyed)throw new Error("Worker was destroyed");const F=await m.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(m.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(m){if(m instanceof URL)return m.href;try{return new URL(m,window.location).href}catch{if(_util.isNodeJS&&typeof m=="string")return m}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(m){if(_util.isNodeJS&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return(0,_util.stringToBytes)(m);if(typeof m=="object"&&!isNaN(m==null?void 0:m.length)||(0,_util.isArrayBuffer)(m))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${dt(t,z)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,F,A;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(G){throw(A=this._worker)!=null&&A.port&&delete this._worker._pendingDestroy,G}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};z=new WeakMap,I(t,z,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,F,A=!1,G=null){this.length=h,this.initialData=F,this.progressiveDone=A,this.contentDispositionFilename=G,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,F){for(const A of this._rangeListeners)A(h,F)}onDataProgress(h,F){this._readyCapability.promise.then(()=>{for(const A of this._progressListeners)A(h,F)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,F){this._pdfInfo=h,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(A=>{if(!A)return A;const G=[];for(const ie in A)G.push(...A[ie]);return G}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,F,A,G=!1){I(this,g);I(this,O);I(this,L,null);I(this,n,!1);this._pageIndex=h,this._pageInfo=F,this._transport=A,this._stats=G?new _display_utils.StatTimer:null,this._pdfBug=G,this.commonObjs=A.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:F=this.rotate,offsetX:A=0,offsetY:G=0,dontFlip:ie=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:F,offsetX:A,offsetY:G,dontFlip:ie})}getAnnotations({intent:h="display"}={}){const F=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:F,intent:A="display",annotationMode:G=_util.AnnotationMode.ENABLE,transform:ie=null,background:E=null,optionalContentConfigPromise:q=null,annotationCanvasMap:J=null,pageColors:Y=null,printAnnotationStorage:H=null}){var d,l;(d=this._stats)==null||d.time("Overall");const le=this._transport.getRenderingIntent(A,G,H);Z(this,n,!1),j(this,O,xt).call(this),q||(q=this._transport.getOptionalContentConfig());let $=this._intentStates.get(le.cacheKey);$||($=Object.create(null),this._intentStates.set(le.cacheKey,$)),$.streamReaderCancelTimeout&&(clearTimeout($.streamReaderCancelTimeout),$.streamReaderCancelTimeout=null);const Ee=!!(le.renderingIntent&_util.RenderingIntentFlag.PRINT);$.displayReadyCapability||($.displayReadyCapability=new _util.PromiseCapability,$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(le));const we=P=>{var x,U;$.renderTasks.delete(N),(this._maybeCleanupAfterRender||Ee)&&Z(this,n,!0),j(this,g,ut).call(this,!Ee),P?(N.capability.reject(P),this._abortOperatorList({intentState:$,reason:P instanceof Error?P:new Error(P)})):N.capability.resolve(),(x=this._stats)==null||x.timeEnd("Rendering"),(U=this._stats)==null||U.timeEnd("Overall")},N=new InternalRenderTask({callback:we,params:{canvasContext:h,viewport:F,transform:ie,background:E},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:$.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ee,pdfBug:this._pdfBug,pageColors:Y});($.renderTasks||($.renderTasks=new Set)).add(N);const a=N.task;return Promise.all([$.displayReadyCapability.promise,q]).then(([P,x])=>{var U;if(this.destroyed){we();return}(U=this._stats)==null||U.time("Rendering"),N.initializeGraphics({transparency:P,optionalContentConfig:x}),N.operatorListChanged()}).catch(we),a}getOperatorList({intent:h="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:A=null}={}){var J;function G(){E.operatorList.lastChunk&&(E.opListReadCapability.resolve(E.operatorList),E.renderTasks.delete(q))}const ie=this._transport.getRenderingIntent(h,F,A,!0);let E=this._intentStates.get(ie.cacheKey);E||(E=Object.create(null),this._intentStates.set(ie.cacheKey,E));let q;return E.opListReadCapability||(q=Object.create(null),q.operatorListChanged=G,E.opListReadCapability=new _util.PromiseCapability,(E.renderTasks||(E.renderTasks=new Set)).add(q),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(ie)),E.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:F===!0},{highWaterMark:100,size(G){return G.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(A=>_xfa_text.XfaText.textContent(A));const F=this.streamTextContent(h);return new Promise(function(A,G){function ie(){E.read().then(function({value:J,done:Y}){if(Y){A(q);return}Object.assign(q.styles,J.styles),q.items.push(...J.items),ie()},G)}const E=F.getReader(),q={items:[],styles:Object.create(null)};ie()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const A of F.renderTasks)h.push(A.completed),A.cancel();return this.objs.clear(),Z(this,n,!1),j(this,O,xt).call(this),Promise.all(h)}cleanup(h=!1){Z(this,n,!0);const F=j(this,g,ut).call(this,!1);return h&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(h,F){var G,ie;const A=this._intentStates.get(F);A&&((G=this._stats)==null||G.timeEnd("Page Request"),(ie=A.displayReadyCapability)==null||ie.resolve(h))}_renderPageChunk(h,F){for(let A=0,G=h.length;A<G;A++)F.operatorList.fnArray.push(h.fnArray[A]),F.operatorList.argsArray.push(h.argsArray[A]);F.operatorList.lastChunk=h.lastChunk,F.operatorList.separateAnnots=h.separateAnnots;for(const A of F.renderTasks)A.operatorListChanged();h.lastChunk&&j(this,g,ut).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:F,annotationStorageSerializable:A}){const{map:G,transfers:ie}=A,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:F,annotationStorage:G},ie).getReader(),J=this._intentStates.get(F);J.streamReader=q;const Y=()=>{q.read().then(({value:H,done:le})=>{if(le){J.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,J),Y())},H=>{if(J.streamReader=null,!this._transport.destroyed){if(J.operatorList){J.operatorList.lastChunk=!0;for(const le of J.renderTasks)le.operatorListChanged();j(this,g,ut).call(this,!0)}if(J.displayReadyCapability)J.displayReadyCapability.reject(H);else if(J.opListReadCapability)J.opListReadCapability.reject(H);else throw H}})};Y()}_abortOperatorList({intentState:h,reason:F,force:A=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!A){if(h.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let G=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(G+=F.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:F,force:!0})},G);return}}if(h.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[G,ie]of this._intentStates)if(ie===h){this._intentStates.delete(G);break}this.cleanup()}}}get stats(){return this._stats}}L=new WeakMap,n=new WeakMap,g=new WeakSet,ut=function(h=!1){if(j(this,O,xt).call(this),!e(this,n)||this.destroyed)return!1;if(h)return Z(this,L,setTimeout(()=>{Z(this,L,null),j(this,g,ut).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:A}of this._intentStates.values())if(F.size>0||!A.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Z(this,n,!1),!0},O=new WeakSet,xt=function(){e(this,L)&&(clearTimeout(e(this,L)),Z(this,L,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){I(this,T,new Set);I(this,c,Promise.resolve())}postMessage(h,F){const A={data:structuredClone(h,F?{transfer:F}:null)};e(this,c).then(()=>{for(const G of e(this,T))G.call(this,A)})}addEventListener(h,F){e(this,T).add(F)}removeEventListener(h,F){e(this,T).delete(F)}terminate(){e(this,T).clear()}}T=new WeakMap,c=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(r=document==null?void 0:document.currentScript)==null?void 0:r.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,h){let F;try{if(F=new URL(m),!F.origin||F.origin==="null")return!1}catch{return!1}const A=new URL(h,F);return F.origin===A.origin},PDFWorkerUtil.createCDNWrapper=function(m){const h=`importScripts("${m}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:m=null,port:h=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var A;if(this.name=m,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((A=e(_PDFWorker,D))!=null&&A.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,D)||Z(_PDFWorker,D,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:m}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const h=new Worker(m),F=new _message_handler.MessageHandler("main","worker",h),A=()=>{h.removeEventListener("error",G),F.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},G=()=>{this._webWorker||A()};h.addEventListener("error",G),F.on("test",E=>{if(h.removeEventListener("error",G),this.destroyed){A();return}E?(this._messageHandler=F,this._port=h,this._webWorker=h,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),h.terminate())}),F.on("ready",E=>{if(h.removeEventListener("error",G),this.destroyed){A();return}try{ie()}catch{this._setupFakeWorker()}});const ie=()=>{const E=new Uint8Array;F.send("test",E,[E.buffer])};ie();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,A=new _message_handler.MessageHandler(F+"_worker",F,h);m.setup(A,h);const G=new _message_handler.MessageHandler(F,F+"_worker",h);this._messageHandler=G,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){var m;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(m=e(_PDFWorker,D))==null||m.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){var F;if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(F=e(this,D))==null?void 0:F.get(m.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};D=new WeakMap,I(_PDFWorker,D,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,F,A,G,ie){I(this,f);I(this,M,new Map);I(this,b,new Map);I(this,u,new Map);I(this,v,null);this.messageHandler=h,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:G.ownerDocument,styleElement:G.styleElement}),this._params=G,this.canvasFactory=ie.canvasFactory,this.filterFactory=ie.filterFactory,this.cMapReaderFactory=ie.cMapReaderFactory,this.standardFontDataFactory=ie.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=A,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,F=_util.AnnotationMode.ENABLE,A=null,G=!1){let ie=_util.RenderingIntentFlag.DISPLAY,E=_annotation_storage.SerializableEmpty;switch(h){case"any":ie=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":ie=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(F){case _util.AnnotationMode.DISABLE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:ie+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:ie+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,E=(ie&_util.RenderingIntentFlag.PRINT&&A instanceof _annotation_storage.PrintAnnotationStorage?A:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return G&&(ie+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:ie,cacheKey:`${ie}_${E.hash}`,annotationStorageSerializable:E}}destroy(){var A;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(A=e(this,v))==null||A.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const G of e(this,b).values())h.push(G._destroy());e(this,b).clear(),e(this,u).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return h.push(F),Promise.all(h).then(()=>{var G;this.commonObjs.clear(),this.fontLoader.clear(),e(this,M).clear(),this.filterFactory.destroy(),(G=this._networkStream)==null||G.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:F}=this;h.on("GetReader",(A,G)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ie=>{this._lastProgress={loaded:ie.loaded,total:ie.total}},G.onPull=()=>{this._fullReader.read().then(function({value:ie,done:E}){if(E){G.close();return}(0,_util.assert)(ie instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(ie),1,[ie])}).catch(ie=>{G.error(ie)})},G.onCancel=ie=>{this._fullReader.cancel(ie),G.ready.catch(E=>{if(!this.destroyed)throw E})}}),h.on("ReaderHeadersReady",A=>{const G=new _util.PromiseCapability,ie=this._fullReader;return ie.headersReady.then(()=>{var E;(!ie.isStreamingSupported||!ie.isRangeSupported)&&(this._lastProgress&&((E=F.onProgress)==null||E.call(F,this._lastProgress)),ie.onProgress=q=>{var J;(J=F.onProgress)==null||J.call(F,{loaded:q.loaded,total:q.total})}),G.resolve({isStreamingSupported:ie.isStreamingSupported,isRangeSupported:ie.isRangeSupported,contentLength:ie.contentLength})},G.reject),G.promise}),h.on("GetRangeReader",(A,G)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ie=this._networkStream.getRangeReader(A.begin,A.end);if(!ie){G.close();return}G.onPull=()=>{ie.read().then(function({value:E,done:q}){if(q){G.close();return}(0,_util.assert)(E instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{G.error(E)})},G.onCancel=E=>{ie.cancel(E),G.ready.catch(q=>{if(!this.destroyed)throw q})}}),h.on("GetDoc",({pdfInfo:A})=>{this._numPages=A.numPages,this._htmlForXfa=A.htmlForXfa,delete A.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(A,this))}),h.on("DocException",function(A){let G;switch(A.name){case"PasswordException":G=new _util.PasswordException(A.message,A.code);break;case"InvalidPDFException":G=new _util.InvalidPDFException(A.message);break;case"MissingPDFException":G=new _util.MissingPDFException(A.message);break;case"UnexpectedResponseException":G=new _util.UnexpectedResponseException(A.message,A.status);break;case"UnknownErrorException":G=new _util.UnknownErrorException(A.message,A.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(G)}),h.on("PasswordRequest",A=>{if(Z(this,v,new _util.PromiseCapability),F.onPassword){const G=ie=>{ie instanceof Error?e(this,v).reject(ie):e(this,v).resolve({password:ie})};try{F.onPassword(G,A.code)}catch(ie){e(this,v).reject(ie)}}else e(this,v).reject(new _util.PasswordException(A.message,A.code));return e(this,v).promise}),h.on("DataLoaded",A=>{var G;(G=F.onProgress)==null||G.call(F,{loaded:A.length,total:A.length}),this.downloadInfoCapability.resolve(A)}),h.on("StartRenderPage",A=>{if(this.destroyed)return;e(this,b).get(A.pageIndex)._startRenderPage(A.transparency,A.cacheKey)}),h.on("commonobj",([A,G,ie])=>{var E;if(!this.destroyed&&!this.commonObjs.has(A))switch(G){case"Font":const q=this._params;if("error"in ie){const H=ie.error;(0,_util.warn)(`Error during font loading: ${H}`),this.commonObjs.resolve(A,H);break}const J=q.pdfBug&&((E=globalThis.FontInspector)!=null&&E.enabled)?(H,le)=>globalThis.FontInspector.fontAdded(H,le):null,Y=new _font_loader.FontFaceObject(ie,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:J});this.fontLoader.bind(Y).catch(H=>h.sendWithPromise("FontFallback",{id:A})).finally(()=>{!q.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(A,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(A,ie);break;default:throw new Error(`Got unknown common object type ${G}`)}}),h.on("obj",([A,G,ie,E])=>{var J;if(this.destroyed)return;const q=e(this,b).get(G);if(!q.objs.has(A))switch(ie){case"Image":if(q.objs.resolve(A,E),E){let Y;if(E.bitmap){const{width:H,height:le}=E;Y=H*le*4}else Y=((J=E.data)==null?void 0:J.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(A,E);break;default:throw new Error(`Got unknown object type ${ie}`)}}),h.on("DocProgress",A=>{var G;this.destroyed||(G=F.onProgress)==null||G.call(F,{loaded:A.loaded,total:A.total})}),h.on("FetchBuiltInCMap",A=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(A):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",A=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(A):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var A;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((A=this._fullReader)==null?void 0:A.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=h-1,A=e(this,u).get(F);if(A)return A;const G=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(ie=>{if(this.destroyed)throw new Error("Transport destroyed");const E=new PDFPageProxy(F,ie,this,this._params.pdfBug);return e(this,b).set(F,E),E});return e(this,u).set(F,G),G}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:F})}getFieldObjects(){return j(this,f,Ft).call(this,"GetFieldObjects")}hasJSActions(){return j(this,f,Ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return j(this,f,Ft).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",F=e(this,M).get(h);if(F)return F;const A=this.messageHandler.sendWithPromise(h,null).then(G=>{var ie,E;return{info:G[0],metadata:G[1]?new _metadata.Metadata(G[1]):null,contentDispositionFilename:((ie=this._fullReader)==null?void 0:ie.filename)??null,contentLength:((E=this._fullReader)==null?void 0:E.contentLength)??null}});return e(this,M).set(h,A),A}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of e(this,b).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),e(this,M).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:F})}}M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakSet,Ft=function(h,F=null){const A=e(this,M).get(h);if(A)return A;const G=this.messageHandler.sendWithPromise(h,F);return e(this,M).set(h,G),G};class PDFObjects{constructor(){I(this,p);I(this,w,Object.create(null))}get(h,F=null){if(F){const G=j(this,p,Kt).call(this,h);return G.capability.promise.then(()=>F(G.data)),null}const A=e(this,w)[h];if(!(A!=null&&A.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return A.data}has(h){const F=e(this,w)[h];return(F==null?void 0:F.capability.settled)||!1}resolve(h,F=null){const A=j(this,p,Kt).call(this,h);A.data=F,A.capability.resolve()}clear(){var h;for(const F in e(this,w)){const{data:A}=e(this,w)[F];(h=A==null?void 0:A.bitmap)==null||h.close()}Z(this,w,Object.create(null))}}w=new WeakMap,p=new WeakSet,Kt=function(h){var F;return(F=e(this,w))[h]||(F[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){I(this,s,null);Z(this,s,h),this.onContinue=null}get promise(){return e(this,s).capability.promise}cancel(h=0){e(this,s).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=e(this,s).operatorList;if(!h)return!1;const{annotationCanvasMap:F}=e(this,s);return h.form||h.canvas&&(F==null?void 0:F.size)>0}}s=new WeakMap,exports.RenderTask=RenderTask;const y=class y{constructor({callback:h,params:F,objs:A,commonObjs:G,annotationCanvasMap:ie,operatorList:E,pageIndex:q,canvasFactory:J,filterFactory:Y,useRequestAnimationFrame:H=!1,pdfBug:le=!1,pageColors:$=null}){this.callback=h,this.params=F,this.objs=A,this.commonObjs=G,this.annotationCanvasMap=ie,this.operatorListIdx=null,this.operatorList=E,this._pageIndex=q,this.canvasFactory=J,this.filterFactory=Y,this._pdfBug=le,this.pageColors=$,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=H===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:F}){var q,J;if(this.cancelled)return;if(this._canvas){if(e(y,i).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(y,i).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:A,viewport:G,transform:ie,background:E}=this.params;this.gfx=new _canvas.CanvasGraphics(A,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:ie,viewport:G,transparency:h,background:E}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(h=null,F=0){var A;this.running=!1,this.cancelled=!0,(A=this.gfx)==null||A.endDrawing(),e(y,i).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(y,i).delete(this._canvas),this.callback())))}};i=new WeakMap,I(y,i,new WeakSet);let InternalRenderTask=y;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(z,t,L)=>{var c,r,D,Ji,b;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=L(1),g=L(4),V=L(8);const O=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=O;class R{constructor(){I(this,D);I(this,c,!1);I(this,r,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,f){const C=e(this,r).get(v);return C===void 0?f:Object.assign(f,C)}getRawValue(v){return e(this,r).get(v)}remove(v){if(e(this,r).delete(v),e(this,r).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of e(this,r).values())if(f instanceof g.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,f){const C=e(this,r).get(v);let w=!1;if(C!==void 0)for(const[p,S]of Object.entries(f))C[p]!==S&&(w=!0,C[p]=S);else w=!0,e(this,r).set(v,f);w&&j(this,D,Ji).call(this),f instanceof g.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(v){return e(this,r).has(v)}getAll(){return e(this,r).size>0?(0,n.objectFromMap)(e(this,r)):null}setAll(v){for(const[f,C]of Object.entries(v))this.setValue(f,C)}get size(){return e(this,r).size}resetModified(){e(this,c)&&(Z(this,c,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(e(this,r).size===0)return O;const v=new Map,f=new V.MurmurHash3_64,C=[],w=Object.create(null);let p=!1;for(const[S,s]of e(this,r)){const i=s instanceof g.AnnotationEditor?s.serialize(!1,w):s;i&&(v.set(S,i),f.update(`${S}:${JSON.stringify(i)}`),p||(p=!!i.bitmap))}if(p)for(const S of v.values())S.bitmap&&C.push(S.bitmap);return v.size>0?{map:v,hash:f.hexdigest(),transfers:C}:O}}c=new WeakMap,r=new WeakMap,D=new WeakSet,Ji=function(){e(this,c)||(Z(this,c,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=R;class T extends R{constructor(f){super();I(this,b,void 0);const{map:C,hash:w,transfers:p}=f.serializable,S=structuredClone(C,p?{transfer:p}:null);Z(this,b,{map:S,hash:w,transfers:p})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,b)}}b=new WeakMap,t.PrintAnnotationStorage=T},(z,t,L)=>{var T,c,r,D,M,b,u,v,f,C,w,p,S,s,i,Qt,m,Zt,F,Jt,G,ei,E,en,J,tn,H,nn,$,ti,we,sn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=L(5),g=L(1),V=L(6);const a=class a{constructor(l){I(this,i);I(this,m);I(this,G);I(this,E);I(this,J);I(this,H);I(this,$);I(this,we);I(this,T,"");I(this,c,!1);I(this,r,null);I(this,D,null);I(this,M,null);I(this,b,!1);I(this,u,null);I(this,v,this.focusin.bind(this));I(this,f,this.focusout.bind(this));I(this,C,!1);I(this,w,!1);I(this,p,!1);tt(this,"_initialOptions",Object.create(null));tt(this,"_uiManager",null);tt(this,"_focusEventsAllowed",!0);tt(this,"_l10nPromise",null);I(this,S,!1);I(this,s,a._zIndex++);this.constructor===a&&(0,g.unreachable)("Cannot initialize AnnotationEditor."),this.parent=l.parent,this.id=l.id,this.width=this.height=null,this.pageIndex=l.parent.pageIndex,this.name=l.name,this.div=null,this._uiManager=l.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=l.isCentered,this._structTreeParentId=null;const{rotation:P,rawDims:{pageWidth:x,pageHeight:U,pageX:K,pageY:ne}}=this.parent.viewport;this.rotation=P,this.pageRotation=(360+P-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[x,U],this.pageTranslation=[K,ne];const[_e,pe]=this.parentDimensions;this.x=l.x/_e,this.y=l.y/pe,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,g.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(l){const P=new R({id:l.parent.getNextId(),parent:l.parent,uiManager:l._uiManager});P.annotationElementId=l.annotationElementId,P.deleted=!0,P._uiManager.addToAnnotationStorage(P)}static initialize(l,P=null){if(a._l10nPromise||(a._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(U=>[U,l.get(U)]))),P!=null&&P.strings)for(const U of P.strings)a._l10nPromise.set(U,l.get(U));if(a._borderLineWidth!==-1)return;const x=getComputedStyle(document.documentElement);a._borderLineWidth=parseFloat(x.getPropertyValue("--outline-width"))||0}static updateDefaultParams(l,P){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(l){return!1}static paste(l,P){(0,g.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,S)}set _isDraggable(l){var P;Z(this,S,l),(P=this.div)==null||P.classList.toggle("draggable",l)}center(){const[l,P]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*P/(l*2),this.y+=this.width*l/(P*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*P/(l*2),this.y-=this.width*l/(P*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(l){this._uiManager.addCommands(l)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,s)}setParent(l){l!==null&&(this.pageIndex=l.pageIndex,this.pageDimensions=l.pageDimensions),this.parent=l}focusin(l){this._focusEventsAllowed&&(e(this,C)?Z(this,C,!1):this.parent.setSelected(this))}focusout(l){var x;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const P=l.relatedTarget;P!=null&&P.closest(`#${this.id}`)||(l.preventDefault(),(x=this.parent)!=null&&x.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(l,P,x,U){const[K,ne]=this.parentDimensions;[x,U]=this.screenToPageTranslation(x,U),this.x=(l+x)/K,this.y=(P+U)/ne,this.fixAndSetPosition()}translate(l,P){j(this,i,Qt).call(this,this.parentDimensions,l,P)}translateInPage(l,P){j(this,i,Qt).call(this,this.pageDimensions,l,P),this.div.scrollIntoView({block:"nearest"})}drag(l,P){const[x,U]=this.parentDimensions;if(this.x+=l/x,this.y+=P/U,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Pe,y:se}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Pe,se)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:K,y:ne}=this;const[_e,pe]=j(this,m,Zt).call(this);K+=_e,ne+=pe,this.div.style.left=`${(100*K).toFixed(2)}%`,this.div.style.top=`${(100*ne).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[l,P]=this.pageDimensions;let{x,y:U,width:K,height:ne}=this;switch(K*=l,ne*=P,x*=l,U*=P,this.rotation){case 0:x=Math.max(0,Math.min(l-K,x)),U=Math.max(0,Math.min(P-ne,U));break;case 90:x=Math.max(0,Math.min(l-ne,x)),U=Math.min(P,Math.max(K,U));break;case 180:x=Math.min(l,Math.max(K,x)),U=Math.min(P,Math.max(ne,U));break;case 270:x=Math.min(l,Math.max(ne,x)),U=Math.max(0,Math.min(P-K,U));break}this.x=x/=l,this.y=U/=P;const[_e,pe]=j(this,m,Zt).call(this);x+=_e,U+=pe;const{style:Pe}=this.div;Pe.left=`${(100*x).toFixed(2)}%`,Pe.top=`${(100*U).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(l,P){var x;return j(x=a,F,Jt).call(x,l,P,this.parentRotation)}pageTranslationToScreen(l,P){var x;return j(x=a,F,Jt).call(x,l,P,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:l,pageDimensions:[P,x]}=this,U=P*l,K=x*l;return g.FeatureTest.isCSSRoundSupported?[Math.round(U),Math.round(K)]:[U,K]}setDims(l,P){var K;const[x,U]=this.parentDimensions;this.div.style.width=`${(100*l/x).toFixed(2)}%`,e(this,b)||(this.div.style.height=`${(100*P/U).toFixed(2)}%`),(K=e(this,r))==null||K.classList.toggle("small",l<a.SMALL_EDITOR_SIZE||P<a.SMALL_EDITOR_SIZE)}fixDims(){const{style:l}=this.div,{height:P,width:x}=l,U=x.endsWith("%"),K=!e(this,b)&&P.endsWith("%");if(U&&K)return;const[ne,_e]=this.parentDimensions;U||(l.width=`${(100*parseFloat(x)/ne).toFixed(2)}%`),!e(this,b)&&!K&&(l.height=`${(100*parseFloat(P)/_e).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,r))return;const l=Z(this,r,document.createElement("button"));l.className="altText";const P=await a._l10nPromise.get("editor_alt_text_button_label");l.textContent=P,l.setAttribute("aria-label",P),l.tabIndex="0",l.addEventListener("contextmenu",V.noContextMenu),l.addEventListener("pointerdown",x=>x.stopPropagation()),l.addEventListener("click",x=>{x.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),l.addEventListener("keydown",x=>{x.target===l&&x.key==="Enter"&&(x.preventDefault(),this._uiManager.editAltText(this))}),j(this,$,ti).call(this),this.div.append(l),a.SMALL_EDITOR_SIZE||(a.SMALL_EDITOR_SIZE=Math.min(128,Math.round(l.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,T),decorative:e(this,c)}}set altTextData({altText:l,decorative:P}){e(this,T)===l&&e(this,c)===P||(Z(this,T,l),Z(this,c,P),j(this,$,ti).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,v)),this.div.addEventListener("focusout",e(this,f));const[l,P]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*P/l).toFixed(2)}%`,this.div.style.maxHeight=`${(100*l/P).toFixed(2)}%`);const[x,U]=this.getInitialTranslation();return this.translate(x,U),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(l){const{isMac:P}=g.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&P){l.preventDefault();return}Z(this,C,!0),j(this,we,sn).call(this,l)}moveInDOM(){var l;(l=this.parent)==null||l.moveEditorInDOM(this)}_setParentAndPosition(l,P,x){l.changeParent(this),this.x=P,this.y=x,this.fixAndSetPosition()}getRect(l,P){const x=this.parentScale,[U,K]=this.pageDimensions,[ne,_e]=this.pageTranslation,pe=l/x,Pe=P/x,se=this.x*U,be=this.y*K,ge=this.width*U,Fe=this.height*K;switch(this.rotation){case 0:return[se+pe+ne,K-be-Pe-Fe+_e,se+pe+ge+ne,K-be-Pe+_e];case 90:return[se+Pe+ne,K-be+pe+_e,se+Pe+Fe+ne,K-be+pe+ge+_e];case 180:return[se-pe-ge+ne,K-be+Pe+_e,se-pe+ne,K-be+Pe+Fe+_e];case 270:return[se-Pe-Fe+ne,K-be-pe-ge+_e,se-Pe+ne,K-be-pe+_e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(l,P){const[x,U,K,ne]=l,_e=K-x,pe=ne-U;switch(this.rotation){case 0:return[x,P-ne,_e,pe];case 90:return[x,P-U,pe,_e];case 180:return[K,P-U,_e,pe];case 270:return[K,P-ne,pe,_e];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Z(this,p,!0)}disableEditMode(){Z(this,p,!1)}isInEditMode(){return e(this,p)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var l,P;(l=this.div)==null||l.addEventListener("focusin",e(this,v)),(P=this.div)==null||P.addEventListener("focusout",e(this,f))}serialize(l=!1,P=null){(0,g.unreachable)("An editor must be serializable")}static deserialize(l,P,x){const U=new this.prototype.constructor({parent:P,id:P.getNextId(),uiManager:x});U.rotation=l.rotation;const[K,ne]=U.pageDimensions,[_e,pe,Pe,se]=U.getRectInCurrentCoords(l.rect,ne);return U.x=_e/K,U.y=pe/ne,U.width=Pe/K,U.height=se/ne,U}remove(){var l;this.div.removeEventListener("focusin",e(this,v)),this.div.removeEventListener("focusout",e(this,f)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(l=e(this,r))==null||l.remove(),Z(this,r,null),Z(this,D,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(j(this,E,en).call(this),e(this,u).classList.remove("hidden"))}select(){var l;this.makeResizable(),(l=this.div)==null||l.classList.add("selectedEditor")}unselect(){var l,P,x;(l=e(this,u))==null||l.classList.add("hidden"),(P=this.div)==null||P.classList.remove("selectedEditor"),(x=this.div)!=null&&x.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(l,P){}disableEditing(){e(this,r)&&(e(this,r).hidden=!0)}enableEditing(){e(this,r)&&(e(this,r).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,w)}set isEditing(l){Z(this,w,l),this.parent&&(l?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(l,P){Z(this,b,!0);const x=l/P,{style:U}=this.div;U.aspectRatio=x,U.height="auto"}static get MIN_SIZE(){return 16}};T=new WeakMap,c=new WeakMap,r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakMap,w=new WeakMap,p=new WeakMap,S=new WeakMap,s=new WeakMap,i=new WeakSet,Qt=function([l,P],x,U){[x,U]=this.screenToPageTranslation(x,U),this.x+=x/l,this.y+=U/P,this.fixAndSetPosition()},m=new WeakSet,Zt=function(){const[l,P]=this.parentDimensions,{_borderLineWidth:x}=a,U=x/l,K=x/P;switch(this.rotation){case 90:return[-U,K];case 180:return[U,K];case 270:return[U,-K];default:return[-U,-K]}},F=new WeakSet,Jt=function(l,P,x){switch(x){case 90:return[P,-l];case 180:return[-l,-P];case 270:return[-P,l];default:return[l,P]}},G=new WeakSet,ei=function(l){switch(l){case 90:{const[P,x]=this.pageDimensions;return[0,-P/x,x/P,0]}case 180:return[-1,0,0,-1];case 270:{const[P,x]=this.pageDimensions;return[0,P/x,-x/P,0]}default:return[1,0,0,1]}},E=new WeakSet,en=function(){if(e(this,u))return;Z(this,u,document.createElement("div")),e(this,u).classList.add("resizers");const l=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||l.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const P of l){const x=document.createElement("div");e(this,u).append(x),x.classList.add("resizer",P),x.addEventListener("pointerdown",j(this,J,tn).bind(this,P)),x.addEventListener("contextmenu",V.noContextMenu)}this.div.prepend(e(this,u))},J=new WeakSet,tn=function(l,P){P.preventDefault();const{isMac:x}=g.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&x)return;const U=j(this,H,nn).bind(this,l),K=this._isDraggable;this._isDraggable=!1;const ne={passive:!0,capture:!0};window.addEventListener("pointermove",U,ne);const _e=this.x,pe=this.y,Pe=this.width,se=this.height,be=this.parent.div.style.cursor,ge=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(P.target).cursor;const Fe=()=>{this._isDraggable=K,window.removeEventListener("pointerup",Fe),window.removeEventListener("blur",Fe),window.removeEventListener("pointermove",U,ne),this.parent.div.style.cursor=be,this.div.style.cursor=ge;const De=this.x,xe=this.y,de=this.width,oe=this.height;De===_e&&xe===pe&&de===Pe&&oe===se||this.addCommands({cmd:()=>{this.width=de,this.height=oe,this.x=De,this.y=xe;const[te,ee]=this.parentDimensions;this.setDims(te*de,ee*oe),this.fixAndSetPosition()},undo:()=>{this.width=Pe,this.height=se,this.x=_e,this.y=pe;const[te,ee]=this.parentDimensions;this.setDims(te*Pe,ee*se),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Fe),window.addEventListener("blur",Fe)},H=new WeakSet,nn=function(l,P){const[x,U]=this.parentDimensions,K=this.x,ne=this.y,_e=this.width,pe=this.height,Pe=a.MIN_SIZE/x,se=a.MIN_SIZE/U,be=he=>Math.round(he*1e4)/1e4,ge=j(this,G,ei).call(this,this.rotation),Fe=(he,ae)=>[ge[0]*he+ge[2]*ae,ge[1]*he+ge[3]*ae],De=j(this,G,ei).call(this,360-this.rotation),xe=(he,ae)=>[De[0]*he+De[2]*ae,De[1]*he+De[3]*ae];let de,oe,te=!1,ee=!1;switch(l){case"topLeft":te=!0,de=(he,ae)=>[0,0],oe=(he,ae)=>[he,ae];break;case"topMiddle":de=(he,ae)=>[he/2,0],oe=(he,ae)=>[he/2,ae];break;case"topRight":te=!0,de=(he,ae)=>[he,0],oe=(he,ae)=>[0,ae];break;case"middleRight":ee=!0,de=(he,ae)=>[he,ae/2],oe=(he,ae)=>[0,ae/2];break;case"bottomRight":te=!0,de=(he,ae)=>[he,ae],oe=(he,ae)=>[0,0];break;case"bottomMiddle":de=(he,ae)=>[he/2,ae],oe=(he,ae)=>[he/2,0];break;case"bottomLeft":te=!0,de=(he,ae)=>[0,ae],oe=(he,ae)=>[he,0];break;case"middleLeft":ee=!0,de=(he,ae)=>[0,ae/2],oe=(he,ae)=>[he,ae/2];break}const me=de(_e,pe),Te=oe(_e,pe);let Le=Fe(...Te);const Be=be(K+Le[0]),Ue=be(ne+Le[1]);let $e=1,Ge=1,[Ke,Xe]=this.screenToPageTranslation(P.movementX,P.movementY);if([Ke,Xe]=xe(Ke/x,Xe/U),te){const he=Math.hypot(_e,pe);$e=Ge=Math.max(Math.min(Math.hypot(Te[0]-me[0]-Ke,Te[1]-me[1]-Xe)/he,1/_e,1/pe),Pe/_e,se/pe)}else ee?$e=Math.max(Pe,Math.min(1,Math.abs(Te[0]-me[0]-Ke)))/_e:Ge=Math.max(se,Math.min(1,Math.abs(Te[1]-me[1]-Xe)))/pe;const Ze=be(_e*$e),ye=be(pe*Ge);Le=Fe(...oe(Ze,ye));const _=Be-Le[0],k=Ue-Le[1];this.width=Ze,this.height=ye,this.x=_,this.y=k,this.setDims(x*Ze,U*ye),this.fixAndSetPosition()},$=new WeakSet,ti=async function(){var x;const l=e(this,r);if(!l)return;if(!e(this,T)&&!e(this,c)){l.classList.remove("done"),(x=e(this,D))==null||x.remove();return}a._l10nPromise.get("editor_alt_text_edit_button_label").then(U=>{l.setAttribute("aria-label",U)});let P=e(this,D);if(!P){Z(this,D,P=document.createElement("span")),P.className="tooltip",P.setAttribute("role","tooltip");const U=P.id=`alt-text-tooltip-${this.id}`;l.setAttribute("aria-describedby",U);const K=100;l.addEventListener("mouseenter",()=>{Z(this,M,setTimeout(()=>{Z(this,M,null),e(this,D).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},K))}),l.addEventListener("mouseleave",()=>{var ne;clearTimeout(e(this,M)),Z(this,M,null),(ne=e(this,D))==null||ne.classList.remove("show")})}l.classList.add("done"),P.innerText=e(this,c)?await a._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,T),P.parentNode||l.append(P)},we=new WeakSet,sn=function(l){if(!this._isDraggable)return;const P=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let x,U;P&&(x={passive:!0,capture:!0},U=ne=>{const[_e,pe]=this.screenToPageTranslation(ne.movementX,ne.movementY);this._uiManager.dragSelectedEditors(_e,pe)},window.addEventListener("pointermove",U,x));const K=()=>{if(window.removeEventListener("pointerup",K),window.removeEventListener("blur",K),P&&window.removeEventListener("pointermove",U,x),Z(this,C,!1),!this._uiManager.endDragSession()){const{isMac:ne}=g.FeatureTest.platform;l.ctrlKey&&!ne||l.shiftKey||l.metaKey&&ne?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",K),window.addEventListener("blur",K)},I(a,F),tt(a,"_borderLineWidth",-1),tt(a,"_colorManager",new n.ColorManager),tt(a,"_zIndex",1),tt(a,"SMALL_EDITOR_SIZE",0);let O=a;t.AnnotationEditor=O;class R extends O{constructor(l){super(l),this.annotationElementId=l.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(z,t,L)=>{var b,u,v,f,C,ii,S,s,i,y,m,rn,A,G,ie,E,q,J,Y,H,le,$,Ee,we,N,a,d,l,P,x,U,K,ne,_e,pe,Pe,se,be,ge,Fe,De,xe,de,oe,te,ee,me,an,Le,ni,Ue,si,Ge,Lt,Xe,ri,ye,ai,k,rt,ae,vt,ve,on,ce,ln,Ae,oi,Oe,bt,Ce,li;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=V,t.opacityToHex=O;var n=L(1),g=L(6);function V(Q,o,B){for(const X of B)o.addEventListener(X,Q[X].bind(Q))}function O(Q){return Math.round(Math.min(255,Math.max(1,255*Q))).toString(16).padStart(2,"0")}class R{constructor(){I(this,b,0)}getId(){return`${n.AnnotationEditorPrefix}${dt(this,b)._++}`}}b=new WeakMap;const p=class p{constructor(){I(this,C);I(this,u,(0,n.getUuid)());I(this,v,0);I(this,f,null)}static get _isSVGFittingCanvas(){const o='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',X=new OffscreenCanvas(1,3).getContext("2d"),re=new Image;re.src=o;const fe=re.decode().then(()=>(X.drawImage(re,0,0,1,1,0,0,1,3),new Uint32Array(X.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",fe)}async getFromFile(o){const{lastModified:B,name:X,size:re,type:fe}=o;return j(this,C,ii).call(this,`${B}_${X}_${re}_${fe}`,o)}async getFromUrl(o){return j(this,C,ii).call(this,o,o)}async getFromId(o){e(this,f)||Z(this,f,new Map);const B=e(this,f).get(o);return B?B.bitmap?(B.refCounter+=1,B):B.file?this.getFromFile(B.file):this.getFromUrl(B.url):null}getSvgUrl(o){const B=e(this,f).get(o);return B!=null&&B.isSvg?B.svgUrl:null}deleteId(o){e(this,f)||Z(this,f,new Map);const B=e(this,f).get(o);B&&(B.refCounter-=1,B.refCounter===0&&(B.bitmap=null))}isValidId(o){return o.startsWith(`image_${e(this,u)}_`)}};u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakSet,ii=async function(o,B){e(this,f)||Z(this,f,new Map);let X=e(this,f).get(o);if(X===null)return null;if(X!=null&&X.bitmap)return X.refCounter+=1,X;try{X||(X={bitmap:null,id:`image_${e(this,u)}_${dt(this,v)._++}`,refCounter:0,isSvg:!1});let re;if(typeof B=="string"){X.url=B;const fe=await fetch(B);if(!fe.ok)throw new Error(fe.statusText);re=await fe.blob()}else re=X.file=B;if(re.type==="image/svg+xml"){const fe=p._isSVGFittingCanvas,Se=new FileReader,Re=new Image,Ne=new Promise((Ie,Qe)=>{Re.onload=()=>{X.bitmap=Re,X.isSvg=!0,Ie()},Se.onload=async()=>{const He=X.svgUrl=Se.result;Re.src=await fe?`${He}#svgView(preserveAspectRatio(none))`:He},Re.onerror=Se.onerror=Qe});Se.readAsDataURL(re),await Ne}else X.bitmap=await createImageBitmap(re);X.refCounter=1}catch(re){console.error(re),X=null}return e(this,f).set(o,X),X&&e(this,f).set(X.id,X),X};let T=p;class c{constructor(o=128){I(this,S,[]);I(this,s,!1);I(this,i,void 0);I(this,y,-1);Z(this,i,o)}add({cmd:o,undo:B,mustExec:X,type:re=NaN,overwriteIfSameType:fe=!1,keepUndo:Se=!1}){if(X&&o(),e(this,s))return;const Re={cmd:o,undo:B,type:re};if(e(this,y)===-1){e(this,S).length>0&&(e(this,S).length=0),Z(this,y,0),e(this,S).push(Re);return}if(fe&&e(this,S)[e(this,y)].type===re){Se&&(Re.undo=e(this,S)[e(this,y)].undo),e(this,S)[e(this,y)]=Re;return}const Ne=e(this,y)+1;Ne===e(this,i)?e(this,S).splice(0,1):(Z(this,y,Ne),Ne<e(this,S).length&&e(this,S).splice(Ne)),e(this,S).push(Re)}undo(){e(this,y)!==-1&&(Z(this,s,!0),e(this,S)[e(this,y)].undo(),Z(this,s,!1),Z(this,y,e(this,y)-1))}redo(){e(this,y)<e(this,S).length-1&&(Z(this,y,e(this,y)+1),Z(this,s,!0),e(this,S)[e(this,y)].cmd(),Z(this,s,!1))}hasSomethingToUndo(){return e(this,y)!==-1}hasSomethingToRedo(){return e(this,y)<e(this,S).length-1}destroy(){Z(this,S,null)}}S=new WeakMap,s=new WeakMap,i=new WeakMap,y=new WeakMap,t.CommandManager=c;class r{constructor(o){I(this,m);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:B}=n.FeatureTest.platform;for(const[X,re,fe={}]of o)for(const Se of X){const Re=Se.startsWith("mac+");B&&Re?(this.callbacks.set(Se.slice(4),{callback:re,options:fe}),this.allKeys.add(Se.split("+").at(-1))):!B&&!Re&&(this.callbacks.set(Se,{callback:re,options:fe}),this.allKeys.add(Se.split("+").at(-1)))}}exec(o,B){if(!this.allKeys.has(B.key))return;const X=this.callbacks.get(j(this,m,rn).call(this,B));if(!X)return;const{callback:re,options:{bubbles:fe=!1,args:Se=[],checker:Re=null}}=X;Re&&!Re(o,B)||(re.bind(o,...Se)(),fe||(B.stopPropagation(),B.preventDefault()))}}m=new WeakSet,rn=function(o){o.altKey&&this.buffer.push("alt"),o.ctrlKey&&this.buffer.push("ctrl"),o.metaKey&&this.buffer.push("meta"),o.shiftKey&&this.buffer.push("shift"),this.buffer.push(o.key);const B=this.buffer.join("+");return this.buffer.length=0,B},t.KeyboardManager=r;const F=class F{get _colors(){const o=new Map([["CanvasText",null],["Canvas",null]]);return(0,g.getColorValues)(o),(0,n.shadow)(this,"_colors",o)}convert(o){const B=(0,g.getRGB)(o);if(!window.matchMedia("(forced-colors: active)").matches)return B;for(const[X,re]of this._colors)if(re.every((fe,Se)=>fe===B[Se]))return F._colorsMapping.get(X);return B}getHexCode(o){const B=this._colors.get(o);return B?n.Util.makeHexColor(...B):o}};tt(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let D=F;t.ColorManager=D;const Ve=class Ve{constructor(o,B,X,re,fe,Se){I(this,me);I(this,Le);I(this,Ue);I(this,Ge);I(this,Xe);I(this,ye);I(this,k);I(this,ae);I(this,ve);I(this,ce);I(this,Ae);I(this,Oe);I(this,Ce);I(this,A,null);I(this,G,new Map);I(this,ie,new Map);I(this,E,null);I(this,q,null);I(this,J,new c);I(this,Y,0);I(this,H,new Set);I(this,le,null);I(this,$,null);I(this,Ee,new Set);I(this,we,null);I(this,N,new R);I(this,a,!1);I(this,d,!1);I(this,l,null);I(this,P,n.AnnotationEditorType.NONE);I(this,x,new Set);I(this,U,null);I(this,K,this.blur.bind(this));I(this,ne,this.focus.bind(this));I(this,_e,this.copy.bind(this));I(this,pe,this.cut.bind(this));I(this,Pe,this.paste.bind(this));I(this,se,this.keydown.bind(this));I(this,be,this.onEditingAction.bind(this));I(this,ge,this.onPageChanging.bind(this));I(this,Fe,this.onScaleChanging.bind(this));I(this,De,this.onRotationChanging.bind(this));I(this,xe,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});I(this,de,[0,0]);I(this,oe,null);I(this,te,null);I(this,ee,null);Z(this,te,o),Z(this,ee,B),Z(this,E,X),this._eventBus=re,this._eventBus._on("editingaction",e(this,be)),this._eventBus._on("pagechanging",e(this,ge)),this._eventBus._on("scalechanging",e(this,Fe)),this._eventBus._on("rotationchanging",e(this,De)),Z(this,q,fe.annotationStorage),Z(this,we,fe.filterFactory),Z(this,U,Se),this.viewParameters={realScale:g.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const o=Ve.prototype,B=fe=>{const{activeElement:Se}=document;return Se&&e(fe,te).contains(Se)&&fe.hasSomethingToControl()},X=this.TRANSLATE_SMALL,re=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new r([[["ctrl+a","mac+meta+a"],o.selectAll],[["ctrl+z","mac+meta+z"],o.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],o.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],o.delete],[["Escape","mac+Escape"],o.unselectAll],[["ArrowLeft","mac+ArrowLeft"],o.translateSelectedEditors,{args:[-X,0],checker:B}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],o.translateSelectedEditors,{args:[-re,0],checker:B}],[["ArrowRight","mac+ArrowRight"],o.translateSelectedEditors,{args:[X,0],checker:B}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],o.translateSelectedEditors,{args:[re,0],checker:B}],[["ArrowUp","mac+ArrowUp"],o.translateSelectedEditors,{args:[0,-X],checker:B}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],o.translateSelectedEditors,{args:[0,-re],checker:B}],[["ArrowDown","mac+ArrowDown"],o.translateSelectedEditors,{args:[0,X],checker:B}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],o.translateSelectedEditors,{args:[0,re],checker:B}]]))}destroy(){j(this,Ge,Lt).call(this),j(this,Le,ni).call(this),this._eventBus._off("editingaction",e(this,be)),this._eventBus._off("pagechanging",e(this,ge)),this._eventBus._off("scalechanging",e(this,Fe)),this._eventBus._off("rotationchanging",e(this,De));for(const o of e(this,ie).values())o.destroy();e(this,ie).clear(),e(this,G).clear(),e(this,Ee).clear(),Z(this,A,null),e(this,x).clear(),e(this,J).destroy(),e(this,E).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",e(this,U)?e(this,we).addHCMFilter(e(this,U).foreground,e(this,U).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(e(this,te)).direction)}editAltText(o){var B;(B=e(this,E))==null||B.editAltText(this,o)}onPageChanging({pageNumber:o}){Z(this,Y,o-1)}focusMainContainer(){e(this,te).focus()}findParent(o,B){for(const X of e(this,ie).values()){const{x:re,y:fe,width:Se,height:Re}=X.div.getBoundingClientRect();if(o>=re&&o<=re+Se&&B>=fe&&B<=fe+Re)return X}return null}disableUserSelect(o=!1){e(this,ee).classList.toggle("noUserSelect",o)}addShouldRescale(o){e(this,Ee).add(o)}removeShouldRescale(o){e(this,Ee).delete(o)}onScaleChanging({scale:o}){this.commitOrRemove(),this.viewParameters.realScale=o*g.PixelsPerInch.PDF_TO_CSS_UNITS;for(const B of e(this,Ee))B.onScaleChanging()}onRotationChanging({pagesRotation:o}){this.commitOrRemove(),this.viewParameters.rotation=o}addToAnnotationStorage(o){!o.isEmpty()&&e(this,q)&&!e(this,q).has(o.id)&&e(this,q).setValue(o.id,o)}blur(){if(!this.hasSelection)return;const{activeElement:o}=document;for(const B of e(this,x))if(B.div.contains(o)){Z(this,l,[B,o]),B._focusEventsAllowed=!1;break}}focus(){if(!e(this,l))return;const[o,B]=e(this,l);Z(this,l,null),B.addEventListener("focusin",()=>{o._focusEventsAllowed=!0},{once:!0}),B.focus()}addEditListeners(){j(this,Ue,si).call(this),j(this,Xe,ri).call(this)}removeEditListeners(){j(this,Ge,Lt).call(this),j(this,ye,ai).call(this)}copy(o){var X;if(o.preventDefault(),(X=e(this,A))==null||X.commitOrRemove(),!this.hasSelection)return;const B=[];for(const re of e(this,x)){const fe=re.serialize(!0);fe&&B.push(fe)}B.length!==0&&o.clipboardData.setData("application/pdfjs",JSON.stringify(B))}cut(o){this.copy(o),this.delete()}paste(o){o.preventDefault();const{clipboardData:B}=o;for(const fe of B.items)for(const Se of e(this,$))if(Se.isHandlingMimeForPasting(fe.type)){Se.paste(fe,this.currentLayer);return}let X=B.getData("application/pdfjs");if(!X)return;try{X=JSON.parse(X)}catch(fe){(0,n.warn)(`paste: "${fe.message}".`);return}if(!Array.isArray(X))return;this.unselectAll();const re=this.currentLayer;try{const fe=[];for(const Ne of X){const Ie=re.deserialize(Ne);if(!Ie)return;fe.push(Ie)}const Se=()=>{for(const Ne of fe)j(this,Ae,oi).call(this,Ne);j(this,Ce,li).call(this,fe)},Re=()=>{for(const Ne of fe)Ne.remove()};this.addCommands({cmd:Se,undo:Re,mustExec:!0})}catch(fe){(0,n.warn)(`paste: "${fe.message}".`)}}keydown(o){var B;(B=this.getActive())!=null&&B.shouldGetKeyboardEvents()||Ve._keyboardManager.exec(this,o)}onEditingAction(o){["undo","redo","delete","selectAll"].includes(o.name)&&this[o.name]()}setEditingState(o){o?(j(this,me,an).call(this),j(this,Ue,si).call(this),j(this,Xe,ri).call(this),j(this,k,rt).call(this,{isEditing:e(this,P)!==n.AnnotationEditorType.NONE,isEmpty:j(this,Oe,bt).call(this),hasSomethingToUndo:e(this,J).hasSomethingToUndo(),hasSomethingToRedo:e(this,J).hasSomethingToRedo(),hasSelectedEditor:!1})):(j(this,Le,ni).call(this),j(this,Ge,Lt).call(this),j(this,ye,ai).call(this),j(this,k,rt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(o){if(!e(this,$)){Z(this,$,o);for(const B of e(this,$))j(this,ae,vt).call(this,B.defaultPropertiesToUpdate)}}getId(){return e(this,N).getId()}get currentLayer(){return e(this,ie).get(e(this,Y))}getLayer(o){return e(this,ie).get(o)}get currentPageIndex(){return e(this,Y)}addLayer(o){e(this,ie).set(o.pageIndex,o),e(this,a)?o.enable():o.disable()}removeLayer(o){e(this,ie).delete(o.pageIndex)}updateMode(o,B=null){if(e(this,P)!==o){if(Z(this,P,o),o===n.AnnotationEditorType.NONE){this.setEditingState(!1),j(this,ce,ln).call(this);return}this.setEditingState(!0),j(this,ve,on).call(this),this.unselectAll();for(const X of e(this,ie).values())X.updateMode(o);if(B){for(const X of e(this,G).values())if(X.annotationElementId===B){this.setSelected(X),X.enterInEditMode();break}}}}updateToolbar(o){o!==e(this,P)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:o})}updateParams(o,B){if(e(this,$)){if(o===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(o);return}for(const X of e(this,x))X.updateParams(o,B);for(const X of e(this,$))X.updateDefaultParams(o,B)}}enableWaiting(o=!1){if(e(this,d)!==o){Z(this,d,o);for(const B of e(this,ie).values())o?B.disableClick():B.enableClick(),B.div.classList.toggle("waiting",o)}}getEditors(o){const B=[];for(const X of e(this,G).values())X.pageIndex===o&&B.push(X);return B}getEditor(o){return e(this,G).get(o)}addEditor(o){e(this,G).set(o.id,o)}removeEditor(o){var B;e(this,G).delete(o.id),this.unselect(o),(!o.annotationElementId||!e(this,H).has(o.annotationElementId))&&((B=e(this,q))==null||B.remove(o.id))}addDeletedAnnotationElement(o){e(this,H).add(o.annotationElementId),o.deleted=!0}isDeletedAnnotationElement(o){return e(this,H).has(o)}removeDeletedAnnotationElement(o){e(this,H).delete(o.annotationElementId),o.deleted=!1}setActiveEditor(o){e(this,A)!==o&&(Z(this,A,o),o&&j(this,ae,vt).call(this,o.propertiesToUpdate))}toggleSelected(o){if(e(this,x).has(o)){e(this,x).delete(o),o.unselect(),j(this,k,rt).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,x).add(o),o.select(),j(this,ae,vt).call(this,o.propertiesToUpdate),j(this,k,rt).call(this,{hasSelectedEditor:!0})}setSelected(o){for(const B of e(this,x))B!==o&&B.unselect();e(this,x).clear(),e(this,x).add(o),o.select(),j(this,ae,vt).call(this,o.propertiesToUpdate),j(this,k,rt).call(this,{hasSelectedEditor:!0})}isSelected(o){return e(this,x).has(o)}unselect(o){o.unselect(),e(this,x).delete(o),j(this,k,rt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,x).size!==0}undo(){e(this,J).undo(),j(this,k,rt).call(this,{hasSomethingToUndo:e(this,J).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:j(this,Oe,bt).call(this)})}redo(){e(this,J).redo(),j(this,k,rt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,J).hasSomethingToRedo(),isEmpty:j(this,Oe,bt).call(this)})}addCommands(o){e(this,J).add(o),j(this,k,rt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:j(this,Oe,bt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const o=[...e(this,x)],B=()=>{for(const re of o)re.remove()},X=()=>{for(const re of o)j(this,Ae,oi).call(this,re)};this.addCommands({cmd:B,undo:X,mustExec:!0})}commitOrRemove(){var o;(o=e(this,A))==null||o.commitOrRemove()}hasSomethingToControl(){return e(this,A)||this.hasSelection}selectAll(){for(const o of e(this,x))o.commit();j(this,Ce,li).call(this,e(this,G).values())}unselectAll(){if(e(this,A)){e(this,A).commitOrRemove();return}if(this.hasSelection){for(const o of e(this,x))o.unselect();e(this,x).clear(),j(this,k,rt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(o,B,X=!1){if(X||this.commitOrRemove(),!this.hasSelection)return;e(this,de)[0]+=o,e(this,de)[1]+=B;const[re,fe]=e(this,de),Se=[...e(this,x)],Re=1e3;e(this,oe)&&clearTimeout(e(this,oe)),Z(this,oe,setTimeout(()=>{Z(this,oe,null),e(this,de)[0]=e(this,de)[1]=0,this.addCommands({cmd:()=>{for(const Ne of Se)e(this,G).has(Ne.id)&&Ne.translateInPage(re,fe)},undo:()=>{for(const Ne of Se)e(this,G).has(Ne.id)&&Ne.translateInPage(-re,-fe)},mustExec:!1})},Re));for(const Ne of Se)Ne.translateInPage(o,B)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Z(this,le,new Map);for(const o of e(this,x))e(this,le).set(o,{savedX:o.x,savedY:o.y,savedPageIndex:o.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,le))return!1;this.disableUserSelect(!1);const o=e(this,le);Z(this,le,null);let B=!1;for(const[{x:re,y:fe,pageIndex:Se},Re]of o)Re.newX=re,Re.newY=fe,Re.newPageIndex=Se,B||(B=re!==Re.savedX||fe!==Re.savedY||Se!==Re.savedPageIndex);if(!B)return!1;const X=(re,fe,Se,Re)=>{if(e(this,G).has(re.id)){const Ne=e(this,ie).get(Re);Ne?re._setParentAndPosition(Ne,fe,Se):(re.pageIndex=Re,re.x=fe,re.y=Se)}};return this.addCommands({cmd:()=>{for(const[re,{newX:fe,newY:Se,newPageIndex:Re}]of o)X(re,fe,Se,Re)},undo:()=>{for(const[re,{savedX:fe,savedY:Se,savedPageIndex:Re}]of o)X(re,fe,Se,Re)},mustExec:!0}),!0}dragSelectedEditors(o,B){if(e(this,le))for(const X of e(this,le).keys())X.drag(o,B)}rebuild(o){if(o.parent===null){const B=this.getLayer(o.pageIndex);B?(B.changeParent(o),B.addOrRebuild(o)):(this.addEditor(o),this.addToAnnotationStorage(o),o.rebuild())}else o.parent.addOrRebuild(o)}isActive(o){return e(this,A)===o}getActive(){return e(this,A)}getMode(){return e(this,P)}get imageManager(){return(0,n.shadow)(this,"imageManager",new T)}};A=new WeakMap,G=new WeakMap,ie=new WeakMap,E=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,H=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,d=new WeakMap,l=new WeakMap,P=new WeakMap,x=new WeakMap,U=new WeakMap,K=new WeakMap,ne=new WeakMap,_e=new WeakMap,pe=new WeakMap,Pe=new WeakMap,se=new WeakMap,be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,De=new WeakMap,xe=new WeakMap,de=new WeakMap,oe=new WeakMap,te=new WeakMap,ee=new WeakMap,me=new WeakSet,an=function(){window.addEventListener("focus",e(this,ne)),window.addEventListener("blur",e(this,K))},Le=new WeakSet,ni=function(){window.removeEventListener("focus",e(this,ne)),window.removeEventListener("blur",e(this,K))},Ue=new WeakSet,si=function(){window.addEventListener("keydown",e(this,se),{capture:!0})},Ge=new WeakSet,Lt=function(){window.removeEventListener("keydown",e(this,se),{capture:!0})},Xe=new WeakSet,ri=function(){document.addEventListener("copy",e(this,_e)),document.addEventListener("cut",e(this,pe)),document.addEventListener("paste",e(this,Pe))},ye=new WeakSet,ai=function(){document.removeEventListener("copy",e(this,_e)),document.removeEventListener("cut",e(this,pe)),document.removeEventListener("paste",e(this,Pe))},k=new WeakSet,rt=function(o){Object.entries(o).some(([X,re])=>e(this,xe)[X]!==re)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,xe),o)})},ae=new WeakSet,vt=function(o){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:o})},ve=new WeakSet,on=function(){if(!e(this,a)){Z(this,a,!0);for(const o of e(this,ie).values())o.enable()}},ce=new WeakSet,ln=function(){if(this.unselectAll(),e(this,a)){Z(this,a,!1);for(const o of e(this,ie).values())o.disable()}},Ae=new WeakSet,oi=function(o){const B=e(this,ie).get(o.pageIndex);B?B.addOrRebuild(o):this.addEditor(o)},Oe=new WeakSet,bt=function(){if(e(this,G).size===0)return!0;if(e(this,G).size===1)for(const o of e(this,G).values())return o.isEmpty();return!1},Ce=new WeakSet,li=function(o){e(this,x).clear();for(const B of o)B.isEmpty()||(e(this,x).add(B),B.select());j(this,k,rt).call(this,{hasSelectedEditor:!0})},tt(Ve,"TRANSLATE_SMALL",1),tt(Ve,"TRANSLATE_BIG",10);let M=Ve;t.AnnotationEditorUIManager=M},(z,t,L)=>{var Y,H,le,$,Ee,we,N,a,d,l,P,x,ft,K,pt,_e,ci,Pe,Rt,be,Dt,Fe,St,xe,yt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=y,t.getColorValues=G,t.getCurrentTransform=ie,t.getCurrentTransformInverse=E,t.getFilenameFromUrl=C,t.getPdfFilenameFromUrl=w,t.getRGB=A,t.getXfaPageViewport=F,t.isDataScheme=v,t.isPdfFile=f,t.isValidFetchUrl=S,t.loadScript=i,t.noContextMenu=s,t.setLayerDimensions=q;var n=L(7),g=L(1);const V="http://www.w3.org/2000/svg",J=class J{};tt(J,"CSS",96),tt(J,"PDF",72),tt(J,"PDF_TO_CSS_UNITS",J.CSS/J.PDF);let O=J;t.PixelsPerInch=O;class R extends n.BaseFilterFactory{constructor({docId:ee,ownerDocument:me=globalThis.document}={}){super();I(this,x);I(this,K);I(this,_e);I(this,Pe);I(this,be);I(this,Fe);I(this,xe);I(this,Y,void 0);I(this,H,void 0);I(this,le,void 0);I(this,$,void 0);I(this,Ee,void 0);I(this,we,void 0);I(this,N,void 0);I(this,a,void 0);I(this,d,void 0);I(this,l,void 0);I(this,P,0);Z(this,le,ee),Z(this,$,me)}addFilter(ee){if(!ee)return"none";let me=e(this,x,ft).get(ee);if(me)return me;let Te,Le,Be,Ue;if(ee.length===1){const Xe=ee[0],Ze=new Array(256);for(let ye=0;ye<256;ye++)Ze[ye]=Xe[ye]/255;Ue=Te=Le=Be=Ze.join(",")}else{const[Xe,Ze,ye]=ee,_=new Array(256),k=new Array(256),he=new Array(256);for(let ae=0;ae<256;ae++)_[ae]=Xe[ae]/255,k[ae]=Ze[ae]/255,he[ae]=ye[ae]/255;Te=_.join(","),Le=k.join(","),Be=he.join(","),Ue=`${Te}${Le}${Be}`}if(me=e(this,x,ft).get(Ue),me)return e(this,x,ft).set(ee,me),me;const $e=`g_${e(this,le)}_transfer_map_${dt(this,P)._++}`,Ge=`url(#${$e})`;e(this,x,ft).set(ee,Ge),e(this,x,ft).set(Ue,Ge);const Ke=j(this,Pe,Rt).call(this,$e);return j(this,Fe,St).call(this,Te,Le,Be,Ke),Ge}addHCMFilter(ee,me){var Ze;const Te=`${ee}-${me}`;if(e(this,we)===Te)return e(this,N);if(Z(this,we,Te),Z(this,N,"none"),(Ze=e(this,Ee))==null||Ze.remove(),!ee||!me)return e(this,N);const Le=j(this,xe,yt).call(this,ee);ee=g.Util.makeHexColor(...Le);const Be=j(this,xe,yt).call(this,me);if(me=g.Util.makeHexColor(...Be),e(this,K,pt).style.color="",ee==="#000000"&&me==="#ffffff"||ee===me)return e(this,N);const Ue=new Array(256);for(let ye=0;ye<=255;ye++){const _=ye/255;Ue[ye]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const $e=Ue.join(","),Ge=`g_${e(this,le)}_hcm_filter`,Ke=Z(this,a,j(this,Pe,Rt).call(this,Ge));j(this,Fe,St).call(this,$e,$e,$e,Ke),j(this,_e,ci).call(this,Ke);const Xe=(ye,_)=>{const k=Le[ye]/255,he=Be[ye]/255,ae=new Array(_+1);for(let ue=0;ue<=_;ue++)ae[ue]=k+ue/_*(he-k);return ae.join(",")};return j(this,Fe,St).call(this,Xe(0,5),Xe(1,5),Xe(2,5),Ke),Z(this,N,`url(#${Ge})`),e(this,N)}addHighlightHCMFilter(ee,me,Te,Le){var he;const Be=`${ee}-${me}-${Te}-${Le}`;if(e(this,d)===Be)return e(this,l);if(Z(this,d,Be),Z(this,l,"none"),(he=e(this,a))==null||he.remove(),!ee||!me)return e(this,l);const[Ue,$e]=[ee,me].map(j(this,xe,yt).bind(this));let Ge=Math.round(.2126*Ue[0]+.7152*Ue[1]+.0722*Ue[2]),Ke=Math.round(.2126*$e[0]+.7152*$e[1]+.0722*$e[2]),[Xe,Ze]=[Te,Le].map(j(this,xe,yt).bind(this));Ke<Ge&&([Ge,Ke,Xe,Ze]=[Ke,Ge,Ze,Xe]),e(this,K,pt).style.color="";const ye=(ae,ue,ve)=>{const W=new Array(256),ce=(Ke-Ge)/ve,Me=ae/255,Ae=(ue-ae)/(255*ve);let ke=0;for(let Oe=0;Oe<=ve;Oe++){const je=Math.round(Ge+Oe*ce),Ce=Me+Oe*Ae;for(let qe=ke;qe<=je;qe++)W[qe]=Ce;ke=je+1}for(let Oe=ke;Oe<256;Oe++)W[Oe]=W[ke-1];return W.join(",")},_=`g_${e(this,le)}_hcm_highlight_filter`,k=Z(this,a,j(this,Pe,Rt).call(this,_));return j(this,_e,ci).call(this,k),j(this,Fe,St).call(this,ye(Xe[0],Ze[0],5),ye(Xe[1],Ze[1],5),ye(Xe[2],Ze[2],5),k),Z(this,l,`url(#${_})`),e(this,l)}destroy(ee=!1){ee&&(e(this,N)||e(this,l))||(e(this,H)&&(e(this,H).parentNode.parentNode.remove(),Z(this,H,null)),e(this,Y)&&(e(this,Y).clear(),Z(this,Y,null)),Z(this,P,0))}}Y=new WeakMap,H=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,d=new WeakMap,l=new WeakMap,P=new WeakMap,x=new WeakSet,ft=function(){return e(this,Y)||Z(this,Y,new Map)},K=new WeakSet,pt=function(){if(!e(this,H)){const ee=e(this,$).createElement("div"),{style:me}=ee;me.visibility="hidden",me.contain="strict",me.width=me.height=0,me.position="absolute",me.top=me.left=0,me.zIndex=-1;const Te=e(this,$).createElementNS(V,"svg");Te.setAttribute("width",0),Te.setAttribute("height",0),Z(this,H,e(this,$).createElementNS(V,"defs")),ee.append(Te),Te.append(e(this,H)),e(this,$).body.append(ee)}return e(this,H)},_e=new WeakSet,ci=function(ee){const me=e(this,$).createElementNS(V,"feColorMatrix");me.setAttribute("type","matrix"),me.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),ee.append(me)},Pe=new WeakSet,Rt=function(ee){const me=e(this,$).createElementNS(V,"filter");return me.setAttribute("color-interpolation-filters","sRGB"),me.setAttribute("id",ee),e(this,K,pt).append(me),me},be=new WeakSet,Dt=function(ee,me,Te){const Le=e(this,$).createElementNS(V,me);Le.setAttribute("type","discrete"),Le.setAttribute("tableValues",Te),ee.append(Le)},Fe=new WeakSet,St=function(ee,me,Te,Le){const Be=e(this,$).createElementNS(V,"feComponentTransfer");Le.append(Be),j(this,be,Dt).call(this,Be,"feFuncR",ee),j(this,be,Dt).call(this,Be,"feFuncG",me),j(this,be,Dt).call(this,Be,"feFuncB",Te)},xe=new WeakSet,yt=function(ee){return e(this,K,pt).style.color=ee,A(getComputedStyle(e(this,K,pt)).getPropertyValue("color"))},t.DOMFilterFactory=R;class T extends n.BaseCanvasFactory{constructor({ownerDocument:te=globalThis.document}={}){super(),this._document=te}_createCanvas(te,ee){const me=this._document.createElement("canvas");return me.width=te,me.height=ee,me}}t.DOMCanvasFactory=T;async function c(oe,te=!1){if(S(oe,document.baseURI)){const ee=await fetch(oe);if(!ee.ok)throw new Error(ee.statusText);return te?new Uint8Array(await ee.arrayBuffer()):(0,g.stringToBytes)(await ee.text())}return new Promise((ee,me)=>{const Te=new XMLHttpRequest;Te.open("GET",oe,!0),te&&(Te.responseType="arraybuffer"),Te.onreadystatechange=()=>{if(Te.readyState===XMLHttpRequest.DONE){if(Te.status===200||Te.status===0){let Le;if(te&&Te.response?Le=new Uint8Array(Te.response):!te&&Te.responseText&&(Le=(0,g.stringToBytes)(Te.responseText)),Le){ee(Le);return}}me(new Error(Te.statusText))}},Te.send(null)})}class r extends n.BaseCMapReaderFactory{_fetchData(te,ee){return c(te,this.isCompressed).then(me=>({cMapData:me,compressionType:ee}))}}t.DOMCMapReaderFactory=r;class D extends n.BaseStandardFontDataFactory{_fetchData(te){return c(te,!0)}}t.DOMStandardFontDataFactory=D;class M extends n.BaseSVGFactory{_createSVG(te){return document.createElementNS(V,te)}}t.DOMSVGFactory=M;class b{constructor({viewBox:te,scale:ee,rotation:me,offsetX:Te=0,offsetY:Le=0,dontFlip:Be=!1}){this.viewBox=te,this.scale=ee,this.rotation=me,this.offsetX=Te,this.offsetY=Le;const Ue=(te[2]+te[0])/2,$e=(te[3]+te[1])/2;let Ge,Ke,Xe,Ze;switch(me%=360,me<0&&(me+=360),me){case 180:Ge=-1,Ke=0,Xe=0,Ze=1;break;case 90:Ge=0,Ke=1,Xe=1,Ze=0;break;case 270:Ge=0,Ke=-1,Xe=-1,Ze=0;break;case 0:Ge=1,Ke=0,Xe=0,Ze=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Be&&(Xe=-Xe,Ze=-Ze);let ye,_,k,he;Ge===0?(ye=Math.abs($e-te[1])*ee+Te,_=Math.abs(Ue-te[0])*ee+Le,k=(te[3]-te[1])*ee,he=(te[2]-te[0])*ee):(ye=Math.abs(Ue-te[0])*ee+Te,_=Math.abs($e-te[1])*ee+Le,k=(te[2]-te[0])*ee,he=(te[3]-te[1])*ee),this.transform=[Ge*ee,Ke*ee,Xe*ee,Ze*ee,ye-Ge*ee*Ue-Xe*ee*$e,_-Ke*ee*Ue-Ze*ee*$e],this.width=k,this.height=he}get rawDims(){const{viewBox:te}=this;return(0,g.shadow)(this,"rawDims",{pageWidth:te[2]-te[0],pageHeight:te[3]-te[1],pageX:te[0],pageY:te[1]})}clone({scale:te=this.scale,rotation:ee=this.rotation,offsetX:me=this.offsetX,offsetY:Te=this.offsetY,dontFlip:Le=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:te,rotation:ee,offsetX:me,offsetY:Te,dontFlip:Le})}convertToViewportPoint(te,ee){return g.Util.applyTransform([te,ee],this.transform)}convertToViewportRectangle(te){const ee=g.Util.applyTransform([te[0],te[1]],this.transform),me=g.Util.applyTransform([te[2],te[3]],this.transform);return[ee[0],ee[1],me[0],me[1]]}convertToPdfPoint(te,ee){return g.Util.applyInverseTransform([te,ee],this.transform)}}t.PageViewport=b;class u extends g.BaseException{constructor(te,ee=0){super(te,"RenderingCancelledException"),this.extraDelay=ee}}t.RenderingCancelledException=u;function v(oe){const te=oe.length;let ee=0;for(;ee<te&&oe[ee].trim()==="";)ee++;return oe.substring(ee,ee+5).toLowerCase()==="data:"}function f(oe){return typeof oe=="string"&&/\.pdf$/i.test(oe)}function C(oe,te=!1){return te||([oe]=oe.split(/[#?]/,1)),oe.substring(oe.lastIndexOf("/")+1)}function w(oe,te="document.pdf"){if(typeof oe!="string")return te;if(v(oe))return(0,g.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),te;const ee=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,me=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Te=ee.exec(oe);let Le=me.exec(Te[1])||me.exec(Te[2])||me.exec(Te[3]);if(Le&&(Le=Le[0],Le.includes("%")))try{Le=me.exec(decodeURIComponent(Le))[0]}catch{}return Le||te}class p{constructor(){tt(this,"started",Object.create(null));tt(this,"times",[])}time(te){te in this.started&&(0,g.warn)(`Timer is already running for ${te}`),this.started[te]=Date.now()}timeEnd(te){te in this.started||(0,g.warn)(`Timer has not been started for ${te}`),this.times.push({name:te,start:this.started[te],end:Date.now()}),delete this.started[te]}toString(){const te=[];let ee=0;for(const{name:me}of this.times)ee=Math.max(me.length,ee);for(const{name:me,start:Te,end:Le}of this.times)te.push(`${me.padEnd(ee)} ${Le-Te}ms
`);return te.join("")}}t.StatTimer=p;function S(oe,te){try{const{protocol:ee}=te?new URL(oe,te):new URL(oe);return ee==="http:"||ee==="https:"}catch{return!1}}function s(oe){oe.preventDefault()}function i(oe,te=!1){return new Promise((ee,me)=>{const Te=document.createElement("script");Te.src=oe,Te.onload=function(Le){te&&Te.remove(),ee(Le)},Te.onerror=function(){me(new Error(`Cannot load script at: ${Te.src}`))},(document.head||document.documentElement).append(Te)})}function y(oe){console.log("Deprecated API usage: "+oe)}let m;class h{static toDateObject(te){if(!te||typeof te!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ee=m.exec(te);if(!ee)return null;const me=parseInt(ee[1],10);let Te=parseInt(ee[2],10);Te=Te>=1&&Te<=12?Te-1:0;let Le=parseInt(ee[3],10);Le=Le>=1&&Le<=31?Le:1;let Be=parseInt(ee[4],10);Be=Be>=0&&Be<=23?Be:0;let Ue=parseInt(ee[5],10);Ue=Ue>=0&&Ue<=59?Ue:0;let $e=parseInt(ee[6],10);$e=$e>=0&&$e<=59?$e:0;const Ge=ee[7]||"Z";let Ke=parseInt(ee[8],10);Ke=Ke>=0&&Ke<=23?Ke:0;let Xe=parseInt(ee[9],10)||0;return Xe=Xe>=0&&Xe<=59?Xe:0,Ge==="-"?(Be+=Ke,Ue+=Xe):Ge==="+"&&(Be-=Ke,Ue-=Xe),new Date(Date.UTC(me,Te,Le,Be,Ue,$e))}}t.PDFDateString=h;function F(oe,{scale:te=1,rotation:ee=0}){const{width:me,height:Te}=oe.attributes.style,Le=[0,0,parseInt(me),parseInt(Te)];return new b({viewBox:Le,scale:te,rotation:ee})}function A(oe){if(oe.startsWith("#")){const te=parseInt(oe.slice(1),16);return[(te&16711680)>>16,(te&65280)>>8,te&255]}return oe.startsWith("rgb(")?oe.slice(4,-1).split(",").map(te=>parseInt(te)):oe.startsWith("rgba(")?oe.slice(5,-1).split(",").map(te=>parseInt(te)).slice(0,3):((0,g.warn)(`Not a valid color format: "${oe}"`),[0,0,0])}function G(oe){const te=document.createElement("span");te.style.visibility="hidden",document.body.append(te);for(const ee of oe.keys()){te.style.color=ee;const me=window.getComputedStyle(te).color;oe.set(ee,A(me))}te.remove()}function ie(oe){const{a:te,b:ee,c:me,d:Te,e:Le,f:Be}=oe.getTransform();return[te,ee,me,Te,Le,Be]}function E(oe){const{a:te,b:ee,c:me,d:Te,e:Le,f:Be}=oe.getTransform().invertSelf();return[te,ee,me,Te,Le,Be]}function q(oe,te,ee=!1,me=!0){if(te instanceof b){const{pageWidth:Te,pageHeight:Le}=te.rawDims,{style:Be}=oe,Ue=g.FeatureTest.isCSSRoundSupported,$e=`var(--scale-factor) * ${Te}px`,Ge=`var(--scale-factor) * ${Le}px`,Ke=Ue?`round(${$e}, 1px)`:`calc(${$e})`,Xe=Ue?`round(${Ge}, 1px)`:`calc(${Ge})`;!ee||te.rotation%180===0?(Be.width=Ke,Be.height=Xe):(Be.width=Xe,Be.height=Ke)}me&&oe.setAttribute("data-main-rotation",te.rotation)}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=L(1);class g{constructor(){this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(r){return"none"}addHCMFilter(r,D){return"none"}addHighlightHCMFilter(r,D,M,b){return"none"}destroy(r=!1){}}t.BaseFilterFactory=g;class V{constructor(){this.constructor===V&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(r,D){if(r<=0||D<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(r,D);return{canvas:M,context:M.getContext("2d")}}reset(r,D,M){if(!r.canvas)throw new Error("Canvas is not specified");if(D<=0||M<=0)throw new Error("Invalid canvas size");r.canvas.width=D,r.canvas.height=M}destroy(r){if(!r.canvas)throw new Error("Canvas is not specified");r.canvas.width=0,r.canvas.height=0,r.canvas=null,r.context=null}_createCanvas(r,D){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=V;class O{constructor({baseUrl:r=null,isCompressed:D=!0}){this.constructor===O&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=r,this.isCompressed=D}async fetch({name:r}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!r)throw new Error("CMap name must be specified.");const D=this.baseUrl+r+(this.isCompressed?".bcmap":""),M=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(D,M).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${D}`)})}_fetchData(r,D){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=O;class R{constructor({baseUrl:r=null}){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=r}async fetch({filename:r}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!r)throw new Error("Font filename must be specified.");const D=`${this.baseUrl}${r}`;return this._fetchData(D).catch(M=>{throw new Error(`Unable to load font data at: ${D}`)})}_fetchData(r){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=R;class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(r,D,M=!1){if(r<=0||D<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),M||(b.setAttribute("width",`${r}px`),b.setAttribute("height",`${D}px`)),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${r} ${D}`),b}createElement(r){if(typeof r!="string")throw new Error("Invalid SVG element type");return this._createSVG(r)}_createSVG(r){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=T},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=L(1);const g=3285377520,V=4294901760,O=65535;class R{constructor(c){this.h1=c?c&4294967295:g,this.h2=c?c&4294967295:g}update(c){let r,D;if(typeof c=="string"){r=new Uint8Array(c.length*2),D=0;for(let y=0,m=c.length;y<m;y++){const h=c.charCodeAt(y);h<=255?r[D++]=h:(r[D++]=h>>>8,r[D++]=h&255)}}else if((0,n.isArrayBuffer)(c))r=c.slice(),D=r.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const M=D>>2,b=D-M*4,u=new Uint32Array(r.buffer,0,M);let v=0,f=0,C=this.h1,w=this.h2;const p=3432918353,S=461845907,s=p&O,i=S&O;for(let y=0;y<M;y++)y&1?(v=u[y],v=v*p&V|v*s&O,v=v<<15|v>>>17,v=v*S&V|v*i&O,C^=v,C=C<<13|C>>>19,C=C*5+3864292196):(f=u[y],f=f*p&V|f*s&O,f=f<<15|f>>>17,f=f*S&V|f*i&O,w^=f,w=w<<13|w>>>19,w=w*5+3864292196);switch(v=0,b){case 3:v^=r[M*4+2]<<16;case 2:v^=r[M*4+1]<<8;case 1:v^=r[M*4],v=v*p&V|v*s&O,v=v<<15|v>>>17,v=v*S&V|v*i&O,M&1?C^=v:w^=v}this.h1=C,this.h2=w}hexdigest(){let c=this.h1,r=this.h2;return c^=r>>>1,c=c*3981806797&V|c*36045&O,r=r*4283543511&V|((r<<16|c>>>16)*2950163797&V)>>>16,c^=r>>>1,c=c*444984403&V|c*60499&O,r=r*3301882366&V|((r<<16|c>>>16)*3120437893&V)>>>16,c^=r>>>1,(c>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=R},(z,t,L)=>{var O;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=L(1);class g{constructor({ownerDocument:T=globalThis.document,styleElement:c=null}){I(this,O,new Set);this._document=T,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.add(T),this._document.fonts.add(T)}removeNativeFontFace(T){this.nativeFontFaces.delete(T),this._document.fonts.delete(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const c=this.styleElement.sheet;c.insertRule(T,c.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.clear(),e(this,O).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(T){if(!(!T||e(this,O).has(T.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:c,src:r,style:D}=T,M=new FontFace(c,r,D);this.addNativeFontFace(M);try{await M.load(),e(this,O).add(c)}catch{(0,n.warn)(`Cannot load system font: ${T.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(M)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(T){if(T.attached||T.missingFile&&!T.systemFontInfo)return;if(T.attached=!0,T.systemFontInfo){await this.loadSystemFont(T.systemFontInfo);return}if(this.isFontLoadingAPISupported){const r=T.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(D){throw(0,n.warn)(`Failed to load font '${r.family}': '${D}'.`),T.disableFontFace=!0,D}}return}const c=T.createFontFaceRule();if(c){if(this.insertRule(c),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const D=this._queueLoadingCallback(r);this._prepareFontLoadEvent(T,D)})}}get isFontLoadingAPISupported(){var c;const T=!!((c=this._document)!=null&&c.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function c(){for((0,n.assert)(!D.done,"completeRequest() cannot be called twice."),D.done=!0;r.length>0&&r[0].done;){const M=r.shift();setTimeout(M.callback,0)}}const{loadingRequests:r}=this,D={done:!1,complete:c,callback:T};return r.push(D),D}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,c){function r(A,G){return A.charCodeAt(G)<<24|A.charCodeAt(G+1)<<16|A.charCodeAt(G+2)<<8|A.charCodeAt(G+3)&255}function D(A,G,ie,E){const q=A.substring(0,G),J=A.substring(G+ie);return q+E+J}let M,b;const u=this._document.createElement("canvas");u.width=1,u.height=1;const v=u.getContext("2d");let f=0;function C(A,G){if(++f>30){(0,n.warn)("Load test font never loaded."),G();return}if(v.font="30px "+A,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(C.bind(null,A,G))}const w=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=D(p,976,w.length,w);const s=16,i=1482184792;let y=r(p,s);for(M=0,b=w.length-3;M<b;M+=4)y=y-i+r(w,M)|0;M<w.length&&(y=y-i+r(w+"XXX",M)|0),p=D(p,s,4,(0,n.string32)(y));const m=`url(data:font/opentype;base64,${btoa(p)});`,h=`@font-face {font-family:"${w}";src:${m}}`;this.insertRule(h);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const A of[T.loadedName,w]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=A,F.append(G)}this._document.body.append(F),C(w,()=>{F.remove(),c.complete()})}}O=new WeakMap,t.FontLoader=g;class V{constructor(T,{isEvalSupported:c=!0,disableFontFace:r=!1,ignoreErrors:D=!1,inspectFont:M=null}){this.compiledGlyphs=Object.create(null);for(const b in T)this[b]=T[b];this.isEvalSupported=c!==!1,this.disableFontFace=r===!0,this.ignoreErrors=D===!0,this._inspectFont=M}createNativeFontFace(){var c;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(c=this._inspectFont)==null||c.call(this,this),T}createFontFaceRule(){var D;if(!this.data||this.disableFontFace)return null;const T=(0,n.bytesToString)(this.data),c=`url(data:${this.mimetype};base64,${btoa(T)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${c}}`;else{let M=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(M+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${M}src:${c}}`}return(D=this._inspectFont)==null||D.call(this,this,c),r}getPathGenerator(T,c){if(this.compiledGlyphs[c]!==void 0)return this.compiledGlyphs[c];let r;try{r=T.get(this.loadedName+"_path_"+c)}catch(D){if(!this.ignoreErrors)throw D;return(0,n.warn)(`getPathGenerator - ignoring character: "${D}".`),this.compiledGlyphs[c]=function(M,b){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const D=[];for(const M of r){const b=M.args!==void 0?M.args.join(","):"";D.push("c.",M.cmd,"(",b,`);
`)}return this.compiledGlyphs[c]=new Function("c","size",D.join(""))}return this.compiledGlyphs[c]=function(D,M){for(const b of r)b.cmd==="scale"&&(b.args=[M,-M]),D[b.cmd].apply(D,b.args)}}}t.FontFaceObject=V},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=L(7);L(1);const g=function(c){return new Promise((r,D)=>{require$$5.readFile(c,(b,u)=>{if(b||!u){D(new Error(b));return}r(new Uint8Array(u))})})};class V extends n.BaseFilterFactory{}t.NodeFilterFactory=V;class O extends n.BaseCanvasFactory{_createCanvas(r,D){return require$$5.createCanvas(r,D)}}t.NodeCanvasFactory=O;class R extends n.BaseCMapReaderFactory{_fetchData(r,D){return g(r).then(M=>({cMapData:M,compressionType:D}))}}t.NodeCMapReaderFactory=R;class T extends n.BaseStandardFontDataFactory{_fetchData(r){return g(r)}}t.NodeStandardFontDataFactory=T},(z,t,L)=>{var H,hi,$,di;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=L(1),g=L(6),V=L(12),O=L(13);const R=16,T=100,c=4096,r=15,D=10,M=1e3,b=16;function u(N,a){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){a.save(),this.__originalSave()},N.restore=function(){a.restore(),this.__originalRestore()},N.translate=function(l,P){a.translate(l,P),this.__originalTranslate(l,P)},N.scale=function(l,P){a.scale(l,P),this.__originalScale(l,P)},N.transform=function(l,P,x,U,K,ne){a.transform(l,P,x,U,K,ne),this.__originalTransform(l,P,x,U,K,ne)},N.setTransform=function(l,P,x,U,K,ne){a.setTransform(l,P,x,U,K,ne),this.__originalSetTransform(l,P,x,U,K,ne)},N.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},N.rotate=function(l){a.rotate(l),this.__originalRotate(l)},N.clip=function(l){a.clip(l),this.__originalClip(l)},N.moveTo=function(d,l){a.moveTo(d,l),this.__originalMoveTo(d,l)},N.lineTo=function(d,l){a.lineTo(d,l),this.__originalLineTo(d,l)},N.bezierCurveTo=function(d,l,P,x,U,K){a.bezierCurveTo(d,l,P,x,U,K),this.__originalBezierCurveTo(d,l,P,x,U,K)},N.rect=function(d,l,P,x){a.rect(d,l,P,x),this.__originalRect(d,l,P,x)},N.closePath=function(){a.closePath(),this.__originalClosePath()},N.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class v{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,d,l){let P;return this.cache[a]!==void 0?(P=this.cache[a],this.canvasFactory.reset(P,d,l)):(P=this.canvasFactory.create(d,l),this.cache[a]=P),P}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const d=this.cache[a];this.canvasFactory.destroy(d),delete this.cache[a]}}}function f(N,a,d,l,P,x,U,K,ne,_e){const[pe,Pe,se,be,ge,Fe]=(0,g.getCurrentTransform)(N);if(Pe===0&&se===0){const de=U*pe+ge,oe=Math.round(de),te=K*be+Fe,ee=Math.round(te),me=(U+ne)*pe+ge,Te=Math.abs(Math.round(me)-oe)||1,Le=(K+_e)*be+Fe,Be=Math.abs(Math.round(Le)-ee)||1;return N.setTransform(Math.sign(pe),0,0,Math.sign(be),oe,ee),N.drawImage(a,d,l,P,x,0,0,Te,Be),N.setTransform(pe,Pe,se,be,ge,Fe),[Te,Be]}if(pe===0&&be===0){const de=K*se+ge,oe=Math.round(de),te=U*Pe+Fe,ee=Math.round(te),me=(K+_e)*se+ge,Te=Math.abs(Math.round(me)-oe)||1,Le=(U+ne)*Pe+Fe,Be=Math.abs(Math.round(Le)-ee)||1;return N.setTransform(0,Math.sign(Pe),Math.sign(se),0,oe,ee),N.drawImage(a,d,l,P,x,0,0,Be,Te),N.setTransform(pe,Pe,se,be,ge,Fe),[Be,Te]}N.drawImage(a,d,l,P,x,U,K,ne,_e);const De=Math.hypot(pe,Pe),xe=Math.hypot(se,be);return[De*ne,xe*_e]}function C(N){const{width:a,height:d}=N;if(a>M||d>M)return null;const l=1e3,P=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),x=a+1;let U=new Uint8Array(x*(d+1)),K,ne,_e;const pe=a+7&-8;let Pe=new Uint8Array(pe*d),se=0;for(const xe of N.data){let de=128;for(;de>0;)Pe[se++]=xe&de?0:255,de>>=1}let be=0;for(se=0,Pe[se]!==0&&(U[0]=1,++be),ne=1;ne<a;ne++)Pe[se]!==Pe[se+1]&&(U[ne]=Pe[se]?2:1,++be),se++;for(Pe[se]!==0&&(U[ne]=2,++be),K=1;K<d;K++){se=K*pe,_e=K*x,Pe[se-pe]!==Pe[se]&&(U[_e]=Pe[se]?1:8,++be);let xe=(Pe[se]?4:0)+(Pe[se-pe]?8:0);for(ne=1;ne<a;ne++)xe=(xe>>2)+(Pe[se+1]?4:0)+(Pe[se-pe+1]?8:0),P[xe]&&(U[_e+ne]=P[xe],++be),se++;if(Pe[se-pe]!==Pe[se]&&(U[_e+ne]=Pe[se]?2:4,++be),be>l)return null}for(se=pe*(d-1),_e=K*x,Pe[se]!==0&&(U[_e]=8,++be),ne=1;ne<a;ne++)Pe[se]!==Pe[se+1]&&(U[_e+ne]=Pe[se]?4:8,++be),se++;if(Pe[se]!==0&&(U[_e+ne]=4,++be),be>l)return null;const ge=new Int32Array([0,x,-1,0,-x,0,0,0,1]),Fe=new Path2D;for(K=0;be&&K<=d;K++){let xe=K*x;const de=xe+a;for(;xe<de&&!U[xe];)xe++;if(xe===de)continue;Fe.moveTo(xe%x,K);const oe=xe;let te=U[xe];do{const ee=ge[te];do xe+=ee;while(!U[xe]);const me=U[xe];me!==5&&me!==10?(te=me,U[xe]=0):(te=me&51*te>>4,U[xe]&=te>>2|te<<2),Fe.lineTo(xe%x,xe/x|0),U[xe]||--be}while(oe!==xe);--K}return Pe=null,U=null,function(xe){xe.save(),xe.scale(1/a,-1/d),xe.translate(0,-d),xe.fill(Fe),xe.beginPath(),xe.restore()}}class w{constructor(a,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,d])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,d){this.x=a,this.y=d}updatePathMinMax(a,d,l){[d,l]=n.Util.applyTransform([d,l],a),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,l),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,l)}updateRectMinMax(a,d){const l=n.Util.applyTransform(d,a),P=n.Util.applyTransform(d.slice(2),a);this.minX=Math.min(this.minX,l[0],P[0]),this.minY=Math.min(this.minY,l[1],P[1]),this.maxX=Math.max(this.maxX,l[0],P[0]),this.maxY=Math.max(this.maxY,l[1],P[1])}updateScalingPathMinMax(a,d){n.Util.scaleMinMax(a,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(a,d,l,P,x,U,K,ne,_e,pe){const Pe=n.Util.bezierBoundingBox(d,l,P,x,U,K,ne,_e);if(pe){pe[0]=Math.min(pe[0],Pe[0],Pe[2]),pe[1]=Math.max(pe[1],Pe[0],Pe[2]),pe[2]=Math.min(pe[2],Pe[1],Pe[3]),pe[3]=Math.max(pe[3],Pe[1],Pe[3]);return}this.updateRectMinMax(a,Pe)}getPathBoundingBox(a=V.PathType.FILL,d=null){const l=[this.minX,this.minY,this.maxX,this.maxY];if(a===V.PathType.STROKE){d||(0,n.unreachable)("Stroke bounding box must include transform.");const P=n.Util.singularValueDecompose2dScale(d),x=P[0]*this.lineWidth/2,U=P[1]*this.lineWidth/2;l[0]-=x,l[1]-=U,l[2]+=x,l[3]+=U}return l}updateClipFromPath(){const a=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=V.PathType.FILL,d=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(a,d))}}function p(N,a){if(typeof ImageData<"u"&&a instanceof ImageData){N.putImageData(a,0,0);return}const d=a.height,l=a.width,P=d%b,x=(d-P)/b,U=P===0?x:x+1,K=N.createImageData(l,b);let ne=0,_e;const pe=a.data,Pe=K.data;let se,be,ge,Fe;if(a.kind===n.ImageKind.GRAYSCALE_1BPP){const De=pe.byteLength,xe=new Uint32Array(Pe.buffer,0,Pe.byteLength>>2),de=xe.length,oe=l+7>>3,te=4294967295,ee=n.FeatureTest.isLittleEndian?4278190080:255;for(se=0;se<U;se++){for(ge=se<x?b:P,_e=0,be=0;be<ge;be++){const me=De-ne;let Te=0;const Le=me>oe?l:me*8-7,Be=Le&-8;let Ue=0,$e=0;for(;Te<Be;Te+=8)$e=pe[ne++],xe[_e++]=$e&128?te:ee,xe[_e++]=$e&64?te:ee,xe[_e++]=$e&32?te:ee,xe[_e++]=$e&16?te:ee,xe[_e++]=$e&8?te:ee,xe[_e++]=$e&4?te:ee,xe[_e++]=$e&2?te:ee,xe[_e++]=$e&1?te:ee;for(;Te<Le;Te++)Ue===0&&($e=pe[ne++],Ue=128),xe[_e++]=$e&Ue?te:ee,Ue>>=1}for(;_e<de;)xe[_e++]=0;N.putImageData(K,0,se*b)}}else if(a.kind===n.ImageKind.RGBA_32BPP){for(be=0,Fe=l*b*4,se=0;se<x;se++)Pe.set(pe.subarray(ne,ne+Fe)),ne+=Fe,N.putImageData(K,0,be),be+=b;se<U&&(Fe=l*P*4,Pe.set(pe.subarray(ne,ne+Fe)),N.putImageData(K,0,be))}else if(a.kind===n.ImageKind.RGB_24BPP)for(ge=b,Fe=l*ge,se=0;se<U;se++){for(se>=x&&(ge=P,Fe=l*ge),_e=0,be=Fe;be--;)Pe[_e++]=pe[ne++],Pe[_e++]=pe[ne++],Pe[_e++]=pe[ne++],Pe[_e++]=255;N.putImageData(K,0,se*b)}else throw new Error(`bad image kind: ${a.kind}`)}function S(N,a){if(a.bitmap){N.drawImage(a.bitmap,0,0);return}const d=a.height,l=a.width,P=d%b,x=(d-P)/b,U=P===0?x:x+1,K=N.createImageData(l,b);let ne=0;const _e=a.data,pe=K.data;for(let Pe=0;Pe<U;Pe++){const se=Pe<x?b:P;({srcPos:ne}=(0,O.convertBlackAndWhiteToRGBA)({src:_e,srcPos:ne,dest:pe,width:l,height:se,nonBlackColor:0})),N.putImageData(K,0,Pe*b)}}function s(N,a){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const l of d)N[l]!==void 0&&(a[l]=N[l]);N.setLineDash!==void 0&&(a.setLineDash(N.getLineDash()),a.lineDashOffset=N.lineDashOffset)}function i(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!n.isNodeJS){const{filter:a}=N;a!=="none"&&a!==""&&(N.filter="none")}}function y(N,a,d,l){const P=N.length;for(let x=3;x<P;x+=4){const U=N[x];if(U===0)N[x-3]=a,N[x-2]=d,N[x-1]=l;else if(U<255){const K=255-U;N[x-3]=N[x-3]*U+a*K>>8,N[x-2]=N[x-2]*U+d*K>>8,N[x-1]=N[x-1]*U+l*K>>8}}}function m(N,a,d){const l=N.length,P=1/255;for(let x=3;x<l;x+=4){const U=d?d[N[x]]:N[x];a[x]=a[x]*U*P|0}}function h(N,a,d){const l=N.length;for(let P=3;P<l;P+=4){const x=N[P-3]*77+N[P-2]*152+N[P-1]*28;a[P]=d?a[P]*d[x>>8]>>8:a[P]*x>>16}}function F(N,a,d,l,P,x,U,K,ne,_e,pe){const Pe=!!x,se=Pe?x[0]:0,be=Pe?x[1]:0,ge=Pe?x[2]:0,Fe=P==="Luminosity"?h:m,xe=Math.min(l,Math.ceil(1048576/d));for(let de=0;de<l;de+=xe){const oe=Math.min(xe,l-de),te=N.getImageData(K-_e,de+(ne-pe),d,oe),ee=a.getImageData(K,de+ne,d,oe);Pe&&y(te.data,se,be,ge),Fe(te.data,ee.data,U),a.putImageData(ee,K,de+ne)}}function A(N,a,d,l){const P=l[0],x=l[1],U=l[2]-P,K=l[3]-x;U===0||K===0||(F(a.context,d,U,K,a.subtype,a.backdrop,a.transferMap,P,x,a.offsetX,a.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(d.canvas,0,0),N.restore())}function G(N,a){const d=n.Util.singularValueDecompose2dScale(N);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const l=Math.fround((globalThis.devicePixelRatio||1)*g.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:d[0]<=l||d[1]<=l}const ie=["butt","round","square"],E=["miter","round","bevel"],q={},J={},we=class we{constructor(a,d,l,P,x,{optionalContentConfig:U,markedContentStack:K=null},ne,_e){I(this,H);I(this,$);this.ctx=a,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=l,this.canvasFactory=P,this.filterFactory=x,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=U,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ne,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_e,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,d=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):d}beginDrawing({transform:a,viewport:d,transparency:l=!1,background:P=null}){const x=this.ctx.canvas.width,U=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=P||"#ffffff",this.ctx.fillRect(0,0,x,U),this.ctx.fillStyle=K,l){const ne=this.cachedCanvases.getCanvas("transparent",x,U);this.compositeCtx=this.ctx,this.transparentCanvas=ne.canvas,this.ctx=ne.context,this.ctx.save(),this.ctx.transform(...(0,g.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),i(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,g.getCurrentTransform)(this.ctx)}executeOperatorList(a,d,l,P){const x=a.argsArray,U=a.fnArray;let K=d||0;const ne=x.length;if(ne===K)return K;const _e=ne-K>D&&typeof l=="function",pe=_e?Date.now()+r:0;let Pe=0;const se=this.commonObjs,be=this.objs;let ge;for(;;){if(P!==void 0&&K===P.nextBreakPoint)return P.breakIt(K,l),K;if(ge=U[K],ge!==n.OPS.dependency)this[ge].apply(this,x[K]);else for(const Fe of x[K]){const De=Fe.startsWith("g_")?se:be;if(!De.has(Fe))return De.get(Fe,l),K}if(K++,K===ne)return K;if(_e&&++Pe>D){if(Date.now()>pe)return l(),K;Pe=0}}}endDrawing(){j(this,H,hi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const d of a.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);a.clear()}this._cachedBitmapsMap.clear(),j(this,$,di).call(this)}_scaleImage(a,d){const l=a.width,P=a.height;let x=Math.max(Math.hypot(d[0],d[1]),1),U=Math.max(Math.hypot(d[2],d[3]),1),K=l,ne=P,_e="prescale1",pe,Pe;for(;x>2&&K>1||U>2&&ne>1;){let se=K,be=ne;x>2&&K>1&&(se=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),x/=K/se),U>2&&ne>1&&(be=ne>=16384?Math.floor(ne/2)-1||1:Math.ceil(ne)/2,U/=ne/be),pe=this.cachedCanvases.getCanvas(_e,se,be),Pe=pe.context,Pe.clearRect(0,0,se,be),Pe.drawImage(a,0,0,K,ne,0,0,se,be),a=pe.canvas,K=se,ne=be,_e=_e==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:K,paintHeight:ne}}_createMaskCanvas(a){const d=this.ctx,{width:l,height:P}=a,x=this.current.fillColor,U=this.current.patternFill,K=(0,g.getCurrentTransform)(d);let ne,_e,pe,Pe;if((a.bitmap||a.data)&&a.count>1){const Te=a.bitmap||a.data.buffer;_e=JSON.stringify(U?K:[K.slice(0,4),x]),ne=this._cachedBitmapsMap.get(Te),ne||(ne=new Map,this._cachedBitmapsMap.set(Te,ne));const Le=ne.get(_e);if(Le&&!U){const Be=Math.round(Math.min(K[0],K[2])+K[4]),Ue=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:Le,offsetX:Be,offsetY:Ue}}pe=Le}pe||(Pe=this.cachedCanvases.getCanvas("maskCanvas",l,P),S(Pe.context,a));let se=n.Util.transform(K,[1/l,0,0,-1/P,0,0]);se=n.Util.transform(se,[1,0,0,1,0,-P]);const be=n.Util.applyTransform([0,0],se),ge=n.Util.applyTransform([l,P],se),Fe=n.Util.normalizeRect([be[0],be[1],ge[0],ge[1]]),De=Math.round(Fe[2]-Fe[0])||1,xe=Math.round(Fe[3]-Fe[1])||1,de=this.cachedCanvases.getCanvas("fillCanvas",De,xe),oe=de.context,te=Math.min(be[0],ge[0]),ee=Math.min(be[1],ge[1]);oe.translate(-te,-ee),oe.transform(...se),pe||(pe=this._scaleImage(Pe.canvas,(0,g.getCurrentTransformInverse)(oe)),pe=pe.img,ne&&U&&ne.set(_e,pe)),oe.imageSmoothingEnabled=G((0,g.getCurrentTransform)(oe),a.interpolate),f(oe,pe,0,0,pe.width,pe.height,0,0,l,P),oe.globalCompositeOperation="source-in";const me=n.Util.transform((0,g.getCurrentTransformInverse)(oe),[1,0,0,1,-te,-ee]);return oe.fillStyle=U?x.getPattern(d,this,me,V.PathType.FILL):x,oe.fillRect(0,0,l,P),ne&&!U&&(this.cachedCanvases.delete("fillCanvas"),ne.set(_e,de.canvas)),{canvas:de.canvas,offsetX:Math.round(te),offsetY:Math.round(ee)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ie[a]}setLineJoin(a){this.ctx.lineJoin=E[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,d){const l=this.ctx;l.setLineDash!==void 0&&(l.setLineDash(a),l.lineDashOffset=d)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[d,l]of a)switch(d){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=l;break;case"ca":this.current.fillAlpha=l,this.ctx.globalAlpha=l;break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,d=this.ctx.canvas.height,l="smaskGroupAt"+this.groupLevel,P=this.cachedCanvases.getCanvas(l,a,d);this.suspendedCtx=this.ctx,this.ctx=P.context;const x=this.ctx;x.setTransform(...(0,g.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,x),u(x,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,l=this.suspendedCtx;A(l,d,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,d,l,P,x,U){this.ctx.transform(a,d,l,P,x,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,d,l){const P=this.ctx,x=this.current;let U=x.x,K=x.y,ne,_e;const pe=(0,g.getCurrentTransform)(P),Pe=pe[0]===0&&pe[3]===0||pe[1]===0&&pe[2]===0,se=Pe?l.slice(0):null;for(let be=0,ge=0,Fe=a.length;be<Fe;be++)switch(a[be]|0){case n.OPS.rectangle:U=d[ge++],K=d[ge++];const De=d[ge++],xe=d[ge++],de=U+De,oe=K+xe;P.moveTo(U,K),De===0||xe===0?P.lineTo(de,oe):(P.lineTo(de,K),P.lineTo(de,oe),P.lineTo(U,oe)),Pe||x.updateRectMinMax(pe,[U,K,de,oe]),P.closePath();break;case n.OPS.moveTo:U=d[ge++],K=d[ge++],P.moveTo(U,K),Pe||x.updatePathMinMax(pe,U,K);break;case n.OPS.lineTo:U=d[ge++],K=d[ge++],P.lineTo(U,K),Pe||x.updatePathMinMax(pe,U,K);break;case n.OPS.curveTo:ne=U,_e=K,U=d[ge+4],K=d[ge+5],P.bezierCurveTo(d[ge],d[ge+1],d[ge+2],d[ge+3],U,K),x.updateCurvePathMinMax(pe,ne,_e,d[ge],d[ge+1],d[ge+2],d[ge+3],U,K,se),ge+=6;break;case n.OPS.curveTo2:ne=U,_e=K,P.bezierCurveTo(U,K,d[ge],d[ge+1],d[ge+2],d[ge+3]),x.updateCurvePathMinMax(pe,ne,_e,U,K,d[ge],d[ge+1],d[ge+2],d[ge+3],se),U=d[ge+2],K=d[ge+3],ge+=4;break;case n.OPS.curveTo3:ne=U,_e=K,U=d[ge+2],K=d[ge+3],P.bezierCurveTo(d[ge],d[ge+1],U,K,U,K),x.updateCurvePathMinMax(pe,ne,_e,d[ge],d[ge+1],U,K,U,K,se),ge+=4;break;case n.OPS.closePath:P.closePath();break}Pe&&x.updateScalingPathMinMax(pe,se),x.setCurrentPoint(U,K)}closePath(){this.ctx.closePath()}stroke(a=!0){const d=this.ctx,l=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof l=="object"&&(l!=null&&l.getPattern)?(d.save(),d.strokeStyle=l.getPattern(d,this,(0,g.getCurrentTransformInverse)(d),V.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const d=this.ctx,l=this.current.fillColor,P=this.current.patternFill;let x=!1;P&&(d.save(),d.fillStyle=l.getPattern(d,this,(0,g.getCurrentTransformInverse)(d),V.PathType.FILL),x=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),x&&d.restore(),a&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,d=this.ctx;if(a===void 0){d.beginPath();return}d.save(),d.beginPath();for(const l of a)d.setTransform(...l.transform),d.translate(l.x,l.y),l.addToPath(d,l.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,d){var pe;const l=this.commonObjs.get(a),P=this.current;if(!l)throw new Error(`Can't find font for ${a}`);if(P.fontMatrix=l.fontMatrix||n.FONT_IDENTITY_MATRIX,(P.fontMatrix[0]===0||P.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+a),d<0?(d=-d,P.fontDirection=-1):P.fontDirection=1,this.current.font=l,this.current.fontSize=d,l.isType3Font)return;const x=l.loadedName||"sans-serif",U=((pe=l.systemFontInfo)==null?void 0:pe.css)||`"${x}", ${l.fallbackName}`;let K="normal";l.black?K="900":l.bold&&(K="bold");const ne=l.italic?"italic":"normal";let _e=d;d<R?_e=R:d>T&&(_e=T),this.current.fontSizeScale=d/_e,this.ctx.font=`${ne} ${K} ${_e}px ${U}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,d){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=d}setLeadingMoveText(a,d){this.setLeading(-d),this.moveText(a,d)}setTextMatrix(a,d,l,P,x,U){this.current.textMatrix=[a,d,l,P,x,U],this.current.textMatrixScale=Math.hypot(a,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,d,l,P){const x=this.ctx,U=this.current,K=U.font,ne=U.textRenderingMode,_e=U.fontSize/U.fontSizeScale,pe=ne&n.TextRenderingMode.FILL_STROKE_MASK,Pe=!!(ne&n.TextRenderingMode.ADD_TO_PATH_FLAG),se=U.patternFill&&!K.missingFile;let be;(K.disableFontFace||Pe||se)&&(be=K.getPathGenerator(this.commonObjs,a)),K.disableFontFace||se?(x.save(),x.translate(d,l),x.beginPath(),be(x,_e),P&&x.setTransform(...P),(pe===n.TextRenderingMode.FILL||pe===n.TextRenderingMode.FILL_STROKE)&&x.fill(),(pe===n.TextRenderingMode.STROKE||pe===n.TextRenderingMode.FILL_STROKE)&&x.stroke(),x.restore()):((pe===n.TextRenderingMode.FILL||pe===n.TextRenderingMode.FILL_STROKE)&&x.fillText(a,d,l),(pe===n.TextRenderingMode.STROKE||pe===n.TextRenderingMode.FILL_STROKE)&&x.strokeText(a,d,l)),Pe&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,g.getCurrentTransform)(x),x:d,y:l,fontSize:_e,addToPath:be})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const d=a.getImageData(0,0,10,10).data;let l=!1;for(let P=3;P<d.length;P+=4)if(d[P]>0&&d[P]<255){l=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",l)}showText(a){const d=this.current,l=d.font;if(l.isType3Font)return this.showType3Text(a);const P=d.fontSize;if(P===0)return;const x=this.ctx,U=d.fontSizeScale,K=d.charSpacing,ne=d.wordSpacing,_e=d.fontDirection,pe=d.textHScale*_e,Pe=a.length,se=l.vertical,be=se?1:-1,ge=l.defaultVMetrics,Fe=P*d.fontMatrix[0],De=d.textRenderingMode===n.TextRenderingMode.FILL&&!l.disableFontFace&&!d.patternFill;x.save(),x.transform(...d.textMatrix),x.translate(d.x,d.y+d.textRise),_e>0?x.scale(pe,-1):x.scale(pe,1);let xe;if(d.patternFill){x.save();const me=d.fillColor.getPattern(x,this,(0,g.getCurrentTransformInverse)(x),V.PathType.FILL);xe=(0,g.getCurrentTransform)(x),x.restore(),x.fillStyle=me}let de=d.lineWidth;const oe=d.textMatrixScale;if(oe===0||de===0){const me=d.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(me===n.TextRenderingMode.STROKE||me===n.TextRenderingMode.FILL_STROKE)&&(de=this.getSinglePixelWidth())}else de/=oe;if(U!==1&&(x.scale(U,U),de/=U),x.lineWidth=de,l.isInvalidPDFjsFont){const me=[];let Te=0;for(const Le of a)me.push(Le.unicode),Te+=Le.width;x.fillText(me.join(""),0,0),d.x+=Te*Fe*pe,x.restore(),this.compose();return}let te=0,ee;for(ee=0;ee<Pe;++ee){const me=a[ee];if(typeof me=="number"){te+=be*me*P/1e3;continue}let Te=!1;const Le=(me.isSpace?ne:0)+K,Be=me.fontChar,Ue=me.accent;let $e,Ge,Ke=me.width;if(se){const Ze=me.vmetric||ge,ye=-(me.vmetric?Ze[1]:Ke*.5)*Fe,_=Ze[2]*Fe;Ke=Ze?-Ze[0]:Ke,$e=ye/U,Ge=(te+_)/U}else $e=te/U,Ge=0;if(l.remeasure&&Ke>0){const Ze=x.measureText(Be).width*1e3/P*U;if(Ke<Ze&&this.isFontSubpixelAAEnabled){const ye=Ke/Ze;Te=!0,x.save(),x.scale(ye,1),$e/=ye}else Ke!==Ze&&($e+=(Ke-Ze)/2e3*P/U)}if(this.contentVisible&&(me.isInFont||l.missingFile)){if(De&&!Ue)x.fillText(Be,$e,Ge);else if(this.paintChar(Be,$e,Ge,xe),Ue){const Ze=$e+P*Ue.offset.x/U,ye=Ge-P*Ue.offset.y/U;this.paintChar(Ue.fontChar,Ze,ye,xe)}}const Xe=se?Ke*Fe-Le*_e:Ke*Fe+Le*_e;te+=Xe,Te&&x.restore()}se?d.y-=te:d.x+=te*pe,x.restore(),this.compose()}showType3Text(a){const d=this.ctx,l=this.current,P=l.font,x=l.fontSize,U=l.fontDirection,K=P.vertical?1:-1,ne=l.charSpacing,_e=l.wordSpacing,pe=l.textHScale*U,Pe=l.fontMatrix||n.FONT_IDENTITY_MATRIX,se=a.length,be=l.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ge,Fe,De,xe;if(!(be||x===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...l.textMatrix),d.translate(l.x,l.y),d.scale(pe,U),ge=0;ge<se;++ge){if(Fe=a[ge],typeof Fe=="number"){xe=K*Fe*x/1e3,this.ctx.translate(xe,0),l.x+=xe*pe;continue}const de=(Fe.isSpace?_e:0)+ne,oe=P.charProcOperatorList[Fe.operatorListId];if(!oe){(0,n.warn)(`Type3 character "${Fe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Fe,this.save(),d.scale(x,x),d.transform(...Pe),this.executeOperatorList(oe),this.restore()),De=n.Util.applyTransform([Fe.width,0],Pe)[0]*x+de,d.translate(De,0),l.x+=De*pe}d.restore(),this.processingType3=null}}setCharWidth(a,d){}setCharWidthAndBounds(a,d,l,P,x,U){this.ctx.rect(l,P,x-l,U-P),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let d;if(a[0]==="TilingPattern"){const l=a[1],P=this.baseTransform||(0,g.getCurrentTransform)(this.ctx),x={createCanvasGraphics:U=>new we(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new V.TilingPattern(a,l,this.ctx,x,P)}else d=this._getPattern(a[1],a[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,d,l){const P=n.Util.makeHexColor(a,d,l);this.ctx.strokeStyle=P,this.current.strokeColor=P}setFillRGBColor(a,d,l){const P=n.Util.makeHexColor(a,d,l);this.ctx.fillStyle=P,this.current.fillColor=P,this.current.patternFill=!1}_getPattern(a,d=null){let l;return this.cachedPatterns.has(a)?l=this.cachedPatterns.get(a):(l=(0,V.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,l)),d&&(l.matrix=d),l}shadingFill(a){if(!this.contentVisible)return;const d=this.ctx;this.save();const l=this._getPattern(a);d.fillStyle=l.getPattern(d,this,(0,g.getCurrentTransformInverse)(d),V.PathType.SHADING);const P=(0,g.getCurrentTransformInverse)(d);if(P){const{width:x,height:U}=d.canvas,[K,ne,_e,pe]=n.Util.getAxialAlignedBoundingBox([0,0,x,U],P);this.ctx.fillRect(K,ne,_e-K,pe-ne)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,g.getCurrentTransform)(this.ctx),d)){const l=d[2]-d[0],P=d[3]-d[1];this.ctx.rect(d[0],d[1],l,P),this.current.updateRectMinMax((0,g.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;a.isolated||(0,n.info)("TODO: Support non-isolated groups."),a.knockout&&(0,n.warn)("Knockout groups not supported.");const l=(0,g.getCurrentTransform)(d);if(a.matrix&&d.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let P=n.Util.getAxialAlignedBoundingBox(a.bbox,(0,g.getCurrentTransform)(d));const x=[0,0,d.canvas.width,d.canvas.height];P=n.Util.intersect(P,x)||[0,0,0,0];const U=Math.floor(P[0]),K=Math.floor(P[1]);let ne=Math.max(Math.ceil(P[2])-U,1),_e=Math.max(Math.ceil(P[3])-K,1),pe=1,Pe=1;ne>c&&(pe=ne/c,ne=c),_e>c&&(Pe=_e/c,_e=c),this.current.startNewPathAndClipBox([0,0,ne,_e]);let se="groupAt"+this.groupLevel;a.smask&&(se+="_smask_"+this.smaskCounter++%2);const be=this.cachedCanvases.getCanvas(se,ne,_e),ge=be.context;ge.scale(1/pe,1/Pe),ge.translate(-U,-K),ge.transform(...l),a.smask?this.smaskStack.push({canvas:be.canvas,context:ge,offsetX:U,offsetY:K,scaleX:pe,scaleY:Pe,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(U,K),d.scale(pe,Pe),d.save()),s(d,ge),this.ctx=ge,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,l=this.groupStack.pop();if(this.ctx=l,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const P=(0,g.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...P);const x=n.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],P);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(x)}}beginAnnotation(a,d,l,P,x){if(j(this,H,hi).call(this),i(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const U=d[2]-d[0],K=d[3]-d[1];if(x&&this.annotationCanvasMap){l=l.slice(),l[4]-=d[0],l[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=U,d[3]=K;const[ne,_e]=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(this.ctx)),{viewportScale:pe}=this,Pe=Math.ceil(U*this.outputScaleX*pe),se=Math.ceil(K*this.outputScaleY*pe);this.annotationCanvas=this.canvasFactory.create(Pe,se);const{canvas:be,context:ge}=this.annotationCanvas;this.annotationCanvasMap.set(a,be),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ge,this.ctx.save(),this.ctx.setTransform(ne,0,0,-_e,0,K*_e),i(this.ctx)}else i(this.ctx),this.ctx.rect(d[0],d[1],U,K),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...l),this.transform(...P)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),j(this,$,di).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const d=a.count;a=this.getObject(a.data,a),a.count=d;const l=this.ctx,P=this.processingType3;if(P&&(P.compiled===void 0&&(P.compiled=C(a)),P.compiled)){P.compiled(l);return}const x=this._createMaskCanvas(a),U=x.canvas;l.save(),l.setTransform(1,0,0,1,0,0),l.drawImage(U,x.offsetX,x.offsetY),l.restore(),this.compose()}paintImageMaskXObjectRepeat(a,d,l=0,P=0,x,U){if(!this.contentVisible)return;a=this.getObject(a.data,a);const K=this.ctx;K.save();const ne=(0,g.getCurrentTransform)(K);K.transform(d,l,P,x,0,0);const _e=this._createMaskCanvas(a);K.setTransform(1,0,0,1,_e.offsetX-ne[4],_e.offsetY-ne[5]);for(let pe=0,Pe=U.length;pe<Pe;pe+=2){const se=n.Util.transform(ne,[d,l,P,x,U[pe],U[pe+1]]),[be,ge]=n.Util.applyTransform([0,0],se);K.drawImage(_e.canvas,be,ge)}K.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const d=this.ctx,l=this.current.fillColor,P=this.current.patternFill;for(const x of a){const{data:U,width:K,height:ne,transform:_e}=x,pe=this.cachedCanvases.getCanvas("maskCanvas",K,ne),Pe=pe.context;Pe.save();const se=this.getObject(U,x);S(Pe,se),Pe.globalCompositeOperation="source-in",Pe.fillStyle=P?l.getPattern(Pe,this,(0,g.getCurrentTransformInverse)(d),V.PathType.FILL):l,Pe.fillRect(0,0,K,ne),Pe.restore(),d.save(),d.transform(..._e),d.scale(1,-1),f(d,pe.canvas,0,0,K,ne,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const d=this.getObject(a);if(!d){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(a,d,l,P){if(!this.contentVisible)return;const x=this.getObject(a);if(!x){(0,n.warn)("Dependent image isn't ready yet");return}const U=x.width,K=x.height,ne=[];for(let _e=0,pe=P.length;_e<pe;_e+=2)ne.push({transform:[d,0,0,l,P[_e],P[_e+1]],x:0,y:0,w:U,h:K});this.paintInlineImageXObjectGroup(x,ne)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:d,width:l,height:P}=a,x=this.cachedCanvases.getCanvas("inlineImage",l,P),U=x.context;return U.filter=this.current.transferMaps,U.drawImage(d,0,0),U.filter="none",x.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const d=a.width,l=a.height,P=this.ctx;if(this.save(),!n.isNodeJS){const{filter:K}=P;K!=="none"&&K!==""&&(P.filter="none")}P.scale(1/d,-1/l);let x;if(a.bitmap)x=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)x=a;else{const ne=this.cachedCanvases.getCanvas("inlineImage",d,l).context;p(ne,a),x=this.applyTransferMapsToCanvas(ne)}const U=this._scaleImage(x,(0,g.getCurrentTransformInverse)(P));P.imageSmoothingEnabled=G((0,g.getCurrentTransform)(P),a.interpolate),f(P,U.img,0,0,U.paintWidth,U.paintHeight,0,-l,d,l),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,d){if(!this.contentVisible)return;const l=this.ctx;let P;if(a.bitmap)P=a.bitmap;else{const x=a.width,U=a.height,ne=this.cachedCanvases.getCanvas("inlineImage",x,U).context;p(ne,a),P=this.applyTransferMapsToCanvas(ne)}for(const x of d)l.save(),l.transform(...x.transform),l.scale(1,-1),f(l,P,x.x,x.y,x.w,x.h,0,-1,1,1),l.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,d){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,d){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const l=this.ctx;this.pendingClip&&(d||(this.pendingClip===J?l.clip("evenodd"):l.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),l.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,g.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const d=Math.abs(a[0]*a[3]-a[2]*a[1]),l=Math.hypot(a[0],a[2]),P=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(l,P)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:d,b:l,c:P,d:x}=this.ctx.getTransform();let U,K;if(l===0&&P===0){const ne=Math.abs(d),_e=Math.abs(x);if(ne===_e)if(a===0)U=K=1/ne;else{const pe=ne*a;U=K=pe<1?1/pe:1}else if(a===0)U=1/ne,K=1/_e;else{const pe=ne*a,Pe=_e*a;U=pe<1?1/pe:1,K=Pe<1?1/Pe:1}}else{const ne=Math.abs(d*x-l*P),_e=Math.hypot(d,l),pe=Math.hypot(P,x);if(a===0)U=pe/ne,K=_e/ne;else{const Pe=a*ne;U=pe>Pe?pe/Pe:1,K=_e>Pe?_e/Pe:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:d}=this,{lineWidth:l}=this.current,[P,x]=this.getScaleForStroking();if(d.lineWidth=l||1,P===1&&x===1){d.stroke();return}const U=d.getLineDash();if(a&&d.save(),d.scale(P,x),U.length>0){const K=Math.max(P,x);d.setLineDash(U.map(ne=>ne/K)),d.lineDashOffset/=K}d.stroke(),a&&d.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};H=new WeakSet,hi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$=new WeakSet,di=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const d=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let Y=we;t.CanvasGraphics=Y;for(const N in n.OPS)Y.prototype[N]!==void 0&&(Y.prototype[n.OPS[N]]=Y.prototype[N])},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=b;var n=L(1),g=L(6);const V={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=V;function O(C,w){if(!w)return;const p=w[2]-w[0],S=w[3]-w[1],s=new Path2D;s.rect(w[0],w[1],p,S),C.clip(s)}class R{constructor(){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class T extends R{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let p;this._type==="axial"?p=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(p=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)p.addColorStop(S[0],S[1]);return p}getPattern(w,p,S,s){let i;if(s===V.STROKE||s===V.FILL){const y=p.current.getClippedPathBoundingBox(s,(0,g.getCurrentTransform)(w))||[0,0,0,0],m=Math.ceil(y[2]-y[0])||1,h=Math.ceil(y[3]-y[1])||1,F=p.cachedCanvases.getCanvas("pattern",m,h,!0),A=F.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-y[0],-y[1]),S=n.Util.transform(S,[1,0,0,1,y[0],y[1]]),A.transform(...p.baseTransform),this.matrix&&A.transform(...this.matrix),O(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),i=w.createPattern(F.canvas,"no-repeat");const G=new DOMMatrix(S);i.setTransform(G)}else O(w,this._bbox),i=this._createGradient(w);return i}}function c(C,w,p,S,s,i,y,m){const h=w.coords,F=w.colors,A=C.data,G=C.width*4;let ie;h[p+1]>h[S+1]&&(ie=p,p=S,S=ie,ie=i,i=y,y=ie),h[S+1]>h[s+1]&&(ie=S,S=s,s=ie,ie=y,y=m,m=ie),h[p+1]>h[S+1]&&(ie=p,p=S,S=ie,ie=i,i=y,y=ie);const E=(h[p]+w.offsetX)*w.scaleX,q=(h[p+1]+w.offsetY)*w.scaleY,J=(h[S]+w.offsetX)*w.scaleX,Y=(h[S+1]+w.offsetY)*w.scaleY,H=(h[s]+w.offsetX)*w.scaleX,le=(h[s+1]+w.offsetY)*w.scaleY;if(q>=le)return;const $=F[i],Ee=F[i+1],we=F[i+2],N=F[y],a=F[y+1],d=F[y+2],l=F[m],P=F[m+1],x=F[m+2],U=Math.round(q),K=Math.round(le);let ne,_e,pe,Pe,se,be,ge,Fe;for(let De=U;De<=K;De++){if(De<Y){const ee=De<q?0:(q-De)/(q-Y);ne=E-(E-J)*ee,_e=$-($-N)*ee,pe=Ee-(Ee-a)*ee,Pe=we-(we-d)*ee}else{let ee;De>le?ee=1:Y===le?ee=0:ee=(Y-De)/(Y-le),ne=J-(J-H)*ee,_e=N-(N-l)*ee,pe=a-(a-P)*ee,Pe=d-(d-x)*ee}let xe;De<q?xe=0:De>le?xe=1:xe=(q-De)/(q-le),se=E-(E-H)*xe,be=$-($-l)*xe,ge=Ee-(Ee-P)*xe,Fe=we-(we-x)*xe;const de=Math.round(Math.min(ne,se)),oe=Math.round(Math.max(ne,se));let te=G*De+de*4;for(let ee=de;ee<=oe;ee++)xe=(ne-ee)/(ne-se),xe<0?xe=0:xe>1&&(xe=1),A[te++]=_e-(_e-be)*xe|0,A[te++]=pe-(pe-ge)*xe|0,A[te++]=Pe-(Pe-Fe)*xe|0,A[te++]=255}}function r(C,w,p){const S=w.coords,s=w.colors;let i,y;switch(w.type){case"lattice":const m=w.verticesPerRow,h=Math.floor(S.length/m)-1,F=m-1;for(i=0;i<h;i++){let A=i*m;for(let G=0;G<F;G++,A++)c(C,p,S[A],S[A+1],S[A+m],s[A],s[A+1],s[A+m]),c(C,p,S[A+m+1],S[A+1],S[A+m],s[A+m+1],s[A+1],s[A+m])}break;case"triangles":for(i=0,y=S.length;i<y;i+=3)c(C,p,S[i],S[i+1],S[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class D extends R{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,p,S){const m=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-m,A=Math.ceil(this._bounds[3])-h,G=Math.min(Math.ceil(Math.abs(F*w[0]*1.1)),3e3),ie=Math.min(Math.ceil(Math.abs(A*w[1]*1.1)),3e3),E=F/G,q=A/ie,J={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-h,scaleX:1/E,scaleY:1/q},Y=G+2*2,H=ie+2*2,le=S.getCanvas("mesh",Y,H,!1),$=le.context,Ee=$.createImageData(G,ie);if(p){const N=Ee.data;for(let a=0,d=N.length;a<d;a+=4)N[a]=p[0],N[a+1]=p[1],N[a+2]=p[2],N[a+3]=255}for(const N of this._figures)r(Ee,N,J);return $.putImageData(Ee,2,2),{canvas:le.canvas,offsetX:m-2*E,offsetY:h-2*q,scaleX:E,scaleY:q}}getPattern(w,p,S,s){O(w,this._bbox);let i;if(s===V.SHADING)i=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(w));else if(i=n.Util.singularValueDecompose2dScale(p.baseTransform),this.matrix){const m=n.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*m[0],i[1]*m[1]]}const y=this._createMeshCanvas(i,s===V.SHADING?null:this._background,p.cachedCanvases);return s!==V.SHADING&&(w.setTransform(...p.baseTransform),this.matrix&&w.transform(...this.matrix)),w.translate(y.offsetX,y.offsetY),w.scale(y.scaleX,y.scaleY),w.createPattern(y.canvas,"no-repeat")}}class M extends R{getPattern(){return"hotpink"}}function b(C){switch(C[0]){case"RadialAxial":return new T(C);case"Mesh":return new D(C);case"Dummy":return new M}throw new Error(`Unknown IR type: ${C[0]}`)}const u={COLORED:1,UNCOLORED:2},f=class f{constructor(w,p,S,s,i){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=p,this.ctx=S,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(w){const p=this.operatorList,S=this.bbox,s=this.xstep,i=this.ystep,y=this.paintType,m=this.tilingType,h=this.color,F=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+m);const A=S[0],G=S[1],ie=S[2],E=S[3],q=n.Util.singularValueDecompose2dScale(this.matrix),J=n.Util.singularValueDecompose2dScale(this.baseTransform),Y=[q[0]*J[0],q[1]*J[1]],H=this.getSizeAndScale(s,this.ctx.canvas.width,Y[0]),le=this.getSizeAndScale(i,this.ctx.canvas.height,Y[1]),$=w.cachedCanvases.getCanvas("pattern",H.size,le.size,!0),Ee=$.context,we=F.createCanvasGraphics(Ee);we.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext(we,y,h);let N=A,a=G,d=ie,l=E;return A<0&&(N=0,d+=Math.abs(A)),G<0&&(a=0,l+=Math.abs(G)),Ee.translate(-(H.scale*N),-(le.scale*a)),we.transform(H.scale,0,0,le.scale,0,0),Ee.save(),this.clipBbox(we,N,a,d,l),we.baseTransform=(0,g.getCurrentTransform)(we.ctx),we.executeOperatorList(p),we.endDrawing(),{canvas:$.canvas,scaleX:H.scale,scaleY:le.scale,offsetX:N,offsetY:a}}getSizeAndScale(w,p,S){w=Math.abs(w);const s=Math.max(f.MAX_PATTERN_SIZE,p);let i=Math.ceil(w*S);return i>=s?i=s:S=i/w,{scale:S,size:i}}clipBbox(w,p,S,s,i){const y=s-p,m=i-S;w.ctx.rect(p,S,y,m),w.current.updateRectMinMax((0,g.getCurrentTransform)(w.ctx),[p,S,s,i]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,p,S){const s=w.ctx,i=w.current;switch(p){case u.COLORED:const y=this.ctx;s.fillStyle=y.fillStyle,s.strokeStyle=y.strokeStyle,i.fillColor=y.fillStyle,i.strokeColor=y.strokeStyle;break;case u.UNCOLORED:const m=n.Util.makeHexColor(S[0],S[1],S[2]);s.fillStyle=m,s.strokeStyle=m,i.fillColor=m,i.strokeColor=m;break;default:throw new n.FormatError(`Unsupported paint type: ${p}`)}}getPattern(w,p,S,s){let i=S;s!==V.SHADING&&(i=n.Util.transform(i,p.baseTransform),this.matrix&&(i=n.Util.transform(i,this.matrix)));const y=this.createPatternCanvas(p);let m=new DOMMatrix(i);m=m.translate(y.offsetX,y.offsetY),m=m.scale(1/y.scaleX,1/y.scaleY);const h=w.createPattern(y.canvas,"repeat");return h.setTransform(m),h}};tt(f,"MAX_PATTERN_SIZE",3e3);let v=f;t.TilingPattern=v},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=V,t.convertToRGBA=g,t.grayToRGBA=R;var n=L(1);function g(T){switch(T.kind){case n.ImageKind.GRAYSCALE_1BPP:return V(T);case n.ImageKind.RGB_24BPP:return O(T)}return null}function V({src:T,srcPos:c=0,dest:r,width:D,height:M,nonBlackColor:b=4294967295,inverseDecode:u=!1}){const v=n.FeatureTest.isLittleEndian?4278190080:255,[f,C]=u?[b,v]:[v,b],w=D>>3,p=D&7,S=T.length;r=new Uint32Array(r.buffer);let s=0;for(let i=0;i<M;i++){for(const m=c+w;c<m;c++){const h=c<S?T[c]:255;r[s++]=h&128?C:f,r[s++]=h&64?C:f,r[s++]=h&32?C:f,r[s++]=h&16?C:f,r[s++]=h&8?C:f,r[s++]=h&4?C:f,r[s++]=h&2?C:f,r[s++]=h&1?C:f}if(p===0)continue;const y=c<S?T[c++]:255;for(let m=0;m<p;m++)r[s++]=y&1<<7-m?C:f}return{srcPos:c,destPos:s}}function O({src:T,srcPos:c=0,dest:r,destPos:D=0,width:M,height:b}){let u=0;const v=T.length>>2,f=new Uint32Array(T.buffer,c,v);if(n.FeatureTest.isLittleEndian){for(;u<v-2;u+=3,D+=4){const C=f[u],w=f[u+1],p=f[u+2];r[D]=C|4278190080,r[D+1]=C>>>24|w<<8|4278190080,r[D+2]=w>>>16|p<<16|4278190080,r[D+3]=p>>>8|4278190080}for(let C=u*4,w=T.length;C<w;C+=3)r[D++]=T[C]|T[C+1]<<8|T[C+2]<<16|4278190080}else{for(;u<v-2;u+=3,D+=4){const C=f[u],w=f[u+1],p=f[u+2];r[D]=C|255,r[D+1]=C<<24|w>>>8|255,r[D+2]=w<<16|p>>>16|255,r[D+3]=p<<8|255}for(let C=u*4,w=T.length;C<w;C+=3)r[D++]=T[C]<<24|T[C+1]<<16|T[C+2]<<8|255}return{srcPos:c,destPos:D}}function R(T,c){if(n.FeatureTest.isLittleEndian)for(let r=0,D=T.length;r<D;r++)c[r]=T[r]*65793|4278190080;else for(let r=0,D=T.length;r<D;r++)c[r]=T[r]*16843008|255}},(z,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const L=Object.create(null);t.GlobalWorkerOptions=L,L.workerPort=null,L.workerSrc=""},(z,t,L)=>{var T,cn,r,hn,M,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=L(1);const g={UNKNOWN:0,DATA:1,ERROR:2},V={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function O(u){switch(u instanceof Error||typeof u=="object"&&u!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new n.AbortException(u.message);case"MissingPDFException":return new n.MissingPDFException(u.message);case"PasswordException":return new n.PasswordException(u.message,u.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(u.message,u.status);case"UnknownErrorException":return new n.UnknownErrorException(u.message,u.details);default:return new n.UnknownErrorException(u.message,u.toString())}}class R{constructor(v,f,C){I(this,T);I(this,r);I(this,M);this.sourceName=v,this.targetName=f,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=w=>{const p=w.data;if(p.targetName!==this.sourceName)return;if(p.stream){j(this,r,hn).call(this,p);return}if(p.callback){const s=p.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],p.callback===g.DATA)i.resolve(p.data);else if(p.callback===g.ERROR)i.reject(O(p.reason));else throw new Error("Unexpected callback case");return}const S=this.actionHandler[p.action];if(!S)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){const s=this.sourceName,i=p.sourceName;new Promise(function(y){y(S(p.data))}).then(function(y){C.postMessage({sourceName:s,targetName:i,callback:g.DATA,callbackId:p.callbackId,data:y})},function(y){C.postMessage({sourceName:s,targetName:i,callback:g.ERROR,callbackId:p.callbackId,reason:O(y)})});return}if(p.streamId){j(this,T,cn).call(this,p);return}S(p.data)},C.addEventListener("message",this._onComObjOnMessage)}on(v,f){const C=this.actionHandler;if(C[v])throw new Error(`There is already an actionName called "${v}"`);C[v]=f}send(v,f,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:f},C)}sendWithPromise(v,f,C){const w=this.callbackId++,p=new n.PromiseCapability;this.callbackCapabilities[w]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:w,data:f},C)}catch(S){p.reject(S)}return p.promise}sendWithStream(v,f,C,w){const p=this.streamId++,S=this.sourceName,s=this.targetName,i=this.comObj;return new ReadableStream({start:y=>{const m=new n.PromiseCapability;return this.streamControllers[p]={controller:y,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:S,targetName:s,action:v,streamId:p,data:f,desiredSize:y.desiredSize},w),m.promise},pull:y=>{const m=new n.PromiseCapability;return this.streamControllers[p].pullCall=m,i.postMessage({sourceName:S,targetName:s,stream:V.PULL,streamId:p,desiredSize:y.desiredSize}),m.promise},cancel:y=>{(0,n.assert)(y instanceof Error,"cancel must have a valid reason");const m=new n.PromiseCapability;return this.streamControllers[p].cancelCall=m,this.streamControllers[p].isClosed=!0,i.postMessage({sourceName:S,targetName:s,stream:V.CANCEL,streamId:p,reason:O(y)}),m.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,cn=function(v){const f=v.streamId,C=this.sourceName,w=v.sourceName,p=this.comObj,S=this,s=this.actionHandler[v.action],i={enqueue(y,m=1,h){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=m,F>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:C,targetName:w,stream:V.ENQUEUE,streamId:f,chunk:y},h)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:C,targetName:w,stream:V.CLOSE,streamId:f}),delete S.streamSinks[f])},error(y){(0,n.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:C,targetName:w,stream:V.ERROR,streamId:f,reason:O(y)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[f]=i,new Promise(function(y){y(s(v.data,i))}).then(function(){p.postMessage({sourceName:C,targetName:w,stream:V.START_COMPLETE,streamId:f,success:!0})},function(y){p.postMessage({sourceName:C,targetName:w,stream:V.START_COMPLETE,streamId:f,reason:O(y)})})},r=new WeakSet,hn=function(v){const f=v.streamId,C=this.sourceName,w=v.sourceName,p=this.comObj,S=this.streamControllers[f],s=this.streamSinks[f];switch(v.stream){case V.START_COMPLETE:v.success?S.startCall.resolve():S.startCall.reject(O(v.reason));break;case V.PULL_COMPLETE:v.success?S.pullCall.resolve():S.pullCall.reject(O(v.reason));break;case V.PULL:if(!s){p.postMessage({sourceName:C,targetName:w,stream:V.PULL_COMPLETE,streamId:f,success:!0});break}s.desiredSize<=0&&v.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=v.desiredSize,new Promise(function(i){var y;i((y=s.onPull)==null?void 0:y.call(s))}).then(function(){p.postMessage({sourceName:C,targetName:w,stream:V.PULL_COMPLETE,streamId:f,success:!0})},function(i){p.postMessage({sourceName:C,targetName:w,stream:V.PULL_COMPLETE,streamId:f,reason:O(i)})});break;case V.ENQUEUE:if((0,n.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(v.chunk);break;case V.CLOSE:if((0,n.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),j(this,M,kt).call(this,S,f);break;case V.ERROR:(0,n.assert)(S,"error should have stream controller"),S.controller.error(O(v.reason)),j(this,M,kt).call(this,S,f);break;case V.CANCEL_COMPLETE:v.success?S.cancelCall.resolve():S.cancelCall.reject(O(v.reason)),j(this,M,kt).call(this,S,f);break;case V.CANCEL:if(!s)break;new Promise(function(i){var y;i((y=s.onCancel)==null?void 0:y.call(s,O(v.reason)))}).then(function(){p.postMessage({sourceName:C,targetName:w,stream:V.CANCEL_COMPLETE,streamId:f,success:!0})},function(i){p.postMessage({sourceName:C,targetName:w,stream:V.CANCEL_COMPLETE,streamId:f,reason:O(i)})}),s.sinkCapability.reject(O(v.reason)),s.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},M=new WeakSet,kt=async function(v,f){var C,w,p;await Promise.allSettled([(C=v.startCall)==null?void 0:C.promise,(w=v.pullCall)==null?void 0:w.promise,(p=v.cancelCall)==null?void 0:p.promise]),delete this.streamControllers[f]},t.MessageHandler=R},(z,t,L)=>{var V,O;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=L(1);class g{constructor({parsedData:T,rawData:c}){I(this,V,void 0);I(this,O,void 0);Z(this,V,T),Z(this,O,c)}getRaw(){return e(this,O)}get(T){return e(this,V).get(T)??null}getAll(){return(0,n.objectFromMap)(e(this,V))}has(T){return e(this,V).has(T)}}V=new WeakMap,O=new WeakMap,t.Metadata=g},(z,t,L)=>{var T,c,r,D,M,b,ui;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=L(1),g=L(8);const V=Symbol("INTERNAL");class O{constructor(f,C){I(this,T,!0);this.name=f,this.intent=C}get visible(){return e(this,T)}_setVisible(f,C){f!==V&&(0,n.unreachable)("Internal method `_setVisible` called."),Z(this,T,C)}}T=new WeakMap;class R{constructor(f){I(this,b);I(this,c,null);I(this,r,new Map);I(this,D,null);I(this,M,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,Z(this,M,f.order);for(const C of f.groups)e(this,r).set(C.id,new O(C.name,C.intent));if(f.baseState==="OFF")for(const C of e(this,r).values())C._setVisible(V,!1);for(const C of f.on)e(this,r).get(C)._setVisible(V,!0);for(const C of f.off)e(this,r).get(C)._setVisible(V,!1);Z(this,D,this.getHash())}}isVisible(f){if(e(this,r).size===0)return!0;if(!f)return(0,n.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return e(this,r).has(f.id)?e(this,r).get(f.id).visible:((0,n.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return j(this,b,ui).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const C of f.ids){if(!e(this,r).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(e(this,r).get(C).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const C of f.ids){if(!e(this,r).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!e(this,r).get(C).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const C of f.ids){if(!e(this,r).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!e(this,r).get(C).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const C of f.ids){if(!e(this,r).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(e(this,r).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,n.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,C=!0){if(!e(this,r).has(f)){(0,n.warn)(`Optional content group not found: ${f}`);return}e(this,r).get(f)._setVisible(V,!!C),Z(this,c,null)}get hasInitialVisibility(){return e(this,D)===null||this.getHash()===e(this,D)}getOrder(){return e(this,r).size?e(this,M)?e(this,M).slice():[...e(this,r).keys()]:null}getGroups(){return e(this,r).size>0?(0,n.objectFromMap)(e(this,r)):null}getGroup(f){return e(this,r).get(f)||null}getHash(){if(e(this,c)!==null)return e(this,c);const f=new g.MurmurHash3_64;for(const[C,w]of e(this,r))f.update(`${C}:${w.visible}`);return Z(this,c,f.hexdigest())}}c=new WeakMap,r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakSet,ui=function(f){const C=f.length;if(C<2)return!0;const w=f[0];for(let p=1;p<C;p++){const S=f[p];let s;if(Array.isArray(S))s=j(this,b,ui).call(this,S);else if(e(this,r).has(S))s=e(this,r).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(w){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return w==="And"},t.OptionalContentConfig=R},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=L(1),g=L(6);class V{constructor({length:c,initialData:r,progressiveDone:D=!1,contentDispositionFilename:M=null,disableRange:b=!1,disableStream:u=!1},v){if((0,n.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=D,this._contentDispositionFilename=M,(r==null?void 0:r.length)>0){const f=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!u,this._isRangeSupported=!b,this._contentLength=c,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,C)=>{this._onReceiveData({begin:f,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((f,C)=>{this._onProgress({loaded:f,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:c,chunk:r}){const D=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(c===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(D):this._queuedChunks.push(D);else{const M=this._rangeReaders.some(function(b){return b._begin!==c?!1:(b._enqueue(D),!0)});(0,n.assert)(M,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}_onProgress(c){var r,D,M,b;c.total===void 0?(D=(r=this._rangeReaders[0])==null?void 0:r.onProgress)==null||D.call(r,{loaded:c.loaded}):(b=(M=this._fullRequestReader)==null?void 0:M.onProgress)==null||b.call(M,{loaded:c.loaded,total:c.total})}_onProgressiveDone(){var c;(c=this._fullRequestReader)==null||c.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(c){const r=this._rangeReaders.indexOf(c);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const c=this._queuedChunks;return this._queuedChunks=null,new O(this,c,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(c,r){if(r<=this._progressiveDataLength)return null;const D=new R(this,c,r);return this._pdfDataRangeTransport.requestDataRange(c,r),this._rangeReaders.push(D),D}cancelAllRequests(c){var r;(r=this._fullRequestReader)==null||r.cancel(c);for(const D of this._rangeReaders.slice(0))D.cancel(c);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=V;class O{constructor(c,r,D=!1,M=null){this._stream=c,this._done=D||!1,this._filename=(0,g.isPdfFile)(M)?M:null,this._queuedChunks=r||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),c._fullRequestReader=this,this.onProgress=null}_enqueue(c){this._done||(this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunks.push(c),this._loaded+=c.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const c=new n.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class R{constructor(c,r,D){this._stream=c,this._begin=r,this._end=D,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(c){if(!this._done){if(this._requests.length===0)this._queuedChunk=c;else{this._requests.shift().resolve({value:c,done:!1});for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const c=new n.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=L(1),g=L(20);function V(D,M,b){return{method:"GET",headers:D,signal:b.signal,mode:"cors",credentials:M?"include":"same-origin",redirect:"follow"}}function O(D){const M=new Headers;for(const b in D){const u=D[b];u!==void 0&&M.append(b,u)}return M}function R(D){return D instanceof Uint8Array?D.buffer:D instanceof ArrayBuffer?D:((0,n.warn)(`getArrayBuffer - unexpected data format: ${D}`),new Uint8Array(D).buffer)}class T{constructor(M){this.source=M,this.isHttp=/^https?:/i.test(M.url),this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(M,b){if(b<=this._progressiveDataLength)return null;const u=new r(this,M,b);return this._rangeRequestReaders.push(u),u}cancelAllRequests(M){var b;(b=this._fullRequestReader)==null||b.cancel(M);for(const u of this._rangeRequestReaders.slice(0))u.cancel(M)}}t.PDFFetchStream=T;class c{constructor(M){this._stream=M,this._reader=null,this._loaded=0,this._filename=null;const b=M.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=new n.PromiseCapability,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=O(this._stream.httpHeaders);const u=b.url;fetch(u,V(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,g.validateResponseStatus)(v.status))throw(0,g.createResponseStatusError)(v.status,u);this._reader=v.body.getReader(),this._headersCapability.resolve();const f=p=>v.headers.get(p),{allowRangeRequests:C,suggestedLength:w}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=w||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var u;await this._headersCapability.promise;const{value:M,done:b}=await this._reader.read();return b?{value:M,done:b}:(this._loaded+=M.byteLength,(u=this.onProgress)==null||u.call(this,{loaded:this._loaded,total:this._contentLength}),{value:R(M),done:!1})}cancel(M){var b;(b=this._reader)==null||b.cancel(M),this._abortController.abort()}}class r{constructor(M,b,u){this._stream=M,this._reader=null,this._loaded=0;const v=M.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=O(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${u-1}`);const f=v.url;fetch(f,V(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,g.validateResponseStatus)(C.status))throw(0,g.createResponseStatusError)(C.status,f);this._readCapability.resolve(),this._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var u;await this._readCapability.promise;const{value:M,done:b}=await this._reader.read();return b?{value:M,done:b}:(this._loaded+=M.byteLength,(u=this.onProgress)==null||u.call(this,{loaded:this._loaded}),{value:R(M),done:!1})}cancel(M){var b;(b=this._reader)==null||b.cancel(M),this._abortController.abort()}}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=T,t.extractFilenameFromHeader=R,t.validateRangeRequestCapabilities=O,t.validateResponseStatus=c;var n=L(1),g=L(21),V=L(6);function O({getResponseHeader:r,isHttp:D,rangeChunkSize:M,disableRange:b}){const u={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(r("Content-Length"),10);return!Number.isInteger(v)||(u.suggestedLength=v,v<=2*M)||b||!D||r("Accept-Ranges")!=="bytes"||(r("Content-Encoding")||"identity")!=="identity"||(u.allowRangeRequests=!0),u}function R(r){const D=r("Content-Disposition");if(D){let M=(0,g.getFilenameFromContentDispositionHeader)(D);if(M.includes("%"))try{M=decodeURIComponent(M)}catch{}if((0,V.isPdfFile)(M))return M}return null}function T(r,D){return r===404||r===0&&D.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+D+'".'):new n.UnexpectedResponseException(`Unexpected server response (${r}) while retrieving PDF "${D}".`,r)}function c(r){return r===200||r===206}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=g;var n=L(1);function g(V){let O=!0,R=T("filename\\*","i").exec(V);if(R){R=R[1];let v=M(R);return v=unescape(v),v=b(v),v=u(v),r(v)}if(R=D(V),R){const v=u(R);return r(v)}if(R=T("filename","i").exec(V),R){R=R[1];let v=M(R);return v=u(v),r(v)}function T(v,f){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function c(v,f){if(v){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const C=new TextDecoder(v,{fatal:!0}),w=(0,n.stringToBytes)(f);f=C.decode(w),O=!1}catch{}}return f}function r(v){return O&&/[\x80-\xff]/.test(v)&&(v=c("utf-8",v),O&&(v=c("iso-8859-1",v))),v}function D(v){const f=[];let C;const w=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=w.exec(v))!==null;){let[,S,s,i]=C;if(S=parseInt(S,10),S in f){if(S===0)break;continue}f[S]=[s,i]}const p=[];for(let S=0;S<f.length&&S in f;++S){let[s,i]=f[S];i=M(i),s&&(i=unescape(i),S===0&&(i=b(i))),p.push(i)}return p.join("")}function M(v){if(v.startsWith('"')){const f=v.slice(1).split('\\"');for(let C=0;C<f.length;++C){const w=f[C].indexOf('"');w!==-1&&(f[C]=f[C].slice(0,w),f.length=C+1),f[C]=f[C].replaceAll(/\\(.)/g,"$1")}v=f.join('"')}return v}function b(v){const f=v.indexOf("'");if(f===-1)return v;const C=v.slice(0,f),p=v.slice(f+1).replace(/^[^']*'/,"");return c(C,p)}function u(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,C,w,p){if(w==="q"||w==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,s){return String.fromCharCode(parseInt(s,16))}),c(C,p);try{p=atob(p)}catch{}return c(C,p)})}return""}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=L(1),g=L(20);const V=200,O=206;function R(M){const b=M.response;return typeof b!="string"?b:(0,n.stringToBytes)(b).buffer}class T{constructor(b,u={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&u.httpHeaders||Object.create(null),this.withCredentials=u.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,u,v){const f={begin:b,end:u};for(const C in v)f[C]=v[C];return this.request(f)}requestFull(b){return this.request(b)}request(b){const u=new XMLHttpRequest,v=this.currXhrId++,f=this.pendingRequests[v]={xhr:u};u.open("GET",this.url),u.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const w=this.httpHeaders[C];w!==void 0&&u.setRequestHeader(C,w)}return this.isHttp&&"begin"in b&&"end"in b?(u.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),f.expectedStatus=O):f.expectedStatus=V,u.responseType="arraybuffer",b.onError&&(u.onerror=function(C){b.onError(u.status)}),u.onreadystatechange=this.onStateChange.bind(this,v),u.onprogress=this.onProgress.bind(this,v),f.onHeadersReceived=b.onHeadersReceived,f.onDone=b.onDone,f.onError=b.onError,f.onProgress=b.onProgress,u.send(null),v}onProgress(b,u){var f;const v=this.pendingRequests[b];v&&((f=v.onProgress)==null||f.call(v,u))}onStateChange(b,u){var S,s,i;const v=this.pendingRequests[b];if(!v)return;const f=v.xhr;if(f.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),f.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],f.status===0&&this.isHttp){(S=v.onError)==null||S.call(v,f.status);return}const C=f.status||V;if(!(C===V&&v.expectedStatus===O)&&C!==v.expectedStatus){(s=v.onError)==null||s.call(v,f.status);return}const p=R(f);if(C===O){const y=f.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);v.onDone({begin:parseInt(m[1],10),chunk:p})}else p?v.onDone({begin:0,chunk:p}):(i=v.onError)==null||i.call(v,f.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const u=this.pendingRequests[b].xhr;delete this.pendingRequests[b],u.abort()}}class c{constructor(b){this._source=b,this._manager=new T(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const u=this._rangeRequestReaders.indexOf(b);u>=0&&this._rangeRequestReaders.splice(u,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new r(this._manager,this._source),this._fullRequestReader}getRangeReader(b,u){const v=new D(this._manager,b,u);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(b){var u;(u=this._fullRequestReader)==null||u.cancel(b);for(const v of this._rangeRequestReaders.slice(0))v.cancel(b)}}t.PDFNetworkStream=c;class r{constructor(b,u){this._manager=b;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._fullRequestId=b.requestFull(v),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=u.disableRange||!1,this._contentLength=u.length,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,u=this._manager.getRequestXhr(b),v=w=>u.getResponseHeader(w),{allowRangeRequests:f,suggestedLength:C}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,g.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const u of this._requests)u.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){var u;(u=this.onProgress)==null||u.call(this,{loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D{constructor(b,u,v){this._manager=b;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(u,v,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var b;(b=this.onClosed)==null||b.call(this,this)}_onDone(b){const u=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunk=u,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,g.createResponseStatusError)(b,this._url);for(const u of this._requests)u.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){var u;this.isStreamingSupported||(u=this.onProgress)==null||u.call(this,{loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new n.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=L(1),g=L(20);const V=/^file:\/\/\/[a-zA-Z]:\//;function O(v){const f=require$$5,C=f.parse(v);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(v)?f.parse(`file:///${v}`):(C.host||(C.protocol="file:"),C)}class R{constructor(f){this.source=f,this.url=O(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new D(this),this._fullRequestReader}getRangeReader(f,C){if(C<=this._progressiveDataLength)return null;const w=this.isFsUrl?new u(this,f,C):new M(this,f,C);return this._rangeRequestReaders.push(w),w}cancelAllRequests(f){var C;(C=this._fullRequestReader)==null||C.cancel(f);for(const w of this._rangeRequestReaders.slice(0))w.cancel(f)}}t.PDFNodeStream=R;class T{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const C=f.source;this._contentLength=C.length,this._loaded=0,this._filename=null,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=f.length,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",C=>{this._error(C)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class c{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const C=f.source;this._isStreamingSupported=!C.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=f.length,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",C=>{this._error(C)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function r(v,f){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:f}}class D extends T{constructor(f){super(f);const C=w=>{if(w.statusCode===404){const i=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i,this._headersCapability.reject(i);return}this._headersCapability.resolve(),this._setReadableStream(w);const p=i=>this._readableStream.headers[i.toLowerCase()],{allowRangeRequests:S,suggestedLength:s}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=s||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(p)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(r(this._url,f.httpHeaders),C)}else{const w=require$$5;this._request=w.request(r(this._url,f.httpHeaders),C)}this._request.on("error",w=>{this._storedError=w,this._headersCapability.reject(w)}),this._request.end()}}class M extends c{constructor(f,C,w){super(f),this._httpHeaders={};for(const S in f.httpHeaders){const s=f.httpHeaders[S];s!==void 0&&(this._httpHeaders[S]=s)}this._httpHeaders.Range=`bytes=${C}-${w-1}`;const p=S=>{if(S.statusCode===404){const s=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=s;return}this._setReadableStream(S)};if(this._request=null,this._url.protocol==="http:"){const S=require$$5;this._request=S.request(r(this._url,this._httpHeaders),p)}else{const S=require$$5;this._request=S.request(r(this._url,this._httpHeaders),p)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class b extends T{constructor(f){super(f);let C=decodeURIComponent(this._url.path);V.test(this._url.href)&&(C=C.replace(/^\//,""));const w=require$$5;w.lstat(C,(p,S)=>{if(p){p.code==="ENOENT"&&(p=new n.MissingPDFException(`Missing PDF "${C}".`)),this._storedError=p,this._headersCapability.reject(p);return}this._contentLength=S.size,this._setReadableStream(w.createReadStream(C)),this._headersCapability.resolve()})}}class u extends c{constructor(f,C,w){super(f);let p=decodeURIComponent(this._url.path);V.test(this._url.href)&&(p=p.replace(/^\//,""));const S=require$$5;this._setReadableStream(S.createReadStream(p,{start:C,end:w-1}))}}},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=L(6),g=L(1);const V={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},O="http://www.w3.org/XML/1998/namespace",R="http://www.w3.org/1999/xlink",T=["butt","round","square"],c=["miter","round","bevel"],r=function(S,s="",i=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!i)return URL.createObjectURL(new Blob([S],{type:s}));const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m=`data:${s};base64,`;for(let h=0,F=S.length;h<F;h+=3){const A=S[h]&255,G=S[h+1]&255,ie=S[h+2]&255,E=A>>2,q=(A&3)<<4|G>>4,J=h+1<F?(G&15)<<2|ie>>6:64,Y=h+2<F?ie&63:64;m+=y[E]+y[q]+y[J]+y[Y]}return m},D=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,i=new Int32Array(256);for(let ie=0;ie<256;ie++){let E=ie;for(let q=0;q<8;q++)E=E&1?3988292384^E>>1&2147483647:E>>1&2147483647;i[ie]=E}function y(ie,E,q){let J=-1;for(let Y=E;Y<q;Y++){const H=(J^ie[Y])&255,le=i[H];J=J>>>8^le}return J^-1}function m(ie,E,q,J){let Y=J;const H=E.length;q[Y]=H>>24&255,q[Y+1]=H>>16&255,q[Y+2]=H>>8&255,q[Y+3]=H&255,Y+=4,q[Y]=ie.charCodeAt(0)&255,q[Y+1]=ie.charCodeAt(1)&255,q[Y+2]=ie.charCodeAt(2)&255,q[Y+3]=ie.charCodeAt(3)&255,Y+=4,q.set(E,Y),Y+=E.length;const le=y(q,J+4,Y);q[Y]=le>>24&255,q[Y+1]=le>>16&255,q[Y+2]=le>>8&255,q[Y+3]=le&255}function h(ie,E,q){let J=1,Y=0;for(let H=E;H<q;++H)J=(J+(ie[H]&255))%65521,Y=(Y+J)%65521;return Y<<16|J}function F(ie){if(!g.isNodeJS)return A(ie);try{const E=parseInt(process.versions.node)>=8?ie:Buffer.from(ie),q=require$$5.deflateSync(E,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(E){(0,g.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+E)}return A(ie)}function A(ie){let E=ie.length;const q=65535,J=Math.ceil(E/q),Y=new Uint8Array(2+E+J*5+4);let H=0;Y[H++]=120,Y[H++]=156;let le=0;for(;E>q;)Y[H++]=0,Y[H++]=255,Y[H++]=255,Y[H++]=0,Y[H++]=0,Y.set(ie.subarray(le,le+q),H),H+=q,le+=q,E-=q;Y[H++]=1,Y[H++]=E&255,Y[H++]=E>>8&255,Y[H++]=~E&65535&255,Y[H++]=(~E&65535)>>8&255,Y.set(ie.subarray(le),H),H+=ie.length-le;const $=h(ie,0,ie.length);return Y[H++]=$>>24&255,Y[H++]=$>>16&255,Y[H++]=$>>8&255,Y[H++]=$&255,Y}function G(ie,E,q,J){const Y=ie.width,H=ie.height;let le,$,Ee;const we=ie.data;switch(E){case g.ImageKind.GRAYSCALE_1BPP:$=0,le=1,Ee=Y+7>>3;break;case g.ImageKind.RGB_24BPP:$=2,le=8,Ee=Y*3;break;case g.ImageKind.RGBA_32BPP:$=6,le=8,Ee=Y*4;break;default:throw new Error("invalid format")}const N=new Uint8Array((1+Ee)*H);let a=0,d=0;for(let ne=0;ne<H;++ne)N[a++]=0,N.set(we.subarray(d,d+Ee),a),d+=Ee,a+=Ee;if(E===g.ImageKind.GRAYSCALE_1BPP&&J){a=0;for(let ne=0;ne<H;ne++){a++;for(let _e=0;_e<Ee;_e++)N[a++]^=255}}const l=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,H>>24&255,H>>16&255,H>>8&255,H&255,le,$,0,0,0]),P=F(N),x=S.length+s*3+l.length+P.length,U=new Uint8Array(x);let K=0;return U.set(S,K),K+=S.length,m("IHDR",l,U,K),K+=s+l.length,m("IDATA",P,U,K),K+=s+P.length,m("IEND",new Uint8Array(0),U,K),r(U,"image/png",q)}return function(E,q,J){const Y=E.kind===void 0?g.ImageKind.GRAYSCALE_1BPP:E.kind;return G(E,Y,q,J)}}();class M{constructor(){this.fontSizeScale=1,this.fontWeight=V.fontWeight,this.fontSize=0,this.textMatrix=g.IDENTITY_MATRIX,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=g.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=V.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,i){this.x=s,this.y=i}}function b(S){let s=[];const i=[];for(const y of S){if(y.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),i.push(s),s=s.at(-1).items;continue}y.fn==="restore"?s=i.pop():s.push(y)}return s}function u(S){if(Number.isInteger(S))return S.toString();const s=S.toFixed(10);let i=s.length-1;if(s[i]!=="0")return s;do i--;while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1)}function v(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${u(S[0])} ${u(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const s=Math.acos(S[0])*180/Math.PI;return`rotate(${u(s)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${u(S[4])} ${u(S[5])})`;return`matrix(${u(S[0])} ${u(S[1])} ${u(S[2])} ${u(S[3])} ${u(S[4])} ${u(S[5])})`}let f=0,C=0,w=0;class p{constructor(s,i,y=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new M,this.transformMatrix=g.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=s,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!y,this._operatorIdMapping=[];for(const m in g.OPS)this._operatorIdMapping[g.OPS[m]]=m}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}save(){this.transformStack.push(this.transformMatrix);const s=this.current;this.extraStack.push(s),this.current=s.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(s){this.save(),this.executeOpTree(s),this.restore()}loadDependencies(s){const i=s.fnArray,y=s.argsArray;for(let m=0,h=i.length;m<h;m++)if(i[m]===g.OPS.dependency)for(const F of y[m]){const A=F.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(ie=>{A.get(F,ie)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(s,i,y,m,h,F){const A=[s,i,y,m,h,F];this.transformMatrix=g.Util.transform(this.transformMatrix,A),this.tgrp=null}getSVG(s,i){this.viewport=i;const y=this._initialize(i);return this.loadDependencies(s).then(()=>(this.transformMatrix=g.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(s)),y))}convertOpList(s){const i=this._operatorIdMapping,y=s.argsArray,m=s.fnArray,h=[];for(let F=0,A=m.length;F<A;F++){const G=m[F];h.push({fnId:G,fn:i[G],args:y[F]})}return b(h)}executeOpTree(s){for(const i of s){const y=i.fn,m=i.fnId,h=i.args;switch(m|0){case g.OPS.beginText:this.beginText();break;case g.OPS.dependency:break;case g.OPS.setLeading:this.setLeading(h);break;case g.OPS.setLeadingMoveText:this.setLeadingMoveText(h[0],h[1]);break;case g.OPS.setFont:this.setFont(h);break;case g.OPS.showText:this.showText(h[0]);break;case g.OPS.showSpacedText:this.showText(h[0]);break;case g.OPS.endText:this.endText();break;case g.OPS.moveText:this.moveText(h[0],h[1]);break;case g.OPS.setCharSpacing:this.setCharSpacing(h[0]);break;case g.OPS.setWordSpacing:this.setWordSpacing(h[0]);break;case g.OPS.setHScale:this.setHScale(h[0]);break;case g.OPS.setTextMatrix:this.setTextMatrix(h[0],h[1],h[2],h[3],h[4],h[5]);break;case g.OPS.setTextRise:this.setTextRise(h[0]);break;case g.OPS.setTextRenderingMode:this.setTextRenderingMode(h[0]);break;case g.OPS.setLineWidth:this.setLineWidth(h[0]);break;case g.OPS.setLineJoin:this.setLineJoin(h[0]);break;case g.OPS.setLineCap:this.setLineCap(h[0]);break;case g.OPS.setMiterLimit:this.setMiterLimit(h[0]);break;case g.OPS.setFillRGBColor:this.setFillRGBColor(h[0],h[1],h[2]);break;case g.OPS.setStrokeRGBColor:this.setStrokeRGBColor(h[0],h[1],h[2]);break;case g.OPS.setStrokeColorN:this.setStrokeColorN(h);break;case g.OPS.setFillColorN:this.setFillColorN(h);break;case g.OPS.shadingFill:this.shadingFill(h[0]);break;case g.OPS.setDash:this.setDash(h[0],h[1]);break;case g.OPS.setRenderingIntent:this.setRenderingIntent(h[0]);break;case g.OPS.setFlatness:this.setFlatness(h[0]);break;case g.OPS.setGState:this.setGState(h[0]);break;case g.OPS.fill:this.fill();break;case g.OPS.eoFill:this.eoFill();break;case g.OPS.stroke:this.stroke();break;case g.OPS.fillStroke:this.fillStroke();break;case g.OPS.eoFillStroke:this.eoFillStroke();break;case g.OPS.clip:this.clip("nonzero");break;case g.OPS.eoClip:this.clip("evenodd");break;case g.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.OPS.paintImageXObject:this.paintImageXObject(h[0]);break;case g.OPS.paintInlineImageXObject:this.paintInlineImageXObject(h[0]);break;case g.OPS.paintImageMaskXObject:this.paintImageMaskXObject(h[0]);break;case g.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(h[0],h[1]);break;case g.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.OPS.closePath:this.closePath();break;case g.OPS.closeStroke:this.closeStroke();break;case g.OPS.closeFillStroke:this.closeFillStroke();break;case g.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case g.OPS.nextLine:this.nextLine();break;case g.OPS.transform:this.transform(h[0],h[1],h[2],h[3],h[4],h[5]);break;case g.OPS.constructPath:this.constructPath(h[0],h[1]);break;case g.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,g.warn)(`Unimplemented operator ${y}`);break}}}setWordSpacing(s){this.current.wordSpacing=s}setCharSpacing(s){this.current.charSpacing=s}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(s,i,y,m,h,F){const A=this.current;A.textMatrix=A.lineMatrix=[s,i,y,m,h,F],A.textMatrixScale=Math.hypot(s,i),A.x=A.lineX=0,A.y=A.lineY=0,A.xcoords=[],A.ycoords=[],A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${u(A.fontSize)}px`),A.tspan.setAttributeNS(null,"y",u(-A.y)),A.txtElement=this.svgFactory.createElement("svg:text"),A.txtElement.append(A.tspan)}beginText(){const s=this.current;s.x=s.lineX=0,s.y=s.lineY=0,s.textMatrix=g.IDENTITY_MATRIX,s.lineMatrix=g.IDENTITY_MATRIX,s.textMatrixScale=1,s.tspan=this.svgFactory.createElement("svg:tspan"),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtgrp=this.svgFactory.createElement("svg:g"),s.xcoords=[],s.ycoords=[]}moveText(s,i){const y=this.current;y.x=y.lineX+=s,y.y=y.lineY+=i,y.xcoords=[],y.ycoords=[],y.tspan=this.svgFactory.createElement("svg:tspan"),y.tspan.setAttributeNS(null,"font-family",y.fontFamily),y.tspan.setAttributeNS(null,"font-size",`${u(y.fontSize)}px`),y.tspan.setAttributeNS(null,"y",u(-y.y))}showText(s){const i=this.current,y=i.font,m=i.fontSize;if(m===0)return;const h=i.fontSizeScale,F=i.charSpacing,A=i.wordSpacing,G=i.fontDirection,ie=i.textHScale*G,E=y.vertical,q=E?1:-1,J=y.defaultVMetrics,Y=m*i.fontMatrix[0];let H=0;for(const Ee of s){if(Ee===null){H+=G*A;continue}else if(typeof Ee=="number"){H+=q*Ee*m/1e3;continue}const we=(Ee.isSpace?A:0)+F,N=Ee.fontChar;let a,d,l=Ee.width;if(E){let x;const U=Ee.vmetric||J;x=Ee.vmetric?U[1]:l*.5,x=-x*Y;const K=U[2]*Y;l=U?-U[0]:l,a=x/h,d=(H+K)/h}else a=H/h,d=0;(Ee.isInFont||y.missingFile)&&(i.xcoords.push(i.x+a),E&&i.ycoords.push(-i.y+d),i.tspan.textContent+=N);const P=E?l*Y-we*G:l*Y+we*G;H+=P}i.tspan.setAttributeNS(null,"x",i.xcoords.map(u).join(" ")),E?i.tspan.setAttributeNS(null,"y",i.ycoords.map(u).join(" ")):i.tspan.setAttributeNS(null,"y",u(-i.y)),E?i.y-=H:i.x+=H*ie,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${u(i.fontSize)}px`),i.fontStyle!==V.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==V.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const le=i.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;if(le===g.TextRenderingMode.FILL||le===g.TextRenderingMode.FILL_STROKE?(i.fillColor!==V.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===g.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),le===g.TextRenderingMode.STROKE||le===g.TextRenderingMode.FILL_STROKE){const Ee=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,Ee)}let $=i.textMatrix;i.textRise!==0&&($=$.slice(),$[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${v($)} scale(${u(ie)}, -1)`),i.txtElement.setAttributeNS(O,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}addFontStyle(s){if(!s.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=r(s.data,s.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${s.loadedName}"; src: url(${i}); }
`}setFont(s){const i=this.current,y=this.commonObjs.get(s[0]);let m=s[1];i.font=y,this.embedFonts&&!y.missingFile&&!this.embeddedFonts[y.loadedName]&&(this.addFontStyle(y),this.embeddedFonts[y.loadedName]=y),i.fontMatrix=y.fontMatrix||g.FONT_IDENTITY_MATRIX;let h="normal";y.black?h="900":y.bold&&(h="bold");const F=y.italic?"italic":"normal";m<0?(m=-m,i.fontDirection=-1):i.fontDirection=1,i.fontSize=m,i.fontFamily=y.loadedName,i.fontWeight=h,i.fontStyle=F,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",u(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const s=this.current;s.textRenderingMode&g.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=s.txtElement)!=null&&i.hasChildNodes())&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(s){s>0&&(this.current.lineWidth=s)}setLineCap(s){this.current.lineCap=T[s]}setLineJoin(s){this.current.lineJoin=c[s]}setMiterLimit(s){this.current.miterLimit=s}setStrokeAlpha(s){this.current.strokeAlpha=s}setStrokeRGBColor(s,i,y){this.current.strokeColor=g.Util.makeHexColor(s,i,y)}setFillAlpha(s){this.current.fillAlpha=s}setFillRGBColor(s,i,y){this.current.fillColor=g.Util.makeHexColor(s,i,y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(s){this.current.strokeColor=this._makeColorN_Pattern(s)}setFillColorN(s){this.current.fillColor=this._makeColorN_Pattern(s)}shadingFill(s){const{width:i,height:y}=this.viewport,m=g.Util.inverseTransform(this.transformMatrix),[h,F,A,G]=g.Util.getAxialAlignedBoundingBox([0,0,i,y],m),ie=this.svgFactory.createElement("svg:rect");ie.setAttributeNS(null,"x",h),ie.setAttributeNS(null,"y",F),ie.setAttributeNS(null,"width",A-h),ie.setAttributeNS(null,"height",G-F),ie.setAttributeNS(null,"fill",this._makeShadingPattern(s)),this.current.fillAlpha<1&&ie.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ie)}_makeColorN_Pattern(s){return s[0]==="TilingPattern"?this._makeTilingPattern(s):this._makeShadingPattern(s)}_makeTilingPattern(s){const i=s[1],y=s[2],m=s[3]||g.IDENTITY_MATRIX,[h,F,A,G]=s[4],ie=s[5],E=s[6],q=s[7],J=`shading${w++}`,[Y,H,le,$]=g.Util.normalizeRect([...g.Util.applyTransform([h,F],m),...g.Util.applyTransform([A,G],m)]),[Ee,we]=g.Util.singularValueDecompose2dScale(m),N=ie*Ee,a=E*we,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",J),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",N),d.setAttributeNS(null,"height",a),d.setAttributeNS(null,"x",`${Y}`),d.setAttributeNS(null,"y",`${H}`);const l=this.svg,P=this.transformMatrix,x=this.current.fillColor,U=this.current.strokeColor,K=this.svgFactory.create(le-Y,$-H);if(this.svg=K,this.transformMatrix=m,q===2){const ne=g.Util.makeHexColor(...i);this.current.fillColor=ne,this.current.strokeColor=ne}return this.executeOpTree(this.convertOpList(y)),this.svg=l,this.transformMatrix=P,this.current.fillColor=x,this.current.strokeColor=U,d.append(K.childNodes[0]),this.defs.append(d),`url(#${J})`}_makeShadingPattern(s){switch(typeof s=="string"&&(s=this.objs.get(s)),s[0]){case"RadialAxial":const i=`shading${w++}`,y=s[3];let m;switch(s[1]){case"axial":const h=s[4],F=s[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",h[0]),m.setAttributeNS(null,"y1",h[1]),m.setAttributeNS(null,"x2",F[0]),m.setAttributeNS(null,"y2",F[1]);break;case"radial":const A=s[4],G=s[5],ie=s[6],E=s[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",G[0]),m.setAttributeNS(null,"cy",G[1]),m.setAttributeNS(null,"r",E),m.setAttributeNS(null,"fx",A[0]),m.setAttributeNS(null,"fy",A[1]),m.setAttributeNS(null,"fr",ie);break;default:throw new Error(`Unknown RadialAxial type: ${s[1]}`)}for(const h of y){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",h[0]),F.setAttributeNS(null,"stop-color",h[1]),m.append(F)}return this.defs.append(m),`url(#${i})`;case"Mesh":return(0,g.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${s[0]}`)}}setDash(s,i){this.current.dashArray=s,this.current.dashPhase=i}constructPath(s,i){const y=this.current;let m=y.x,h=y.y,F=[],A=0;for(const G of s)switch(G|0){case g.OPS.rectangle:m=i[A++],h=i[A++];const ie=i[A++],E=i[A++],q=m+ie,J=h+E;F.push("M",u(m),u(h),"L",u(q),u(h),"L",u(q),u(J),"L",u(m),u(J),"Z");break;case g.OPS.moveTo:m=i[A++],h=i[A++],F.push("M",u(m),u(h));break;case g.OPS.lineTo:m=i[A++],h=i[A++],F.push("L",u(m),u(h));break;case g.OPS.curveTo:m=i[A+4],h=i[A+5],F.push("C",u(i[A]),u(i[A+1]),u(i[A+2]),u(i[A+3]),u(m),u(h)),A+=6;break;case g.OPS.curveTo2:F.push("C",u(m),u(h),u(i[A]),u(i[A+1]),u(i[A+2]),u(i[A+3])),m=i[A+2],h=i[A+3],A+=4;break;case g.OPS.curveTo3:m=i[A+2],h=i[A+3],F.push("C",u(i[A]),u(i[A+1]),u(m),u(h),u(m),u(h)),A+=4;break;case g.OPS.closePath:F.push("Z");break}F=F.join(" "),y.path&&s.length>0&&s[0]!==g.OPS.rectangle&&s[0]!==g.OPS.moveTo?F=y.path.getAttributeNS(null,"d")+F:(y.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(y.path)),y.path.setAttributeNS(null,"d",F),y.path.setAttributeNS(null,"fill","none"),y.element=y.path,y.setCurrentPoint(m,h)}endPath(){const s=this.current;if(s.path=null,!this.pendingClip)return;if(!s.element){this.pendingClip=null;return}const i=`clippath${f++}`,y=this.svgFactory.createElement("svg:clipPath");y.setAttributeNS(null,"id",i),y.setAttributeNS(null,"transform",v(this.transformMatrix));const m=s.element.cloneNode(!0);if(this.pendingClip==="evenodd"?m.setAttributeNS(null,"clip-rule","evenodd"):m.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,y.append(m),this.defs.append(y),s.activeClipUrl){s.clipGroup=null;for(const h of this.extraStack)h.clipGroup=null;y.setAttributeNS(null,"clip-path",s.activeClipUrl)}s.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(s){this.pendingClip=s}closePath(){const s=this.current;if(s.path){const i=`${s.path.getAttributeNS(null,"d")}Z`;s.path.setAttributeNS(null,"d",i)}}setLeading(s){this.current.leading=-s}setTextRise(s){this.current.textRise=s}setTextRenderingMode(s){this.current.textRenderingMode=s}setHScale(s){this.current.textHScale=s/100}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,y]of s)switch(i){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y);break;case"CA":this.setStrokeAlpha(y);break;case"ca":this.setFillAlpha(y);break;default:(0,g.warn)(`Unimplemented graphic state operator ${i}`);break}}fill(){const s=this.current;s.element&&(s.element.setAttributeNS(null,"fill",s.fillColor),s.element.setAttributeNS(null,"fill-opacity",s.fillAlpha),this.endPath())}stroke(){const s=this.current;s.element&&(this._setStrokeAttributes(s.element),s.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(s,i=1){const y=this.current;let m=y.dashArray;i!==1&&m.length>0&&(m=m.map(function(h){return i*h})),s.setAttributeNS(null,"stroke",y.strokeColor),s.setAttributeNS(null,"stroke-opacity",y.strokeAlpha),s.setAttributeNS(null,"stroke-miterlimit",u(y.miterLimit)),s.setAttributeNS(null,"stroke-linecap",y.lineCap),s.setAttributeNS(null,"stroke-linejoin",y.lineJoin),s.setAttributeNS(null,"stroke-width",u(i*y.lineWidth)+"px"),s.setAttributeNS(null,"stroke-dasharray",m.map(u).join(" ")),s.setAttributeNS(null,"stroke-dashoffset",u(i*y.dashPhase)+"px")}eoFill(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var s;(s=this.current.element)==null||s.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width","1px"),s.setAttributeNS(null,"height","1px"),s.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(s)}paintImageXObject(s){const i=this.getObject(s);if(!i){(0,g.warn)(`Dependent image with object ID ${s} is not ready yet`);return}this.paintInlineImageXObject(i)}paintInlineImageXObject(s,i){const y=s.width,m=s.height,h=D(s,this.forceDataSchema,!!i),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",u(y)),F.setAttributeNS(null,"height",u(m)),this.current.element=F,this.clip("nonzero");const A=this.svgFactory.createElement("svg:image");A.setAttributeNS(R,"xlink:href",h),A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y",u(-m)),A.setAttributeNS(null,"width",u(y)+"px"),A.setAttributeNS(null,"height",u(m)+"px"),A.setAttributeNS(null,"transform",`scale(${u(1/y)} ${u(-1/m)})`),i?i.append(A):this._ensureTransformGroup().append(A)}paintImageMaskXObject(s){const i=this.getObject(s.data,s);if(i.bitmap){(0,g.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const y=this.current,m=i.width,h=i.height,F=y.fillColor;y.maskId=`mask${C++}`;const A=this.svgFactory.createElement("svg:mask");A.setAttributeNS(null,"id",y.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",u(m)),G.setAttributeNS(null,"height",u(h)),G.setAttributeNS(null,"fill",F),G.setAttributeNS(null,"mask",`url(#${y.maskId})`),this.defs.append(A),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(i,A)}paintFormXObjectBegin(s,i){if(Array.isArray(s)&&s.length===6&&this.transform(s[0],s[1],s[2],s[3],s[4],s[5]),i){const y=i[2]-i[0],m=i[3]-i[1],h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",i[0]),h.setAttributeNS(null,"y",i[1]),h.setAttributeNS(null,"width",u(y)),h.setAttributeNS(null,"height",u(m)),this.current.element=h,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(s){const i=this.svgFactory.create(s.width,s.height),y=this.svgFactory.createElement("svg:defs");i.append(y),this.defs=y;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",v(s.transform)),i.append(m),this.svg=m,i}_ensureClipGroup(){if(!this.current.clipGroup){const s=this.svgFactory.createElement("svg:g");s.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(s),this.current.clipGroup=s}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=p},(z,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class L{static textContent(g){const V=[],O={items:V,styles:Object.create(null)};function R(T){var D;if(!T)return;let c=null;const r=T.name;if(r==="#text")c=T.value;else if(L.shouldBuildText(r))(D=T==null?void 0:T.attributes)!=null&&D.textContent?c=T.attributes.textContent:T.value&&(c=T.value);else return;if(c!==null&&V.push({str:c}),!!T.children)for(const M of T.children)R(M)}return R(g),O}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}t.XfaText=L},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=v,t.updateTextLayer=f;var n=L(1),g=L(6);const V=1e5,O=30,R=.8,T=new Map;function c(C,w){let p;if(w&&n.FeatureTest.isOffscreenCanvasSupported)p=new OffscreenCanvas(C,C).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=C,p=S.getContext("2d",{alpha:!1})}return p}function r(C,w){const p=T.get(C);if(p)return p;const S=c(O,w);S.font=`${O}px ${C}`;const s=S.measureText("");let i=s.fontBoundingBoxAscent,y=Math.abs(s.fontBoundingBoxDescent);if(i){const h=i/(i+y);return T.set(C,h),S.canvas.width=S.canvas.height=0,h}S.strokeStyle="red",S.clearRect(0,0,O,O),S.strokeText("g",0,0);let m=S.getImageData(0,0,O,O).data;y=0;for(let h=m.length-1-3;h>=0;h-=4)if(m[h]>0){y=Math.ceil(h/4/O);break}S.clearRect(0,0,O,O),S.strokeText("A",0,O),m=S.getImageData(0,0,O,O).data,i=0;for(let h=0,F=m.length;h<F;h+=4)if(m[h]>0){i=O-Math.floor(h/4/O);break}if(S.canvas.width=S.canvas.height=0,i){const h=i/(i+y);return T.set(C,h),h}return T.set(C,R),R}function D(C,w,p){const S=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};C._textDivs.push(S);const i=n.Util.transform(C._transform,w.transform);let y=Math.atan2(i[1],i[0]);const m=p[w.fontName];m.vertical&&(y+=Math.PI/2);const h=Math.hypot(i[2],i[3]),F=h*r(m.fontFamily,C._isOffscreenCanvasSupported);let A,G;y===0?(A=i[4],G=i[5]-F):(A=i[4]+F*Math.sin(y),G=i[5]-F*Math.cos(y));const ie="calc(var(--scale-factor)*",E=S.style;C._container===C._rootContainer?(E.left=`${(100*A/C._pageWidth).toFixed(2)}%`,E.top=`${(100*G/C._pageHeight).toFixed(2)}%`):(E.left=`${ie}${A.toFixed(2)}px)`,E.top=`${ie}${G.toFixed(2)}px)`),E.fontSize=`${ie}${h.toFixed(2)}px)`,E.fontFamily=m.fontFamily,s.fontSize=h,S.setAttribute("role","presentation"),S.textContent=w.str,S.dir=w.dir,C._fontInspectorEnabled&&(S.dataset.fontName=w.fontName),y!==0&&(s.angle=y*(180/Math.PI));let q=!1;if(w.str.length>1)q=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const J=Math.abs(w.transform[0]),Y=Math.abs(w.transform[3]);J!==Y&&Math.max(J,Y)/Math.min(J,Y)>1.5&&(q=!0)}q&&(s.canvasWidth=m.vertical?w.height:w.width),C._textDivProperties.set(S,s),C._isReadableStream&&C._layoutText(S)}function M(C){const{div:w,scale:p,properties:S,ctx:s,prevFontSize:i,prevFontFamily:y}=C,{style:m}=w;let h="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:F}=m,{canvasWidth:A,fontSize:G}=S;(i!==G||y!==F)&&(s.font=`${G*p}px ${F}`,C.prevFontSize=G,C.prevFontFamily=F);const{width:ie}=s.measureText(w.textContent);ie>0&&(h=`scaleX(${A*p/ie})`)}S.angle!==0&&(h=`rotate(${S.angle}deg) ${h}`),h.length>0&&(m.transform=h)}function b(C){if(C._canceled)return;const w=C._textDivs,p=C._capability;if(w.length>V){p.resolve();return}if(!C._isReadableStream)for(const s of w)C._layoutText(s);p.resolve()}class u{constructor({textContentSource:w,container:p,viewport:S,textDivs:s,textDivProperties:i,textContentItemsStr:y,isOffscreenCanvasSupported:m}){var ie;this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=p,this._textDivs=s||[],this._textContentItemsStr=y||[],this._isOffscreenCanvasSupported=m,this._fontInspectorEnabled=!!((ie=globalThis.FontInspector)!=null&&ie.enabled),this._reader=null,this._textDivProperties=i||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c(0,m)};const{pageWidth:h,pageHeight:F,pageX:A,pageY:G}=S.rawDims;this._transform=[1,0,0,-1,-A,G+F],this._pageWidth=h,this._pageHeight=F,(0,g.setLayerDimensions)(p,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(w,p){for(const S of w){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const s=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),s.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),D(this,S,p)}}_layoutText(w){const p=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,M(this._layoutTextParams),p.hasText&&this._container.append(w),p.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const w=new n.PromiseCapability;let p=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:s,done:i})=>{if(i){w.resolve();return}Object.assign(p,s.styles),this._processItems(s.items,p),S()},w.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:s}=this._textContentSource;this._processItems(S,s),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{p=null,b(this)},this._capability.reject)}}t.TextLayerRenderTask=u;function v(C){!C.textContentSource&&(C.textContent||C.textContentStream)&&((0,g.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),C.textContentSource=C.textContent||C.textContentStream);const{container:w,viewport:p}=C,S=getComputedStyle(w),s=S.getPropertyValue("visibility"),i=parseFloat(S.getPropertyValue("--scale-factor"));s==="visible"&&(!i||Math.abs(i-p.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const y=new u(C);return y._render(),y}function f({container:C,viewport:w,textDivs:p,textDivProperties:S,isOffscreenCanvasSupported:s,mustRotate:i=!0,mustRescale:y=!0}){if(i&&(0,g.setLayerDimensions)(C,{rotation:w.rotation}),y){const m=c(0,s),F={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m};for(const A of p)F.properties=S.get(A),F.div=A,M(F)}}},(z,t,L)=>{var r,D,M,b,u,v,f,C,w,p,S,fi,i,It,m,pi,F,gi;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=L(1),g=L(4),V=L(28),O=L(33),R=L(6),T=L(34);const G=class G{constructor({uiManager:E,pageIndex:q,div:J,accessibilityManager:Y,annotationLayer:H,viewport:le,l10n:$}){I(this,S);I(this,i);I(this,m);I(this,F);I(this,r,void 0);I(this,D,!1);I(this,M,null);I(this,b,this.pointerup.bind(this));I(this,u,this.pointerdown.bind(this));I(this,v,new Map);I(this,f,!1);I(this,C,!1);I(this,w,!1);I(this,p,void 0);const Ee=[V.FreeTextEditor,O.InkEditor,T.StampEditor];if(!G._initialized){G._initialized=!0;for(const we of Ee)we.initialize($)}E.registerEditorTypes(Ee),Z(this,p,E),this.pageIndex=q,this.div=J,Z(this,r,Y),Z(this,M,H),this.viewport=le,e(this,p).addLayer(this)}get isEmpty(){return e(this,v).size===0}updateToolbar(E){e(this,p).updateToolbar(E)}updateMode(E=e(this,p).getMode()){j(this,F,gi).call(this),E===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),E!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",E===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",E===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",E===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(E){if(!E&&e(this,p).getMode()!==n.AnnotationEditorType.INK)return;if(!E){for(const J of e(this,v).values())if(J.isEmpty()){J.setInBackground();return}}j(this,i,It).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(E){e(this,p).setEditingState(E)}addCommands(E){e(this,p).addCommands(E)}enable(){this.div.style.pointerEvents="auto";const E=new Set;for(const J of e(this,v).values())J.enableEditing(),J.annotationElementId&&E.add(J.annotationElementId);if(!e(this,M))return;const q=e(this,M).getEditableAnnotations();for(const J of q){if(J.hide(),e(this,p).isDeletedAnnotationElement(J.data.id)||E.has(J.data.id))continue;const Y=this.deserialize(J);Y&&(this.addOrRebuild(Y),Y.enableEditing())}}disable(){var q;Z(this,w,!0),this.div.style.pointerEvents="none";const E=new Set;for(const J of e(this,v).values()){if(J.disableEditing(),!J.annotationElementId||J.serialize()!==null){E.add(J.annotationElementId);continue}(q=this.getEditableAnnotation(J.annotationElementId))==null||q.show(),J.remove()}if(e(this,M)){const J=e(this,M).getEditableAnnotations();for(const Y of J){const{id:H}=Y.data;E.has(H)||e(this,p).isDeletedAnnotationElement(H)||Y.show()}}j(this,F,gi).call(this),this.isEmpty&&(this.div.hidden=!0),Z(this,w,!1)}getEditableAnnotation(E){var q;return((q=e(this,M))==null?void 0:q.getEditableAnnotation(E))||null}setActiveEditor(E){e(this,p).getActive()!==E&&e(this,p).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",e(this,u)),this.div.addEventListener("pointerup",e(this,b))}disableClick(){this.div.removeEventListener("pointerdown",e(this,u)),this.div.removeEventListener("pointerup",e(this,b))}attach(E){e(this,v).set(E.id,E);const{annotationElementId:q}=E;q&&e(this,p).isDeletedAnnotationElement(q)&&e(this,p).removeDeletedAnnotationElement(E)}detach(E){var q;e(this,v).delete(E.id),(q=e(this,r))==null||q.removePointerInTextLayer(E.contentDiv),!e(this,w)&&E.annotationElementId&&e(this,p).addDeletedAnnotationElement(E)}remove(E){this.detach(E),e(this,p).removeEditor(E),E.div.contains(document.activeElement)&&setTimeout(()=>{e(this,p).focusMainContainer()},0),E.div.remove(),E.isAttachedToDOM=!1,e(this,C)||this.addInkEditorIfNeeded(!1)}changeParent(E){var q;E.parent!==this&&(E.annotationElementId&&(e(this,p).addDeletedAnnotationElement(E.annotationElementId),g.AnnotationEditor.deleteAnnotationElement(E),E.annotationElementId=null),this.attach(E),(q=E.parent)==null||q.detach(E),E.setParent(this),E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))}add(E){if(this.changeParent(E),e(this,p).addEditor(E),this.attach(E),!E.isAttachedToDOM){const q=E.render();this.div.append(q),E.isAttachedToDOM=!0}E.fixAndSetPosition(),E.onceAdded(),e(this,p).addToAnnotationStorage(E)}moveEditorInDOM(E){var J;if(!E.isAttachedToDOM)return;const{activeElement:q}=document;E.div.contains(q)&&(E._focusEventsAllowed=!1,setTimeout(()=>{E.div.contains(document.activeElement)?E._focusEventsAllowed=!0:(E.div.addEventListener("focusin",()=>{E._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),E._structTreeParentId=(J=e(this,r))==null?void 0:J.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addUndoableEditor(E){const q=()=>E._uiManager.rebuild(E),J=()=>{E.remove()};this.addCommands({cmd:q,undo:J,mustExec:!1})}getNextId(){return e(this,p).getId()}pasteEditor(E,q){e(this,p).updateToolbar(E),e(this,p).updateMode(E);const{offsetX:J,offsetY:Y}=j(this,m,pi).call(this),H=this.getNextId(),le=j(this,S,fi).call(this,{parent:this,id:H,x:J,y:Y,uiManager:e(this,p),isCentered:!0,...q});le&&this.add(le)}deserialize(E){switch(E.annotationType??E.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return V.FreeTextEditor.deserialize(E,this,e(this,p));case n.AnnotationEditorType.INK:return O.InkEditor.deserialize(E,this,e(this,p));case n.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(E,this,e(this,p))}return null}addNewEditor(){j(this,i,It).call(this,j(this,m,pi).call(this),!0)}setSelected(E){e(this,p).setSelected(E)}toggleSelected(E){e(this,p).toggleSelected(E)}isSelected(E){return e(this,p).isSelected(E)}unselect(E){e(this,p).unselect(E)}pointerup(E){const{isMac:q}=n.FeatureTest.platform;if(!(E.button!==0||E.ctrlKey&&q)&&E.target===this.div&&e(this,f)){if(Z(this,f,!1),!e(this,D)){Z(this,D,!0);return}if(e(this,p).getMode()===n.AnnotationEditorType.STAMP){e(this,p).unselectAll();return}j(this,i,It).call(this,E,!1)}}pointerdown(E){if(e(this,f)){Z(this,f,!1);return}const{isMac:q}=n.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&q||E.target!==this.div)return;Z(this,f,!0);const J=e(this,p).getActive();Z(this,D,!J||J.isEmpty())}findNewParent(E,q,J){const Y=e(this,p).findParent(q,J);return Y===null||Y===this?!1:(Y.changeParent(E),!0)}destroy(){var E,q;((E=e(this,p).getActive())==null?void 0:E.parent)===this&&(e(this,p).commitOrRemove(),e(this,p).setActiveEditor(null));for(const J of e(this,v).values())(q=e(this,r))==null||q.removePointerInTextLayer(J.contentDiv),J.setParent(null),J.isAttachedToDOM=!1,J.div.remove();this.div=null,e(this,v).clear(),e(this,p).removeLayer(this)}render({viewport:E}){this.viewport=E,(0,R.setLayerDimensions)(this.div,E);for(const q of e(this,p).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:E}){e(this,p).commitOrRemove(),this.viewport=E,(0,R.setLayerDimensions)(this.div,{rotation:E.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:E,pageHeight:q}=this.viewport.rawDims;return[E,q]}};r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakMap,w=new WeakMap,p=new WeakMap,S=new WeakSet,fi=function(E){switch(e(this,p).getMode()){case n.AnnotationEditorType.FREETEXT:return new V.FreeTextEditor(E);case n.AnnotationEditorType.INK:return new O.InkEditor(E);case n.AnnotationEditorType.STAMP:return new T.StampEditor(E)}return null},i=new WeakSet,It=function(E,q){const J=this.getNextId(),Y=j(this,S,fi).call(this,{parent:this,id:J,x:E.offsetX,y:E.offsetY,uiManager:e(this,p),isCentered:q});return Y&&this.add(Y),Y},m=new WeakSet,pi=function(){const{x:E,y:q,width:J,height:Y}=this.div.getBoundingClientRect(),H=Math.max(0,E),le=Math.max(0,q),$=Math.min(window.innerWidth,E+J),Ee=Math.min(window.innerHeight,q+Y),we=(H+$)/2-E,N=(le+Ee)/2-q,[a,d]=this.viewport.rotation%180===0?[we,N]:[N,we];return{offsetX:a,offsetY:d}},F=new WeakSet,gi=function(){Z(this,C,!0);for(const E of e(this,v).values())E.isEmpty()&&E.remove();Z(this,C,!1)},tt(G,"_initialized",!1);let c=G;t.AnnotationEditorLayer=c},(z,t,L)=>{var T,c,r,D,M,b,u,v,f,C,dn,p,un,s,fn,y,Pt,h,mi,A,pn,ie,_i;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=L(1),g=L(5),V=L(4),O=L(29);const q=class q extends V.AnnotationEditor{constructor(H){super({...H,name:"freeTextEditor"});I(this,C);I(this,p);I(this,s);I(this,y);I(this,h);I(this,A);I(this,ie);I(this,T,this.editorDivBlur.bind(this));I(this,c,this.editorDivFocus.bind(this));I(this,r,this.editorDivInput.bind(this));I(this,D,this.editorDivKeydown.bind(this));I(this,M,void 0);I(this,b,"");I(this,u,`${this.id}-editor`);I(this,v,void 0);I(this,f,null);Z(this,M,H.color||q._defaultColor||V.AnnotationEditor._defaultLineColor),Z(this,v,H.fontSize||q._defaultFontSize)}static get _keyboardManager(){const H=q.prototype,le=we=>we.isEmpty(),$=g.AnnotationEditorUIManager.TRANSLATE_SMALL,Ee=g.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new g.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],H.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],H.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],H._translateEmpty,{args:[-$,0],checker:le}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],H._translateEmpty,{args:[-Ee,0],checker:le}],[["ArrowRight","mac+ArrowRight"],H._translateEmpty,{args:[$,0],checker:le}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],H._translateEmpty,{args:[Ee,0],checker:le}],[["ArrowUp","mac+ArrowUp"],H._translateEmpty,{args:[0,-$],checker:le}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],H._translateEmpty,{args:[0,-Ee],checker:le}],[["ArrowDown","mac+ArrowDown"],H._translateEmpty,{args:[0,$],checker:le}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],H._translateEmpty,{args:[0,Ee],checker:le}]]))}static initialize(H){V.AnnotationEditor.initialize(H,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const le=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(le.getPropertyValue("--freetext-padding"))}static updateDefaultParams(H,le){switch(H){case n.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=le;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=le;break}}updateParams(H,le){switch(H){case n.AnnotationEditorParamsType.FREETEXT_SIZE:j(this,C,dn).call(this,le);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:j(this,p,un).call(this,le);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||V.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,v)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,M)]]}_translateEmpty(H,le){this._uiManager.translateSelectedEditors(H,le,!0)}getInitialTranslation(){const H=this.parentScale;return[-q._internalPadding*H,-(q._internalPadding+e(this,v))*H]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,D)),this.editorDiv.addEventListener("focus",e(this,c)),this.editorDiv.addEventListener("blur",e(this,T)),this.editorDiv.addEventListener("input",e(this,r)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,u)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,D)),this.editorDiv.removeEventListener("focus",e(this,c)),this.editorDiv.removeEventListener("blur",e(this,T)),this.editorDiv.removeEventListener("input",e(this,r)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(H){this._focusEventsAllowed&&(super.focusin(H),H.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var H;if(this.width){j(this,ie,_i).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(H=this._initialOptions)!=null&&H.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const H=e(this,b),le=Z(this,b,j(this,s,fn).call(this).trimEnd());if(H===le)return;const $=Ee=>{if(Z(this,b,Ee),!Ee){this.remove();return}j(this,h,mi).call(this),this._uiManager.rebuild(this),j(this,y,Pt).call(this)};this.addCommands({cmd:()=>{$(le)},undo:()=>{$(H)},mustExec:!1}),j(this,y,Pt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(H){this.enterInEditMode()}keydown(H){H.target===this.div&&H.key==="Enter"&&(this.enterInEditMode(),H.preventDefault())}editorDivKeydown(H){q._keyboardManager.exec(this,H)}editorDivFocus(H){this.isEditing=!0}editorDivBlur(H){this.isEditing=!1}editorDivInput(H){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let H,le;this.width&&(H=this.x,le=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,u)),this.enableEditing(),V.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Ee=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("aria-label",Ee)}),V.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Ee=>{var we;return(we=this.editorDiv)==null?void 0:we.setAttribute("default-content",Ee)}),this.editorDiv.contentEditable=!0;const{style:$}=this.editorDiv;if($.fontSize=`calc(${e(this,v)}px * var(--scale-factor))`,$.color=e(this,M),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,g.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Ee,we]=this.parentDimensions;if(this.annotationElementId){const{position:N}=e(this,f);let[a,d]=this.getInitialTranslation();[a,d]=this.pageTranslationToScreen(a,d);const[l,P]=this.pageDimensions,[x,U]=this.pageTranslation;let K,ne;switch(this.rotation){case 0:K=H+(N[0]-x)/l,ne=le+this.height-(N[1]-U)/P;break;case 90:K=H+(N[0]-x)/l,ne=le-(N[1]-U)/P,[a,d]=[d,-a];break;case 180:K=H-this.width+(N[0]-x)/l,ne=le-(N[1]-U)/P,[a,d]=[-a,-d];break;case 270:K=H+(N[0]-x-this.height*P)/l,ne=le+(N[1]-U-this.width*l)/P,[a,d]=[-d,a];break}this.setAt(K*Ee,ne*we,a,d)}else this.setAt(H*Ee,le*we,this.width*Ee,this.height*we);j(this,h,mi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(H,le,$){let Ee=null;if(H instanceof O.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:N,fontColor:a},rect:d,rotation:l,id:P},textContent:x,textPosition:U,parent:{page:{pageNumber:K}}}=H;if(!x||x.length===0)return null;Ee=H={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:N,value:x.join(`
`),position:U,pageIndex:K-1,rect:d,rotation:l,id:P,deleted:!1}}const we=super.deserialize(H,le,$);return Z(we,v,H.fontSize),Z(we,M,n.Util.makeHexColor(...H.color)),Z(we,b,H.value),we.annotationElementId=H.id||null,Z(we,f,Ee),we}serialize(H=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const le=q._internalPadding*this.parentScale,$=this.getRect(le,le),Ee=V.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,M)),we={annotationType:n.AnnotationEditorType.FREETEXT,color:Ee,fontSize:e(this,v),value:e(this,b),pageIndex:this.pageIndex,rect:$,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return H?we:this.annotationElementId&&!j(this,A,pn).call(this,we)?null:(we.id=this.annotationElementId,we)}};T=new WeakMap,c=new WeakMap,r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakSet,dn=function(H){const le=Ee=>{this.editorDiv.style.fontSize=`calc(${Ee}px * var(--scale-factor))`,this.translate(0,-(Ee-e(this,v))*this.parentScale),Z(this,v,Ee),j(this,y,Pt).call(this)},$=e(this,v);this.addCommands({cmd:()=>{le(H)},undo:()=>{le($)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,un=function(H){const le=e(this,M);this.addCommands({cmd:()=>{Z(this,M,this.editorDiv.style.color=H)},undo:()=>{Z(this,M,this.editorDiv.style.color=le)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,fn=function(){const H=this.editorDiv.getElementsByTagName("div");if(H.length===0)return this.editorDiv.innerText;const le=[];for(const $ of H)le.push($.innerText.replace(/\r\n?|\n/,""));return le.join(`
`)},y=new WeakSet,Pt=function(){const[H,le]=this.parentDimensions;let $;if(this.isAttachedToDOM)$=this.div.getBoundingClientRect();else{const{currentLayer:Ee,div:we}=this,N=we.style.display;we.style.display="hidden",Ee.div.append(this.div),$=we.getBoundingClientRect(),we.remove(),we.style.display=N}this.rotation%180===this.parentRotation%180?(this.width=$.width/H,this.height=$.height/le):(this.width=$.height/H,this.height=$.width/le),this.fixAndSetPosition()},h=new WeakSet,mi=function(){if(this.editorDiv.replaceChildren(),!!e(this,b))for(const H of e(this,b).split(`
`)){const le=document.createElement("div");le.append(H?document.createTextNode(H):document.createElement("br")),this.editorDiv.append(le)}},A=new WeakSet,pn=function(H){const{value:le,fontSize:$,color:Ee,rect:we,pageIndex:N}=e(this,f);return H.value!==le||H.fontSize!==$||H.rect.some((a,d)=>Math.abs(a-we[d])>=1)||H.color.some((a,d)=>a!==Ee[d])||H.pageIndex!==N},ie=new WeakSet,_i=function(H=!1){if(!this.annotationElementId)return;if(j(this,y,Pt).call(this),!H&&(this.width===0||this.height===0)){setTimeout(()=>j(this,ie,_i).call(this,!0),0);return}const le=q._internalPadding*this.parentScale;e(this,f).rect=this.getRect(le,le)},tt(q,"_freeTextDefaultContent",""),tt(q,"_internalPadding",0),tt(q,"_defaultColor",null),tt(q,"_defaultFontSize",10),tt(q,"_type","freetext");let R=q;t.FreeTextEditor=R},(z,t,L)=>{var d,P,ht,U,gn,ne,_e,pe,Pe,se,be,ge,Fe,De,xe,de,oe,te,ee,me,Te,Le,Be,mn,$e,Ot,Ke,vi,Ze,bi,_,k,he,ae,ue,ve,W,Si,Me,Ae,ke,Oe,_n,Ce,yi;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=L(1),g=L(6),V=L(3),O=L(30),R=L(31),T=L(32);const c=1e3,r=9,D=new WeakSet;function M(Ve){return{width:Ve[2]-Ve[0],height:Ve[3]-Ve[1]}}class b{static create(Q){switch(Q.data.annotationType){case n.AnnotationType.LINK:return new v(Q);case n.AnnotationType.TEXT:return new f(Q);case n.AnnotationType.WIDGET:switch(Q.data.fieldType){case"Tx":return new w(Q);case"Btn":return Q.data.radioButton?new s(Q):Q.data.checkBox?new S(Q):new i(Q);case"Ch":return new y(Q);case"Sig":return new p(Q)}return new C(Q);case n.AnnotationType.POPUP:return new m(Q);case n.AnnotationType.FREETEXT:return new F(Q);case n.AnnotationType.LINE:return new A(Q);case n.AnnotationType.SQUARE:return new G(Q);case n.AnnotationType.CIRCLE:return new ie(Q);case n.AnnotationType.POLYLINE:return new E(Q);case n.AnnotationType.CARET:return new J(Q);case n.AnnotationType.INK:return new Y(Q);case n.AnnotationType.POLYGON:return new q(Q);case n.AnnotationType.HIGHLIGHT:return new H(Q);case n.AnnotationType.UNDERLINE:return new le(Q);case n.AnnotationType.SQUIGGLY:return new $(Q);case n.AnnotationType.STRIKEOUT:return new Ee(Q);case n.AnnotationType.STAMP:return new we(Q);case n.AnnotationType.FILEATTACHMENT:return new N(Q);default:return new u(Q)}}}const l=class l{constructor(Q,{isRenderable:o=!1,ignoreBorder:B=!1,createQuadrilaterals:X=!1}={}){I(this,d,!1);this.isRenderable=o,this.data=Q.data,this.layer=Q.layer,this.linkService=Q.linkService,this.downloadManager=Q.downloadManager,this.imageResourcesPath=Q.imageResourcesPath,this.renderForms=Q.renderForms,this.svgFactory=Q.svgFactory,this.annotationStorage=Q.annotationStorage,this.enableScripting=Q.enableScripting,this.hasJSActions=Q.hasJSActions,this._fieldObjects=Q.fieldObjects,this.parent=Q.parent,o&&(this.container=this._createContainer(B)),X&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Q,contentsObj:o,richText:B}){return!!(Q!=null&&Q.str||o!=null&&o.str||B!=null&&B.str)}get hasPopupData(){return l._hasPopupData(this.data)}_createContainer(Q){const{data:o,parent:{page:B,viewport:X}}=this,re=document.createElement("section");re.setAttribute("data-annotation-id",o.id),this instanceof C||(re.tabIndex=c),re.style.zIndex=this.parent.zIndex++,this.data.popupRef&&re.setAttribute("aria-haspopup","dialog"),o.noRotate&&re.classList.add("norotate");const{pageWidth:fe,pageHeight:Se,pageX:Re,pageY:Ne}=X.rawDims;if(!o.rect||this instanceof m){const{rotation:ze}=o;return!o.hasOwnCanvas&&ze!==0&&this.setRotation(ze,re),re}const{width:Ie,height:Qe}=M(o.rect),He=n.Util.normalizeRect([o.rect[0],B.view[3]-o.rect[1]+B.view[1],o.rect[2],B.view[3]-o.rect[3]+B.view[1]]);if(!Q&&o.borderStyle.width>0){re.style.borderWidth=`${o.borderStyle.width}px`;const ze=o.borderStyle.horizontalCornerRadius,Ye=o.borderStyle.verticalCornerRadius;if(ze>0||Ye>0){const et=`calc(${ze}px * var(--scale-factor)) / calc(${Ye}px * var(--scale-factor))`;re.style.borderRadius=et}else if(this instanceof s){const et=`calc(${Ie}px * var(--scale-factor)) / calc(${Qe}px * var(--scale-factor))`;re.style.borderRadius=et}switch(o.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:re.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:re.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:re.style.borderBottomStyle="solid";break}const Je=o.borderColor||null;Je?(Z(this,d,!0),re.style.borderColor=n.Util.makeHexColor(Je[0]|0,Je[1]|0,Je[2]|0)):re.style.borderWidth=0}re.style.left=`${100*(He[0]-Re)/fe}%`,re.style.top=`${100*(He[1]-Ne)/Se}%`;const{rotation:We}=o;return o.hasOwnCanvas||We===0?(re.style.width=`${100*Ie/fe}%`,re.style.height=`${100*Qe/Se}%`):this.setRotation(We,re),re}setRotation(Q,o=this.container){if(!this.data.rect)return;const{pageWidth:B,pageHeight:X}=this.parent.viewport.rawDims,{width:re,height:fe}=M(this.data.rect);let Se,Re;Q%180===0?(Se=100*re/B,Re=100*fe/X):(Se=100*fe/B,Re=100*re/X),o.style.width=`${Se}%`,o.style.height=`${Re}%`,o.setAttribute("data-main-rotation",(360-Q)%360)}get _commonActions(){const Q=(o,B,X)=>{const re=X.detail[o],fe=re[0],Se=re.slice(1);X.target.style[B]=O.ColorConverters[`${fe}_HTML`](Se),this.annotationStorage.setValue(this.data.id,{[B]:O.ColorConverters[`${fe}_rgb`](Se)})};return(0,n.shadow)(this,"_commonActions",{display:o=>{const{display:B}=o.detail,X=B%2===1;this.container.style.visibility=X?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:X,noPrint:B===1||B===2})},print:o=>{this.annotationStorage.setValue(this.data.id,{noPrint:!o.detail.print})},hidden:o=>{const{hidden:B}=o.detail;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:B,noView:B})},focus:o=>{setTimeout(()=>o.target.focus({preventScroll:!1}),0)},userName:o=>{o.target.title=o.detail.userName},readonly:o=>{o.target.disabled=o.detail.readonly},required:o=>{this._setRequired(o.target,o.detail.required)},bgColor:o=>{Q("bgColor","backgroundColor",o)},fillColor:o=>{Q("fillColor","backgroundColor",o)},fgColor:o=>{Q("fgColor","color",o)},textColor:o=>{Q("textColor","color",o)},borderColor:o=>{Q("borderColor","borderColor",o)},strokeColor:o=>{Q("strokeColor","borderColor",o)},rotation:o=>{const B=o.detail.rotation;this.setRotation(B),this.annotationStorage.setValue(this.data.id,{rotation:B})}})}_dispatchEventFromSandbox(Q,o){const B=this._commonActions;for(const X of Object.keys(o.detail)){const re=Q[X]||B[X];re==null||re(o)}}_setDefaultPropertiesFromJS(Q){if(!this.enableScripting)return;const o=this.annotationStorage.getRawValue(this.data.id);if(!o)return;const B=this._commonActions;for(const[X,re]of Object.entries(o)){const fe=B[X];if(fe){const Se={detail:{[X]:re},target:Q};fe(Se),delete o[X]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Q}=this.data;if(!Q)return;const[o,B,X,re]=this.data.rect;if(Q.length===1){const[,{x:Ye,y:Je},{x:et,y:nt}]=Q[0];if(X===Ye&&re===Je&&o===et&&B===nt)return}const{style:fe}=this.container;let Se;if(e(this,d)){const{borderColor:Ye,borderWidth:Je}=fe;fe.borderWidth=0,Se=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ye}" stroke-width="${Je}">`],this.container.classList.add("hasBorder")}const Re=X-o,Ne=re-B,{svgFactory:Ie}=this,Qe=Ie.createElement("svg");Qe.classList.add("quadrilateralsContainer"),Qe.setAttribute("width",0),Qe.setAttribute("height",0);const He=Ie.createElement("defs");Qe.append(He);const We=Ie.createElement("clipPath"),ze=`clippath_${this.data.id}`;We.setAttribute("id",ze),We.setAttribute("clipPathUnits","objectBoundingBox"),He.append(We);for(const[,{x:Ye,y:Je},{x:et,y:nt}]of Q){const it=Ie.createElement("rect"),st=(et-o)/Re,lt=(re-Je)/Ne,ct=(Ye-et)/Re,Zi=(Je-nt)/Ne;it.setAttribute("x",st),it.setAttribute("y",lt),it.setAttribute("width",ct),it.setAttribute("height",Zi),We.append(it),Se==null||Se.push(`<rect vector-effect="non-scaling-stroke" x="${st}" y="${lt}" width="${ct}" height="${Zi}"/>`)}e(this,d)&&(Se.push("</g></svg>')"),fe.backgroundImage=Se.join("")),this.container.append(Qe),this.container.style.clipPath=`url(#${ze})`}_createPopup(){const{container:Q,data:o}=this;Q.setAttribute("aria-haspopup","dialog");const B=new m({data:{color:o.color,titleObj:o.titleObj,modificationDate:o.modificationDate,contentsObj:o.contentsObj,richText:o.richText,parentRect:o.rect,borderStyle:0,id:`popup_${o.id}`,rotation:o.rotation},parent:this.parent,elements:[this]});this.parent.div.append(B.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Q,o=null){const B=[];if(this._fieldObjects){const X=this._fieldObjects[Q];if(X)for(const{page:re,id:fe,exportValues:Se}of X){if(re===-1||fe===o)continue;const Re=typeof Se=="string"?Se:null,Ne=document.querySelector(`[data-element-id="${fe}"]`);if(Ne&&!D.has(Ne)){(0,n.warn)(`_getElementsByName - element not allowed: ${fe}`);continue}B.push({id:fe,exportValue:Re,domElement:Ne})}return B}for(const X of document.getElementsByName(Q)){const{exportValue:re}=X,fe=X.getAttribute("data-element-id");fe!==o&&D.has(X)&&B.push({id:fe,exportValue:re,domElement:X})}return B}show(){var Q;this.container&&(this.container.hidden=!1),(Q=this.popup)==null||Q.maybeShow()}hide(){var Q;this.container&&(this.container.hidden=!0),(Q=this.popup)==null||Q.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Q=this.getElementsToTriggerPopup();if(Array.isArray(Q))for(const o of Q)o.classList.add("highlightArea");else Q.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Q,data:{id:o}}=this;this.container.addEventListener("dblclick",()=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("switchannotationeditormode",{source:this,mode:Q,editId:o})})}};d=new WeakMap;let u=l;class v extends u{constructor(o,B=null){super(o,{isRenderable:!0,ignoreBorder:!!(B!=null&&B.ignoreBorder),createQuadrilaterals:!0});I(this,P);I(this,U);this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:B}=this,X=document.createElement("a");X.setAttribute("data-element-id",o.id);let re=!1;return o.url?(B.addLinkAttributes(X,o.url,o.newWindow),re=!0):o.action?(this._bindNamedAction(X,o.action),re=!0):o.attachment?(this._bindAttachment(X,o.attachment),re=!0):o.setOCGState?(j(this,U,gn).call(this,X,o.setOCGState),re=!0):o.dest?(this._bindLink(X,o.dest),re=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(X,o),re=!0),o.resetForm?(this._bindResetFormAction(X,o.resetForm),re=!0):this.isTooltipOnly&&!re&&(this._bindLink(X,""),re=!0)),this.container.classList.add("linkAnnotation"),re&&this.container.append(X),this.container}_bindLink(o,B){o.href=this.linkService.getDestinationHash(B),o.onclick=()=>(B&&this.linkService.goToDestination(B),!1),(B||B==="")&&j(this,P,ht).call(this)}_bindNamedAction(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(B),!1),j(this,P,ht).call(this)}_bindAttachment(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>{var X;return(X=this.downloadManager)==null||X.openOrDownloadData(this.container,B.content,B.filename),!1},j(this,P,ht).call(this)}_bindJSAction(o,B){o.href=this.linkService.getAnchorUrl("");const X=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const re of Object.keys(B.actions)){const fe=X.get(re);fe&&(o[fe]=()=>{var Se;return(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B.id,name:re}}),!1})}o.onclick||(o.onclick=()=>!1),j(this,P,ht).call(this)}_bindResetFormAction(o,B){const X=o.onclick;if(X||(o.href=this.linkService.getAnchorUrl("")),j(this,P,ht).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),X||(o.onclick=()=>!1);return}o.onclick=()=>{var Qe;X==null||X();const{fields:re,refs:fe,include:Se}=B,Re=[];if(re.length!==0||fe.length!==0){const He=new Set(fe);for(const We of re){const ze=this._fieldObjects[We]||[];for(const{id:Ye}of ze)He.add(Ye)}for(const We of Object.values(this._fieldObjects))for(const ze of We)He.has(ze.id)===Se&&Re.push(ze)}else for(const He of Object.values(this._fieldObjects))Re.push(...He);const Ne=this.annotationStorage,Ie=[];for(const He of Re){const{id:We}=He;switch(Ie.push(We),He.type){case"text":{const Ye=He.defaultValue||"";Ne.setValue(We,{value:Ye});break}case"checkbox":case"radiobutton":{const Ye=He.defaultValue===He.exportValues;Ne.setValue(We,{value:Ye});break}case"combobox":case"listbox":{const Ye=He.defaultValue||"";Ne.setValue(We,{value:Ye});break}default:continue}const ze=document.querySelector(`[data-element-id="${We}"]`);if(ze){if(!D.has(ze)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${We}`);continue}}else continue;ze.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qe=this.linkService.eventBus)==null||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ie,name:"ResetForm"}})),!1}}}P=new WeakSet,ht=function(){this.container.setAttribute("data-internal-link","")},U=new WeakSet,gn=function(o,B){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(B),!1),j(this,P,ht).call(this)};class f extends u{constructor(Q){super(Q,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Q=document.createElement("img");return Q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Q.alt="[{{type}} Annotation]",Q.dataset.l10nId="text_annotation_type",Q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Q),this.container}}class C extends u{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Q){var o;this.data.hasOwnCanvas&&(((o=Q.previousSibling)==null?void 0:o.nodeName)==="CANVAS"&&(Q.previousSibling.hidden=!0),Q.hidden=!1)}_getKeyModifier(Q){const{isWin:o,isMac:B}=n.FeatureTest.platform;return o&&Q.ctrlKey||B&&Q.metaKey}_setEventListener(Q,o,B,X,re){B.includes("mouse")?Q.addEventListener(B,fe=>{var Se;(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:X,value:re(fe),shift:fe.shiftKey,modifier:this._getKeyModifier(fe)}})}):Q.addEventListener(B,fe=>{var Se;if(B==="blur"){if(!o.focused||!fe.relatedTarget)return;o.focused=!1}else if(B==="focus"){if(o.focused)return;o.focused=!0}re&&((Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:X,value:re(fe)}}))})}_setEventListeners(Q,o,B,X){var re,fe,Se;for(const[Re,Ne]of B)(Ne==="Action"||(re=this.data.actions)!=null&&re[Ne])&&((Ne==="Focus"||Ne==="Blur")&&(o||(o={focused:!1})),this._setEventListener(Q,o,Re,Ne,X),Ne==="Focus"&&!((fe=this.data.actions)!=null&&fe.Blur)?this._setEventListener(Q,o,"blur","Blur",null):Ne==="Blur"&&!((Se=this.data.actions)!=null&&Se.Focus)&&this._setEventListener(Q,o,"focus","Focus",null))}_setBackgroundColor(Q){const o=this.data.backgroundColor||null;Q.style.backgroundColor=o===null?"transparent":n.Util.makeHexColor(o[0],o[1],o[2])}_setTextStyle(Q){const o=["left","center","right"],{fontColor:B}=this.data.defaultAppearanceData,X=this.data.defaultAppearanceData.fontSize||r,re=Q.style;let fe;const Se=2,Re=Ne=>Math.round(10*Ne)/10;if(this.data.multiLine){const Ne=Math.abs(this.data.rect[3]-this.data.rect[1]-Se),Ie=Math.round(Ne/(n.LINE_FACTOR*X))||1,Qe=Ne/Ie;fe=Math.min(X,Re(Qe/n.LINE_FACTOR))}else{const Ne=Math.abs(this.data.rect[3]-this.data.rect[1]-Se);fe=Math.min(X,Re(Ne/n.LINE_FACTOR))}re.fontSize=`calc(${fe}px * var(--scale-factor))`,re.color=n.Util.makeHexColor(B[0],B[1],B[2]),this.data.textAlignment!==null&&(re.textAlign=o[this.data.textAlignment])}_setRequired(Q,o){o?Q.setAttribute("required",!0):Q.removeAttribute("required"),Q.setAttribute("aria-required",o)}}class w extends C{constructor(Q){const o=Q.renderForms||!Q.data.hasAppearance&&!!Q.data.fieldValue;super(Q,{isRenderable:o})}setPropertyOnSiblings(Q,o,B,X){const re=this.annotationStorage;for(const fe of this._getElementsByName(Q.name,Q.id))fe.domElement&&(fe.domElement[o]=B),re.setValue(fe.id,{[X]:B})}render(){var X,re;const Q=this.annotationStorage,o=this.data.id;this.container.classList.add("textWidgetAnnotation");let B=null;if(this.renderForms){const fe=Q.getValue(o,{value:this.data.fieldValue});let Se=fe.value||"";const Re=Q.getValue(o,{charLimit:this.data.maxLen}).charLimit;Re&&Se.length>Re&&(Se=Se.slice(0,Re));let Ne=fe.formattedValue||((X=this.data.textContent)==null?void 0:X.join(`
`))||null;Ne&&this.data.comb&&(Ne=Ne.replaceAll(/\s+/g,""));const Ie={userValue:Se,formattedValue:Ne,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(B=document.createElement("textarea"),B.textContent=Ne??Se,this.data.doNotScroll&&(B.style.overflowY="hidden")):(B=document.createElement("input"),B.type="text",B.setAttribute("value",Ne??Se),this.data.doNotScroll&&(B.style.overflowX="hidden")),this.data.hasOwnCanvas&&(B.hidden=!0),D.add(B),B.setAttribute("data-element-id",o),B.disabled=this.data.readOnly,B.name=this.data.fieldName,B.tabIndex=c,this._setRequired(B,this.data.required),Re&&(B.maxLength=Re),B.addEventListener("input",He=>{Q.setValue(o,{value:He.target.value}),this.setPropertyOnSiblings(B,"value",He.target.value,"value"),Ie.formattedValue=null}),B.addEventListener("resetform",He=>{const We=this.data.defaultFieldValue??"";B.value=Ie.userValue=We,Ie.formattedValue=null});let Qe=He=>{const{formattedValue:We}=Ie;We!=null&&(He.target.value=We),He.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){B.addEventListener("focus",We=>{if(Ie.focused)return;const{target:ze}=We;Ie.userValue&&(ze.value=Ie.userValue),Ie.lastCommittedValue=ze.value,Ie.commitKey=1,Ie.focused=!0}),B.addEventListener("updatefromsandbox",We=>{this.showElementAndHideCanvas(We.target);const ze={value(Ye){Ie.userValue=Ye.detail.value??"",Q.setValue(o,{value:Ie.userValue.toString()}),Ye.target.value=Ie.userValue},formattedValue(Ye){const{formattedValue:Je}=Ye.detail;Ie.formattedValue=Je,Je!=null&&Ye.target!==document.activeElement&&(Ye.target.value=Je),Q.setValue(o,{formattedValue:Je})},selRange(Ye){Ye.target.setSelectionRange(...Ye.detail.selRange)},charLimit:Ye=>{var it;const{charLimit:Je}=Ye.detail,{target:et}=Ye;if(Je===0){et.removeAttribute("maxLength");return}et.setAttribute("maxLength",Je);let nt=Ie.userValue;!nt||nt.length<=Je||(nt=nt.slice(0,Je),et.value=Ie.userValue=nt,Q.setValue(o,{value:nt}),(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:nt,willCommit:!0,commitKey:1,selStart:et.selectionStart,selEnd:et.selectionEnd}}))}};this._dispatchEventFromSandbox(ze,We)}),B.addEventListener("keydown",We=>{var Je;Ie.commitKey=1;let ze=-1;if(We.key==="Escape"?ze=0:We.key==="Enter"&&!this.data.multiLine?ze=2:We.key==="Tab"&&(Ie.commitKey=3),ze===-1)return;const{value:Ye}=We.target;Ie.lastCommittedValue!==Ye&&(Ie.lastCommittedValue=Ye,Ie.userValue=Ye,(Je=this.linkService.eventBus)==null||Je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Ye,willCommit:!0,commitKey:ze,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}}))});const He=Qe;Qe=null,B.addEventListener("blur",We=>{var Ye;if(!Ie.focused||!We.relatedTarget)return;Ie.focused=!1;const{value:ze}=We.target;Ie.userValue=ze,Ie.lastCommittedValue!==ze&&((Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:ze,willCommit:!0,commitKey:Ie.commitKey,selStart:We.target.selectionStart,selEnd:We.target.selectionEnd}})),He(We)}),(re=this.data.actions)!=null&&re.Keystroke&&B.addEventListener("beforeinput",We=>{var lt;Ie.lastCommittedValue=null;const{data:ze,target:Ye}=We,{value:Je,selectionStart:et,selectionEnd:nt}=Ye;let it=et,st=nt;switch(We.inputType){case"deleteWordBackward":{const ct=Je.substring(0,et).match(/\w*[^\w]*$/);ct&&(it-=ct[0].length);break}case"deleteWordForward":{const ct=Je.substring(et).match(/^[^\w]*\w*/);ct&&(st+=ct[0].length);break}case"deleteContentBackward":et===nt&&(it-=1);break;case"deleteContentForward":et===nt&&(st+=1);break}We.preventDefault(),(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Je,change:ze||"",willCommit:!1,selStart:it,selEnd:st}})}),this._setEventListeners(B,Ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],We=>We.target.value)}if(Qe&&B.addEventListener("blur",Qe),this.data.comb){const We=(this.data.rect[2]-this.data.rect[0])/Re;B.classList.add("comb"),B.style.letterSpacing=`calc(${We}px * var(--scale-factor) - 1ch)`}}else B=document.createElement("div"),B.textContent=this.data.fieldValue,B.style.verticalAlign="middle",B.style.display="table-cell";return this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class p extends C{constructor(Q){super(Q,{isRenderable:!!Q.data.hasOwnCanvas})}}class S extends C{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){const Q=this.annotationStorage,o=this.data,B=o.id;let X=Q.getValue(B,{value:o.exportValue===o.fieldValue}).value;typeof X=="string"&&(X=X!=="Off",Q.setValue(B,{value:X})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const re=document.createElement("input");return D.add(re),re.setAttribute("data-element-id",B),re.disabled=o.readOnly,this._setRequired(re,this.data.required),re.type="checkbox",re.name=o.fieldName,X&&re.setAttribute("checked",!0),re.setAttribute("exportValue",o.exportValue),re.tabIndex=c,re.addEventListener("change",fe=>{const{name:Se,checked:Re}=fe.target;for(const Ne of this._getElementsByName(Se,B)){const Ie=Re&&Ne.exportValue===o.exportValue;Ne.domElement&&(Ne.domElement.checked=Ie),Q.setValue(Ne.id,{value:Ie})}Q.setValue(B,{value:Re})}),re.addEventListener("resetform",fe=>{const Se=o.defaultFieldValue||"Off";fe.target.checked=Se===o.exportValue}),this.enableScripting&&this.hasJSActions&&(re.addEventListener("updatefromsandbox",fe=>{const Se={value(Re){Re.target.checked=Re.detail.value!=="Off",Q.setValue(B,{value:Re.target.checked})}};this._dispatchEventFromSandbox(Se,fe)}),this._setEventListeners(re,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)),this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class s extends C{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Q=this.annotationStorage,o=this.data,B=o.id;let X=Q.getValue(B,{value:o.fieldValue===o.buttonValue}).value;typeof X=="string"&&(X=X!==o.buttonValue,Q.setValue(B,{value:X}));const re=document.createElement("input");if(D.add(re),re.setAttribute("data-element-id",B),re.disabled=o.readOnly,this._setRequired(re,this.data.required),re.type="radio",re.name=o.fieldName,X&&re.setAttribute("checked",!0),re.tabIndex=c,re.addEventListener("change",fe=>{const{name:Se,checked:Re}=fe.target;for(const Ne of this._getElementsByName(Se,B))Q.setValue(Ne.id,{value:!1});Q.setValue(B,{value:Re})}),re.addEventListener("resetform",fe=>{const Se=o.defaultFieldValue;fe.target.checked=Se!=null&&Se===o.buttonValue}),this.enableScripting&&this.hasJSActions){const fe=o.buttonValue;re.addEventListener("updatefromsandbox",Se=>{const Re={value:Ne=>{const Ie=fe===Ne.detail.value;for(const Qe of this._getElementsByName(Ne.target.name)){const He=Ie&&Qe.id===B;Qe.domElement&&(Qe.domElement.checked=He),Q.setValue(Qe.id,{value:He})}}};this._dispatchEventFromSandbox(Re,Se)}),this._setEventListeners(re,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)}return this._setBackgroundColor(re),this._setDefaultPropertiesFromJS(re),this.container.append(re),this.container}}class i extends v{constructor(Q){super(Q,{ignoreBorder:Q.data.hasAppearance})}render(){const Q=super.render();Q.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Q.title=this.data.alternativeText);const o=Q.lastChild;return this.enableScripting&&this.hasJSActions&&o&&(this._setDefaultPropertiesFromJS(o),o.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({},B)})),Q}}class y extends C{constructor(Q){super(Q,{isRenderable:Q.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Q=this.annotationStorage,o=this.data.id,B=Q.getValue(o,{value:this.data.fieldValue}),X=document.createElement("select");D.add(X),X.setAttribute("data-element-id",o),X.disabled=this.data.readOnly,this._setRequired(X,this.data.required),X.name=this.data.fieldName,X.tabIndex=c;let re=this.data.combo&&this.data.options.length>0;this.data.combo||(X.size=this.data.options.length,this.data.multiSelect&&(X.multiple=!0)),X.addEventListener("resetform",Ie=>{const Qe=this.data.defaultFieldValue;for(const He of X.options)He.selected=He.value===Qe});for(const Ie of this.data.options){const Qe=document.createElement("option");Qe.textContent=Ie.displayValue,Qe.value=Ie.exportValue,B.value.includes(Ie.exportValue)&&(Qe.setAttribute("selected",!0),re=!1),X.append(Qe)}let fe=null;if(re){const Ie=document.createElement("option");Ie.value=" ",Ie.setAttribute("hidden",!0),Ie.setAttribute("selected",!0),X.prepend(Ie),fe=()=>{Ie.remove(),X.removeEventListener("input",fe),fe=null},X.addEventListener("input",fe)}const Se=Ie=>{const Qe=Ie?"value":"textContent",{options:He,multiple:We}=X;return We?Array.prototype.filter.call(He,ze=>ze.selected).map(ze=>ze[Qe]):He.selectedIndex===-1?null:He[He.selectedIndex][Qe]};let Re=Se(!1);const Ne=Ie=>{const Qe=Ie.target.options;return Array.prototype.map.call(Qe,He=>({displayValue:He.textContent,exportValue:He.value}))};return this.enableScripting&&this.hasJSActions?(X.addEventListener("updatefromsandbox",Ie=>{const Qe={value(He){fe==null||fe();const We=He.detail.value,ze=new Set(Array.isArray(We)?We:[We]);for(const Ye of X.options)Ye.selected=ze.has(Ye.value);Q.setValue(o,{value:Se(!0)}),Re=Se(!1)},multipleSelection(He){X.multiple=!0},remove(He){const We=X.options,ze=He.detail.remove;We[ze].selected=!1,X.remove(ze),We.length>0&&Array.prototype.findIndex.call(We,Je=>Je.selected)===-1&&(We[0].selected=!0),Q.setValue(o,{value:Se(!0),items:Ne(He)}),Re=Se(!1)},clear(He){for(;X.length!==0;)X.remove(0);Q.setValue(o,{value:null,items:[]}),Re=Se(!1)},insert(He){const{index:We,displayValue:ze,exportValue:Ye}=He.detail.insert,Je=X.children[We],et=document.createElement("option");et.textContent=ze,et.value=Ye,Je?Je.before(et):X.append(et),Q.setValue(o,{value:Se(!0),items:Ne(He)}),Re=Se(!1)},items(He){const{items:We}=He.detail;for(;X.length!==0;)X.remove(0);for(const ze of We){const{displayValue:Ye,exportValue:Je}=ze,et=document.createElement("option");et.textContent=Ye,et.value=Je,X.append(et)}X.options.length>0&&(X.options[0].selected=!0),Q.setValue(o,{value:Se(!0),items:Ne(He)}),Re=Se(!1)},indices(He){const We=new Set(He.detail.indices);for(const ze of He.target.options)ze.selected=We.has(ze.index);Q.setValue(o,{value:Se(!0)}),Re=Se(!1)},editable(He){He.target.disabled=!He.detail.editable}};this._dispatchEventFromSandbox(Qe,Ie)}),X.addEventListener("input",Ie=>{var He;const Qe=Se(!0);Q.setValue(o,{value:Qe}),Ie.preventDefault(),(He=this.linkService.eventBus)==null||He.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:Re,changeEx:Qe,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(X,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ie=>Ie.target.value)):X.addEventListener("input",function(Ie){Q.setValue(o,{value:Se(!0)})}),this.data.combo&&this._setTextStyle(X),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class m extends u{constructor(Q){const{data:o,elements:B}=Q;super(Q,{isRenderable:u._hasPopupData(o)}),this.elements=B}render(){this.container.classList.add("popupAnnotation");const Q=new h({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),o=[];for(const B of this.elements)B.popup=Q,o.push(B.data.id),B.addHighlightArea();return this.container.setAttribute("aria-controls",o.map(B=>`${n.AnnotationPrefix}${B}`).join(",")),this.container}}class h{constructor({container:Q,color:o,elements:B,titleObj:X,modificationDate:re,contentsObj:fe,richText:Se,parent:Re,rect:Ne,parentRect:Ie,open:Qe}){I(this,Be);I(this,$e);I(this,Ke);I(this,Ze);I(this,ne,null);I(this,_e,j(this,Be,mn).bind(this));I(this,pe,j(this,Ze,bi).bind(this));I(this,Pe,j(this,Ke,vi).bind(this));I(this,se,j(this,$e,Ot).bind(this));I(this,be,null);I(this,ge,null);I(this,Fe,null);I(this,De,null);I(this,xe,null);I(this,de,null);I(this,oe,!1);I(this,te,null);I(this,ee,null);I(this,me,null);I(this,Te,null);I(this,Le,!1);var We;Z(this,ge,Q),Z(this,Te,X),Z(this,Fe,fe),Z(this,me,Se),Z(this,xe,Re),Z(this,be,o),Z(this,ee,Ne),Z(this,de,Ie),Z(this,De,B);const He=g.PDFDateString.toDateObject(re);He&&Z(this,ne,Re.l10n.get("annotation_date_string",{date:He.toLocaleDateString(),time:He.toLocaleTimeString()})),this.trigger=B.flatMap(ze=>ze.getElementsToTriggerPopup());for(const ze of this.trigger)ze.addEventListener("click",e(this,se)),ze.addEventListener("mouseenter",e(this,Pe)),ze.addEventListener("mouseleave",e(this,pe)),ze.classList.add("popupTriggerArea");for(const ze of B)(We=ze.container)==null||We.addEventListener("keydown",e(this,_e));e(this,ge).hidden=!0,Qe&&j(this,$e,Ot).call(this)}render(){if(e(this,te))return;const{page:{view:Q},viewport:{rawDims:{pageWidth:o,pageHeight:B,pageX:X,pageY:re}}}=e(this,xe),fe=Z(this,te,document.createElement("div"));if(fe.className="popup",e(this,be)){const it=fe.style.outlineColor=n.Util.makeHexColor(...e(this,be));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?fe.style.backgroundColor=`color-mix(in srgb, ${it} 30%, white)`:fe.style.backgroundColor=n.Util.makeHexColor(...e(this,be).map(lt=>Math.floor(.7*(255-lt)+lt)))}const Se=document.createElement("span");Se.className="header";const Re=document.createElement("h1");if(Se.append(Re),{dir:Re.dir,str:Re.textContent}=e(this,Te),fe.append(Se),e(this,ne)){const it=document.createElement("span");it.classList.add("popupDate"),e(this,ne).then(st=>{it.textContent=st}),Se.append(it)}const Ne=e(this,Fe),Ie=e(this,me);if(Ie!=null&&Ie.str&&(!(Ne!=null&&Ne.str)||Ne.str===Ie.str))T.XfaLayer.render({xfaHtml:Ie.html,intent:"richText",div:fe}),fe.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents(Ne);fe.append(it)}let Qe=!!e(this,de),He=Qe?e(this,de):e(this,ee);for(const it of e(this,De))if(!He||n.Util.intersect(it.data.rect,He)!==null){He=it.data.rect,Qe=!0;break}const We=n.Util.normalizeRect([He[0],Q[3]-He[1]+Q[1],He[2],Q[3]-He[3]+Q[1]]),Ye=Qe?He[2]-He[0]+5:0,Je=We[0]+Ye,et=We[1],{style:nt}=e(this,ge);nt.left=`${100*(Je-X)/o}%`,nt.top=`${100*(et-re)/B}%`,e(this,ge).append(fe)}_formatContents({str:Q,dir:o}){const B=document.createElement("p");B.classList.add("popupContent"),B.dir=o;const X=Q.split(/(?:\r\n?|\n)/);for(let re=0,fe=X.length;re<fe;++re){const Se=X[re];B.append(document.createTextNode(Se)),re<fe-1&&B.append(document.createElement("br"))}return B}forceHide(){Z(this,Le,this.isVisible),e(this,Le)&&(e(this,ge).hidden=!0)}maybeShow(){e(this,Le)&&(Z(this,Le,!1),e(this,ge).hidden=!1)}get isVisible(){return e(this,ge).hidden===!1}}ne=new WeakMap,_e=new WeakMap,pe=new WeakMap,Pe=new WeakMap,se=new WeakMap,be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,De=new WeakMap,xe=new WeakMap,de=new WeakMap,oe=new WeakMap,te=new WeakMap,ee=new WeakMap,me=new WeakMap,Te=new WeakMap,Le=new WeakMap,Be=new WeakSet,mn=function(Q){Q.altKey||Q.shiftKey||Q.ctrlKey||Q.metaKey||(Q.key==="Enter"||Q.key==="Escape"&&e(this,oe))&&j(this,$e,Ot).call(this)},$e=new WeakSet,Ot=function(){Z(this,oe,!e(this,oe)),e(this,oe)?(j(this,Ke,vi).call(this),e(this,ge).addEventListener("click",e(this,se)),e(this,ge).addEventListener("keydown",e(this,_e))):(j(this,Ze,bi).call(this),e(this,ge).removeEventListener("click",e(this,se)),e(this,ge).removeEventListener("keydown",e(this,_e)))},Ke=new WeakSet,vi=function(){e(this,te)||this.render(),this.isVisible?e(this,oe)&&e(this,ge).classList.add("focused"):(e(this,ge).hidden=!1,e(this,ge).style.zIndex=parseInt(e(this,ge).style.zIndex)+1e3)},Ze=new WeakSet,bi=function(){e(this,ge).classList.remove("focused"),!(e(this,oe)||!this.isVisible)&&(e(this,ge).hidden=!0,e(this,ge).style.zIndex=parseInt(e(this,ge).style.zIndex)-1e3)};class F extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Q.data.textContent,this.textPosition=Q.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Q=document.createElement("div");Q.classList.add("annotationTextContent"),Q.setAttribute("role","comment");for(const o of this.textContent){const B=document.createElement("span");B.textContent=o,Q.append(B)}this.container.append(Q)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=F;class A extends u{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});I(this,_,null)}render(){this.container.classList.add("lineAnnotation");const o=this.data,{width:B,height:X}=M(o.rect),re=this.svgFactory.create(B,X,!0),fe=Z(this,_,this.svgFactory.createElement("svg:line"));return fe.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),fe.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),fe.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),fe.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),fe.setAttribute("stroke-width",o.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),re.append(fe),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,_)}addHighlightArea(){this.container.classList.add("highlightArea")}}_=new WeakMap;class G extends u{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});I(this,k,null)}render(){this.container.classList.add("squareAnnotation");const o=this.data,{width:B,height:X}=M(o.rect),re=this.svgFactory.create(B,X,!0),fe=o.borderStyle.width,Se=Z(this,k,this.svgFactory.createElement("svg:rect"));return Se.setAttribute("x",fe/2),Se.setAttribute("y",fe/2),Se.setAttribute("width",B-fe),Se.setAttribute("height",X-fe),Se.setAttribute("stroke-width",fe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),re.append(Se),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,k)}addHighlightArea(){this.container.classList.add("highlightArea")}}k=new WeakMap;class ie extends u{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});I(this,he,null)}render(){this.container.classList.add("circleAnnotation");const o=this.data,{width:B,height:X}=M(o.rect),re=this.svgFactory.create(B,X,!0),fe=o.borderStyle.width,Se=Z(this,he,this.svgFactory.createElement("svg:ellipse"));return Se.setAttribute("cx",B/2),Se.setAttribute("cy",X/2),Se.setAttribute("rx",B/2-fe/2),Se.setAttribute("ry",X/2-fe/2),Se.setAttribute("stroke-width",fe||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),re.append(Se),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,he)}addHighlightArea(){this.container.classList.add("highlightArea")}}he=new WeakMap;class E extends u{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});I(this,ae,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:B,height:X}=M(o.rect),re=this.svgFactory.create(B,X,!0);let fe=[];for(const Re of o.vertices){const Ne=Re.x-o.rect[0],Ie=o.rect[3]-Re.y;fe.push(Ne+","+Ie)}fe=fe.join(" ");const Se=Z(this,ae,this.svgFactory.createElement(this.svgElementName));return Se.setAttribute("points",fe),Se.setAttribute("stroke-width",o.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),re.append(Se),this.container.append(re),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,ae)}addHighlightArea(){this.container.classList.add("highlightArea")}}ae=new WeakMap;class q extends E{constructor(Q){super(Q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Y extends u{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0});I(this,ue,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:B,height:X}=M(o.rect),re=this.svgFactory.create(B,X,!0);for(const fe of o.inkLists){let Se=[];for(const Ne of fe){const Ie=Ne.x-o.rect[0],Qe=o.rect[3]-Ne.y;Se.push(`${Ie},${Qe}`)}Se=Se.join(" ");const Re=this.svgFactory.createElement(this.svgElementName);e(this,ue).push(Re),Re.setAttribute("points",Se),Re.setAttribute("stroke-width",o.borderStyle.width||1),Re.setAttribute("stroke","transparent"),Re.setAttribute("fill","transparent"),!o.popupRef&&this.hasPopupData&&this._createPopup(),re.append(Re)}return this.container.append(re),this.container}getElementsToTriggerPopup(){return e(this,ue)}addHighlightArea(){this.container.classList.add("highlightArea")}}ue=new WeakMap,t.InkAnnotationElement=Y;class H extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class le extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $ extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ee extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class we extends u{constructor(Q){super(Q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=we;class N extends u{constructor(o){var re;super(o,{isRenderable:!0});I(this,W);I(this,ve,null);const{filename:B,content:X}=this.data.file;this.filename=(0,g.getFilenameFromUrl)(B,!0),this.content=X,(re=this.linkService.eventBus)==null||re.dispatch("fileattachmentannotation",{source:this,filename:B,content:X})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:o,data:B}=this;let X;B.hasAppearance||B.fillAlpha===0?X=document.createElement("div"):(X=document.createElement("img"),X.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(B.name)?"paperclip":"pushpin"}.svg`,B.fillAlpha&&B.fillAlpha<1&&(X.style=`filter: opacity(${Math.round(B.fillAlpha*100)}%);`)),X.addEventListener("dblclick",j(this,W,Si).bind(this)),Z(this,ve,X);const{isMac:re}=n.FeatureTest.platform;return o.addEventListener("keydown",fe=>{fe.key==="Enter"&&(re?fe.metaKey:fe.ctrlKey)&&j(this,W,Si).call(this)}),!B.popupRef&&this.hasPopupData?this._createPopup():X.classList.add("popupTriggerArea"),o.append(X),o}getElementsToTriggerPopup(){return e(this,ve)}addHighlightArea(){this.container.classList.add("highlightArea")}}ve=new WeakMap,W=new WeakSet,Si=function(){var o;(o=this.downloadManager)==null||o.openOrDownloadData(this.container,this.content,this.filename)};class a{constructor({div:Q,accessibilityManager:o,annotationCanvasMap:B,l10n:X,page:re,viewport:fe}){I(this,Oe);I(this,Ce);I(this,Me,null);I(this,Ae,null);I(this,ke,new Map);this.div=Q,Z(this,Me,o),Z(this,Ae,B),this.l10n=X,this.page=re,this.viewport=fe,this.zIndex=0,this.l10n||(this.l10n=R.NullL10n)}async render(Q){const{annotations:o}=Q,B=this.div;(0,g.setLayerDimensions)(B,this.viewport);const X=new Map,re={data:null,layer:B,linkService:Q.linkService,downloadManager:Q.downloadManager,imageResourcesPath:Q.imageResourcesPath||"",renderForms:Q.renderForms!==!1,svgFactory:new g.DOMSVGFactory,annotationStorage:Q.annotationStorage||new V.AnnotationStorage,enableScripting:Q.enableScripting===!0,hasJSActions:Q.hasJSActions,fieldObjects:Q.fieldObjects,parent:this,elements:null};for(const fe of o){if(fe.noHTML)continue;const Se=fe.annotationType===n.AnnotationType.POPUP;if(Se){const Ie=X.get(fe.id);if(!Ie)continue;re.elements=Ie}else{const{width:Ie,height:Qe}=M(fe.rect);if(Ie<=0||Qe<=0)continue}re.data=fe;const Re=b.create(re);if(!Re.isRenderable)continue;if(!Se&&fe.popupRef){const Ie=X.get(fe.popupRef);Ie?Ie.push(Re):X.set(fe.popupRef,[Re])}Re.annotationEditorType>0&&e(this,ke).set(Re.data.id,Re);const Ne=Re.render();fe.hidden&&(Ne.style.visibility="hidden"),j(this,Oe,_n).call(this,Ne,fe.id)}j(this,Ce,yi).call(this),await this.l10n.translate(B)}update({viewport:Q}){const o=this.div;this.viewport=Q,(0,g.setLayerDimensions)(o,{rotation:Q.rotation}),j(this,Ce,yi).call(this),o.hidden=!1}getEditableAnnotations(){return Array.from(e(this,ke).values())}getEditableAnnotation(Q){return e(this,ke).get(Q)}}Me=new WeakMap,Ae=new WeakMap,ke=new WeakMap,Oe=new WeakSet,_n=function(Q,o){var X;const B=Q.firstChild||Q;B.id=`${n.AnnotationPrefix}${o}`,this.div.append(Q),(X=e(this,Me))==null||X.moveElementInDOM(this.div,Q,B,!1)},Ce=new WeakSet,yi=function(){if(!e(this,Ae))return;const Q=this.div;for(const[o,B]of e(this,Ae)){const X=Q.querySelector(`[data-annotation-id="${o}"]`);if(!X)continue;const{firstChild:re}=X;re?re.nodeName==="CANVAS"?re.replaceWith(B):re.before(B):X.append(B)}e(this,Ae).clear()},t.AnnotationLayer=a},(z,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function L(V){return Math.floor(Math.max(0,Math.min(1,V))*255).toString(16).padStart(2,"0")}function n(V){return Math.max(0,Math.min(255,255*V))}class g{static CMYK_G([O,R,T,c]){return["G",1-Math.min(1,.3*O+.59*T+.11*R+c)]}static G_CMYK([O]){return["CMYK",0,0,0,1-O]}static G_RGB([O]){return["RGB",O,O,O]}static G_rgb([O]){return O=n(O),[O,O,O]}static G_HTML([O]){const R=L(O);return`#${R}${R}${R}`}static RGB_G([O,R,T]){return["G",.3*O+.59*R+.11*T]}static RGB_rgb(O){return O.map(n)}static RGB_HTML(O){return`#${O.map(L).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([O,R,T,c]){return["RGB",1-Math.min(1,O+c),1-Math.min(1,T+c),1-Math.min(1,R+c)]}static CMYK_rgb([O,R,T,c]){return[n(1-Math.min(1,O+c)),n(1-Math.min(1,T+c)),n(1-Math.min(1,R+c))]}static CMYK_HTML(O){const R=this.CMYK_RGB(O).slice(1);return this.RGB_HTML(R)}static RGB_CMYK([O,R,T]){const c=1-O,r=1-R,D=1-T,M=Math.min(c,r,D);return["CMYK",c,r,D,M]}}t.ColorConverters=g},(z,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const L={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};L.print_progress_percent="{{progress}}%";function n(O,R){switch(O){case"find_match_count":O=`find_match_count[${R.total===1?"one":"other"}]`;break;case"find_match_count_limit":O=`find_match_count_limit[${R.limit===1?"one":"other"}]`;break}return L[O]||""}function g(O,R){return R?O.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(T,c)=>c in R?R[c]:"{{"+c+"}}"):O}const V={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(O,R=null,T=n(O,R)){return g(T,R)},async translate(O){}};t.NullL10n=V},(z,t,L)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=L(25);class g{static setupStorage(O,R,T,c,r){const D=c.getValue(R,{value:null});switch(T.name){case"textarea":if(D.value!==null&&(O.textContent=D.value),r==="print")break;O.addEventListener("input",M=>{c.setValue(R,{value:M.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(D.value===T.attributes.xfaOn?O.setAttribute("checked",!0):D.value===T.attributes.xfaOff&&O.removeAttribute("checked"),r==="print")break;O.addEventListener("change",M=>{c.setValue(R,{value:M.target.checked?M.target.getAttribute("xfaOn"):M.target.getAttribute("xfaOff")})})}else{if(D.value!==null&&O.setAttribute("value",D.value),r==="print")break;O.addEventListener("input",M=>{c.setValue(R,{value:M.target.value})})}break;case"select":if(D.value!==null){O.setAttribute("value",D.value);for(const M of T.children)M.attributes.value===D.value?M.attributes.selected=!0:M.attributes.hasOwnProperty("selected")&&delete M.attributes.selected}O.addEventListener("input",M=>{const b=M.target.options,u=b.selectedIndex===-1?"":b[b.selectedIndex].value;c.setValue(R,{value:u})});break}}static setAttributes({html:O,element:R,storage:T=null,intent:c,linkService:r}){const{attributes:D}=R,M=O instanceof HTMLAnchorElement;D.type==="radio"&&(D.name=`${D.name}-${c}`);for(const[b,u]of Object.entries(D))if(u!=null)switch(b){case"class":u.length&&O.setAttribute(b,u.join(" "));break;case"dataId":break;case"id":O.setAttribute("data-element-id",u);break;case"style":Object.assign(O.style,u);break;case"textContent":O.textContent=u;break;default:(!M||b!=="href"&&b!=="newWindow")&&O.setAttribute(b,u)}M&&r.addLinkAttributes(O,D.href,D.newWindow),T&&D.dataId&&this.setupStorage(O,D.dataId,R,T)}static render(O){var v;const R=O.annotationStorage,T=O.linkService,c=O.xfaHtml,r=O.intent||"display",D=document.createElement(c.name);c.attributes&&this.setAttributes({html:D,element:c,intent:r,linkService:T});const M=[[c,-1,D]],b=O.div;if(b.append(D),O.viewport){const f=`matrix(${O.viewport.transform.join(",")})`;b.style.transform=f}r!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const u=[];for(;M.length>0;){const[f,C,w]=M.at(-1);if(C+1===f.children.length){M.pop();continue}const p=f.children[++M.at(-1)[1]];if(p===null)continue;const{name:S}=p;if(S==="#text"){const i=document.createTextNode(p.value);u.push(i),w.append(i);continue}const s=(v=p==null?void 0:p.attributes)!=null&&v.xmlns?document.createElementNS(p.attributes.xmlns,S):document.createElement(S);if(w.append(s),p.attributes&&this.setAttributes({html:s,element:p,storage:R,intent:r,linkService:T}),p.children&&p.children.length>0)M.push([p,-1,s]);else if(p.value){const i=document.createTextNode(p.value);n.XfaText.shouldBuildText(S)&&u.push(i),s.append(i)}}for(const f of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(O){const R=`matrix(${O.viewport.transform.join(",")})`;O.div.style.transform=R,O.div.hidden=!1}}t.XfaLayer=g},(z,t,L)=>{var c,r,D,M,b,u,v,f,C,w,p,S,s,i,y,vn,h,bn,A,Sn,ie,yn,q,Pi,Y,Pn,le,Ai,Ee,An,N,En,d,wn,P,Cn,U,Tn,ne,at,pe,Ei,se,Nt,ge,Bt,De,gt,de,wi,te,Vt,me,Mn,Le,Ci,Ue,xn,Ge,Fn,Xe,Ti,ye,Ut,k,mt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=L(1),g=L(4),V=L(29),O=L(6),R=L(5);const ae=class ae extends g.AnnotationEditor{constructor(W){super({...W,name:"inkEditor"});I(this,y);I(this,h);I(this,A);I(this,ie);I(this,q);I(this,Y);I(this,le);I(this,Ee);I(this,N);I(this,d);I(this,P);I(this,U);I(this,ne);I(this,pe);I(this,se);I(this,ge);I(this,De);I(this,de);I(this,te);I(this,Ge);I(this,Xe);I(this,ye);I(this,k);I(this,c,0);I(this,r,0);I(this,D,this.canvasPointermove.bind(this));I(this,M,this.canvasPointerleave.bind(this));I(this,b,this.canvasPointerup.bind(this));I(this,u,this.canvasPointerdown.bind(this));I(this,v,new Path2D);I(this,f,!1);I(this,C,!1);I(this,w,!1);I(this,p,null);I(this,S,0);I(this,s,0);I(this,i,null);this.color=W.color||null,this.thickness=W.thickness||null,this.opacity=W.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(W){g.AnnotationEditor.initialize(W,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(W,ce){switch(W){case n.AnnotationEditorParamsType.INK_THICKNESS:ae._defaultThickness=ce;break;case n.AnnotationEditorParamsType.INK_COLOR:ae._defaultColor=ce;break;case n.AnnotationEditorParamsType.INK_OPACITY:ae._defaultOpacity=ce/100;break}}updateParams(W,ce){switch(W){case n.AnnotationEditorParamsType.INK_THICKNESS:j(this,y,vn).call(this,ce);break;case n.AnnotationEditorParamsType.INK_COLOR:j(this,h,bn).call(this,ce);break;case n.AnnotationEditorParamsType.INK_OPACITY:j(this,A,Sn).call(this,ce);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ae._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ae._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ae._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ae._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ae._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(j(this,se,Nt).call(this),j(this,ge,Bt).call(this)),this.isAttachedToDOM||(this.parent.add(this),j(this,De,gt).call(this)),j(this,k,mt).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,p).disconnect(),Z(this,p,null),super.remove())}setParent(W){!this.parent&&W?this._uiManager.removeShouldRescale(this):this.parent&&W===null&&this._uiManager.addShouldRescale(this),super.setParent(W)}onScaleChanging(){const[W,ce]=this.parentDimensions,Me=this.width*W,Ae=this.height*ce;this.setDimensions(Me,Ae)}enableEditMode(){e(this,f)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,u)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,u)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Z(this,f,!0),this.div.classList.add("disabled"),j(this,k,mt).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(W){this._focusEventsAllowed&&(super.focusin(W),this.enableEditMode())}canvasPointerdown(W){W.button!==0||!this.isInEditMode()||e(this,f)||(this.setInForeground(),W.preventDefault(),W.type!=="mouse"&&this.div.focus(),j(this,Y,Pn).call(this,W.offsetX,W.offsetY))}canvasPointermove(W){W.preventDefault(),j(this,le,Ai).call(this,W.offsetX,W.offsetY)}canvasPointerup(W){W.preventDefault(),j(this,pe,Ei).call(this,W)}canvasPointerleave(W){j(this,pe,Ei).call(this,W)}get isResizable(){return!this.isEmpty()&&e(this,f)}render(){if(this.div)return this.div;let W,ce;this.width&&(W=this.x,ce=this.y),super.render(),g.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(je=>{var Ce;return(Ce=this.div)==null?void 0:Ce.setAttribute("aria-label",je)});const[Me,Ae,ke,Oe]=j(this,ie,yn).call(this);if(this.setAt(Me,Ae,0,0),this.setDims(ke,Oe),j(this,se,Nt).call(this),this.width){const[je,Ce]=this.parentDimensions;this.setAspectRatio(this.width*je,this.height*Ce),this.setAt(W*je,ce*Ce,this.width*je,this.height*Ce),Z(this,w,!0),j(this,De,gt).call(this),this.setDims(this.width*je,this.height*Ce),j(this,ne,at).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return j(this,ge,Bt).call(this),this.div}setDimensions(W,ce){const Me=Math.round(W),Ae=Math.round(ce);if(e(this,S)===Me&&e(this,s)===Ae)return;Z(this,S,Me),Z(this,s,Ae),this.canvas.style.visibility="hidden";const[ke,Oe]=this.parentDimensions;this.width=W/ke,this.height=ce/Oe,this.fixAndSetPosition(),e(this,f)&&j(this,de,wi).call(this,W,ce),j(this,De,gt).call(this),j(this,ne,at).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(W,ce,Me){var re,fe,Se;if(W instanceof V.InkAnnotationElement)return null;const Ae=super.deserialize(W,ce,Me);Ae.thickness=W.thickness,Ae.color=n.Util.makeHexColor(...W.color),Ae.opacity=W.opacity;const[ke,Oe]=Ae.pageDimensions,je=Ae.width*ke,Ce=Ae.height*Oe,qe=Ae.parentScale,Ve=W.thickness/2;Z(Ae,f,!0),Z(Ae,S,Math.round(je)),Z(Ae,s,Math.round(Ce));const{paths:Q,rect:o,rotation:B}=W;for(let{bezier:Re}of Q){Re=j(re=ae,Ue,xn).call(re,Re,o,B);const Ne=[];Ae.paths.push(Ne);let Ie=qe*(Re[0]-Ve),Qe=qe*(Re[1]-Ve);for(let We=2,ze=Re.length;We<ze;We+=6){const Ye=qe*(Re[We]-Ve),Je=qe*(Re[We+1]-Ve),et=qe*(Re[We+2]-Ve),nt=qe*(Re[We+3]-Ve),it=qe*(Re[We+4]-Ve),st=qe*(Re[We+5]-Ve);Ne.push([[Ie,Qe],[Ye,Je],[et,nt],[it,st]]),Ie=it,Qe=st}const He=j(this,me,Mn).call(this,Ne);Ae.bezierPath2D.push(He)}const X=j(fe=Ae,Xe,Ti).call(fe);return Z(Ae,r,Math.max(g.AnnotationEditor.MIN_SIZE,X[2]-X[0])),Z(Ae,c,Math.max(g.AnnotationEditor.MIN_SIZE,X[3]-X[1])),j(Se=Ae,de,wi).call(Se,je,Ce),Ae}serialize(){if(this.isEmpty())return null;const W=this.getRect(0,0),ce=g.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ce,thickness:this.thickness,opacity:this.opacity,paths:j(this,Ge,Fn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,W),pageIndex:this.pageIndex,rect:W,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};c=new WeakMap,r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakMap,w=new WeakMap,p=new WeakMap,S=new WeakMap,s=new WeakMap,i=new WeakMap,y=new WeakSet,vn=function(W){const ce=this.thickness;this.addCommands({cmd:()=>{this.thickness=W,j(this,k,mt).call(this)},undo:()=>{this.thickness=ce,j(this,k,mt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,bn=function(W){const ce=this.color;this.addCommands({cmd:()=>{this.color=W,j(this,ne,at).call(this)},undo:()=>{this.color=ce,j(this,ne,at).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A=new WeakSet,Sn=function(W){W/=100;const ce=this.opacity;this.addCommands({cmd:()=>{this.opacity=W,j(this,ne,at).call(this)},undo:()=>{this.opacity=ce,j(this,ne,at).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ie=new WeakSet,yn=function(){const{parentRotation:W,parentDimensions:[ce,Me]}=this;switch(W){case 90:return[0,Me,Me,ce];case 180:return[ce,Me,ce,Me];case 270:return[ce,0,Me,ce];default:return[0,0,ce,Me]}},q=new WeakSet,Pi=function(){const{ctx:W,color:ce,opacity:Me,thickness:Ae,parentScale:ke,scaleFactor:Oe}=this;W.lineWidth=Ae*ke/Oe,W.lineCap="round",W.lineJoin="round",W.miterLimit=10,W.strokeStyle=`${ce}${(0,R.opacityToHex)(Me)}`},Y=new WeakSet,Pn=function(W,ce){this.canvas.addEventListener("contextmenu",O.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,M)),this.canvas.addEventListener("pointermove",e(this,D)),this.canvas.addEventListener("pointerup",e(this,b)),this.canvas.removeEventListener("pointerdown",e(this,u)),this.isEditing=!0,e(this,w)||(Z(this,w,!0),j(this,De,gt).call(this),this.thickness||(this.thickness=ae._defaultThickness),this.color||(this.color=ae._defaultColor||g.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ae._defaultOpacity)),this.currentPath.push([W,ce]),Z(this,C,!1),j(this,q,Pi).call(this),Z(this,i,()=>{j(this,d,wn).call(this),e(this,i)&&window.requestAnimationFrame(e(this,i))}),window.requestAnimationFrame(e(this,i))},le=new WeakSet,Ai=function(W,ce){const[Me,Ae]=this.currentPath.at(-1);if(this.currentPath.length>1&&W===Me&&ce===Ae)return;const ke=this.currentPath;let Oe=e(this,v);if(ke.push([W,ce]),Z(this,C,!0),ke.length<=2){Oe.moveTo(...ke[0]),Oe.lineTo(W,ce);return}ke.length===3&&(Z(this,v,Oe=new Path2D),Oe.moveTo(...ke[0])),j(this,P,Cn).call(this,Oe,...ke.at(-3),...ke.at(-2),W,ce)},Ee=new WeakSet,An=function(){if(this.currentPath.length===0)return;const W=this.currentPath.at(-1);e(this,v).lineTo(...W)},N=new WeakSet,En=function(W,ce){Z(this,i,null),W=Math.min(Math.max(W,0),this.canvas.width),ce=Math.min(Math.max(ce,0),this.canvas.height),j(this,le,Ai).call(this,W,ce),j(this,Ee,An).call(this);let Me;if(this.currentPath.length!==1)Me=j(this,U,Tn).call(this);else{const Ce=[W,ce];Me=[[Ce,Ce.slice(),Ce.slice(),Ce]]}const Ae=e(this,v),ke=this.currentPath;this.currentPath=[],Z(this,v,new Path2D);const Oe=()=>{this.allRawPaths.push(ke),this.paths.push(Me),this.bezierPath2D.push(Ae),this.rebuild()},je=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(j(this,se,Nt).call(this),j(this,ge,Bt).call(this)),j(this,k,mt).call(this))};this.addCommands({cmd:Oe,undo:je,mustExec:!0})},d=new WeakSet,wn=function(){if(!e(this,C))return;Z(this,C,!1);const W=Math.ceil(this.thickness*this.parentScale),ce=this.currentPath.slice(-3),Me=ce.map(Oe=>Oe[0]),Ae=ce.map(Oe=>Oe[1]);Math.min(...Me)-W,Math.max(...Me)+W,Math.min(...Ae)-W,Math.max(...Ae)+W;const{ctx:ke}=this;ke.save(),ke.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Oe of this.bezierPath2D)ke.stroke(Oe);ke.stroke(e(this,v)),ke.restore()},P=new WeakSet,Cn=function(W,ce,Me,Ae,ke,Oe,je){const Ce=(ce+Ae)/2,qe=(Me+ke)/2,Ve=(Ae+Oe)/2,Q=(ke+je)/2;W.bezierCurveTo(Ce+2*(Ae-Ce)/3,qe+2*(ke-qe)/3,Ve+2*(Ae-Ve)/3,Q+2*(ke-Q)/3,Ve,Q)},U=new WeakSet,Tn=function(){const W=this.currentPath;if(W.length<=2)return[[W[0],W[0],W.at(-1),W.at(-1)]];const ce=[];let Me,[Ae,ke]=W[0];for(Me=1;Me<W.length-2;Me++){const[o,B]=W[Me],[X,re]=W[Me+1],fe=(o+X)/2,Se=(B+re)/2,Re=[Ae+2*(o-Ae)/3,ke+2*(B-ke)/3],Ne=[fe+2*(o-fe)/3,Se+2*(B-Se)/3];ce.push([[Ae,ke],Re,Ne,[fe,Se]]),[Ae,ke]=[fe,Se]}const[Oe,je]=W[Me],[Ce,qe]=W[Me+1],Ve=[Ae+2*(Oe-Ae)/3,ke+2*(je-ke)/3],Q=[Ce+2*(Oe-Ce)/3,qe+2*(je-qe)/3];return ce.push([[Ae,ke],Ve,Q,[Ce,qe]]),ce},ne=new WeakSet,at=function(){if(this.isEmpty()){j(this,te,Vt).call(this);return}j(this,q,Pi).call(this);const{canvas:W,ctx:ce}=this;ce.setTransform(1,0,0,1,0,0),ce.clearRect(0,0,W.width,W.height),j(this,te,Vt).call(this);for(const Me of this.bezierPath2D)ce.stroke(Me)},pe=new WeakSet,Ei=function(W){this.canvas.removeEventListener("pointerleave",e(this,M)),this.canvas.removeEventListener("pointermove",e(this,D)),this.canvas.removeEventListener("pointerup",e(this,b)),this.canvas.addEventListener("pointerdown",e(this,u)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",O.noContextMenu)},10),j(this,N,En).call(this,W.offsetX,W.offsetY),this.addToAnnotationStorage(),this.setInBackground()},se=new WeakSet,Nt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",g.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(W=>{var ce;return(ce=this.canvas)==null?void 0:ce.setAttribute("aria-label",W)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ge=new WeakSet,Bt=function(){Z(this,p,new ResizeObserver(W=>{const ce=W[0].contentRect;ce.width&&ce.height&&this.setDimensions(ce.width,ce.height)})),e(this,p).observe(this.div)},De=new WeakSet,gt=function(){if(!e(this,w))return;const[W,ce]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*W),this.canvas.height=Math.ceil(this.height*ce),j(this,te,Vt).call(this)},de=new WeakSet,wi=function(W,ce){const Me=j(this,ye,Ut).call(this),Ae=(W-Me)/e(this,r),ke=(ce-Me)/e(this,c);this.scaleFactor=Math.min(Ae,ke)},te=new WeakSet,Vt=function(){const W=j(this,ye,Ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+W,this.translationY*this.scaleFactor+W)},me=new WeakSet,Mn=function(W){const ce=new Path2D;for(let Me=0,Ae=W.length;Me<Ae;Me++){const[ke,Oe,je,Ce]=W[Me];Me===0&&ce.moveTo(...ke),ce.bezierCurveTo(Oe[0],Oe[1],je[0],je[1],Ce[0],Ce[1])}return ce},Le=new WeakSet,Ci=function(W,ce,Me){const[Ae,ke,Oe,je]=ce;switch(Me){case 0:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2)W[Ce]+=Ae,W[Ce+1]=je-W[Ce+1];break;case 90:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2){const Ve=W[Ce];W[Ce]=W[Ce+1]+Ae,W[Ce+1]=Ve+ke}break;case 180:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2)W[Ce]=Oe-W[Ce],W[Ce+1]+=ke;break;case 270:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2){const Ve=W[Ce];W[Ce]=Oe-W[Ce+1],W[Ce+1]=je-Ve}break;default:throw new Error("Invalid rotation")}return W},Ue=new WeakSet,xn=function(W,ce,Me){const[Ae,ke,Oe,je]=ce;switch(Me){case 0:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2)W[Ce]-=Ae,W[Ce+1]=je-W[Ce+1];break;case 90:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2){const Ve=W[Ce];W[Ce]=W[Ce+1]-ke,W[Ce+1]=Ve-Ae}break;case 180:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2)W[Ce]=Oe-W[Ce],W[Ce+1]-=ke;break;case 270:for(let Ce=0,qe=W.length;Ce<qe;Ce+=2){const Ve=W[Ce];W[Ce]=je-W[Ce+1],W[Ce+1]=Oe-Ve}break;default:throw new Error("Invalid rotation")}return W},Ge=new WeakSet,Fn=function(W,ce,Me,Ae){var qe,Ve;const ke=[],Oe=this.thickness/2,je=W*ce+Oe,Ce=W*Me+Oe;for(const Q of this.paths){const o=[],B=[];for(let X=0,re=Q.length;X<re;X++){const[fe,Se,Re,Ne]=Q[X],Ie=W*fe[0]+je,Qe=W*fe[1]+Ce,He=W*Se[0]+je,We=W*Se[1]+Ce,ze=W*Re[0]+je,Ye=W*Re[1]+Ce,Je=W*Ne[0]+je,et=W*Ne[1]+Ce;X===0&&(o.push(Ie,Qe),B.push(Ie,Qe)),o.push(He,We,ze,Ye,Je,et),B.push(He,We),X===re-1&&B.push(Je,et)}ke.push({bezier:j(qe=ae,Le,Ci).call(qe,o,Ae,this.rotation),points:j(Ve=ae,Le,Ci).call(Ve,B,Ae,this.rotation)})}return ke},Xe=new WeakSet,Ti=function(){let W=1/0,ce=-1/0,Me=1/0,Ae=-1/0;for(const ke of this.paths)for(const[Oe,je,Ce,qe]of ke){const Ve=n.Util.bezierBoundingBox(...Oe,...je,...Ce,...qe);W=Math.min(W,Ve[0]),Me=Math.min(Me,Ve[1]),ce=Math.max(ce,Ve[2]),Ae=Math.max(Ae,Ve[3])}return[W,Me,ce,Ae]},ye=new WeakSet,Ut=function(){return e(this,f)?Math.ceil(this.thickness*this.parentScale):0},k=new WeakSet,mt=function(W=!1){if(this.isEmpty())return;if(!e(this,f)){j(this,ne,at).call(this);return}const ce=j(this,Xe,Ti).call(this),Me=j(this,ye,Ut).call(this);Z(this,r,Math.max(g.AnnotationEditor.MIN_SIZE,ce[2]-ce[0])),Z(this,c,Math.max(g.AnnotationEditor.MIN_SIZE,ce[3]-ce[1]));const Ae=Math.ceil(Me+e(this,r)*this.scaleFactor),ke=Math.ceil(Me+e(this,c)*this.scaleFactor),[Oe,je]=this.parentDimensions;this.width=Ae/Oe,this.height=ke/je,this.setAspectRatio(Ae,ke);const Ce=this.translationX,qe=this.translationY;this.translationX=-ce[0],this.translationY=-ce[1],j(this,De,gt).call(this),j(this,ne,at).call(this),Z(this,S,Ae),Z(this,s,ke),this.setDims(Ae,ke);const Ve=W?Me/this.scaleFactor/2:0;this.translate(Ce-this.translationX-Ve,qe-this.translationY-Ve)},I(ae,me),I(ae,Le),I(ae,Ue),tt(ae,"_defaultColor",null),tt(ae,"_defaultOpacity",1),tt(ae,"_defaultThickness",1),tt(ae,"_type","ink");let T=ae;t.InkEditor=T},(z,t,L)=>{var T,c,r,D,M,b,u,v,f,C,w,At,S,Et,i,Ht,m,Mi,F,Ln,G,Rn,E,xi,J,Wt,H,Dn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=L(1),g=L(4),V=L(6),O=L(29);const $=class $ extends g.AnnotationEditor{constructor(N){super({...N,name:"stampEditor"});I(this,w);I(this,S);I(this,i);I(this,m);I(this,F);I(this,G);I(this,E);I(this,J);I(this,H);I(this,T,null);I(this,c,null);I(this,r,null);I(this,D,null);I(this,M,null);I(this,b,null);I(this,u,null);I(this,v,null);I(this,f,!1);I(this,C,!1);Z(this,D,N.bitmapUrl),Z(this,M,N.bitmapFile)}static initialize(N){g.AnnotationEditor.initialize(N)}static get supportedTypes(){const N=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",N.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(N){return this.supportedTypes.includes(N)}static paste(N,a){a.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:N.getAsFile()})}remove(){var N,a;e(this,c)&&(Z(this,T,null),this._uiManager.imageManager.deleteId(e(this,c)),(N=e(this,b))==null||N.remove(),Z(this,b,null),(a=e(this,u))==null||a.disconnect(),Z(this,u,null)),super.remove()}rebuild(){if(!this.parent){e(this,c)&&j(this,i,Ht).call(this);return}super.rebuild(),this.div!==null&&(e(this,c)&&j(this,i,Ht).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,r)||e(this,T)||e(this,D)||e(this,M))}get isResizable(){return!0}render(){if(this.div)return this.div;let N,a;if(this.width&&(N=this.x,a=this.y),super.render(),this.div.hidden=!0,e(this,T)?j(this,m,Mi).call(this):j(this,i,Ht).call(this),this.width){const[d,l]=this.parentDimensions;this.setAt(N*d,a*l,this.width*d,this.height*l)}return this.div}static deserialize(N,a,d){if(N instanceof O.StampAnnotationElement)return null;const l=super.deserialize(N,a,d),{rect:P,bitmapUrl:x,bitmapId:U,isSvg:K,accessibilityData:ne}=N;U&&d.imageManager.isValidId(U)?Z(l,c,U):Z(l,D,x),Z(l,f,K);const[_e,pe]=l.pageDimensions;return l.width=(P[2]-P[0])/_e,l.height=(P[3]-P[1])/pe,ne&&(l.altTextData=ne),l}serialize(N=!1,a=null){if(this.isEmpty())return null;const d={annotationType:n.AnnotationEditorType.STAMP,bitmapId:e(this,c),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,f),structTreeParentId:this._structTreeParentId};if(N)return d.bitmapUrl=j(this,J,Wt).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:l,altText:P}=this.altTextData;if(!l&&P&&(d.accessibilityData={type:"Figure",alt:P}),a===null)return d;a.stamps||(a.stamps=new Map);const x=e(this,f)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!a.stamps.has(e(this,c)))a.stamps.set(e(this,c),{area:x,serialized:d}),d.bitmap=j(this,J,Wt).call(this,!1);else if(e(this,f)){const U=a.stamps.get(e(this,c));x>U.area&&(U.area=x,U.serialized.bitmap.close(),U.serialized.bitmap=j(this,J,Wt).call(this,!1))}return d}};T=new WeakMap,c=new WeakMap,r=new WeakMap,D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakMap,w=new WeakSet,At=function(N,a=!1){if(!N){this.remove();return}Z(this,T,N.bitmap),a||(Z(this,c,N.id),Z(this,f,N.isSvg)),j(this,m,Mi).call(this)},S=new WeakSet,Et=function(){Z(this,r,null),this._uiManager.enableWaiting(!1),e(this,b)&&this.div.focus()},i=new WeakSet,Ht=function(){if(e(this,c)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,c)).then(a=>j(this,w,At).call(this,a,!0)).finally(()=>j(this,S,Et).call(this));return}if(e(this,D)){const a=e(this,D);Z(this,D,null),this._uiManager.enableWaiting(!0),Z(this,r,this._uiManager.imageManager.getFromUrl(a).then(d=>j(this,w,At).call(this,d)).finally(()=>j(this,S,Et).call(this)));return}if(e(this,M)){const a=e(this,M);Z(this,M,null),this._uiManager.enableWaiting(!0),Z(this,r,this._uiManager.imageManager.getFromFile(a).then(d=>j(this,w,At).call(this,d)).finally(()=>j(this,S,Et).call(this)));return}const N=document.createElement("input");N.type="file",N.accept=$.supportedTypesStr,Z(this,r,new Promise(a=>{N.addEventListener("change",async()=>{if(!N.files||N.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(N.files[0]);j(this,w,At).call(this,d)}a()}),N.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>j(this,S,Et).call(this))),N.click()},m=new WeakSet,Mi=function(){const{div:N}=this;let{width:a,height:d}=e(this,T);const[l,P]=this.pageDimensions,x=.75;if(this.width)a=this.width*l,d=this.height*P;else if(a>x*l||d>x*P){const _e=Math.min(x*l/a,x*P/d);a*=_e,d*=_e}const[U,K]=this.parentDimensions;this.setDims(a*U/l,d*K/P),this._uiManager.enableWaiting(!1);const ne=Z(this,b,document.createElement("canvas"));N.append(ne),N.hidden=!1,j(this,E,xi).call(this,a,d),j(this,H,Dn).call(this),e(this,C)||(this.parent.addUndoableEditor(this),Z(this,C,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,Ln=function(N,a){var x;const[d,l]=this.parentDimensions;this.width=N/d,this.height=a/l,this.setDims(N,a),(x=this._initialOptions)!=null&&x.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,v)!==null&&clearTimeout(e(this,v)),Z(this,v,setTimeout(()=>{Z(this,v,null),j(this,E,xi).call(this,N,a)},200))},G=new WeakSet,Rn=function(N,a){const{width:d,height:l}=e(this,T);let P=d,x=l,U=e(this,T);for(;P>2*N||x>2*a;){const K=P,ne=x;P>2*N&&(P=P>=16384?Math.floor(P/2)-1:Math.ceil(P/2)),x>2*a&&(x=x>=16384?Math.floor(x/2)-1:Math.ceil(x/2));const _e=new OffscreenCanvas(P,x);_e.getContext("2d").drawImage(U,0,0,K,ne,0,0,P,x),U=_e.transferToImageBitmap()}return U},E=new WeakSet,xi=function(N,a){N=Math.ceil(N),a=Math.ceil(a);const d=e(this,b);if(!d||d.width===N&&d.height===a)return;d.width=N,d.height=a;const l=e(this,f)?e(this,T):j(this,G,Rn).call(this,N,a),P=d.getContext("2d");P.filter=this._uiManager.hcmFilter,P.drawImage(l,0,0,l.width,l.height,0,0,N,a)},J=new WeakSet,Wt=function(N){if(N){if(e(this,f)){const l=this._uiManager.imageManager.getSvgUrl(e(this,c));if(l)return l}const a=document.createElement("canvas");return{width:a.width,height:a.height}=e(this,T),a.getContext("2d").drawImage(e(this,T),0,0),a.toDataURL()}if(e(this,f)){const[a,d]=this.pageDimensions,l=Math.round(this.width*a*V.PixelsPerInch.PDF_TO_CSS_UNITS),P=Math.round(this.height*d*V.PixelsPerInch.PDF_TO_CSS_UNITS),x=new OffscreenCanvas(l,P);return x.getContext("2d").drawImage(e(this,T),0,0,e(this,T).width,e(this,T).height,0,0,l,P),x.transferToImageBitmap()}return structuredClone(e(this,T))},H=new WeakSet,Dn=function(){Z(this,u,new ResizeObserver(N=>{const a=N[0].contentRect;a.width&&a.height&&j(this,F,Ln).call(this,a.width,a.height)})),e(this,u).observe(this.div)},tt($,"_type","stamp");let R=$;t.StampEditor=R}],__webpack_module_cache__={};function __w_pdfjs_require__(z){var t=__webpack_module_cache__[z];if(t!==void 0)return t.exports;var L=__webpack_module_cache__[z]={exports:{}};return __webpack_modules__[z](L,L.exports,__w_pdfjs_require__),L.exports}var __webpack_exports__={};return(()=>{var z=__webpack_exports__;Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(z,"AnnotationEditorLayer",{enumerable:!0,get:function(){return V.AnnotationEditorLayer}}),Object.defineProperty(z,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(z,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(z,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return O.AnnotationEditorUIManager}}),Object.defineProperty(z,"AnnotationLayer",{enumerable:!0,get:function(){return R.AnnotationLayer}}),Object.defineProperty(z,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(z,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(z,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(z,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(z,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(z,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(z,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(z,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(z,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(z,"PDFDataRangeTransport",{enumerable:!0,get:function(){return L.PDFDataRangeTransport}}),Object.defineProperty(z,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(z,"PDFWorker",{enumerable:!0,get:function(){return L.PDFWorker}}),Object.defineProperty(z,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(z,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(z,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(z,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(z,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(z,"SVGGraphics",{enumerable:!0,get:function(){return L.SVGGraphics}}),Object.defineProperty(z,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(z,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(z,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(z,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(z,"build",{enumerable:!0,get:function(){return L.build}}),Object.defineProperty(z,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(z,"getDocument",{enumerable:!0,get:function(){return L.getDocument}}),Object.defineProperty(z,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(z,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(z,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(z,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(z,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(z,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(z,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(z,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(z,"renderTextLayer",{enumerable:!0,get:function(){return g.renderTextLayer}}),Object.defineProperty(z,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(z,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(z,"updateTextLayer",{enumerable:!0,get:function(){return g.updateTextLayer}}),Object.defineProperty(z,"version",{enumerable:!0,get:function(){return L.version}});var t=__w_pdfjs_require__(1),L=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),g=__w_pdfjs_require__(26),V=__w_pdfjs_require__(27),O=__w_pdfjs_require__(5),R=__w_pdfjs_require__(29),T=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,pdf_viewer={exports:{}};(function(z,t){(function(n,g){z.exports=n.pdfjsViewer=g()})(globalThis,()=>(()=>{var L=[,(O,R,T)=>{var J,Y,H,le,kn,Ee,Fi,N,Li,d,In,P,On,U,Nn,ne,Ri,pe,Bn,se,Vn,ge,jt,De,wt,de,_t,te,Un,me,Di,Le,ki,Ue,Gt,Ge,Hn,Xe,Ii,ye,Oi,k,Ct;Object.defineProperty(R,"__esModule",{value:!0}),R.PDFFindController=R.FindState=void 0;var c=T(2),r=T(3),D=T(4);const M={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};R.FindState=M;const b=250,u=-50,v=-400,f={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},C=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let w;const p=new RegExp("\\p{M}+","gu"),S=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),s=new RegExp("([^\\p{M}])\\p{M}*$","u"),i=new RegExp("^\\p{M}*([^\\p{M}])","u"),y=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,m=new Map,h="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",F=new Map;let A=null,G=null;function ie(ae){const ue=[];let ve;for(;(ve=y.exec(ae))!==null;){let{index:Q}=ve;for(const o of ve[0]){let B=m.get(o);B||(B=o.normalize("NFD").length,m.set(o,B)),ue.push([B,Q++])}}let W;if(ue.length===0&&A)W=A;else if(ue.length>0&&G)W=G;else{const Q=Object.keys(f).join(""),o=(0,r.getNormalizeWithNFKC)(),re=`([${Q}])|([${o}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;ue.length===0?W=A=new RegExp(re+"|(\\u0000)","gum"):W=G=new RegExp(re+`|(${h})`,"gum")}const ce=[];for(;(ve=p.exec(ae))!==null;)ce.push([ve[0].length,ve.index]);let Me=ae.normalize("NFD");const Ae=[[0,0]];let ke=0,Oe=0,je=0,Ce=0,qe=0,Ve=!1;return Me=Me.replace(W,(Q,o,B,X,re,fe,Se,Re,Ne,Ie)=>{var Qe,He,We;if(Ie-=Ce,o){const ze=f[o],Ye=ze.length;for(let Je=1;Je<Ye;Je++)Ae.push([Ie-je+Je,je-Je]);return je-=Ye-1,ze}if(B){let ze=F.get(B);ze||(ze=B.normalize("NFKC"),F.set(B,ze));const Ye=ze.length;for(let Je=1;Je<Ye;Je++)Ae.push([Ie-je+Je,je-Je]);return je-=Ye-1,ze}if(X)return Ve=!0,Ie+qe===((Qe=ce[ke])==null?void 0:Qe[1])?++ke:(Ae.push([Ie-1-je+1,je-1]),je-=1,Ce+=1),Ae.push([Ie-je+1,je]),Ce+=1,qe+=1,X.charAt(0);if(re){const ze=re.endsWith(`
`),Ye=ze?re.length-2:re.length;Ve=!0;let Je=Ye;Ie+qe===((He=ce[ke])==null?void 0:He[1])&&(Je-=ce[ke][0],++ke);for(let et=1;et<=Je;et++)Ae.push([Ie-1-je+et,je-et]);return je-=Je,Ce+=Je,ze?(Ie+=Ye-1,Ae.push([Ie-je+1,1+je]),je+=1,Ce+=1,qe+=1,re.slice(0,Ye)):re}if(fe){const ze=fe.length-2;return Ae.push([Ie-je+ze,1+je]),je+=1,Ce+=1,qe+=1,fe.slice(0,-2)}if(Se){const ze=Se.length-1;return Ae.push([Ie-je+ze,je]),Ce+=1,qe+=1,Se.slice(0,-1)}if(Re)return Ae.push([Ie-je+1,je-1]),je-=1,Ce+=1,qe+=1," ";if(Ie+qe===((We=ue[Oe])==null?void 0:We[1])){const ze=ue[Oe][0]-1;++Oe;for(let Ye=1;Ye<=ze;Ye++)Ae.push([Ie-(je-Ye),je-Ye]);je-=ze,Ce+=ze}return Ne}),Ae.push([Me.length,je]),[Me,Ae,Ve]}function E(ae,ue,ve){if(!ae)return[ue,ve];const W=ue,ce=ue+ve-1;let Me=(0,c.binarySearchFirstItem)(ae,Ce=>Ce[0]>=W);ae[Me][0]>W&&--Me;let Ae=(0,c.binarySearchFirstItem)(ae,Ce=>Ce[0]>=ce,Me);ae[Ae][0]>ce&&--Ae;const ke=W+ae[Me][1],je=ce+ae[Ae][1]+1-ke;return[ke,je]}class q{constructor({linkService:ue,eventBus:ve,updateMatchesCountOnProgress:W=!0}){I(this,le);I(this,Ee);I(this,N);I(this,d);I(this,P);I(this,U);I(this,ne);I(this,pe);I(this,se);I(this,ge);I(this,De);I(this,de);I(this,te);I(this,me);I(this,Le);I(this,Ue);I(this,Ge);I(this,Xe);I(this,ye);I(this,k);I(this,J,null);I(this,Y,!0);I(this,H,0);this._linkService=ue,this._eventBus=ve,Z(this,Y,W),this.onIsPageVisible=null,j(this,Ee,Fi).call(this),ve._on("find",j(this,le,kn).bind(this)),ve._on("findbarclose",j(this,Ge,Hn).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return e(this,J)}setDocument(ue){this._pdfDocument&&j(this,Ee,Fi).call(this),ue&&(this._pdfDocument=ue,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ue=null,selectedLeft:ve=0,pageIndex:W=-1,matchIndex:ce=-1}){if(!this._scrollMatches||!ue)return;if(ce===-1||ce!==this._selected.matchIdx)return;if(W===-1||W!==this._selected.pageIdx)return;this._scrollMatches=!1;const Me={top:u,left:ve+v};(0,c.scrollIntoView)(ue,Me,!0)}}J=new WeakMap,Y=new WeakMap,H=new WeakMap,le=new WeakSet,kn=function(ue){if(!ue)return;ue.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof ue.query=="string"&&(ue.query=ue.query.match(/\S+/g)));const ve=this._pdfDocument,{type:W}=ue;(e(this,J)===null||j(this,d,In).call(this,ue))&&(this._dirtyMatch=!0),Z(this,J,ue),W!=="highlightallchange"&&j(this,k,Ct).call(this,M.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ve&&this._pdfDocument!==ve)return;j(this,se,Vn).call(this);const ce=!this._highlightMatches,Me=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),W?this._dirtyMatch?j(this,de,_t).call(this):W==="again"?(j(this,de,_t).call(this),ce&&e(this,J).highlightAll&&j(this,De,wt).call(this)):W==="highlightallchange"?(Me?j(this,de,_t).call(this):this._highlightMatches=!0,j(this,De,wt).call(this)):j(this,de,_t).call(this):this._findTimeout=setTimeout(()=>{j(this,de,_t).call(this),this._findTimeout=null},b)})},Ee=new WeakSet,Fi=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],Z(this,H,0),Z(this,J,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new D.PromiseCapability},N=new WeakSet,Li=function(){const{query:ue}=e(this,J);return typeof ue=="string"?(ue!==this._rawQuery&&(this._rawQuery=ue,[this._normalizedQuery]=ie(ue)),this._normalizedQuery):(ue||[]).filter(ve=>!!ve).map(ve=>ie(ve)[0])},d=new WeakSet,In=function(ue){var Ae;const ve=ue.query,W=e(this,J).query,ce=typeof ve;if(ce!==typeof W)return!0;if(ce==="string"){if(ve!==W)return!0}else if(JSON.stringify(ve)!==JSON.stringify(W))return!0;switch(ue.type){case"again":const ke=this._selected.pageIdx+1,Oe=this._linkService;return ke>=1&&ke<=Oe.pagesCount&&ke!==Oe.page&&!(((Ae=this.onIsPageVisible)==null?void 0:Ae.call(this,ke))??!0);case"highlightallchange":return!1}return!0},P=new WeakSet,On=function(ue,ve,W){let ce=ue.slice(0,ve).match(s);if(ce){const Me=ue.charCodeAt(ve),Ae=ce[1].charCodeAt(0);if((0,r.getCharacterType)(Me)===(0,r.getCharacterType)(Ae))return!1}if(ce=ue.slice(ve+W).match(i),ce){const Me=ue.charCodeAt(ve+W-1),Ae=ce[1].charCodeAt(0);if((0,r.getCharacterType)(Me)===(0,r.getCharacterType)(Ae))return!1}return!0},U=new WeakSet,Nn=function(ue,ve,W,ce){const Me=this._pageMatches[W]=[],Ae=this._pageMatchesLength[W]=[];if(!ue)return;const ke=this._pageDiffs[W];let Oe;for(;(Oe=ue.exec(ce))!==null;){if(ve&&!j(this,P,On).call(this,ce,Oe.index,Oe[0].length))continue;const[je,Ce]=E(ke,Oe.index,Oe[0].length);Ce&&(Me.push(je),Ae.push(Ce))}},ne=new WeakSet,Ri=function(ue,ve){const{matchDiacritics:W}=e(this,J);let ce=!1;ue=ue.replaceAll(S,(Ae,ke,Oe,je,Ce,qe)=>ke?`[ ]*\\${ke}[ ]*`:Oe?`[ ]*${Oe}[ ]*`:je?"[ ]+":W?Ce||qe:Ce?C.has(Ce.charCodeAt(0))?Ce:"":ve?(ce=!0,`${qe}\\p{M}*`):qe);const Me="[ ]*";return ue.endsWith(Me)&&(ue=ue.slice(0,ue.length-Me.length)),W&&ve&&(w||(w=String.fromCharCode(...C)),ce=!0,ue=`${ue}(?=[${w}]|[^\\p{M}]|$)`),[ce,ue]},pe=new WeakSet,Bn=function(ue){let ve=e(this,N,Li);if(ve.length===0)return;const{caseSensitive:W,entireWord:ce}=e(this,J),Me=this._pageContents[ue],Ae=this._hasDiacritics[ue];let ke=!1;typeof ve=="string"?[ke,ve]=j(this,ne,Ri).call(this,ve,Ae):ve=ve.sort().reverse().map(Ce=>{const[qe,Ve]=j(this,ne,Ri).call(this,Ce,Ae);return ke||(ke=qe),`(${Ve})`}).join("|");const Oe=`g${ke?"u":""}${W?"":"i"}`;ve=ve?new RegExp(ve,Oe):null,j(this,U,Nn).call(this,ve,ce,ue,Me),e(this,J).highlightAll&&j(this,ge,jt).call(this,ue),this._resumePageIdx===ue&&(this._resumePageIdx=null,j(this,me,Di).call(this));const je=this._pageMatches[ue].length;this._matchesCountTotal+=je,e(this,Y)?je>0&&j(this,ye,Oi).call(this):++dt(this,H)._===this._linkService.pagesCount&&j(this,ye,Oi).call(this)},se=new WeakSet,Vn=function(){if(this._extractTextPromises.length>0)return;let ue=Promise.resolve();const ve={disableNormalization:!0};for(let W=0,ce=this._linkService.pagesCount;W<ce;W++){const Me=new D.PromiseCapability;this._extractTextPromises[W]=Me.promise,ue=ue.then(()=>this._pdfDocument.getPage(W+1).then(Ae=>Ae.getTextContent(ve)).then(Ae=>{const ke=[];for(const Oe of Ae.items)ke.push(Oe.str),Oe.hasEOL&&ke.push(`
`);[this._pageContents[W],this._pageDiffs[W],this._hasDiacritics[W]]=ie(ke.join("")),Me.resolve()},Ae=>{console.error(`Unable to get text content for page ${W+1}`,Ae),this._pageContents[W]="",this._pageDiffs[W]=null,this._hasDiacritics[W]=!1,Me.resolve()}))}},ge=new WeakSet,jt=function(ue){this._scrollMatches&&this._selected.pageIdx===ue&&(this._linkService.page=ue+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ue})},De=new WeakSet,wt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},de=new WeakSet,_t=function(){const ue=e(this,J).findPrevious,ve=this._linkService.page-1,W=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ve,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,Z(this,H,0),this._matchesCountTotal=0,j(this,De,wt).call(this);for(let Ae=0;Ae<W;Ae++)this._pendingFindMatches.has(Ae)||(this._pendingFindMatches.add(Ae),this._extractTextPromises[Ae].then(()=>{this._pendingFindMatches.delete(Ae),j(this,pe,Bn).call(this,Ae)}))}if(e(this,N,Li).length===0){j(this,k,Ct).call(this,M.FOUND);return}if(this._resumePageIdx)return;const Me=this._offset;if(this._pagesToSearch=W,Me.matchIdx!==null){const Ae=this._pageMatches[Me.pageIdx].length;if(!ue&&Me.matchIdx+1<Ae||ue&&Me.matchIdx>0){Me.matchIdx=ue?Me.matchIdx-1:Me.matchIdx+1,j(this,Ue,Gt).call(this,!0);return}j(this,Le,ki).call(this,ue)}j(this,me,Di).call(this)},te=new WeakSet,Un=function(ue){const ve=this._offset,W=ue.length,ce=e(this,J).findPrevious;return W?(ve.matchIdx=ce?W-1:0,j(this,Ue,Gt).call(this,!0),!0):(j(this,Le,ki).call(this,ce),ve.wrapped&&(ve.matchIdx=null,this._pagesToSearch<0)?(j(this,Ue,Gt).call(this,!1),!0):!1)},me=new WeakSet,Di=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let ue=null;do{const ve=this._offset.pageIdx;if(ue=this._pageMatches[ve],!ue){this._resumePageIdx=ve;break}}while(!j(this,te,Un).call(this,ue))},Le=new WeakSet,ki=function(ue){const ve=this._offset,W=this._linkService.pagesCount;ve.pageIdx=ue?ve.pageIdx-1:ve.pageIdx+1,ve.matchIdx=null,this._pagesToSearch--,(ve.pageIdx>=W||ve.pageIdx<0)&&(ve.pageIdx=ue?W-1:0,ve.wrapped=!0)},Ue=new WeakSet,Gt=function(ue=!1){let ve=M.NOT_FOUND;const W=this._offset.wrapped;if(this._offset.wrapped=!1,ue){const ce=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ve=W?M.WRAPPED:M.FOUND,ce!==-1&&ce!==this._selected.pageIdx&&j(this,ge,jt).call(this,ce)}j(this,k,Ct).call(this,ve,e(this,J).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,j(this,ge,jt).call(this,this._selected.pageIdx))},Ge=new WeakSet,Hn=function(ue){const ve=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ve&&this._pdfDocument!==ve||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),j(this,k,Ct).call(this,M.FOUND),this._highlightMatches=!1,j(this,De,wt).call(this))})},Xe=new WeakSet,Ii=function(){var Me;const{pageIdx:ue,matchIdx:ve}=this._selected;let W=0,ce=this._matchesCountTotal;if(ve!==-1){for(let Ae=0;Ae<ue;Ae++)W+=((Me=this._pageMatches[Ae])==null?void 0:Me.length)||0;W+=ve+1}return(W<1||W>ce)&&(W=ce=0),{current:W,total:ce}},ye=new WeakSet,Oi=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:j(this,Xe,Ii).call(this)})},k=new WeakSet,Ct=function(ue,ve=!1){var W;!e(this,Y)&&(e(this,H)!==this._linkService.pagesCount||ue===M.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ue,previous:ve,matchesCount:j(this,Xe,Ii).call(this),rawQuery:((W=e(this,J))==null?void 0:W.query)??null})},R.PDFFindController=q},(O,R)=>{var be,ge,Fe,De,xe;Object.defineProperty(R,"__esModule",{value:!0}),R.animationStarted=R.VERTICAL_PADDING=R.UNKNOWN_SCALE=R.TextLayerMode=R.SpreadMode=R.SidebarView=R.ScrollMode=R.SCROLLBAR_PADDING=R.RenderingStates=R.ProgressBar=R.PresentationModeState=R.OutputScale=R.MIN_SCALE=R.MAX_SCALE=R.MAX_AUTO_SCALE=R.DEFAULT_SCALE_VALUE=R.DEFAULT_SCALE_DELTA=R.DEFAULT_SCALE=R.CursorTool=R.AutoPrintRegExp=void 0,R.apiPageLayoutToViewerModes=_e,R.apiPageModeToSidebarView=pe,R.approximateFraction=J,R.backtrackBeforeAllVisibleElements=le,R.binarySearchFirstItem=q,R.docStyle=void 0,R.getActiveOrFocusedElement=ne,R.getPageSizeInches=H,R.getVisibleElements=$,R.isPortraitOrientation=l,R.isValidRotation=N,R.isValidScrollMode=a,R.isValidSpreadMode=d,R.normalizeWheelEventDelta=we,R.normalizeWheelEventDirection=Ee,R.parseQueryString=G,R.removeNullCharacters=E,R.roundToDivide=Y,R.scrollIntoView=F,R.toggleCheckedBtn=Pe,R.toggleExpandedBtn=se,R.watchScroll=A;const T="auto";R.DEFAULT_SCALE_VALUE=T;const c=1;R.DEFAULT_SCALE=c;const r=1.1;R.DEFAULT_SCALE_DELTA=r;const D=.1;R.MIN_SCALE=D;const M=10;R.MAX_SCALE=M;const b=0;R.UNKNOWN_SCALE=b;const u=1.25;R.MAX_AUTO_SCALE=u;const v=40;R.SCROLLBAR_PADDING=v;const f=5;R.VERTICAL_PADDING=f;const C={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};R.RenderingStates=C;const w={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};R.PresentationModeState=w;const p={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};R.SidebarView=p;const S={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};R.TextLayerMode=S;const s={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};R.ScrollMode=s;const i={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};R.SpreadMode=i;const y={SELECT:0,HAND:1,ZOOM:2};R.CursorTool=y;const m=/\bprint\s*\(/;R.AutoPrintRegExp=m;class h{constructor(){const oe=window.devicePixelRatio||1;this.sx=oe,this.sy=oe}get scaled(){return this.sx!==1||this.sy!==1}}R.OutputScale=h;function F(de,oe,te=!1){let ee=de.offsetParent;if(!ee){console.error("offsetParent is not set -- cannot scroll");return}let me=de.offsetTop+de.clientTop,Te=de.offsetLeft+de.clientLeft;for(;ee.clientHeight===ee.scrollHeight&&ee.clientWidth===ee.scrollWidth||te&&(ee.classList.contains("markedContent")||getComputedStyle(ee).overflow==="hidden");)if(me+=ee.offsetTop,Te+=ee.offsetLeft,ee=ee.offsetParent,!ee)return;oe&&(oe.top!==void 0&&(me+=oe.top),oe.left!==void 0&&(Te+=oe.left,ee.scrollLeft=Te)),ee.scrollTop=me}function A(de,oe){const te=function(Te){me||(me=window.requestAnimationFrame(function(){me=null;const Be=de.scrollLeft,Ue=ee.lastX;Be!==Ue&&(ee.right=Be>Ue),ee.lastX=Be;const $e=de.scrollTop,Ge=ee.lastY;$e!==Ge&&(ee.down=$e>Ge),ee.lastY=$e,oe(ee)}))},ee={right:!0,down:!0,lastX:de.scrollLeft,lastY:de.scrollTop,_eventHandler:te};let me=null;return de.addEventListener("scroll",te,!0),ee}function G(de){const oe=new Map;for(const[te,ee]of new URLSearchParams(de))oe.set(te.toLowerCase(),ee);return oe}const ie=/[\x01-\x1F]/g;function E(de,oe=!1){return typeof de!="string"?(console.error("The argument must be a string."),de):(oe&&(de=de.replaceAll(ie," ")),de.replaceAll("\0",""))}function q(de,oe,te=0){let ee=te,me=de.length-1;if(me<0||!oe(de[me]))return de.length;if(oe(de[ee]))return ee;for(;ee<me;){const Te=ee+me>>1,Le=de[Te];oe(Le)?me=Te:ee=Te+1}return ee}function J(de){if(Math.floor(de)===de)return[de,1];const oe=1/de,te=8;if(oe>te)return[1,te];if(Math.floor(oe)===oe)return[1,oe];const ee=de>1?oe:de;let me=0,Te=1,Le=1,Be=1;for(;;){const $e=me+Le,Ge=Te+Be;if(Ge>te)break;ee<=$e/Ge?(Le=$e,Be=Ge):(me=$e,Te=Ge)}let Ue;return ee-me/Te<Le/Be-ee?Ue=ee===de?[me,Te]:[Te,me]:Ue=ee===de?[Le,Be]:[Be,Le],Ue}function Y(de,oe){const te=de%oe;return te===0?de:Math.round(de-te+oe)}function H({view:de,userUnit:oe,rotate:te}){const[ee,me,Te,Le]=de,Be=te%180!==0,Ue=(Te-ee)/72*oe,$e=(Le-me)/72*oe;return{width:Be?$e:Ue,height:Be?Ue:$e}}function le(de,oe,te){if(de<2)return de;let ee=oe[de].div,me=ee.offsetTop+ee.clientTop;me>=te&&(ee=oe[de-1].div,me=ee.offsetTop+ee.clientTop);for(let Te=de-2;Te>=0&&(ee=oe[Te].div,!(ee.offsetTop+ee.clientTop+ee.clientHeight<=me));--Te)de=Te;return de}function $({scrollEl:de,views:oe,sortByVisibility:te=!1,horizontal:ee=!1,rtl:me=!1}){const Te=de.scrollTop,Le=Te+de.clientHeight,Be=de.scrollLeft,Ue=Be+de.clientWidth;function $e(ae){const ue=ae.div;return ue.offsetTop+ue.clientTop+ue.clientHeight>Te}function Ge(ae){const ue=ae.div,ve=ue.offsetLeft+ue.clientLeft,W=ve+ue.clientWidth;return me?ve<Ue:W>Be}const Ke=[],Xe=new Set,Ze=oe.length;let ye=q(oe,ee?Ge:$e);ye>0&&ye<Ze&&!ee&&(ye=le(ye,oe,Te));let _=ee?Ue:-1;for(let ae=ye;ae<Ze;ae++){const ue=oe[ae],ve=ue.div,W=ve.offsetLeft+ve.clientLeft,ce=ve.offsetTop+ve.clientTop,Me=ve.clientWidth,Ae=ve.clientHeight,ke=W+Me,Oe=ce+Ae;if(_===-1)Oe>=Le&&(_=Oe);else if((ee?W:ce)>_)break;if(Oe<=Te||ce>=Le||ke<=Be||W>=Ue)continue;const je=Math.max(0,Te-ce)+Math.max(0,Oe-Le),Ce=Math.max(0,Be-W)+Math.max(0,ke-Ue),qe=(Ae-je)/Ae,Ve=(Me-Ce)/Me,Q=qe*Ve*100|0;Ke.push({id:ue.id,x:W,y:ce,view:ue,percent:Q,widthPercent:Ve*100|0}),Xe.add(ue.id)}const k=Ke[0],he=Ke.at(-1);return te&&Ke.sort(function(ae,ue){const ve=ae.percent-ue.percent;return Math.abs(ve)>.001?-ve:ae.id-ue.id}),{first:k,last:he,views:Ke,ids:Xe}}function Ee(de){let oe=Math.hypot(de.deltaX,de.deltaY);const te=Math.atan2(de.deltaY,de.deltaX);return-.25*Math.PI<te&&te<.75*Math.PI&&(oe=-oe),oe}function we(de){const oe=de.deltaMode;let te=Ee(de);const ee=30,me=30;return oe===WheelEvent.DOM_DELTA_PIXEL?te/=ee*me:oe===WheelEvent.DOM_DELTA_LINE&&(te/=me),te}function N(de){return Number.isInteger(de)&&de%90===0}function a(de){return Number.isInteger(de)&&Object.values(s).includes(de)&&de!==s.UNKNOWN}function d(de){return Number.isInteger(de)&&Object.values(i).includes(de)&&de!==i.UNKNOWN}function l(de){return de.width<=de.height}const P=new Promise(function(de){window.requestAnimationFrame(de)});R.animationStarted=P;const x=document.documentElement.style;R.docStyle=x;function U(de,oe,te){return Math.min(Math.max(de,oe),te)}class K{constructor(oe){I(this,be,null);I(this,ge,null);I(this,Fe,0);I(this,De,null);I(this,xe,!0);Z(this,be,oe.classList),Z(this,De,oe.style)}get percent(){return e(this,Fe)}set percent(oe){if(Z(this,Fe,U(oe,0,100)),isNaN(oe)){e(this,be).add("indeterminate");return}e(this,be).remove("indeterminate"),e(this,De).setProperty("--progressBar-percent",`${e(this,Fe)}%`)}setWidth(oe){if(!oe)return;const ee=oe.parentNode.offsetWidth-oe.offsetWidth;ee>0&&e(this,De).setProperty("--progressBar-end-offset",`${ee}px`)}setDisableAutoFetch(oe=5e3){isNaN(e(this,Fe))||(e(this,ge)&&clearTimeout(e(this,ge)),this.show(),Z(this,ge,setTimeout(()=>{Z(this,ge,null),this.hide()},oe)))}hide(){e(this,xe)&&(Z(this,xe,!1),e(this,be).add("hidden"))}show(){e(this,xe)||(Z(this,xe,!0),e(this,be).remove("hidden"))}}be=new WeakMap,ge=new WeakMap,Fe=new WeakMap,De=new WeakMap,xe=new WeakMap,R.ProgressBar=K;function ne(){let de=document,oe=de.activeElement||de.querySelector(":focus");for(;oe!=null&&oe.shadowRoot;)de=oe.shadowRoot,oe=de.activeElement||de.querySelector(":focus");return oe}function _e(de){let oe=s.VERTICAL,te=i.NONE;switch(de){case"SinglePage":oe=s.PAGE;break;case"OneColumn":break;case"TwoPageLeft":oe=s.PAGE;case"TwoColumnLeft":te=i.ODD;break;case"TwoPageRight":oe=s.PAGE;case"TwoColumnRight":te=i.EVEN;break}return{scrollMode:oe,spreadMode:te}}function pe(de){switch(de){case"UseNone":return p.NONE;case"UseThumbs":return p.THUMBS;case"UseOutlines":return p.OUTLINE;case"UseAttachments":return p.ATTACHMENTS;case"UseOC":return p.LAYERS}return p.NONE}function Pe(de,oe,te=null){de.classList.toggle("toggled",oe),de.setAttribute("aria-checked",oe),te==null||te.classList.toggle("hidden",!oe)}function se(de,oe,te=null){de.classList.toggle("toggled",oe),de.setAttribute("aria-expanded",oe),te==null||te.classList.toggle("hidden",!oe)}},(O,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.CharacterType=void 0,R.getCharacterType=p,R.getNormalizeWithNFKC=s;const T={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};R.CharacterType=T;function c(i){return i<11904}function r(i){return(i&65408)===0}function D(i){return i>=97&&i<=122||i>=65&&i<=90}function M(i){return i>=48&&i<=57}function b(i){return i===32||i===9||i===13||i===10}function u(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}function v(i){return i>=12448&&i<=12543}function f(i){return i>=12352&&i<=12447}function C(i){return i>=65376&&i<=65439}function w(i){return(i&65408)===3584}function p(i){return c(i)?r(i)?b(i)?T.SPACE:D(i)||M(i)||i===95?T.ALPHA_LETTER:T.PUNCT:w(i)?T.THAI_LETTER:i===160?T.SPACE:T.ALPHA_LETTER:u(i)?T.HAN_LETTER:v(i)?T.KATAKANA_LETTER:f(i)?T.HIRAGANA_LETTER:C(i)?T.HALFWIDTH_KATAKANA_LETTER:T.ALPHA_LETTER}let S;function s(){return S||(S=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),S}},O=>{O.exports=globalThis.pdfjsLib},(O,R,T)=>{var v,f,Ni,w,Wn;Object.defineProperty(R,"__esModule",{value:!0}),R.SimpleLinkService=R.PDFLinkService=R.LinkTarget=void 0;var c=T(2);const r="noopener noreferrer nofollow",D={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};R.LinkTarget=D;function M(s,{url:i,target:y,rel:m,enabled:h=!0}={}){if(!i||typeof i!="string")throw new Error('A valid "url" parameter must provided.');h?s.href=s.title=i:(s.href="",s.title=`Disabled: ${i}`,s.onclick=()=>!1);let F="";switch(y){case D.NONE:break;case D.SELF:F="_self";break;case D.BLANK:F="_blank";break;case D.PARENT:F="_parent";break;case D.TOP:F="_top";break}s.target=F,s.rel=typeof m=="string"?m:r}const S=class S{constructor({eventBus:i,externalLinkTarget:y=null,externalLinkRel:m=null,ignoreDestinationZoom:h=!1}={}){I(this,f);I(this,v,new Map);this.eventBus=i,this.externalLinkTarget=y,this.externalLinkRel=m,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=h,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(i,y=null){this.baseUrl=y,this.pdfDocument=i,e(this,v).clear()}setViewer(i){this.pdfViewer=i}setHistory(i){this.pdfHistory=i}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(i){this.pdfViewer.currentPageNumber=i}get rotation(){return this.pdfViewer.pagesRotation}set rotation(i){this.pdfViewer.pagesRotation=i}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(i){if(!this.pdfDocument)return;let y,m;if(typeof i=="string"?(y=i,m=await this.pdfDocument.getDestination(i)):(y=null,m=await i),!Array.isArray(m)){console.error(`PDFLinkService.goToDestination: "${m}" is not a valid destination array, for dest="${i}".`);return}j(this,f,Ni).call(this,i,y,m)}goToPage(i){if(!this.pdfDocument)return;const y=typeof i=="string"&&this.pdfViewer.pageLabelToPageNumber(i)||i|0;if(!(Number.isInteger(y)&&y>0&&y<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${i}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(y)),this.pdfViewer.scrollPageIntoView({pageNumber:y})}addLinkAttributes(i,y,m=!1){M(i,{url:y,target:m?D.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(i){if(typeof i=="string"){if(i.length>0)return this.getAnchorUrl("#"+escape(i))}else if(Array.isArray(i)){const y=JSON.stringify(i);if(y.length>0)return this.getAnchorUrl("#"+escape(y))}return this.getAnchorUrl("")}getAnchorUrl(i){return this.baseUrl?this.baseUrl+i:i}setHash(i){var h;if(!this.pdfDocument)return;let y,m;if(i.includes("=")){const F=(0,c.parseQueryString)(i);if(F.has("search")){const A=F.get("search").replaceAll('"',""),G=F.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:G?A:A.match(/\S+/g)})}if(F.has("page")&&(y=F.get("page")|0||1),F.has("zoom")){const A=F.get("zoom").split(","),G=A[0],ie=parseFloat(G);G.includes("Fit")?G==="Fit"||G==="FitB"?m=[null,{name:G}]:G==="FitH"||G==="FitBH"||G==="FitV"||G==="FitBV"?m=[null,{name:G},A.length>1?A[1]|0:null]:G==="FitR"?A.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):m=[null,{name:G},A[1]|0,A[2]|0,A[3]|0,A[4]|0]:console.error(`PDFLinkService.setHash: "${G}" is not a valid zoom value.`):m=[null,{name:"XYZ"},A.length>1?A[1]|0:null,A.length>2?A[2]|0:null,ie?ie/100:G]}m?this.pdfViewer.scrollPageIntoView({pageNumber:y||this.page,destArray:m,allowNegativeOffset:!0}):y&&(this.page=y),F.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:F.get("pagemode")}),F.has("nameddest")&&this.goToDestination(F.get("nameddest"))}else{m=unescape(i);try{m=JSON.parse(m),Array.isArray(m)||(m=m.toString())}catch{}if(typeof m=="string"||j(h=S,w,Wn).call(h,m)){this.goToDestination(m);return}console.error(`PDFLinkService.setHash: "${unescape(i)}" is not a valid destination.`)}}executeNamedAction(i){var y,m;switch(i){case"GoBack":(y=this.pdfHistory)==null||y.back();break;case"GoForward":(m=this.pdfHistory)==null||m.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:i})}async executeSetOCGState(i){const y=this.pdfDocument,m=await this.pdfViewer.optionalContentConfigPromise;if(y!==this.pdfDocument)return;let h;for(const F of i.state){switch(F){case"ON":case"OFF":case"Toggle":h=F;continue}switch(h){case"ON":m.setVisibility(F,!0);break;case"OFF":m.setVisibility(F,!1);break;case"Toggle":const A=m.getGroup(F);A&&m.setVisibility(F,!A.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(m)}cachePageRef(i,y){if(!y)return;const m=y.gen===0?`${y.num}R`:`${y.num}R${y.gen}`;e(this,v).set(m,i)}_cachedPageNumber(i){if(!i)return null;const y=i.gen===0?`${i.num}R`:`${i.num}R${i.gen}`;return e(this,v).get(y)||null}};v=new WeakMap,f=new WeakSet,Ni=function(i,y=null,m){const h=m[0];let F;if(typeof h=="object"&&h!==null){if(F=this._cachedPageNumber(h),!F){this.pdfDocument.getPageIndex(h).then(A=>{this.cachePageRef(A+1,h),j(this,f,Ni).call(this,i,y,m)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid page reference, for dest="${i}".`)});return}}else if(Number.isInteger(h))F=h+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid destination reference, for dest="${i}".`);return}if(!F||F<1||F>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${F}" is not a valid page number, for dest="${i}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:y,explicitDest:m,pageNumber:F})),this.pdfViewer.scrollPageIntoView({pageNumber:F,destArray:m,ignoreDestinationZoom:this._ignoreDestinationZoom})},w=new WeakSet,Wn=function(i){if(!Array.isArray(i))return!1;const y=i.length;if(y<2)return!1;const m=i[0];if(!(typeof m=="object"&&Number.isInteger(m.num)&&Number.isInteger(m.gen))&&!(Number.isInteger(m)&&m>=0))return!1;const h=i[1];if(!(typeof h=="object"&&typeof h.name=="string"))return!1;let F=!0;switch(h.name){case"XYZ":if(y!==5)return!1;break;case"Fit":case"FitB":return y===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(y!==3)return!1;break;case"FitR":if(y!==6)return!1;F=!1;break;default:return!1}for(let A=2;A<y;A++){const G=i[A];if(!(typeof G=="number"||F&&G===null))return!1}return!0},I(S,w);let b=S;R.PDFLinkService=b;class u{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(i){}get rotation(){return 0}set rotation(i){}get isInPresentationMode(){return!1}async goToDestination(i){}goToPage(i){}addLinkAttributes(i,y,m=!1){M(i,{url:y,enabled:this.externalLinkEnabled})}getDestinationHash(i){return"#"}getAnchorUrl(i){return"#"}setHash(i){}executeNamedAction(i){}executeSetOCGState(i){}cachePageRef(i,y){}}R.SimpleLinkService=u},(O,R,T)=>{var b,u,Bi;Object.defineProperty(R,"__esModule",{value:!0}),R.AnnotationLayerBuilder=void 0;var c=T(4),r=T(7),D=T(2);class M{constructor({pageDiv:C,pdfPage:w,linkService:p,downloadManager:S,annotationStorage:s=null,imageResourcesPath:i="",renderForms:y=!0,l10n:m=r.NullL10n,enableScripting:h=!1,hasJSActionsPromise:F=null,fieldObjectsPromise:A=null,annotationCanvasMap:G=null,accessibilityManager:ie=null}){I(this,u);I(this,b,null);this.pageDiv=C,this.pdfPage=w,this.linkService=p,this.downloadManager=S,this.imageResourcesPath=i,this.renderForms=y,this.l10n=m,this.annotationStorage=s,this.enableScripting=h,this._hasJSActionsPromise=F||Promise.resolve(!1),this._fieldObjectsPromise=A||Promise.resolve(null),this._annotationCanvasMap=G,this._accessibilityManager=ie,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=p.eventBus}async render(C,w="display"){var y;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:C.clone({dontFlip:!0})});return}const[p,S,s]=await Promise.all([this.pdfPage.getAnnotations({intent:w}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const i=this.div=document.createElement("div");if(i.className="annotationLayer",this.pageDiv.append(i),p.length===0){this.hide();return}this.annotationLayer=new c.AnnotationLayer({div:i,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:C.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:p,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:S,fieldObjects:s}),this.linkService.isInPresentationMode&&j(this,u,Bi).call(this,D.PresentationModeState.FULLSCREEN),e(this,b)||(Z(this,b,m=>{j(this,u,Bi).call(this,m.state)}),(y=this._eventBus)==null||y._on("presentationmodechanged",e(this,b)))}cancel(){var C;this._cancelled=!0,e(this,b)&&((C=this._eventBus)==null||C._off("presentationmodechanged",e(this,b)),Z(this,b,null))}hide(){this.div&&(this.div.hidden=!0)}}b=new WeakMap,u=new WeakSet,Bi=function(C){if(!this.div)return;let w=!1;switch(C){case D.PresentationModeState.FULLSCREEN:w=!0;break;case D.PresentationModeState.NORMAL:break;default:return}for(const p of this.div.childNodes)p.hasAttribute("data-internal-link")||(p.inert=w)},R.AnnotationLayerBuilder=M},(O,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.NullL10n=void 0,R.getL10nFallback=c;const T={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};T.print_progress_percent="{{progress}}%";function c(M,b){switch(M){case"find_match_count":M=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":M=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return T[M]||""}function r(M,b){return b?M.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,v)=>v in b?b[v]:"{{"+v+"}}"):M}const D={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(M,b=null,u=c(M,b)){return r(u,b)},async translate(M){}};R.NullL10n=D},(O,R,T)=>{var M;Object.defineProperty(R,"__esModule",{value:!0}),R.DownloadManager=void 0;var c=T(4);function r(b,u){const v=document.createElement("a");if(!v.click)throw new Error('DownloadManager: "a.click()" is not supported.');v.href=b,v.target="_parent","download"in v&&(v.download=u),(document.body||document.documentElement).append(v),v.click(),v.remove()}class D{constructor(){I(this,M,new WeakMap)}downloadUrl(u,v,f){if(!(0,c.createValidAbsoluteUrl)(u,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${u}`);return}r(u+"#pdfjs.action=download",v)}downloadData(u,v,f){const C=URL.createObjectURL(new Blob([u],{type:f}));r(C,v)}openOrDownloadData(u,v,f){const w=(0,c.isPdfFile)(f)?"application/pdf":"";return this.downloadData(v,f,w),!1}download(u,v,f,C){const w=URL.createObjectURL(u);r(w,f)}}M=new WeakMap,R.DownloadManager=D},(O,R)=>{var M;Object.defineProperty(R,"__esModule",{value:!0}),R.WaitOnType=R.EventBus=R.AutomationEventBus=void 0,R.waitOnEventOrTimeout=c;const T={EVENT:"event",TIMEOUT:"timeout"};R.WaitOnType=T;function c({target:b,name:u,delay:v=0}){return new Promise(function(f,C){if(typeof b!="object"||!(u&&typeof u=="string")||!(Number.isInteger(v)&&v>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function w(i){b instanceof r?b._off(u,p):b.removeEventListener(u,p),s&&clearTimeout(s),f(i)}const p=w.bind(null,T.EVENT);b instanceof r?b._on(u,p):b.addEventListener(u,p);const S=w.bind(null,T.TIMEOUT),s=setTimeout(S,v)})}class r{constructor(){I(this,M,Object.create(null))}on(u,v,f=null){this._on(u,v,{external:!0,once:f==null?void 0:f.once})}off(u,v,f=null){this._off(u,v,{external:!0,once:f==null?void 0:f.once})}dispatch(u,v){const f=e(this,M)[u];if(!f||f.length===0)return;let C;for(const{listener:w,external:p,once:S}of f.slice(0)){if(S&&this._off(u,w),p){(C||(C=[])).push(w);continue}w(v)}if(C){for(const w of C)w(v);C=null}}_on(u,v,f=null){var w;((w=e(this,M))[u]||(w[u]=[])).push({listener:v,external:(f==null?void 0:f.external)===!0,once:(f==null?void 0:f.once)===!0})}_off(u,v,f=null){const C=e(this,M)[u];if(C){for(let w=0,p=C.length;w<p;w++)if(C[w].listener===v){C.splice(w,1);return}}}}M=new WeakMap,R.EventBus=r;class D extends r{dispatch(u,v){throw new Error("Not implemented: AutomationEventBus.dispatch")}}R.AutomationEventBus=D},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.GenericL10n=void 0,T(11);var c=T(7);const r={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function D(b){return r[b==null?void 0:b.toLowerCase()]||b}class M{constructor(u){const{webL10n:v}=document;this._lang=u,this._ready=new Promise((f,C)=>{v.setLanguage(D(u),()=>{f(v)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(u,v=null,f=(0,c.getL10nFallback)(u,v)){return(await this._ready).get(u,v,f)}async translate(u){return(await this._ready).translate(u)}}R.GenericL10n=M},()=>{document.webL10n=function(O,R){var T={},c="",r="textContent",D="",M={},b="loading",u=!0;function v(){return R.querySelectorAll('link[type="application/l10n"]')}function f(){var E=R.querySelector('script[type="application/l10n"]');return E?JSON.parse(E.innerHTML):null}function C(E){return E?E.querySelectorAll("*[data-l10n-id]"):[]}function w(E){if(!E)return{};var q=E.getAttribute("data-l10n-id"),J=E.getAttribute("data-l10n-args"),Y={};if(J)try{Y=JSON.parse(J)}catch{console.warn("could not parse arguments for #"+q)}return{id:q,args:Y}}function p(E,q,J){q=q||function(le){},J=J||function(){};var Y=new XMLHttpRequest;Y.open("GET",E,u),Y.overrideMimeType&&Y.overrideMimeType("text/plain; charset=utf-8"),Y.onreadystatechange=function(){Y.readyState==4&&(Y.status==200||Y.status===0?q(Y.responseText):J())},Y.onerror=J,Y.ontimeout=J;try{Y.send(null)}catch{J()}}function S(E,q,J,Y){var H=E.replace(/[^\/]*$/,"")||"./";function le(Ee){return Ee.lastIndexOf("\\")<0?Ee:Ee.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function $(Ee,we){var N={},a=/^\s*|\s*$/,d=/^\s*#|^\s*$/,l=/^\s*\[(.*)\]\s*$/,P=/^\s*@import\s+url\((.*)\)\s*$/i,x=/^([^=\s]*)\s*=\s*(.+)$/;function U(ne,_e,pe){var Pe=ne.replace(a,"").split(/[\r\n]+/),se="*",be=q.split("-",1)[0],ge=!1,Fe="";function De(){for(;;){if(!Pe.length){pe();return}var xe=Pe.shift();if(!d.test(xe)){if(_e){if(Fe=l.exec(xe),Fe){se=Fe[1].toLowerCase(),ge=se!=="*"&&se!==q&&se!==be;continue}else if(ge)continue;if(Fe=P.exec(xe),Fe){K(H+Fe[1],De);return}}var de=xe.match(x);de&&de.length==3&&(N[de[1]]=le(de[2]))}}}De()}function K(ne,_e){p(ne,function(pe){U(pe,!1,_e)},function(){console.warn(ne+" not found."),_e()})}U(Ee,!0,function(){we(N)})}p(E,function(Ee){c+=Ee,$(Ee,function(we){for(var N in we){var a,d,l=N.lastIndexOf(".");l>0?(a=N.substring(0,l),d=N.substring(l+1)):(a=N,d=r),T[a]||(T[a]={}),T[a][d]=we[N]}J&&J()})},Y)}function s(E,q){E&&(E=E.toLowerCase()),q=q||function(){},i(),D=E;var J=v(),Y=J.length;if(Y===0){var H=f();if(H&&H.locales&&H.default_locale){if(console.log("using the embedded JSON directory, early way out"),T=H.locales[E],!T){var le=H.default_locale.toLowerCase();for(var $ in H.locales)if($=$.toLowerCase(),$===E){T=H.locales[E];break}else $===le&&(T=H.locales[le])}q()}else console.log("no resource to load, early way out");b="complete";return}var Ee=null,we=0;Ee=function(){we++,we>=Y&&(q(),b="complete")};function N(l){var P=l.href;this.load=function(x,U){S(P,x,U,function(){console.warn(P+" not found."),console.warn('"'+x+'" resource not found'),D="",U()})}}for(var a=0;a<Y;a++){var d=new N(J[a]);d.load(E,Ee)}}function i(){T={},c="",D=""}function y(E){var q={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function J($,Ee){return Ee.indexOf($)!==-1}function Y($,Ee,we){return Ee<=$&&$<=we}var H={0:function($){return"other"},1:function($){return Y($%100,3,10)?"few":$===0?"zero":Y($%100,11,99)?"many":$==2?"two":$==1?"one":"other"},2:function($){return $!==0&&$%10===0?"many":$==2?"two":$==1?"one":"other"},3:function($){return $==1?"one":"other"},4:function($){return Y($,0,1)?"one":"other"},5:function($){return Y($,0,2)&&$!=2?"one":"other"},6:function($){return $===0?"zero":$%10==1&&$%100!=11?"one":"other"},7:function($){return $==2?"two":$==1?"one":"other"},8:function($){return Y($,3,6)?"few":Y($,7,10)?"many":$==2?"two":$==1?"one":"other"},9:function($){return $===0||$!=1&&Y($%100,1,19)?"few":$==1?"one":"other"},10:function($){return Y($%10,2,9)&&!Y($%100,11,19)?"few":$%10==1&&!Y($%100,11,19)?"one":"other"},11:function($){return Y($%10,2,4)&&!Y($%100,12,14)?"few":$%10===0||Y($%10,5,9)||Y($%100,11,14)?"many":$%10==1&&$%100!=11?"one":"other"},12:function($){return Y($,2,4)?"few":$==1?"one":"other"},13:function($){return Y($%10,2,4)&&!Y($%100,12,14)?"few":$!=1&&Y($%10,0,1)||Y($%10,5,9)||Y($%100,12,14)?"many":$==1?"one":"other"},14:function($){return Y($%100,3,4)?"few":$%100==2?"two":$%100==1?"one":"other"},15:function($){return $===0||Y($%100,2,10)?"few":Y($%100,11,19)?"many":$==1?"one":"other"},16:function($){return $%10==1&&$!=11?"one":"other"},17:function($){return $==3?"few":$===0?"zero":$==6?"many":$==2?"two":$==1?"one":"other"},18:function($){return $===0?"zero":Y($,0,2)&&$!==0&&$!=2?"one":"other"},19:function($){return Y($,2,10)?"few":Y($,0,1)?"one":"other"},20:function($){return(Y($%10,3,4)||$%10==9)&&!(Y($%100,10,19)||Y($%100,70,79)||Y($%100,90,99))?"few":$%1e6===0&&$!==0?"many":$%10==2&&!J($%100,[12,72,92])?"two":$%10==1&&!J($%100,[11,71,91])?"one":"other"},21:function($){return $===0?"zero":$==1?"one":"other"},22:function($){return Y($,0,1)||Y($,11,99)?"one":"other"},23:function($){return Y($%10,1,2)||$%20===0?"one":"other"},24:function($){return Y($,3,10)||Y($,13,19)?"few":J($,[2,12])?"two":J($,[1,11])?"one":"other"}},le=q[E.replace(/-.*$/,"")];return le in H?H[le]:(console.warn("plural form unknown for ["+E+"]"),function(){return"other"})}M.plural=function(E,q,J,Y){var H=parseFloat(q);if(isNaN(H)||Y!=r)return E;M._pluralRules||(M._pluralRules=y(D));var le="["+M._pluralRules(H)+"]";return H===0&&J+"[zero]"in T?E=T[J+"[zero]"][Y]:H==1&&J+"[one]"in T?E=T[J+"[one]"][Y]:H==2&&J+"[two]"in T?E=T[J+"[two]"][Y]:J+le in T?E=T[J+le][Y]:J+"[other]"in T&&(E=T[J+"[other]"][Y]),E};function m(E,q,J){var Y=T[E];if(!Y){if(console.warn("#"+E+" is undefined."),!J)return null;Y=J}var H={};for(var le in Y){var $=Y[le];$=h($,q,E,le),$=F($,q,E),H[le]=$}return H}function h(E,q,J,Y){var H=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,le=H.exec(E);if(!le||!le.length)return E;var $=le[1],Ee=le[2],we;if(q&&Ee in q?we=q[Ee]:Ee in T&&(we=T[Ee]),$ in M){var N=M[$];E=N(E,we,J,Y)}return E}function F(E,q,J){var Y=/\{\{\s*(.+?)\s*\}\}/g;return E.replace(Y,function(H,le){return q&&le in q?q[le]:le in T?T[le]:(console.log("argument {{"+le+"}} for #"+J+" is undefined."),H)})}function A(E){var q=w(E);if(q.id){var J=m(q.id,q.args);if(!J){console.warn("#"+q.id+" is undefined.");return}if(J[r]){if(G(E)===0)E[r]=J[r];else{for(var Y=E.childNodes,H=!1,le=0,$=Y.length;le<$;le++)Y[le].nodeType===3&&/\S/.test(Y[le].nodeValue)&&(H?Y[le].nodeValue="":(Y[le].nodeValue=J[r],H=!0));if(!H){var Ee=R.createTextNode(J[r]);E.prepend(Ee)}}delete J[r]}for(var we in J)E[we]=J[we]}}function G(E){if(E.children)return E.children.length;if(typeof E.childElementCount<"u")return E.childElementCount;for(var q=0,J=0;J<E.childNodes.length;J++)q+=E.nodeType===1?1:0;return q}function ie(E){E=E||R.documentElement;for(var q=C(E),J=q.length,Y=0;Y<J;Y++)A(q[Y]);A(E)}return{get:function(E,q,J){var Y=E.lastIndexOf("."),H=r;Y>0&&(H=E.substring(Y+1),E=E.substring(0,Y));var le;J&&(le={},le[H]=J);var $=m(E,q,le);return $&&H in $?$[H]:"{{"+E+"}}"},getData:function(){return T},getText:function(){return c},getLanguage:function(){return D},setLanguage:function(E,q){s(E,function(){q&&q()})},getDirection:function(){var E=["ar","he","fa","ps","ur"],q=D.split("-",1)[0];return E.indexOf(q)>=0?"rtl":"ltr"},translate:ie,getReadyState:function(){return b},ready:function(E){if(E)b=="complete"||b=="interactive"?O.setTimeout(function(){E()}):R.addEventListener&&R.addEventListener("localized",function q(){R.removeEventListener("localized",q),E()});else return}}}(window,document)},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.PDFHistory=void 0,R.isDestArraysEqual=C,R.isDestHashesEqual=f;var c=T(2),r=T(9);const D=1e3,M=50,b=1e3;function u(){return document.location.hash}class v{constructor({linkService:p,eventBus:S}){this.linkService=p,this.eventBus=S,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",s=>{this._isPagesLoaded=!!s.pagesCount},{once:!0})})}initialize({fingerprint:p,resetHistory:S=!1,updateUrl:s=!1}){if(!p||typeof p!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const i=this._fingerprint!==""&&this._fingerprint!==p;this._fingerprint=p,this._updateUrl=s===!0,this._initialized=!0,this._bindEvents();const y=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=u(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(y,!0)||S){const{hash:h,page:F,rotation:A}=this._parseCurrentHash(!0);if(!h||i||S){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:h,page:F,rotation:A},!0);return}const m=y.destination;this._updateInternalState(m,y.uid,!0),m.rotation!==void 0&&(this._initialRotation=m.rotation),m.dest?(this._initialBookmark=JSON.stringify(m.dest),this._destination.page=null):m.hash?this._initialBookmark=m.hash:m.page&&(this._initialBookmark=`page=${m.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:p=null,explicitDest:S,pageNumber:s}){if(!this._initialized)return;if(p&&typeof p!="string"){console.error(`PDFHistory.push: "${p}" is not a valid namedDest parameter.`);return}else if(Array.isArray(S)){if(!this._isValidPage(s)&&(s!==null||this._destination)){console.error(`PDFHistory.push: "${s}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${S}" is not a valid explicitDest parameter.`);return}const i=p||JSON.stringify(S);if(!i)return;let y=!1;if(this._destination&&(f(this._destination.hash,i)||C(this._destination.dest,S))){if(this._destination.page)return;y=!0}this._popStateInProgress&&!y||(this._pushOrReplaceState({dest:S,hash:i,page:s,rotation:this.linkService.rotation},y),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(p){var S;if(this._initialized){if(!this._isValidPage(p)){console.error(`PDFHistory.pushPage: "${p}" is not a valid page number.`);return}((S=this._destination)==null?void 0:S.page)!==p&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${p}`,page:p,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const p=window.history.state;this._isValidState(p)&&p.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const p=window.history.state;this._isValidState(p)&&p.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(p,S=!1){const s=S||!this._destination,i={fingerprint:this._fingerprint,uid:s?this._uid:this._uid+1,destination:p};this._updateInternalState(p,i.uid);let y;if(this._updateUrl&&(p!=null&&p.hash)){const m=document.location.href.split("#")[0];m.startsWith("file://")||(y=`${m}#${p.hash}`)}s?window.history.replaceState(i,"",y):window.history.pushState(i,"",y)}_tryPushCurrentPosition(p=!1){if(!this._position)return;let S=this._position;if(p&&(S=Object.assign(Object.create(null),this._position),S.temporary=!0),!this._destination){this._pushOrReplaceState(S);return}if(this._destination.temporary){this._pushOrReplaceState(S,!0);return}if(this._destination.hash===S.hash||!this._destination.page&&this._numPositionUpdates<=M)return;let s=!1;if(this._destination.page>=S.first&&this._destination.page<=S.page){if(this._destination.dest!==void 0||!this._destination.first)return;s=!0}this._pushOrReplaceState(S,s)}_isValidPage(p){return Number.isInteger(p)&&p>0&&p<=this.linkService.pagesCount}_isValidState(p,S=!1){if(!p)return!1;if(p.fingerprint!==this._fingerprint)if(S){if(typeof p.fingerprint!="string"||p.fingerprint.length!==this._fingerprint.length)return!1;const[s]=performance.getEntriesByType("navigation");if((s==null?void 0:s.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(p.uid)||p.uid<0||p.destination===null||typeof p.destination!="object")}_updateInternalState(p,S,s=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),s&&(p!=null&&p.temporary)&&delete p.temporary,this._destination=p,this._uid=S,this._maxUid=Math.max(this._maxUid,S),this._numPositionUpdates=0}_parseCurrentHash(p=!1){const S=unescape(u()).substring(1),s=(0,c.parseQueryString)(S),i=s.get("nameddest")||"";let y=s.get("page")|0;return(!this._isValidPage(y)||p&&i.length>0)&&(y=null),{hash:S,page:y,rotation:this.linkService.rotation}}_updateViewarea({location:p}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:p.pdfOpenParams.substring(1),page:this.linkService.page,first:p.pageNumber,rotation:p.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},b))}_popState({state:p}){const S=u(),s=this._currentHash!==S;if(this._currentHash=S,!p){this._uid++;const{hash:y,page:m,rotation:h}=this._parseCurrentHash();this._pushOrReplaceState({hash:y,page:m,rotation:h},!0);return}if(!this._isValidState(p))return;this._popStateInProgress=!0,s&&(this._blockHashChange++,(0,r.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:D}).then(()=>{this._blockHashChange--}));const i=p.destination;this._updateInternalState(i,p.uid,!0),(0,c.isValidRotation)(i.rotation)&&(this.linkService.rotation=i.rotation),i.dest?this.linkService.goToDestination(i.dest):i.hash?this.linkService.setHash(i.hash):i.page&&(this.linkService.page=i.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}R.PDFHistory=v;function f(w,p){return typeof w!="string"||typeof p!="string"?!1:w===p||(0,c.parseQueryString)(w).get("nameddest")===p}function C(w,p){function S(s,i){if(typeof s!=typeof i||Array.isArray(s)||Array.isArray(i))return!1;if(s!==null&&typeof s=="object"&&i!==null){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const y in s)if(!S(s[y],i[y]))return!1;return!0}return s===i||Number.isNaN(s)&&Number.isNaN(i)}if(!(Array.isArray(w)&&Array.isArray(p))||w.length!==p.length)return!1;for(let s=0,i=w.length;s<i;s++)if(!S(w[s],p[s]))return!1;return!0}},(O,R,T)=>{var m,h,F,A,G,ie,E,q,J,Y,H,zt,$,Vi,we,Ui,a,Hi,l,Wi,x,jn,K,Gn,_e,ji;Object.defineProperty(R,"__esModule",{value:!0}),R.PDFPageView=void 0;var c=T(4),r=T(2),D=T(14),M=T(6),b=T(15),u=T(7),v=T(5),f=T(16),C=T(17),w=T(18),p=T(19),S=T(20);const s=b.compatibilityParams.maxCanvasPixels||16777216,i=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new v.SimpleLinkService}});class y{constructor(se){I(this,H);I(this,$);I(this,we);I(this,a);I(this,l);I(this,x);I(this,K);I(this,_e);I(this,m,c.AnnotationMode.ENABLE_FORMS);I(this,h,!1);I(this,F,null);I(this,A,null);I(this,G,null);I(this,ie,null);I(this,E,r.RenderingStates.INITIAL);I(this,q,r.TextLayerMode.ENABLE);I(this,J,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});I(this,Y,new WeakMap);var De;const be=se.container,ge=se.defaultViewport;this.id=se.id,this.renderingId="page"+this.id,Z(this,F,se.layerProperties||i),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=se.scale||r.DEFAULT_SCALE,this.viewport=ge,this.pdfPageRotate=ge.rotation,this._optionalContentConfigPromise=se.optionalContentConfigPromise||null,Z(this,q,se.textLayerMode??r.TextLayerMode.ENABLE),Z(this,m,se.annotationMode??c.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=se.imageResourcesPath||"",this.isOffscreenCanvasSupported=se.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=se.maxCanvasPixels??s,this.pageColors=se.pageColors||null,this.eventBus=se.eventBus,this.renderingQueue=se.renderingQueue,this.l10n=se.l10n||u.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((De=this.renderingQueue)!=null&&De.hasViewer()),this._container=be,se.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const Fe=document.createElement("div");if(Fe.className="page",Fe.setAttribute("data-page-number",this.id),Fe.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(xe=>{Fe.setAttribute("aria-label",xe)}),this.div=Fe,j(this,H,zt).call(this),be==null||be.append(Fe),this._isStandalone){be==null||be.style.setProperty("--scale-factor",this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:xe}=se;xe&&xe.then(de=>{xe===this._optionalContentConfigPromise&&(e(this,J).initialOptionalContent=de.hasInitialVisibility)})}}get renderingState(){return e(this,E)}set renderingState(se){if(se!==e(this,E))switch(Z(this,E,se),e(this,A)&&(clearTimeout(e(this,A)),Z(this,A,null)),se){case r.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case r.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),Z(this,A,setTimeout(()=>{this.div.classList.add("loading"),Z(this,A,null)},0));break;case r.RenderingStates.INITIAL:case r.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(se){var ge,Fe,De;this._isStandalone&&(((ge=this.pageColors)==null?void 0:ge.foreground)==="CanvasText"||((Fe=this.pageColors)==null?void 0:Fe.background)==="Canvas")&&((De=this._container)==null||De.style.setProperty("--hcm-highligh-filter",se.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=se,this.pdfPageRotate=se.rotate;const be=(this.rotation+this.pdfPageRotate)%360;this.viewport=se.getViewport({scale:this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:be}),j(this,H,zt).call(this),this.reset()}destroy(){var se;this.reset(),(se=this.pdfPage)==null||se.cleanup()}get _textHighlighter(){return(0,c.shadow)(this,"_textHighlighter",new w.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:e(this,F).call(this).findController}))}_resetZoomLayer(se=!1){if(!this.zoomLayer)return;const be=this.zoomLayer.firstChild;e(this,Y).delete(be),be.width=0,be.height=0,se&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:se=!1,keepAnnotationLayer:be=!1,keepAnnotationEditorLayer:ge=!1,keepXfaLayer:Fe=!1,keepTextLayer:De=!1}={}){var Le,Be,Ue,$e,Ge;this.cancelRendering({keepAnnotationLayer:be,keepAnnotationEditorLayer:ge,keepXfaLayer:Fe,keepTextLayer:De}),this.renderingState=r.RenderingStates.INITIAL;const xe=this.div,de=xe.childNodes,oe=se&&this.zoomLayer||null,te=be&&((Le=this.annotationLayer)==null?void 0:Le.div)||null,ee=ge&&((Be=this.annotationEditorLayer)==null?void 0:Be.div)||null,me=Fe&&((Ue=this.xfaLayer)==null?void 0:Ue.div)||null,Te=De&&(($e=this.textLayer)==null?void 0:$e.div)||null;for(let Ke=de.length-1;Ke>=0;Ke--){const Xe=de[Ke];switch(Xe){case oe:case te:case ee:case me:case Te:continue}Xe.remove()}xe.removeAttribute("data-loaded"),te&&this.annotationLayer.hide(),ee&&this.annotationEditorLayer.hide(),me&&this.xfaLayer.hide(),Te&&this.textLayer.hide(),(Ge=this.structTreeLayer)==null||Ge.hide(),oe||(this.canvas&&(e(this,Y).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:se=0,rotation:be=null,optionalContentConfigPromise:ge=null,drawingDelay:Fe=-1}){var xe;this.scale=se||this.scale,typeof be=="number"&&(this.rotation=be),ge instanceof Promise&&(this._optionalContentConfigPromise=ge,ge.then(de=>{ge===this._optionalContentConfigPromise&&(e(this,J).initialOptionalContent=de.hasInitialVisibility)})),e(this,J).directDrawing=!0;const De=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:De}),j(this,H,zt).call(this),this._isStandalone&&((xe=this._container)==null||xe.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let de=!1;if(e(this,h)){if(this.maxCanvasPixels===0)de=!0;else if(this.maxCanvasPixels>0){const{width:te,height:ee}=this.viewport,{sx:me,sy:Te}=this.outputScale;de=(Math.floor(te)*me|0)*(Math.floor(ee)*Te|0)>this.maxCanvasPixels}}const oe=!de&&Fe>=0&&Fe<1e3;if(oe||de){if(oe&&this.renderingState!==r.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:Fe}),this.renderingState=r.RenderingStates.FINISHED,e(this,J).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!oe,hideTextLayer:oe}),oe)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:e(this,ie)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:se=!1,keepAnnotationEditorLayer:be=!1,keepXfaLayer:ge=!1,keepTextLayer:Fe=!1,cancelExtraDelay:De=0}={}){var xe;this.renderTask&&(this.renderTask.cancel(De),this.renderTask=null),this.resume=null,this.textLayer&&(!Fe||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!se||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!be||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!ge||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(xe=this._textHighlighter)==null||xe.disable())}cssTransform({target:se,redrawAnnotationLayer:be=!1,redrawAnnotationEditorLayer:ge=!1,redrawXfaLayer:Fe=!1,redrawTextLayer:De=!1,hideTextLayer:xe=!1}){var oe;if(!se.hasAttribute("zooming")){se.setAttribute("zooming",!0);const{style:te}=se;te.width=te.height=""}const de=e(this,Y).get(se);if(this.viewport!==de){const te=this.viewport.rotation-de.rotation,ee=Math.abs(te);let me=1,Te=1;if(ee===90||ee===270){const{width:Le,height:Be}=this.viewport;me=Be/Le,Te=Le/Be}se.style.transform=`rotate(${te}deg) scale(${me}, ${Te})`}be&&this.annotationLayer&&j(this,$,Vi).call(this),ge&&this.annotationEditorLayer&&j(this,we,Ui).call(this),Fe&&this.xfaLayer&&j(this,a,Hi).call(this),this.textLayer&&(xe?(this.textLayer.hide(),(oe=this.structTreeLayer)==null||oe.hide()):De&&j(this,l,Wi).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(se,be){return this.viewport.convertToPdfPoint(se,be)}async draw(){this.renderingState!==r.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:se,l10n:be,pageColors:ge,pdfPage:Fe,viewport:De}=this;if(!Fe)throw this.renderingState=r.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=r.RenderingStates.RUNNING;const xe=document.createElement("div");if(xe.classList.add("canvasWrapper"),se.append(xe),!this.textLayer&&e(this,q)!==r.TextLayerMode.DISABLE&&!Fe.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new C.TextAccessibilityManager),this.textLayer=new p.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:e(this,q)===r.TextLayerMode.ENABLE_PERMISSIONS}),se.append(this.textLayer.div)),!this.annotationLayer&&e(this,m)!==c.AnnotationMode.DISABLE){const{annotationStorage:_,downloadManager:k,enableScripting:he,fieldObjectsPromise:ae,hasJSActionsPromise:ue,linkService:ve}=e(this,F).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new M.AnnotationLayerBuilder({pageDiv:se,pdfPage:Fe,annotationStorage:_,imageResourcesPath:this.imageResourcesPath,renderForms:e(this,m)===c.AnnotationMode.ENABLE_FORMS,linkService:ve,downloadManager:k,l10n:be,enableScripting:he,hasJSActionsPromise:ue,fieldObjectsPromise:ae,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const de=_=>{if(Te==null||Te(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=r.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=r.RenderingStates.RUNNING,_()};return}_()},{width:oe,height:te}=De,ee=document.createElement("canvas");ee.setAttribute("role","presentation"),ee.hidden=!0;const me=!!(ge!=null&&ge.background&&(ge!=null&&ge.foreground));let Te=_=>{(!me||_)&&(ee.hidden=!1,Te=null)};xe.append(ee),this.canvas=ee;const Le=ee.getContext("2d",{alpha:!1}),Be=this.outputScale=new r.OutputScale;if(this.maxCanvasPixels===0){const _=1/this.scale;Be.sx*=_,Be.sy*=_,Z(this,h,!0)}else if(this.maxCanvasPixels>0){const _=oe*te,k=Math.sqrt(this.maxCanvasPixels/_);Be.sx>k||Be.sy>k?(Be.sx=k,Be.sy=k,Z(this,h,!0)):Z(this,h,!1)}const Ue=(0,r.approximateFraction)(Be.sx),$e=(0,r.approximateFraction)(Be.sy);ee.width=(0,r.roundToDivide)(oe*Be.sx,Ue[0]),ee.height=(0,r.roundToDivide)(te*Be.sy,$e[0]);const{style:Ge}=ee;Ge.width=(0,r.roundToDivide)(oe,Ue[1])+"px",Ge.height=(0,r.roundToDivide)(te,$e[1])+"px",e(this,Y).set(ee,De);const Ke=Be.scaled?[Be.sx,0,0,Be.sy,0,0]:null,Xe={canvasContext:Le,transform:Ke,viewport:De,annotationMode:e(this,m),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:ge},Ze=this.renderTask=this.pdfPage.render(Xe);Ze.onContinue=de;const ye=Ze.promise.then(async()=>{var _;if(Te==null||Te(!0),await j(this,_e,ji).call(this,Ze),j(this,l,Wi).call(this),this.annotationLayer&&await j(this,$,Vi).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:k}=e(this,F).call(this);if(!k)return;this.annotationEditorLayer=new D.AnnotationEditorLayerBuilder({uiManager:k,pageDiv:se,pdfPage:Fe,l10n:be,accessibilityManager:this._accessibilityManager,annotationLayer:(_=this.annotationLayer)==null?void 0:_.annotationLayer})}j(this,we,Ui).call(this)},_=>(_ instanceof c.RenderingCancelledException||Te==null||Te(!0),j(this,_e,ji).call(this,Ze,_)));if(Fe.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&se.append(this.xfaLayer.div);else{const{annotationStorage:_,linkService:k}=e(this,F).call(this);this.xfaLayer=new S.XfaLayerBuilder({pageDiv:se,pdfPage:Fe,annotationStorage:_,linkService:k})}j(this,a,Hi).call(this)}return se.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ye}setPageLabel(se){this.pageLabel=typeof se=="string"?se:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:se,initialOptionalContent:be,regularAnnotations:ge}=e(this,J);return se&&be&&ge?this.canvas:null}}m=new WeakMap,h=new WeakMap,F=new WeakMap,A=new WeakMap,G=new WeakMap,ie=new WeakMap,E=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,H=new WeakSet,zt=function(){const{viewport:se}=this;if(this.pdfPage){if(e(this,G)===se.rotation)return;Z(this,G,se.rotation)}(0,c.setLayerDimensions)(this.div,se,!0,!1)},$=new WeakSet,Vi=async function(){let se=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(be){console.error(`#renderAnnotationLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:se})}},we=new WeakSet,Ui=async function(){let se=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(be){console.error(`#renderAnnotationEditorLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:se})}},a=new WeakSet,Hi=async function(){let se=null;try{const be=await this.xfaLayer.render(this.viewport,"display");be!=null&&be.textDivs&&this._textHighlighter&&j(this,K,Gn).call(this,be.textDivs)}catch(be){console.error(`#renderXfaLayer: "${be}".`),se=be}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:se})}},l=new WeakSet,Wi=async function(){const{pdfPage:se,textLayer:be,viewport:ge}=this;if(!be)return;let Fe=null;try{if(!be.renderingDone){const De=se.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});be.setTextContentSource(De)}await be.render(ge)}catch(De){if(De instanceof c.AbortException)return;console.error(`#renderTextLayer: "${De}".`),Fe=De}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:be.numTextDivs,error:Fe}),j(this,x,jn).call(this)},x=new WeakSet,jn=async function(){var ge,Fe,De;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new f.StructTreeLayerBuilder);const se=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),be=(ge=this.structTreeLayer)==null?void 0:ge.render(se);be&&((Fe=this.canvas)==null||Fe.append(be)),(De=this.structTreeLayer)==null||De.show()},K=new WeakSet,Gn=async function(se){const be=await this.pdfPage.getTextContent(),ge=[];for(const Fe of be.items)ge.push(Fe.str);this._textHighlighter.setTextMapping(se,ge),this._textHighlighter.enable()},_e=new WeakSet,ji=async function(se,be=null){if(se===this.renderTask&&(this.renderTask=null),be instanceof c.RenderingCancelledException){Z(this,ie,null);return}if(Z(this,ie,be),this.renderingState=r.RenderingStates.FINISHED,this._resetZoomLayer(!0),e(this,J).regularAnnotations=!se.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:e(this,ie)}),be)throw be},R.PDFPageView=y},(O,R,T)=>{var M,b;Object.defineProperty(R,"__esModule",{value:!0}),R.AnnotationEditorLayerBuilder=void 0;var c=T(4),r=T(7);class D{constructor(v){I(this,M,null);I(this,b,void 0);this.pageDiv=v.pageDiv,this.pdfPage=v.pdfPage,this.accessibilityManager=v.accessibilityManager,this.l10n=v.l10n||r.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,Z(this,b,v.uiManager),Z(this,M,v.annotationLayer||null)}async render(v,f="display"){if(f!=="display"||this._cancelled)return;const C=v.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:C}),this.show();return}const w=this.div=document.createElement("div");w.className="annotationEditorLayer",w.tabIndex=0,w.hidden=!0,w.dir=e(this,b).direction,this.pageDiv.append(w),this.annotationEditorLayer=new c.AnnotationEditorLayer({uiManager:e(this,b),div:w,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:C,annotationLayer:e(this,M)});const p={viewport:C,div:w,annotations:null,intent:f};this.annotationEditorLayer.render(p),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}M=new WeakMap,b=new WeakMap,R.AnnotationEditorLayerBuilder=D},(O,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.compatibilityParams=R.OptionKind=R.AppOptions=void 0;const T=Object.create(null);R.compatibilityParams=T;{const b=navigator.userAgent||"",u=navigator.platform||"",v=navigator.maxTouchPoints||1,f=/Android/.test(b),C=/\b(iPad|iPhone|iPod)(?=;)/.test(b)||u==="MacIntel"&&v>1;(function(){(C||f)&&(T.maxCanvasPixels=5242880)})()}const c={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};R.OptionKind=c;const r={annotationEditorMode:{value:0,kind:c.VIEWER+c.PREFERENCE},annotationMode:{value:2,kind:c.VIEWER+c.PREFERENCE},cursorToolOnLoad:{value:0,kind:c.VIEWER+c.PREFERENCE},defaultZoomDelay:{value:400,kind:c.VIEWER+c.PREFERENCE},defaultZoomValue:{value:"",kind:c.VIEWER+c.PREFERENCE},disableHistory:{value:!1,kind:c.VIEWER},disablePageLabels:{value:!1,kind:c.VIEWER+c.PREFERENCE},enablePermissions:{value:!1,kind:c.VIEWER+c.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:c.VIEWER+c.PREFERENCE},enableScripting:{value:!0,kind:c.VIEWER+c.PREFERENCE},enableStampEditor:{value:!0,kind:c.VIEWER+c.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:c.VIEWER},externalLinkTarget:{value:0,kind:c.VIEWER+c.PREFERENCE},historyUpdateUrl:{value:!1,kind:c.VIEWER+c.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:c.VIEWER+c.PREFERENCE},imageResourcesPath:{value:"./images/",kind:c.VIEWER},maxCanvasPixels:{value:16777216,kind:c.VIEWER},forcePageColors:{value:!1,kind:c.VIEWER+c.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:c.VIEWER+c.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:c.VIEWER+c.PREFERENCE},pdfBugEnabled:{value:!1,kind:c.VIEWER+c.PREFERENCE},printResolution:{value:150,kind:c.VIEWER},sidebarViewOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},scrollModeOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},spreadModeOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},textLayerMode:{value:1,kind:c.VIEWER+c.PREFERENCE},viewerCssTheme:{value:0,kind:c.VIEWER+c.PREFERENCE},viewOnLoad:{value:0,kind:c.VIEWER+c.PREFERENCE},cMapPacked:{value:!0,kind:c.API},cMapUrl:{value:"../web/cmaps/",kind:c.API},disableAutoFetch:{value:!1,kind:c.API+c.PREFERENCE},disableFontFace:{value:!1,kind:c.API+c.PREFERENCE},disableRange:{value:!1,kind:c.API+c.PREFERENCE},disableStream:{value:!1,kind:c.API+c.PREFERENCE},docBaseUrl:{value:"",kind:c.API},enableXfa:{value:!0,kind:c.API+c.PREFERENCE},fontExtraProperties:{value:!1,kind:c.API},isEvalSupported:{value:!0,kind:c.API},isOffscreenCanvasSupported:{value:!0,kind:c.API},maxImageSize:{value:-1,kind:c.API},pdfBug:{value:!1,kind:c.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:c.API},verbosity:{value:1,kind:c.API},workerPort:{value:null,kind:c.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:c.WORKER}};r.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:c.VIEWER},r.disablePreferences={value:!1,kind:c.VIEWER},r.locale={value:navigator.language||"en-US",kind:c.VIEWER},r.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:c.VIEWER};const D=Object.create(null);class M{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(u){const v=D[u];if(v!==void 0)return v;const f=r[u];if(f!==void 0)return T[u]??f.value}static getAll(u=null){const v=Object.create(null);for(const f in r){const C=r[f];if(u){if(!(u&C.kind))continue;if(u===c.PREFERENCE){const p=C.value,S=typeof p;if(S==="boolean"||S==="string"||S==="number"&&Number.isInteger(p)){v[f]=p;continue}throw new Error(`Invalid type for preference: ${f}`)}}const w=D[f];v[f]=w!==void 0?w:T[f]??C.value}return v}static set(u,v){D[u]=v}static setAll(u){for(const v in u)D[v]=u[v]}static remove(u){delete D[u]}}R.AppOptions=M,M._hasUserOptions=function(){return Object.keys(D).length>0}},(O,R,T)=>{var b,u,Gi,f,zi;Object.defineProperty(R,"__esModule",{value:!0}),R.StructTreeLayerBuilder=void 0;var c=T(2);const r={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},D=/^H(\d+)$/;class M{constructor(){I(this,u);I(this,f);I(this,b,void 0)}get renderingDone(){return e(this,b)!==void 0}render(p){if(e(this,b)!==void 0)return e(this,b);const S=j(this,f,zi).call(this,p);return S==null||S.classList.add("structTree"),Z(this,b,S)}hide(){e(this,b)&&!e(this,b).hidden&&(e(this,b).hidden=!0)}show(){var p;(p=e(this,b))!=null&&p.hidden&&(e(this,b).hidden=!1)}}b=new WeakMap,u=new WeakSet,Gi=function(p,S){const{alt:s,id:i,lang:y}=p;s!==void 0&&S.setAttribute("aria-label",(0,c.removeNullCharacters)(s)),i!==void 0&&S.setAttribute("aria-owns",i),y!==void 0&&S.setAttribute("lang",(0,c.removeNullCharacters)(y,!0))},f=new WeakSet,zi=function(p){if(!p)return null;const S=document.createElement("span");if("role"in p){const{role:s}=p,i=s.match(D);i?(S.setAttribute("role","heading"),S.setAttribute("aria-level",i[1])):r[s]&&S.setAttribute("role",r[s])}if(j(this,u,Gi).call(this,p,S),p.children)if(p.children.length===1&&"id"in p.children[0])j(this,u,Gi).call(this,p.children[0],S);else for(const s of p.children)S.append(j(this,f,zi).call(this,s));return S},R.StructTreeLayerBuilder=M},(O,R,T)=>{var D,M,b,u,v,$t,C,$i;Object.defineProperty(R,"__esModule",{value:!0}),R.TextAccessibilityManager=void 0;var c=T(2);const p=class p{constructor(){I(this,C);I(this,D,!1);I(this,M,null);I(this,b,new Map);I(this,u,new Map)}setTextMapping(s){Z(this,M,s)}enable(){if(e(this,D))throw new Error("TextAccessibilityManager is already enabled.");if(!e(this,M))throw new Error("Text divs and strings have not been set.");if(Z(this,D,!0),Z(this,M,e(this,M).slice()),e(this,M).sort(j(p,v,$t)),e(this,b).size>0){const s=e(this,M);for(const[i,y]of e(this,b)){if(!document.getElementById(i)){e(this,b).delete(i);continue}j(this,C,$i).call(this,i,s[y])}}for(const[s,i]of e(this,u))this.addPointerInTextLayer(s,i);e(this,u).clear()}disable(){e(this,D)&&(e(this,u).clear(),Z(this,M,null),Z(this,D,!1))}removePointerInTextLayer(s){if(!e(this,D)){e(this,u).delete(s);return}const i=e(this,M);if(!i||i.length===0)return;const{id:y}=s,m=e(this,b).get(y);if(m===void 0)return;const h=i[m];e(this,b).delete(y);let F=h.getAttribute("aria-owns");F!=null&&F.includes(y)&&(F=F.split(" ").filter(A=>A!==y).join(" "),F?h.setAttribute("aria-owns",F):(h.removeAttribute("aria-owns"),h.setAttribute("role","presentation")))}addPointerInTextLayer(s,i){const{id:y}=s;if(!y)return null;if(!e(this,D))return e(this,u).set(s,i),null;i&&this.removePointerInTextLayer(s);const m=e(this,M);if(!m||m.length===0)return null;const h=(0,c.binarySearchFirstItem)(m,ie=>{var E;return j(E=p,v,$t).call(E,s,ie)<0}),F=Math.max(0,h-1),A=m[F];j(this,C,$i).call(this,y,A),e(this,b).set(y,F);const G=A.parentNode;return G!=null&&G.classList.contains("markedContent")?G.id:null}moveElementInDOM(s,i,y,m){const h=this.addPointerInTextLayer(y,m);if(!s.hasChildNodes())return s.append(i),h;const F=Array.from(s.childNodes).filter(ie=>ie!==i);if(F.length===0)return h;const A=y||i,G=(0,c.binarySearchFirstItem)(F,ie=>{var E;return j(E=p,v,$t).call(E,A,ie)<0});return G===0?F[0].before(i):F[G-1].after(i),h}};D=new WeakMap,M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakSet,$t=function(s,i){const y=s.getBoundingClientRect(),m=i.getBoundingClientRect();if(y.width===0&&y.height===0)return 1;if(m.width===0&&m.height===0)return-1;const h=y.y,F=y.y+y.height,A=y.y+y.height/2,G=m.y,ie=m.y+m.height,E=m.y+m.height/2;if(A<=G&&E>=F)return-1;if(E<=h&&A>=ie)return 1;const q=y.x+y.width/2,J=m.x+m.width/2;return q-J},C=new WeakSet,$i=function(s,i){const y=i.getAttribute("aria-owns");y!=null&&y.includes(s)||i.setAttribute("aria-owns",y?`${y} ${s}`:s),i.removeAttribute("role")},I(p,v);let r=p;R.TextAccessibilityManager=r},(O,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.TextHighlighter=void 0;class T{constructor({findController:r,eventBus:D,pageIndex:M}){this.findController=r,this.matches=[],this.eventBus=D,this.pageIdx=M,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(r,D){this.textDivs=r,this.textContentItemsStr=D}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=r=>{(r.pageIndex===this.pageIdx||r.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(r,D){if(!r)return[];const{textContentItemsStr:M}=this;let b=0,u=0;const v=M.length-1,f=[];for(let C=0,w=r.length;C<w;C++){let p=r[C];for(;b!==v&&p>=u+M[b].length;)u+=M[b].length,b++;b===M.length&&console.error("Could not find a matching mapping");const S={begin:{divIdx:b,offset:p-u}};for(p+=D[C];b!==v&&p>u+M[b].length;)u+=M[b].length,b++;S.end={divIdx:b,offset:p-u},f.push(S)}return f}_renderMatches(r){if(r.length===0)return;const{findController:D,pageIdx:M}=this,{textContentItemsStr:b,textDivs:u}=this,v=M===D.selected.pageIdx,f=D.selected.matchIdx,C=D.state.highlightAll;let w=null;const p={divIdx:-1,offset:void 0};function S(F,A){const G=F.divIdx;return u[G].textContent="",s(G,0,F.offset,A)}function s(F,A,G,ie){let E=u[F];if(E.nodeType===Node.TEXT_NODE){const Y=document.createElement("span");E.before(Y),Y.append(E),u[F]=Y,E=Y}const q=b[F].substring(A,G),J=document.createTextNode(q);if(ie){const Y=document.createElement("span");return Y.className=`${ie} appended`,Y.append(J),E.append(Y),ie.includes("selected")?Y.offsetLeft:0}return E.append(J),0}let i=f,y=i+1;if(C)i=0,y=r.length;else if(!v)return;let m=-1,h=-1;for(let F=i;F<y;F++){const A=r[F],G=A.begin;if(G.divIdx===m&&G.offset===h)continue;m=G.divIdx,h=G.offset;const ie=A.end,E=v&&F===f,q=E?" selected":"";let J=0;if(!w||G.divIdx!==w.divIdx?(w!==null&&s(w.divIdx,w.offset,p.offset),S(G)):s(w.divIdx,w.offset,G.offset),G.divIdx===ie.divIdx)J=s(G.divIdx,G.offset,ie.offset,"highlight"+q);else{J=s(G.divIdx,G.offset,p.offset,"highlight begin"+q);for(let Y=G.divIdx+1,H=ie.divIdx;Y<H;Y++)u[Y].className="highlight middle"+q;S(ie,"highlight end"+q)}w=ie,E&&D.scrollMatchIntoView({element:u[G.divIdx],selectedLeft:J,pageIndex:M,matchIndex:f})}w&&s(w.divIdx,w.offset,p.offset)}_updateMatches(r=!1){if(!this.enabled&&!r)return;const{findController:D,matches:M,pageIdx:b}=this,{textContentItemsStr:u,textDivs:v}=this;let f=-1;for(const p of M){const S=Math.max(f,p.begin.divIdx);for(let s=S,i=p.end.divIdx;s<=i;s++){const y=v[s];y.textContent=u[s],y.className=""}f=p.end.divIdx+1}if(!(D!=null&&D.highlightMatches)||r)return;const C=D.pageMatches[b]||null,w=D.pageMatchesLength[b]||null;this.matches=this._convertMatches(C,w),this._renderMatches(this.matches)}}R.TextHighlighter=T},(O,R,T)=>{var M,b,u,v,f,zn,w,$n;Object.defineProperty(R,"__esModule",{value:!0}),R.TextLayerBuilder=void 0;var c=T(4),r=T(2);class D{constructor({highlighter:s=null,accessibilityManager:i=null,isOffscreenCanvasSupported:y=!0,enablePermissions:m=!1}){I(this,f);I(this,w);I(this,M,!1);I(this,b,0);I(this,u,0);I(this,v,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=s,this.accessibilityManager=i,this.isOffscreenCanvasSupported=y,Z(this,M,m===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(s){var m,h,F;if(!e(this,v))throw new Error('No "textContentSource" parameter specified.');const i=s.scale*(globalThis.devicePixelRatio||1),{rotation:y}=s;if(this.renderingDone){const A=y!==e(this,b),G=i!==e(this,u);(A||G)&&(this.hide(),(0,c.updateTextLayer)({container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:G,mustRotate:A}),Z(this,u,i),Z(this,b,y)),this.show();return}this.cancel(),(m=this.highlighter)==null||m.setTextMapping(this.textDivs,this.textContentItemsStr),(h=this.accessibilityManager)==null||h.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,c.renderTextLayer)({textContentSource:e(this,v),container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,j(this,f,zn).call(this),Z(this,u,i),Z(this,b,y),this.show(),(F=this.accessibilityManager)==null||F.enable()}hide(){var s;this.div.hidden||((s=this.highlighter)==null||s.disable(),this.div.hidden=!0)}show(){var s;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(s=this.highlighter)==null||s.enable())}cancel(){var s,i;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(s=this.highlighter)==null||s.disable(),(i=this.accessibilityManager)==null||i.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(s){this.cancel(),Z(this,v,s)}}M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakSet,zn=function(){this.renderingDone=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),j(this,w,$n).call(this)},w=new WeakSet,$n=function(){const{div:s}=this;s.addEventListener("mousedown",i=>{const y=s.querySelector(".endOfContent");if(!y)return;let m=i.target!==s;if(m&&(m=getComputedStyle(y).getPropertyValue("-moz-user-select")!=="none"),m){const h=s.getBoundingClientRect(),F=Math.max(0,(i.pageY-h.top)/h.height);y.style.top=(F*100).toFixed(2)+"%"}y.classList.add("active")}),s.addEventListener("mouseup",()=>{const i=s.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}),s.addEventListener("copy",i=>{if(!e(this,M)){const y=document.getSelection();i.clipboardData.setData("text/plain",(0,r.removeNullCharacters)((0,c.normalizeUnicode)(y.toString())))}i.preventDefault(),i.stopPropagation()})},R.TextLayerBuilder=D},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.XfaLayerBuilder=void 0;var c=T(4);class r{constructor({pageDiv:M,pdfPage:b,annotationStorage:u=null,linkService:v,xfaHtml:f=null}){this.pageDiv=M,this.pdfPage=b,this.annotationStorage=u,this.linkService=v,this.xfaHtml=f,this.div=null,this._cancelled=!1}async render(M,b="display"){if(b==="print"){const f={viewport:M.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b},C=document.createElement("div");return this.pageDiv.append(C),f.div=C,c.XfaLayer.render(f)}const u=await this.pdfPage.getXfa();if(this._cancelled||!u)return{textDivs:[]};const v={viewport:M.clone({dontFlip:!0}),div:this.div,xfaHtml:u,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b};return this.div?c.XfaLayer.update(v):(this.div=document.createElement("div"),this.pageDiv.append(this.div),v.div=this.div,c.XfaLayer.render(v))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}R.XfaLayerBuilder=r},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.PDFScriptingManager=void 0;var c=T(22),r=T(23);class D extends r.PDFScriptingManager{constructor(b){b.externalServices||window.addEventListener("updatefromsandbox",u=>{b.eventBus.dispatch("updatefromsandbox",{source:window,detail:u.detail})}),b.externalServices||(b.externalServices={createScripting:({sandboxBundleSrc:u})=>new c.GenericScripting(u)}),b.docProperties||(b.docProperties=u=>(0,c.docProperties)(u)),super(b)}}R.PDFScriptingManager=D},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.GenericScripting=void 0,R.docProperties=r;var c=T(4);async function r(M){const b="",u=b.split("#")[0];let{info:v,metadata:f,contentDispositionFilename:C,contentLength:w}=await M.getMetadata();if(!w){const{length:p}=await M.getDownloadInfo();w=p}return{...v,baseURL:u,filesize:w,filename:C||(0,c.getPdfFilenameFromUrl)(b),metadata:f==null?void 0:f.getRaw(),authors:f==null?void 0:f.get("dc:creator"),numPages:M.numPages,URL:b}}class D{constructor(b){this._ready=(0,c.loadScript)(b,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(b){(await this._ready).create(b)}async dispatchEventInSandbox(b){const u=await this._ready;setTimeout(()=>u.dispatchEvent(b),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}R.GenericScripting=D},(O,R,T)=>{var M,b,u,v,f,C,w,p,S,s,i,y,Xn,h,Xt,A,Xi,ie,qn,q,Tt;Object.defineProperty(R,"__esModule",{value:!0}),R.PDFScriptingManager=void 0;var c=T(2),r=T(4);class D{constructor({eventBus:H,sandboxBundleSrc:le=null,externalServices:$=null,docProperties:Ee=null}){I(this,y);I(this,h);I(this,A);I(this,ie);I(this,q);I(this,M,null);I(this,b,null);I(this,u,null);I(this,v,null);I(this,f,null);I(this,C,null);I(this,w,null);I(this,p,!1);I(this,S,null);I(this,s,null);I(this,i,null);Z(this,v,H),Z(this,S,le),Z(this,f,$),Z(this,u,Ee)}setViewer(H){Z(this,w,H)}async setDocument(H){var we;if(e(this,C)&&await j(this,q,Tt).call(this),Z(this,C,H),!H)return;const[le,$,Ee]=await Promise.all([H.getFieldObjects(),H.getCalculationOrderIds(),H.getJSActions()]);if(!le&&!Ee){await j(this,q,Tt).call(this);return}if(H===e(this,C)){try{Z(this,s,j(this,ie,qn).call(this))}catch(N){console.error(`setDocument: "${N.message}".`),await j(this,q,Tt).call(this);return}this._internalEvents.set("updatefromsandbox",N=>{(N==null?void 0:N.source)===window&&j(this,y,Xn).call(this,N.detail)}),this._internalEvents.set("dispatcheventinsandbox",N=>{var a;(a=e(this,s))==null||a.dispatchEventInSandbox(N.detail)}),this._internalEvents.set("pagechanging",({pageNumber:N,previous:a})=>{N!==a&&(j(this,A,Xi).call(this,a),j(this,h,Xt).call(this,N))}),this._internalEvents.set("pagerendered",({pageNumber:N})=>{this._pageOpenPending.has(N)&&N===e(this,w).currentPageNumber&&j(this,h,Xt).call(this,N)}),this._internalEvents.set("pagesdestroy",async()=>{var N,a;await j(this,A,Xi).call(this,e(this,w).currentPageNumber),await((N=e(this,s))==null?void 0:N.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(a=e(this,M))==null||a.resolve()});for(const[N,a]of this._internalEvents)e(this,v)._on(N,a);try{const N=await e(this,u).call(this,H);if(H!==e(this,C))return;await e(this,s).createSandbox({objects:le,calculationOrder:$,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...N,actions:Ee}}),e(this,v).dispatch("sandboxcreated",{source:this})}catch(N){console.error(`setDocument: "${N.message}".`),await j(this,q,Tt).call(this);return}await((we=e(this,s))==null?void 0:we.dispatchEventInSandbox({id:"doc",name:"Open"})),await j(this,h,Xt).call(this,e(this,w).currentPageNumber,!0),Promise.resolve().then(()=>{H===e(this,C)&&Z(this,p,!0)})}}async dispatchWillSave(){var H;return(H=e(this,s))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var H;return(H=e(this,s))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var H;if(e(this,s)){await((H=e(this,i))==null?void 0:H.promise),Z(this,i,new r.PromiseCapability);try{await e(this,s).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(le){throw e(this,i).resolve(),Z(this,i,null),le}await e(this,i).promise}}async dispatchDidPrint(){var H;return(H=e(this,s))==null?void 0:H.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var H;return((H=e(this,b))==null?void 0:H.promise)||null}get ready(){return e(this,p)}get _internalEvents(){return(0,r.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,r.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,r.shadow)(this,"_visitedPages",new Map)}}M=new WeakMap,b=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,C=new WeakMap,w=new WeakMap,p=new WeakMap,S=new WeakMap,s=new WeakMap,i=new WeakMap,y=new WeakSet,Xn=async function(H){var l,P;const le=e(this,w),$=le.isInPresentationMode||le.isChangingPresentationMode,{id:Ee,siblings:we,command:N,value:a}=H;if(!Ee){switch(N){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(!$){const x=(0,c.apiPageLayoutToViewerModes)(a);le.spreadMode=x.spreadMode}break;case"page-num":le.currentPageNumber=a+1;break;case"print":await le.pagesPromise,e(this,v).dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":$||(le.currentScaleValue=a);break;case"SaveAs":e(this,v).dispatch("download",{source:this});break;case"FirstPage":le.currentPageNumber=1;break;case"LastPage":le.currentPageNumber=le.pagesCount;break;case"NextPage":le.nextPage();break;case"PrevPage":le.previousPage();break;case"ZoomViewIn":$||le.increaseScale();break;case"ZoomViewOut":$||le.decreaseScale();break;case"WillPrintFinished":(l=e(this,i))==null||l.resolve(),Z(this,i,null);break}return}if($&&H.focus)return;delete H.id,delete H.siblings;const d=we?[Ee,...we]:[Ee];for(const x of d){const U=document.querySelector(`[data-element-id="${x}"]`);U?U.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:H})):(P=e(this,C))==null||P.annotationStorage.setValue(x,H)}},h=new WeakSet,Xt=async function(H,le=!1){const $=e(this,C),Ee=this._visitedPages;if(le&&Z(this,M,new r.PromiseCapability),!e(this,M))return;const we=e(this,w).getPageView(H-1);if((we==null?void 0:we.renderingState)!==c.RenderingStates.FINISHED){this._pageOpenPending.add(H);return}this._pageOpenPending.delete(H);const N=(async()=>{var d,l;const a=await(Ee.has(H)?null:(d=we.pdfPage)==null?void 0:d.getJSActions());$===e(this,C)&&await((l=e(this,s))==null?void 0:l.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:H,actions:a}))})();Ee.set(H,N)},A=new WeakSet,Xi=async function(H){var we;const le=e(this,C),$=this._visitedPages;if(!e(this,M)||this._pageOpenPending.has(H))return;const Ee=$.get(H);Ee&&($.set(H,null),await Ee,le===e(this,C)&&await((we=e(this,s))==null?void 0:we.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:H})))},ie=new WeakSet,qn=function(){if(Z(this,b,new r.PromiseCapability),e(this,s))throw new Error("#initScripting: Scripting already exists.");return e(this,f).createScripting({sandboxBundleSrc:e(this,S)})},q=new WeakSet,Tt=async function(){var H,le,$;if(!e(this,s)){Z(this,C,null),(H=e(this,b))==null||H.resolve();return}e(this,M)&&(await Promise.race([e(this,M).promise,new Promise(Ee=>{setTimeout(Ee,1e3)})]).catch(()=>{}),Z(this,M,null)),Z(this,C,null);try{await e(this,s).destroySandbox()}catch{}(le=e(this,i))==null||le.reject(new Error("Scripting destroyed.")),Z(this,i,null);for(const[Ee,we]of this._internalEvents)e(this,v)._off(Ee,we);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),Z(this,s,null),Z(this,p,!1),($=e(this,b))==null||$.resolve()},R.PDFScriptingManager=D},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.PDFSinglePageViewer=void 0;var c=T(2),r=T(25);class D extends r.PDFViewer{_resetView(){super._resetView(),this._scrollMode=c.ScrollMode.PAGE,this._spreadMode=c.SpreadMode.NONE}set scrollMode(b){}_updateScrollMode(){}set spreadMode(b){}_updateSpreadMode(){}}R.PDFSinglePageViewer=D},(O,R,T)=>{var S,s,i,qi,m,h,F,A,G,ie,E,q,J,Y,H,le,$,Ee,we,N,a,d,Yn,P,Kn,U,Qn,ne,Zn,pe,Mt,se,qt,ge,Jn,De,Yi,de,es,te,ot,me,Ki,Le,ts,Ue,is,Ge,Qi,Xe,ns;Object.defineProperty(R,"__esModule",{value:!0}),R.PagesCountLimit=R.PDFViewer=R.PDFPageViewBuffer=void 0;var c=T(4),r=T(2),D=T(7),M=T(13),b=T(26),u=T(5);const v=10,f={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};R.PagesCountLimit=f;function C(ye){return Object.values(c.AnnotationEditorType).includes(ye)&&ye!==c.AnnotationEditorType.DISABLE}class w{constructor(_){I(this,i);I(this,S,new Set);I(this,s,0);Z(this,s,_)}push(_){const k=e(this,S);k.has(_)&&k.delete(_),k.add(_),k.size>e(this,s)&&j(this,i,qi).call(this)}resize(_,k=null){Z(this,s,_);const he=e(this,S);if(k){const ae=he.size;let ue=1;for(const ve of he)if(k.has(ve.id)&&(he.delete(ve),he.add(ve)),++ue>ae)break}for(;he.size>e(this,s);)j(this,i,qi).call(this)}has(_){return e(this,S).has(_)}[Symbol.iterator](){return e(this,S).keys()}}S=new WeakMap,s=new WeakMap,i=new WeakSet,qi=function(){const _=e(this,S).keys().next().value;_==null||_.destroy(),e(this,S).delete(_)},R.PDFPageViewBuffer=w;class p{constructor(_){I(this,d);I(this,P);I(this,U);I(this,ne);I(this,pe);I(this,se);I(this,ge);I(this,De);I(this,de);I(this,te);I(this,me);I(this,Le);I(this,Ue);I(this,Ge);I(this,Xe);I(this,m,null);I(this,h,null);I(this,F,c.AnnotationEditorType.NONE);I(this,A,null);I(this,G,c.AnnotationMode.ENABLE_FORMS);I(this,ie,null);I(this,E,null);I(this,q,!1);I(this,J,!1);I(this,Y,null);I(this,H,!1);I(this,le,0);I(this,$,new ResizeObserver(j(this,Xe,ns).bind(this)));I(this,Ee,null);I(this,we,null);I(this,N,null);I(this,a,r.TextLayerMode.ENABLE);var he,ae;const k="3.11.174";if(c.version!==k)throw new Error(`The API version "${c.version}" does not match the Viewer version "${k}".`);if(this.container=_.container,this.viewer=_.viewer||_.container.firstElementChild,((he=this.container)==null?void 0:he.tagName)!=="DIV"||((ae=this.viewer)==null?void 0:ae.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");e(this,$).observe(this.container),this.eventBus=_.eventBus,this.linkService=_.linkService||new u.SimpleLinkService,this.downloadManager=_.downloadManager||null,this.findController=_.findController||null,Z(this,h,_.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=ue=>this._getVisiblePages().ids.has(ue)),this._scriptingManager=_.scriptingManager||null,Z(this,a,_.textLayerMode??r.TextLayerMode.ENABLE),Z(this,G,_.annotationMode??c.AnnotationMode.ENABLE_FORMS),Z(this,F,_.annotationEditorMode??c.AnnotationEditorType.NONE),this.imageResourcesPath=_.imageResourcesPath||"",this.enablePrintAutoRotate=_.enablePrintAutoRotate||!1,this.removePageBorders=_.removePageBorders||!1,_.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),_.maxCanvasPixels=0),this.isOffscreenCanvasSupported=_.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=_.maxCanvasPixels,this.l10n=_.l10n||D.NullL10n,Z(this,q,_.enablePermissions||!1),this.pageColors=_.pageColors||null,this.defaultRenderingQueue=!_.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new b.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=_.renderingQueue,this.scroll=(0,r.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=r.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),j(this,Ge,Qi).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:ue,pdfPage:ve})=>{const W=this._pages[ue-1];e(this,m).has(W)||ve==null||ve.cleanup()})}get pagesCount(){return this._pages.length}getPageView(_){return this._pages[_]}getCachedPageViews(){return new Set(e(this,m))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(_=>_==null?void 0:_.pdfPage)}get renderForms(){return e(this,G)===c.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(_){if(!Number.isInteger(_))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(_,!0)||console.error(`currentPageNumber: "${_}" is not a valid page.`))}_setCurrentPageNumber(_,k=!1){var ae;if(this._currentPageNumber===_)return k&&j(this,me,Ki).call(this),!0;if(!(0<_&&_<=this.pagesCount))return!1;const he=this._currentPageNumber;return this._currentPageNumber=_,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:_,pageLabel:((ae=this._pageLabels)==null?void 0:ae[_-1])??null,previous:he}),k&&j(this,me,Ki).call(this),!0}get currentPageLabel(){var _;return((_=this._pageLabels)==null?void 0:_[this._currentPageNumber-1])??null}set currentPageLabel(_){if(!this.pdfDocument)return;let k=_|0;if(this._pageLabels){const he=this._pageLabels.indexOf(_);he>=0&&(k=he+1)}this._setCurrentPageNumber(k,!0)||console.error(`currentPageLabel: "${_}" is not a valid page.`)}get currentScale(){return this._currentScale!==r.UNKNOWN_SCALE?this._currentScale:r.DEFAULT_SCALE}set currentScale(_){if(isNaN(_))throw new Error("Invalid numeric scale.");this.pdfDocument&&j(this,te,ot).call(this,_,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(_){this.pdfDocument&&j(this,te,ot).call(this,_,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(_){if(!(0,r.isValidRotation)(_))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(_%=360,_<0&&(_+=360),this._pagesRotation===_))return;this._pagesRotation=_;const k=this._currentPageNumber;this.refresh(!0,{rotation:_}),this._currentScaleValue&&j(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:_,pageNumber:k}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const _=[],k=[];for(let he=1,ae=this.pdfDocument.numPages;he<=ae;++he){if(e(this,H))return null;k.length=0;const ue=await this.pdfDocument.getPage(he),{items:ve}=await ue.getTextContent();for(const W of ve)W.str&&k.push(W.str),W.hasEOL&&k.push(`
`);_.push((0,r.removeNullCharacters)(k.join("")))}return _.join(`
`)}setDocument(_){var ve,W;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(ve=this.findController)==null||ve.setDocument(null),(W=this._scriptingManager)==null||W.setDocument(null),e(this,A)&&(e(this,A).destroy(),Z(this,A,null))),this.pdfDocument=_,!_)return;const k=_.numPages,he=_.getPage(1),ae=_.getOptionalContentConfig(),ue=e(this,q)?_.getPermissions():Promise.resolve();if(k>f.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ce=this._scrollMode=r.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ce})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:k})},()=>{}),this._onBeforeDraw=ce=>{const Me=this._pages[ce.pageNumber-1];Me&&e(this,m).push(Me)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ce=>{ce.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ce.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,e(this,we)&&(document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([he,ue]).then(([ce,Me])=>{var o,B;if(_!==this.pdfDocument)return;this._firstPageCapability.resolve(ce),this._optionalContentConfigPromise=ae;const{annotationEditorMode:Ae,annotationMode:ke,textLayerMode:Oe}=j(this,P,Kn).call(this,Me);if(Oe!==r.TextLayerMode.DISABLE){const X=Z(this,Y,document.createElement("div"));X.id="hiddenCopyElement",this.viewer.before(X)}if(Ae!==c.AnnotationEditorType.DISABLE){const X=Ae;_.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):C(X)?(Z(this,A,new c.AnnotationEditorUIManager(this.container,this.viewer,e(this,h),this.eventBus,_,this.pageColors)),X!==c.AnnotationEditorType.NONE&&e(this,A).updateMode(X)):console.error(`Invalid AnnotationEditor mode: ${X}`)}const je=j(this,d,Yn).bind(this),Ce=this._scrollMode===r.ScrollMode.PAGE?null:this.viewer,qe=this.currentScale,Ve=ce.getViewport({scale:qe*c.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ve.scale),(((o=this.pageColors)==null?void 0:o.foreground)==="CanvasText"||((B=this.pageColors)==null?void 0:B.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",_.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let X=1;X<=k;++X){const re=new M.PDFPageView({container:Ce,eventBus:this.eventBus,id:X,scale:qe,defaultViewport:Ve.clone(),optionalContentConfigPromise:ae,renderingQueue:this.renderingQueue,textLayerMode:Oe,annotationMode:ke,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:je});this._pages.push(re)}const Q=this._pages[0];Q&&(Q.setPdfPage(ce),this.linkService.cachePageRef(1,ce.ref)),this._scrollMode===r.ScrollMode.PAGE?j(this,pe,Mt).call(this):this._spreadMode!==r.SpreadMode.NONE&&this._updateSpreadMode(),j(this,U,Qn).call(this).then(async()=>{var re,fe;if((re=this.findController)==null||re.setDocument(_),(fe=this._scriptingManager)==null||fe.setDocument(_),e(this,Y)&&(Z(this,E,j(this,ne,Zn).bind(this,Oe)),document.addEventListener("copy",e(this,E))),e(this,A)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e(this,F)}),_.loadingParams.disableAutoFetch||k>f.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let X=k-1;if(X<=0){this._pagesCapability.resolve();return}for(let Se=2;Se<=k;++Se){const Re=_.getPage(Se).then(Ne=>{const Ie=this._pages[Se-1];Ie.pdfPage||Ie.setPdfPage(Ne),this.linkService.cachePageRef(Se,Ne.ref),--X===0&&this._pagesCapability.resolve()},Ne=>{console.error(`Unable to get page ${Se} to initialize viewer`,Ne),--X===0&&this._pagesCapability.resolve()});Se%f.PAUSE_EAGER_PAGE_INIT===0&&await Re}}),this.eventBus.dispatch("pagesinit",{source:this}),_.getMetadata().then(({info:X})=>{_===this.pdfDocument&&X.Language&&(this.viewer.lang=X.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ce=>{console.error("Unable to initialize viewer",ce),this._pagesCapability.reject(ce)})}setPageLabels(_){var k;if(this.pdfDocument){_?Array.isArray(_)&&this.pdfDocument.numPages===_.length?this._pageLabels=_:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let he=0,ae=this._pages.length;he<ae;he++)this._pages[he].setPageLabel(((k=this._pageLabels)==null?void 0:k[he])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=r.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Z(this,m,new w(v)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new c.PromiseCapability,this._onePageRenderedCapability=new c.PromiseCapability,this._pagesCapability=new c.PromiseCapability,this._scrollMode=r.ScrollMode.VERTICAL,this._previousScrollMode=r.ScrollMode.UNKNOWN,this._spreadMode=r.SpreadMode.NONE,Z(this,Ee,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),e(this,we)&&(document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),e(this,Y)&&(document.removeEventListener("copy",e(this,E)),Z(this,E,null),e(this,Y).remove(),Z(this,Y,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(_){if(!this._pageLabels)return null;const k=this._pageLabels.indexOf(_);return k<0?null:k+1}scrollPageIntoView({pageNumber:_,destArray:k=null,allowNegativeOffset:he=!1,ignoreDestinationZoom:ae=!1}){if(!this.pdfDocument)return;const ue=Number.isInteger(_)&&this._pages[_-1];if(!ue){console.error(`scrollPageIntoView: "${_}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!k){this._setCurrentPageNumber(_,!0);return}let ve=0,W=0,ce=0,Me=0,Ae,ke;const Oe=ue.rotation%180!==0,je=(Oe?ue.height:ue.width)/ue.scale/c.PixelsPerInch.PDF_TO_CSS_UNITS,Ce=(Oe?ue.width:ue.height)/ue.scale/c.PixelsPerInch.PDF_TO_CSS_UNITS;let qe=0;switch(k[1].name){case"XYZ":ve=k[2],W=k[3],qe=k[4],ve=ve!==null?ve:0,W=W!==null?W:Ce;break;case"Fit":case"FitB":qe="page-fit";break;case"FitH":case"FitBH":W=k[2],qe="page-width",W===null&&this._location?(ve=this._location.left,W=this._location.top):(typeof W!="number"||W<0)&&(W=Ce);break;case"FitV":case"FitBV":ve=k[2],ce=je,Me=Ce,qe="page-height";break;case"FitR":ve=k[2],W=k[3],ce=k[4]-ve,Me=k[5]-W;let B=r.SCROLLBAR_PADDING,X=r.VERTICAL_PADDING;this.removePageBorders&&(B=X=0),Ae=(this.container.clientWidth-B)/ce/c.PixelsPerInch.PDF_TO_CSS_UNITS,ke=(this.container.clientHeight-X)/Me/c.PixelsPerInch.PDF_TO_CSS_UNITS,qe=Math.min(Math.abs(Ae),Math.abs(ke));break;default:console.error(`scrollPageIntoView: "${k[1].name}" is not a valid destination type.`);return}if(ae||(qe&&qe!==this._currentScale?this.currentScaleValue=qe:this._currentScale===r.UNKNOWN_SCALE&&(this.currentScaleValue=r.DEFAULT_SCALE_VALUE)),qe==="page-fit"&&!k[4]){j(this,se,qt).call(this,ue);return}const Ve=[ue.viewport.convertToViewportPoint(ve,W),ue.viewport.convertToViewportPoint(ve+ce,W+Me)];let Q=Math.min(Ve[0][0],Ve[1][0]),o=Math.min(Ve[0][1],Ve[1][1]);he||(Q=Math.max(Q,0),o=Math.max(o,0)),j(this,se,qt).call(this,ue,{left:Q,top:o})}_updateLocation(_){const k=this._currentScale,he=this._currentScaleValue,ae=parseFloat(he)===k?Math.round(k*1e4)/100:he,ue=_.id,ve=this._pages[ue-1],W=this.container,ce=ve.getPagePoint(W.scrollLeft-_.x,W.scrollTop-_.y),Me=Math.round(ce[0]),Ae=Math.round(ce[1]);let ke=`#page=${ue}`;this.isInPresentationMode||(ke+=`&zoom=${ae},${Me},${Ae}`),this._location={pageNumber:ue,scale:ae,top:Ae,left:Me,rotation:this._pagesRotation,pdfOpenParams:ke}}update(){const _=this._getVisiblePages(),k=_.views,he=k.length;if(he===0)return;const ae=Math.max(v,2*he+1);e(this,m).resize(ae,_.ids),this.renderingQueue.renderHighestPriority(_);const ue=this._spreadMode===r.SpreadMode.NONE&&(this._scrollMode===r.ScrollMode.PAGE||this._scrollMode===r.ScrollMode.VERTICAL),ve=this._currentPageNumber;let W=!1;for(const ce of k){if(ce.percent<100)break;if(ce.id===ve&&ue){W=!0;break}}this._setCurrentPageNumber(W?ve:k[0].id),this._updateLocation(_.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(_){return this.container.contains(_)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===r.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===r.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const _=this._scrollMode===r.ScrollMode.PAGE?e(this,Ee).pages:this._pages,k=this._scrollMode===r.ScrollMode.HORIZONTAL,he=k&&this._isContainerRtl;return(0,r.getVisibleElements)({scrollEl:this.container,views:_,sortByVisibility:!0,horizontal:k,rtl:he})}cleanup(){for(const _ of this._pages)_.renderingState!==r.RenderingStates.FINISHED&&_.reset()}_cancelRendering(){for(const _ of this._pages)_.cancelRendering()}forceRendering(_){const k=_||this._getVisiblePages(),he=j(this,Ue,is).call(this,k),ae=this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL,ue=this.renderingQueue.getHighestPriority(k,this._pages,he,ae);return ue?(j(this,Le,ts).call(this,ue).then(()=>{this.renderingQueue.renderView(ue)}),!0):!1}get hasEqualPageSizes(){const _=this._pages[0];for(let k=1,he=this._pages.length;k<he;++k){const ae=this._pages[k];if(ae.width!==_.width||ae.height!==_.height)return!1}return!0}getPagesOverview(){let _;return this._pages.map(k=>{const he=k.pdfPage.getViewport({scale:1}),ae=(0,r.isPortraitOrientation)(he);if(_===void 0)_=ae;else if(this.enablePrintAutoRotate&&ae!==_)return{width:he.height,height:he.width,rotation:(he.rotation-90)%360};return{width:he.width,height:he.height,rotation:he.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(_){if(!(_ instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${_}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=_,this.refresh(!1,{optionalContentConfigPromise:_}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:_}))}get scrollMode(){return this._scrollMode}set scrollMode(_){if(this._scrollMode!==_){if(!(0,r.isValidScrollMode)(_))throw new Error(`Invalid scroll mode: ${_}`);this.pagesCount>f.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=_,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(_=null){const k=this._scrollMode,he=this.viewer;he.classList.toggle("scrollHorizontal",k===r.ScrollMode.HORIZONTAL),he.classList.toggle("scrollWrapped",k===r.ScrollMode.WRAPPED),!(!this.pdfDocument||!_)&&(k===r.ScrollMode.PAGE?j(this,pe,Mt).call(this):this._previousScrollMode===r.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&j(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(_){if(this._spreadMode!==_){if(!(0,r.isValidSpreadMode)(_))throw new Error(`Invalid spread mode: ${_}`);this._spreadMode=_,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:_}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(_=null){if(!this.pdfDocument)return;const k=this.viewer,he=this._pages;if(this._scrollMode===r.ScrollMode.PAGE)j(this,pe,Mt).call(this);else if(k.textContent="",this._spreadMode===r.SpreadMode.NONE)for(const ae of this._pages)k.append(ae.div);else{const ae=this._spreadMode-1;let ue=null;for(let ve=0,W=he.length;ve<W;++ve)ue===null?(ue=document.createElement("div"),ue.className="spread",k.append(ue)):ve%2===ae&&(ue=ue.cloneNode(!1),k.append(ue)),ue.append(he[ve].div)}_&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&j(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(_,!0),this.update())}_getPageAdvance(_,k=!1){switch(this._scrollMode){case r.ScrollMode.WRAPPED:{const{views:he}=this._getVisiblePages(),ae=new Map;for(const{id:ue,y:ve,percent:W,widthPercent:ce}of he){if(W===0||ce<100)continue;let Me=ae.get(ve);Me||ae.set(ve,Me||(Me=[])),Me.push(ue)}for(const ue of ae.values()){const ve=ue.indexOf(_);if(ve===-1)continue;const W=ue.length;if(W===1)break;if(k)for(let ce=ve-1,Me=0;ce>=Me;ce--){const Ae=ue[ce],ke=ue[ce+1]-1;if(Ae<ke)return _-ke}else for(let ce=ve+1,Me=W;ce<Me;ce++){const Ae=ue[ce],ke=ue[ce-1]+1;if(Ae>ke)return ke-_}if(k){const ce=ue[0];if(ce<_)return _-ce+1}else{const ce=ue[W-1];if(ce>_)return ce-_+1}break}break}case r.ScrollMode.HORIZONTAL:break;case r.ScrollMode.PAGE:case r.ScrollMode.VERTICAL:{if(this._spreadMode===r.SpreadMode.NONE)break;const he=this._spreadMode-1;if(k&&_%2!==he)break;if(!k&&_%2===he)break;const{views:ae}=this._getVisiblePages(),ue=k?_-1:_+1;for(const{id:ve,percent:W,widthPercent:ce}of ae)if(ve===ue){if(W>0&&ce===100)return 2;break}break}}return 1}nextPage(){const _=this._currentPageNumber,k=this.pagesCount;if(_>=k)return!1;const he=this._getPageAdvance(_,!1)||1;return this.currentPageNumber=Math.min(_+he,k),!0}previousPage(){const _=this._currentPageNumber;if(_<=1)return!1;const k=this._getPageAdvance(_,!0)||1;return this.currentPageNumber=Math.max(_-k,1),!0}increaseScale({drawingDelay:_,scaleFactor:k,steps:he}={}){if(!this.pdfDocument)return;let ae=this._currentScale;if(k>1)ae=Math.round(ae*k*100)/100;else{he??(he=1);do ae=Math.ceil((ae*r.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&ae<r.MAX_SCALE)}j(this,te,ot).call(this,Math.min(r.MAX_SCALE,ae),{noScroll:!1,drawingDelay:_})}decreaseScale({drawingDelay:_,scaleFactor:k,steps:he}={}){if(!this.pdfDocument)return;let ae=this._currentScale;if(k>0&&k<1)ae=Math.round(ae*k*100)/100;else{he??(he=1);do ae=Math.floor((ae/r.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--he>0&&ae>r.MIN_SCALE)}j(this,te,ot).call(this,Math.max(r.MIN_SCALE,ae),{noScroll:!1,drawingDelay:_})}get containerTopLeft(){return e(this,ie)||Z(this,ie,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return e(this,A)?e(this,F):c.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:_,editId:k=null}){if(!e(this,A))throw new Error("The AnnotationEditor is not enabled.");if(e(this,F)!==_){if(!C(_))throw new Error(`Invalid AnnotationEditor mode: ${_}`);this.pdfDocument&&(Z(this,F,_),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:_}),e(this,A).updateMode(_,k))}}set annotationEditorParams({type:_,value:k}){if(!e(this,A))throw new Error("The AnnotationEditor is not enabled.");e(this,A).updateParams(_,k)}refresh(_=!1,k=Object.create(null)){if(this.pdfDocument){for(const he of this._pages)he.update(k);e(this,N)!==null&&(clearTimeout(e(this,N)),Z(this,N,null)),_||this.update()}}}m=new WeakMap,h=new WeakMap,F=new WeakMap,A=new WeakMap,G=new WeakMap,ie=new WeakMap,E=new WeakMap,q=new WeakMap,J=new WeakMap,Y=new WeakMap,H=new WeakMap,le=new WeakMap,$=new WeakMap,Ee=new WeakMap,we=new WeakMap,N=new WeakMap,a=new WeakMap,d=new WeakSet,Yn=function(){const _=this;return{get annotationEditorUIManager(){return e(_,A)},get annotationStorage(){var k;return(k=_.pdfDocument)==null?void 0:k.annotationStorage},get downloadManager(){return _.downloadManager},get enableScripting(){return!!_._scriptingManager},get fieldObjectsPromise(){var k;return(k=_.pdfDocument)==null?void 0:k.getFieldObjects()},get findController(){return _.findController},get hasJSActionsPromise(){var k;return(k=_.pdfDocument)==null?void 0:k.hasJSActions()},get linkService(){return _.linkService}}},P=new WeakSet,Kn=function(_){const k={annotationEditorMode:e(this,F),annotationMode:e(this,G),textLayerMode:e(this,a)};return _&&(!_.includes(c.PermissionFlag.COPY)&&e(this,a)===r.TextLayerMode.ENABLE&&(k.textLayerMode=r.TextLayerMode.ENABLE_PERMISSIONS),_.includes(c.PermissionFlag.MODIFY_CONTENTS)||(k.annotationEditorMode=c.AnnotationEditorType.DISABLE),!_.includes(c.PermissionFlag.MODIFY_ANNOTATIONS)&&!_.includes(c.PermissionFlag.FILL_INTERACTIVE_FORMS)&&e(this,G)===c.AnnotationMode.ENABLE_FORMS&&(k.annotationMode=c.AnnotationMode.ENABLE)),k},U=new WeakSet,Qn=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const _=new Promise(k=>{Z(this,we,()=>{document.visibilityState==="hidden"&&(k(),document.removeEventListener("visibilitychange",e(this,we)),Z(this,we,null))}),document.addEventListener("visibilitychange",e(this,we))});return Promise.race([this._onePageRenderedCapability.promise,_])},ne=new WeakSet,Zn=function(_,k){const he=document.getSelection(),{focusNode:ae,anchorNode:ue}=he;if(ue&&ae&&he.containsNode(e(this,Y))){if(e(this,J)||_===r.TextLayerMode.ENABLE_PERMISSIONS){k.preventDefault(),k.stopPropagation();return}Z(this,J,!0);const ve=this.container.style.cursor;this.container.style.cursor="wait";const W=ce=>Z(this,H,ce.key==="Escape");window.addEventListener("keydown",W),this.getAllText().then(async ce=>{ce!==null&&await navigator.clipboard.writeText(ce)}).catch(ce=>{console.warn(`Something goes wrong when extracting the text: ${ce.message}`)}).finally(()=>{Z(this,J,!1),Z(this,H,!1),window.removeEventListener("keydown",W),this.container.style.cursor=ve}),k.preventDefault(),k.stopPropagation()}},pe=new WeakSet,Mt=function(){if(this._scrollMode!==r.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const _=this._currentPageNumber,k=e(this,Ee),he=this.viewer;if(he.textContent="",k.pages.length=0,this._spreadMode===r.SpreadMode.NONE&&!this.isInPresentationMode){const ae=this._pages[_-1];he.append(ae.div),k.pages.push(ae)}else{const ae=new Set,ue=this._spreadMode-1;ue===-1?ae.add(_-1):_%2!==ue?(ae.add(_-1),ae.add(_)):(ae.add(_-2),ae.add(_-1));const ve=document.createElement("div");if(ve.className="spread",this.isInPresentationMode){const W=document.createElement("div");W.className="dummyPage",ve.append(W)}for(const W of ae){const ce=this._pages[W];ce&&(ve.append(ce.div),k.pages.push(ce))}he.append(ve)}k.scrollDown=_>=k.previousPageNumber,k.previousPageNumber=_},se=new WeakSet,qt=function(_,k=null){const{div:he,id:ae}=_;if(this._currentPageNumber!==ae&&this._setCurrentPageNumber(ae),this._scrollMode===r.ScrollMode.PAGE&&(j(this,pe,Mt).call(this),this.update()),!k&&!this.isInPresentationMode){const ue=he.offsetLeft+he.clientLeft,ve=ue+he.clientWidth,{scrollLeft:W,clientWidth:ce}=this.container;(this._scrollMode===r.ScrollMode.HORIZONTAL||ue<W||ve>W+ce)&&(k={left:0,top:0})}(0,r.scrollIntoView)(he,k),!this._currentScaleValue&&this._location&&(this._location=null)},ge=new WeakSet,Jn=function(_){return _===this._currentScale||Math.abs(_-this._currentScale)<1e-15},De=new WeakSet,Yi=function(_,k,{noScroll:he=!1,preset:ae=!1,drawingDelay:ue=-1}){if(this._currentScaleValue=k.toString(),j(this,ge,Jn).call(this,_)){ae&&this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:k});return}this.viewer.style.setProperty("--scale-factor",_*c.PixelsPerInch.PDF_TO_CSS_UNITS);const ve=ue>=0&&ue<1e3;if(this.refresh(!0,{scale:_,drawingDelay:ve?ue:-1}),ve&&Z(this,N,setTimeout(()=>{Z(this,N,null),this.refresh()},ue)),this._currentScale=_,!he){let W=this._currentPageNumber,ce;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(W=this._location.pageNumber,ce=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:W,destArray:ce,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:_,presetValue:ae?k:void 0}),this.defaultRenderingQueue&&this.update()},de=new WeakSet,es=function(){return this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL?2:1},te=new WeakSet,ot=function(_,k){let he=parseFloat(_);if(he>0)k.preset=!1,j(this,De,Yi).call(this,he,_,k);else{const ae=this._pages[this._currentPageNumber-1];if(!ae)return;let ue=r.SCROLLBAR_PADDING,ve=r.VERTICAL_PADDING;this.isInPresentationMode?(ue=ve=4,this._spreadMode!==r.SpreadMode.NONE&&(ue*=2)):this.removePageBorders?ue=ve=0:this._scrollMode===r.ScrollMode.HORIZONTAL&&([ue,ve]=[ve,ue]);const W=(this.container.clientWidth-ue)/ae.width*ae.scale/e(this,de,es),ce=(this.container.clientHeight-ve)/ae.height*ae.scale;switch(_){case"page-actual":he=1;break;case"page-width":he=W;break;case"page-height":he=ce;break;case"page-fit":he=Math.min(W,ce);break;case"auto":const Me=(0,r.isPortraitOrientation)(ae)?W:Math.min(ce,W);he=Math.min(r.MAX_AUTO_SCALE,Me);break;default:console.error(`#setScale: "${_}" is an unknown zoom value.`);return}k.preset=!0,j(this,De,Yi).call(this,he,_,k)}},me=new WeakSet,Ki=function(){const _=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&j(this,te,ot).call(this,this._currentScaleValue,{noScroll:!0}),j(this,se,qt).call(this,_)},Le=new WeakSet,ts=async function(_){var k,he;if(_.pdfPage)return _.pdfPage;try{const ae=await this.pdfDocument.getPage(_.id);return _.pdfPage||_.setPdfPage(ae),(he=(k=this.linkService)._cachedPageNumber)!=null&&he.call(k,ae.ref)||this.linkService.cachePageRef(_.id,ae.ref),ae}catch(ae){return console.error("Unable to get page for page view",ae),null}},Ue=new WeakSet,is=function(_){var k,he;if(((k=_.first)==null?void 0:k.id)===1)return!0;if(((he=_.last)==null?void 0:he.id)===this.pagesCount)return!1;switch(this._scrollMode){case r.ScrollMode.PAGE:return e(this,Ee).scrollDown;case r.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Ge=new WeakSet,Qi=function(_=this.container.clientHeight){_!==e(this,le)&&(Z(this,le,_),r.docStyle.setProperty("--viewer-container-height",`${_}px`))},Xe=new WeakSet,ns=function(_){for(const k of _)if(k.target===this.container){j(this,Ge,Qi).call(this,Math.floor(k.borderBoxSize[0].blockSize)),Z(this,ie,null);break}},R.PDFViewer=p},(O,R,T)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.PDFRenderingQueue=void 0;var c=T(4),r=T(2);const D=3e4;class M{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(u){this.pdfViewer=u}setThumbnailViewer(u){this.pdfThumbnailViewer=u}isHighestPriority(u){return this.highestPriorityPage===u.renderingId}renderHighestPriority(u){var v;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(u)&&(this.isThumbnailViewEnabled&&((v=this.pdfThumbnailViewer)!=null&&v.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),D)))}getHighestPriority(u,v,f,C=!1){const w=u.views,p=w.length;if(p===0)return null;for(let m=0;m<p;m++){const h=w[m].view;if(!this.isViewFinished(h))return h}const S=u.first.id,s=u.last.id;if(s-S+1>p){const m=u.ids;for(let h=1,F=s-S;h<F;h++){const A=f?S+h:s-h;if(m.has(A))continue;const G=v[A-1];if(!this.isViewFinished(G))return G}}let i=f?s:S-2,y=v[i];return y&&!this.isViewFinished(y)||C&&(i+=f?1:-1,y=v[i],y&&!this.isViewFinished(y))?y:null}isViewFinished(u){return u.renderingState===r.RenderingStates.FINISHED}renderView(u){switch(u.renderingState){case r.RenderingStates.FINISHED:return!1;case r.RenderingStates.PAUSED:this.highestPriorityPage=u.renderingId,u.resume();break;case r.RenderingStates.RUNNING:this.highestPriorityPage=u.renderingId;break;case r.RenderingStates.INITIAL:this.highestPriorityPage=u.renderingId,u.draw().finally(()=>{this.renderHighestPriority()}).catch(v=>{v instanceof c.RenderingCancelledException||console.error(`renderView: "${v}"`)});break}return!0}}R.PDFRenderingQueue=M}],n={};function g(O){var R=n[O];if(R!==void 0)return R.exports;var T=n[O]={exports:{}};return L[O](T,T.exports,g),T.exports}var V={};return(()=>{var O=V;Object.defineProperty(O,"__esModule",{value:!0}),Object.defineProperty(O,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return r.AnnotationLayerBuilder}}),Object.defineProperty(O,"DownloadManager",{enumerable:!0,get:function(){return D.DownloadManager}}),Object.defineProperty(O,"EventBus",{enumerable:!0,get:function(){return M.EventBus}}),Object.defineProperty(O,"FindState",{enumerable:!0,get:function(){return R.FindState}}),Object.defineProperty(O,"GenericL10n",{enumerable:!0,get:function(){return b.GenericL10n}}),Object.defineProperty(O,"LinkTarget",{enumerable:!0,get:function(){return T.LinkTarget}}),Object.defineProperty(O,"NullL10n",{enumerable:!0,get:function(){return u.NullL10n}}),Object.defineProperty(O,"PDFFindController",{enumerable:!0,get:function(){return R.PDFFindController}}),Object.defineProperty(O,"PDFHistory",{enumerable:!0,get:function(){return v.PDFHistory}}),Object.defineProperty(O,"PDFLinkService",{enumerable:!0,get:function(){return T.PDFLinkService}}),Object.defineProperty(O,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(O,"PDFScriptingManager",{enumerable:!0,get:function(){return C.PDFScriptingManager}}),Object.defineProperty(O,"PDFSinglePageViewer",{enumerable:!0,get:function(){return w.PDFSinglePageViewer}}),Object.defineProperty(O,"PDFViewer",{enumerable:!0,get:function(){return p.PDFViewer}}),Object.defineProperty(O,"ProgressBar",{enumerable:!0,get:function(){return c.ProgressBar}}),Object.defineProperty(O,"RenderingStates",{enumerable:!0,get:function(){return c.RenderingStates}}),Object.defineProperty(O,"ScrollMode",{enumerable:!0,get:function(){return c.ScrollMode}}),Object.defineProperty(O,"SimpleLinkService",{enumerable:!0,get:function(){return T.SimpleLinkService}}),Object.defineProperty(O,"SpreadMode",{enumerable:!0,get:function(){return c.SpreadMode}}),Object.defineProperty(O,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return S.StructTreeLayerBuilder}}),Object.defineProperty(O,"TextLayerBuilder",{enumerable:!0,get:function(){return s.TextLayerBuilder}}),Object.defineProperty(O,"XfaLayerBuilder",{enumerable:!0,get:function(){return i.XfaLayerBuilder}}),Object.defineProperty(O,"parseQueryString",{enumerable:!0,get:function(){return c.parseQueryString}});var R=g(1),T=g(5),c=g(2),r=g(6),D=g(8),M=g(9),b=g(10),u=g(7),v=g(12),f=g(13),C=g(21),w=g(24),p=g(25),S=g(16),s=g(19),i=g(20)})(),V})())})(pdf_viewer);var pdf_viewerExports=pdf_viewer.exports,define_import_meta_env_default={BASE_URL:"/zasudi-solid/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=z=>{let t;const L=new Set,n=(r,D)=>{const M=typeof r=="function"?r(t):r;if(!Object.is(M,t)){const b=t;t=D??(typeof M!="object"||M===null)?M:Object.assign({},t,M),L.forEach(u=>u(t,b))}},g=()=>t,T={setState:n,getState:g,getInitialState:()=>c,subscribe:r=>(L.add(r),()=>L.delete(r)),destroy:()=>{(define_import_meta_env_default?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),L.clear()}},c=t=z(n,g,T);return T},createStore=z=>z?createStoreImpl(z):createStoreImpl;function __awaiter(z,t,L,n){function g(V){return V instanceof L?V:new L(function(O){O(V)})}return new(L||(L=Promise))(function(V,O){function R(r){try{c(n.next(r))}catch(D){O(D)}}function T(r){try{c(n.throw(r))}catch(D){O(D)}}function c(r){r.done?V(r.value):g(r.value).then(R,T)}c((n=n.apply(z,t||[])).next())})}function __classPrivateFieldGet(z,t,L,n){if(L==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?z!==t||!n:!t.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return L==="m"?n:L==="a"?n.call(z):n?n.value:t.get(z)}function __classPrivateFieldSet(z,t,L,n,g){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!g)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?z!==t||!g:!t.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?g.call(z,L):g?g.value=L:t.set(z,L),L}typeof SuppressedError=="function"&&SuppressedError;const RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class OutputScale{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}}function scrollIntoView(z,t,L=!1){let n=z.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let g=z.offsetTop+z.clientTop,V=z.offsetLeft+z.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||L&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden");)if(g+=n.offsetTop,V+=n.offsetLeft,n=n.offsetParent,!n)return;t&&(t.top!==void 0&&(g+=t.top),t.left!==void 0&&(V+=t.left,n.scrollLeft=V)),n.scrollTop=g,n.scrollLeft=V}function watchScroll(z,t){const L=function(V){g||(g=window.requestAnimationFrame(function(){g=null;const R=z.scrollLeft,T=n.lastX;R!==T&&(n.right=R>T),n.lastX=R;const c=z.scrollTop,r=n.lastY;c!==r&&(n.down=c>r),n.lastY=c,t(n)}))},n={right:!0,down:!0,lastX:z.scrollLeft,lastY:z.scrollTop,_eventHandler:L};let g=null;return z.addEventListener("scroll",L,!0),n}function binarySearchFirstItem(z,t,L=0){let n=L,g=z.length-1;if(g<0||!t(z[g]))return z.length;if(t(z[n]))return n;for(;n<g;){const V=n+g>>1,O=z[V];t(O)?g=V:n=V+1}return n}function getPageSizeInches({view:z,userUnit:t,rotate:L}){const[n,g,V,O]=z,R=L%180!==0,T=(V-n)/72*t,c=(O-g)/72*t;return{width:R?c:T,height:R?T:c}}function backtrackBeforeAllVisibleElements(z,t,L){if(z<2)return z;let n=t[z].div,g=n.offsetTop+n.clientTop;g>=L&&(n=t[z-1].div,g=n.offsetTop+n.clientTop);for(let V=z-2;V>=0&&(n=t[V].div,!(n.offsetTop+n.clientTop+n.clientHeight<=g));--V)z=V;return z}function getVisibleElements({scrollEl:z,views:t,sortByVisibility:L=!1,horizontal:n=!1,rtl:g=!1}){const V=z.scrollTop,O=V+z.clientHeight,R=z.scrollLeft,T=R+z.clientWidth;function c(w){const p=w.div;return p.offsetTop+p.clientTop+p.clientHeight>V}function r(w){const p=w.div,S=p.offsetLeft+p.clientLeft,s=S+p.clientWidth;return g?S<T:s>R}const D=[],M=new Set,b=t.length;let u=binarySearchFirstItem(t,n?r:c);u>0&&u<b&&!n&&(u=backtrackBeforeAllVisibleElements(u,t,V));let v=n?T:-1;for(let w=u;w<b;w++){const p=t[w],S=p.div,s=S.offsetLeft+S.clientLeft,i=S.offsetTop+S.clientTop,y=S.clientWidth,m=S.clientHeight,h=s+y,F=i+m;if(v===-1)F>=O&&(v=F);else if((n?s:i)>v)break;if(F<=V||i>=O||h<=R||s>=T)continue;const A=Math.max(0,V-i)+Math.max(0,F-O),G=Math.max(0,R-s)+Math.max(0,h-T),ie=(m-A)/m,E=(y-G)/y,q=ie*E*100|0;D.push({id:p.id,x:s,y:i,view:p,percent:q,widthPercent:E*100|0}),M.add(p.id)}const f=D[0],C=D.at(-1);return L&&D.sort(function(w,p){const S=w.percent-p.percent;return Math.abs(S)>.001?-S:w.id-p.id}),{first:f,last:C,views:D,ids:M}}function normalizeWheelEventDirection(z){let t=Math.hypot(z.deltaX,z.deltaY);const L=Math.atan2(z.deltaY,z.deltaX);return-.25*Math.PI<L&&L<.75*Math.PI&&(t=-t),t}function normalizeWheelEventDelta(z){const t=z.deltaMode;let L=normalizeWheelEventDirection(z);const n=30,g=30;return t===WheelEvent.DOM_DELTA_PIXEL?L/=n*g:t===WheelEvent.DOM_DELTA_LINE&&(L/=g),L}function isValidRotation(z){return Number.isInteger(z)&&z%90===0}function isValidScrollMode(z){return Number.isInteger(z)&&Object.values(ScrollMode).includes(z)&&z!==ScrollMode.UNKNOWN}function isValidSpreadMode(z){return Number.isInteger(z)&&Object.values(SpreadMode).includes(z)&&z!==SpreadMode.UNKNOWN}function isPortraitOrientation(z){return z.width<=z.height}new Promise(function(z){window.requestAnimationFrame(z)});document.documentElement.style;const CLEANUP_TIMEOUT=3e4;class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){var L,n;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!(!((L=this.pdfViewer)===null||L===void 0)&&L.forceRendering(t))&&(this.isThumbnailViewEnabled&&(!((n=this.pdfThumbnailViewer)===null||n===void 0)&&n.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)))}getHighestPriority(t,L,n,g=!1){const V=t.views,O=V.length;if(O===0)return null;for(let D=0;D<O;D++){const M=V[D].view;if(!this.isViewFinished(M))return M}const R=t.first.id,T=t.last.id;if(T-R+1>O){const D=t.ids;for(let M=1,b=T-R;M<b;M++){const u=n?R+M:T-M;if(D.has(u))continue;const v=L[u-1];if(!this.isViewFinished(v))return v}}let c=n?T:R-2,r=L[c];return r&&!this.isViewFinished(r)||g&&(c+=n?1:-1,r=L[c],r&&!this.isViewFinished(r))?r:null}isViewFinished(t){return t.renderingState===RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(L=>{L instanceof pdfExports.RenderingCancelledException||console.error(`renderView: "${L}"`)});break}return!0}}var _a,_TempImageFactory_tempCanvas;const DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3;class TempImageFactory{static getCanvas(t,L){const n=__classPrivateFieldSet(this,_a,__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas)||document.createElement("canvas"),"f",_TempImageFactory_tempCanvas);n.width=t,n.height=L;const g=n.getContext("2d",{alpha:!1});g.save(),g.fillStyle="rgb(255, 255, 255)",g.fillRect(0,0,t,L),g.restore();const V=n.getContext("2d");return[n,V]}static destroyCanvas(){const t=__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas);t&&(t.width=0,t.height=0),__classPrivateFieldSet(this,_a,null,"f",_TempImageFactory_tempCanvas)}}_a=TempImageFactory;_TempImageFactory_tempCanvas={value:null};class PDFThumbnailView{constructor({container:t,eventBus:L,id:n,defaultViewport:g,optionalContentConfigPromise:V,linkService:O,renderingQueue:R,l10n:T,pageColors:c,store:r,thumbnailWidth:D}){this.container=t,this.eventBus=L,this.id=n,this.renderingId="thumbnail"+n,this.pageLabel=null,this.store=r,this.loaded=!1,this.pdfPage=null,this.rotation=0,this.viewport=g,this.pdfPageRotate=g.rotation,this._optionalContentConfigPromise=V||null,this.pageColors=c||null,this.linkService=O,this.renderingQueue=R,this.renderTask=null,this.renderingState=RenderingStates.INITIAL,this.resume=null;const M=this.viewport.width,b=this.viewport.height,u=M/b;this.canvasWidth=D,this.canvasHeight=this.canvasWidth/u|0,this.scale=this.canvasWidth/M,this.l10n=T,this.canvas=null,this.src=null;const v=document.createElement("div");v.className="thumbnail pdfSlickThumbHolder",v.setAttribute("data-page-number",this.id.toString()),this.div=v,t.append(v)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const L=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:L}),this.reset()}reset(){this.cancelRendering(),this.renderingState=RenderingStates.INITIAL;const t=this.viewport.width,L=this.viewport.height,n=t/L;this.canvasHeight=this.canvasWidth/n|0,this.scale=this.canvasWidth/t,this.div.removeAttribute("data-loaded"),this.loaded=!1,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas)}update({rotation:t=null}){typeof t=="number"&&(this.rotation=t);const L=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:L}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(t=1){const L=document.createElement("canvas"),n=L.getContext("2d",{alpha:!1}),g=new OutputScale;L.width=t*this.canvasWidth*g.sx|0,L.height=t*this.canvasHeight*g.sy|0;const V=g.scaled?[g.sx,0,0,g.sy,0,0]:null;return{ctx:n,canvas:L,transform:V}}_convertCanvasToImage(t){if(this.renderingState!==RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const L=this._reduceImage(t);this.src=L.toDataURL(),this.div.setAttribute("data-loaded","true"),this.loaded=!0,this.store.getState()._setThumbnailView(this.id,this),L.width=0,L.height=0}draw(){if(this.renderingState!==RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();const{pdfPage:t}=this;if(!t)return this.renderingState=RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates.RUNNING;const L=(D=null)=>__awaiter(this,void 0,void 0,function*(){if(c===this.renderTask&&(this.renderTask=null),!(D instanceof pdfExports.RenderingCancelledException)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(g),D))throw D}),{ctx:n,canvas:g,transform:V}=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),O=this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),R=D=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=RenderingStates.PAUSED,this.resume=()=>{this.renderingState=RenderingStates.RUNNING,D()};return}D()},T={canvasContext:n,transform:V,viewport:O,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},c=this.renderTask=t.render(T);c.onContinue=R;const r=c.promise.then(function(){return L(null)},function(D){return L(D)});return r.finally(()=>{g.width=0,g.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),r}setImage(t){if(this.renderingState!==RenderingStates.INITIAL)return;const{thumbnailCanvas:L,pdfPage:n,scale:g}=t;L&&(this.pdfPage||this.setPdfPage(n),!(g<this.scale)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(L)))}_reduceImage(t){const{ctx:L,canvas:n}=this._getPageDrawContext();if(t.width<=2*n.width)return L.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n;let g=n.width<<MAX_NUM_SCALING_STEPS,V=n.height<<MAX_NUM_SCALING_STEPS;const[O,R]=TempImageFactory.getCanvas(g,V);for(;g>t.width||V>t.height;)g>>=1,V>>=1;for(R.drawImage(t,0,0,t.width,t.height,0,0,g,V);g>2*n.width;)R.drawImage(O,0,0,g,V,0,0,g>>1,V>>1),g>>=1,V>>=1;return L.drawImage(O,0,0,g,V,0,0,n.width,n.height),n}get _thumbPageTitle(){var t;return this.l10n.get("thumb_page_title",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}get _thumbPageCanvas(){var t;return this.l10n.get("thumb_page_canvas",{page:(t=this.pageLabel)!==null&&t!==void 0?t:this.id})}setPageLabel(t){this.pageLabel=typeof t=="string"?t:null}}var _PDFThumbnailViewer_instances,_PDFThumbnailViewer_ensurePdfPageLoaded,_PDFThumbnailViewer_getScrollAhead;const THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected";class PDFThumbnailViewer{constructor({container:t,eventBus:L,linkService:n,renderingQueue:g,l10n:V,pageColors:O,store:R,thumbnailWidth:T}){_PDFThumbnailViewer_instances.add(this),this.container=t,this.eventBus=L,this.linkService=n,this.renderingQueue=g,this.l10n=V,this.pageColors=O||null,this._thumbnails=[],this._currentPageNumber=0,this._pagesRotation=0,this._pageLabels=[],this.pdfDocument=null,this.store=R,this.thumbnailWidth=T,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(t){return this._thumbnails[t]}_getVisibleThumbs(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument)return;const L=this._thumbnails[t-1];if(!L){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}t!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),L.div.classList.add(THUMBNAIL_SELECTED_CLASS));const n=this._getVisibleThumbs(),{first:g,last:V,views:O}=n;if(O.length>0){let R=!1;if(t<=g.id||t>=(V==null?void 0:V.id))R=!0;else for(const{id:T,percent:c}of O)if(T===t){R=c<100;break}R&&scrollIntoView(L.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=t,this.forceRendering()}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!isValidRotation(t))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===t)return;this._pagesRotation=t;const L={rotation:t};for(const n of this._thumbnails)n.update(L)}cleanup(){for(const t of this._thumbnails)t.renderingState!==RenderingStates.FINISHED&&t.reset();TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=[],this._pagesRotation=0,this.container.textContent=""}setDocument(t){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=t,!t)return;const L=t.getPage(1),n=t.getOptionalContentConfig();L.then(g=>{var V;const O=t.numPages,R=g.getViewport({scale:1});for(let c=1;c<=O;++c){const r=new PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:c,defaultViewport:R.clone(),optionalContentConfigPromise:n,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors,store:this.store,thumbnailWidth:this.thumbnailWidth});this._thumbnails.push(r)}(V=this._thumbnails[0])===null||V===void 0||V.setPdfPage(g),this._thumbnails[this._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS),this.store.getState()._setThumbnailsViews(this._thumbnails)}).catch(g=>{console.error("Unable to initialize thumbnail viewer",g)})}_cancelRendering(){for(const t of this._thumbnails)t.cancelRendering()}setPageLabels(t){var L,n;if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=[],console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=[];for(let g=0,V=this._thumbnails.length;g<V;g++)this._thumbnails[g].setPageLabel((n=(L=this._pageLabels)===null||L===void 0?void 0:L[g])!==null&&n!==void 0?n:null)}}forceRendering(){const t=this._getVisibleThumbs(),L=__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_getScrollAhead).call(this,t),n=this.renderingQueue.getHighestPriority(t,this._thumbnails,L);return n?(__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_ensurePdfPageLoaded).call(this,n).then(()=>{this.renderingQueue.renderView(n)}),!0):!1}}_PDFThumbnailViewer_instances=new WeakSet,_PDFThumbnailViewer_ensurePdfPageLoaded=function z(t){var L;return __awaiter(this,void 0,void 0,function*(){if(t!=null&&t.pdfPage)return t.pdfPage;try{const n=yield(L=this.pdfDocument)===null||L===void 0?void 0:L.getPage(t.id);return t!=null&&t.pdfPage||t.setPdfPage(n),n}catch(n){return console.error("Unable to get page for thumb view",n),null}})},_PDFThumbnailViewer_getScrollAhead=function z(t){var L,n;return((L=t.first)===null||L===void 0?void 0:L.id)===1?!0:((n=t.last)===null||n===void 0?void 0:n.id)===this._thumbnails.length?!1:this.scroll.down};var _OverlayManager_overlays,_OverlayManager_active;class OverlayManager{constructor(){_OverlayManager_overlays.set(this,new WeakMap),_OverlayManager_active.set(this,null)}get active(){return __classPrivateFieldGet(this,_OverlayManager_active,"f")}register(t,L=!1){return __awaiter(this,void 0,void 0,function*(){if(typeof t!="object")throw new Error("Not enough parameters.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay is already registered.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").set(t,{canForceClose:L}),t.addEventListener("cancel",()=>{__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})})}unregister(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay cannot be removed while it is active.")}else throw new Error("The overlay does not exist.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").delete(t)})}open(t){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===t)throw new Error("The overlay is already active.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").get(t).canForceClose)yield this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");__classPrivateFieldSet(this,_OverlayManager_active,t,"f"),t.showModal()})}close(t=__classPrivateFieldGet(this,_OverlayManager_active,"f")){return __awaiter(this,void 0,void 0,function*(){if(!t||!__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(t))throw new Error("The overlay does not exist.");if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")!==t)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");t.close(),__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})}}_OverlayManager_overlays=new WeakMap,_OverlayManager_active=new WeakMap;function getXfaHtmlForPrinting(z,t){const L=t.allXfaHtml,n=new pdf_viewerExports.SimpleLinkService,g=Math.round(pdfExports.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const V of L==null?void 0:L.children){const O=document.createElement("div");O.className="xfaPrintedPage",z.append(O);const R=new pdf_viewerExports.XfaLayerBuilder({pageDiv:O,pdfPage:null,annotationStorage:t.annotationStorage,linkService:n,xfaHtml:V}),T=pdfExports.getXfaPageViewport(V,{scale:g});R.render(T,"print")}}let activeService=null,dialog=null,overlayManager=new OverlayManager;function renderPage(z,t,L,n,g,V,O){const R=activeService.scratchCanvas,T=g/pdfExports.PixelsPerInch.PDF;R.width=Math.floor(n.width*T),R.height=Math.floor(n.height*T);const c=R.getContext("2d");return c.save(),c.fillStyle="rgb(255, 255, 255)",c.fillRect(0,0,R.width,R.height),c.restore(),Promise.all([t.getPage(L),O]).then(function([r,D]){const M={canvasContext:c,transform:[T,0,0,T,0,0],viewport:r.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:pdfExports.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:V,printAnnotationStorage:D};return r.render(M).promise})}class PDFPrintService{constructor(t,L,n,g,V=null,O=null,R){this.pdfDocument=t,this.pagesOverview=L,this.printContainer=n,this._printResolution=g||150,this._optionalContentConfigPromise=V||t.getOptionalContentConfig(),this._printAnnotationStoragePromise=O||Promise.resolve(),this.l10n=R,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const t=document.querySelector("body");t==null||t.setAttribute("data-pdfjsprinting","true"),this.pagesOverview.every(g=>g.width===this.pagesOverview[0].width&&g.height===this.pagesOverview[0].height,this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");const n=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+n.width+"pt "+n.height+"pt;}",t==null||t.append(this.pageStyleSheet)}destroy(){if(activeService!==this)return;this.printContainer.textContent="";const t=document.querySelector("body");t==null||t.removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,activeService=null,ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)})}renderPages(){if(this.pdfDocument.isPureXfa)return getXfaHtmlForPrinting(this.printContainer,this.pdfDocument),Promise.resolve();const t=this.pagesOverview.length,L=(n,g)=>{if(this.throwIfInactive(),++this.currentPage>=t){renderProgress(t,t,this.l10n),n();return}const V=this.currentPage;renderProgress(V,t,this.l10n),renderPage(this,this.pdfDocument,V+1,this.pagesOverview[V],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){L(n,g)},g)};return new Promise(L)}useRenderedPage(){this.throwIfInactive();const t=document.createElement("img"),L=this.scratchCanvas;"toBlob"in L?L.toBlob(function(g){t.src=URL.createObjectURL(g)}):t.src=L.toDataURL();const n=document.createElement("div");return n.className="printedPage",n.append(t),this.printContainer.append(n),new Promise(function(g,V){t.onload=g,t.onerror=V})}performPrint(){return this.throwIfInactive(),new Promise(t=>{setTimeout(()=>{if(!this.active){t();return}print.call(window),setTimeout(t,20)},0)})}get active(){return this===activeService}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const print=window.print;window.print=function(){if(activeService){console.warn("Ignored window.print() because of a pending print job.");return}ensureOverlay().then(function(){activeService&&overlayManager.open(dialog)});try{dispatchEvent("beforeprint")}finally{if(!activeService){console.error("Expected print service to be initialized."),ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)});return}const z=activeService;activeService.renderPages().then(function(){return z.performPrint()}).catch(function(){}).then(function(){z.active&&abort()})}};function dispatchEvent(z){const t=document.createEvent("CustomEvent");t.initCustomEvent(z,!1,!1,"custom"),window.dispatchEvent(t)}function abort(){activeService&&(activeService.destroy(),dispatchEvent("afterprint"))}function renderProgress(z,t,L){dialog||(dialog=document.getElementById("printServiceDialog"));const n=Math.round(100*z/t),g=dialog.querySelector("progress"),V=dialog.querySelector(".relative-progress");g.value=n,L.get("print_progress_percent",{progress:n}).then(O=>{V.textContent=O})}window.addEventListener("keydown",function(z){z.keyCode===80&&(z.ctrlKey||z.metaKey)&&!z.altKey&&!z.shiftKey&&(window.print(),z.preventDefault(),z.stopImmediatePropagation())},!0);if("onbeforeprint"in window){const z=function(t){t.detail!=="custom"&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",z),window.addEventListener("afterprint",z)}let overlayPromise;function ensureOverlay(){if(!overlayPromise){if(!overlayManager)throw new Error("The overlay manager has not yet been initialized.");dialog||(dialog=document.getElementById("printServiceDialog")),overlayPromise=overlayManager.register(dialog,!0),document.getElementById("printCancel").onclick=abort,dialog.addEventListener("close",abort)}return overlayPromise}const PDFPrintServiceFactory={instance:{supportsPrinting:!0,createPrintService(z,t,L,n,g,V,O){if(activeService)throw new Error("The print service is created and active.");return activeService=new PDFPrintService(z,t,L,n,g,V,O),activeService}}};var _PDFPresentationMode_instances,_PDFPresentationMode_state,_PDFPresentationMode_args,_PDFPresentationMode_mouseWheel,_PDFPresentationMode_notifyStateChange,_PDFPresentationMode_enter,_PDFPresentationMode_exit,_PDFPresentationMode_mouseDown,_PDFPresentationMode_contextMenu,_PDFPresentationMode_showControls,_PDFPresentationMode_hideControls,_PDFPresentationMode_resetMouseScrollState,_PDFPresentationMode_touchSwipe,_PDFPresentationMode_addWindowListeners,_PDFPresentationMode_removeWindowListeners,_PDFPresentationMode_fullscreenChange,_PDFPresentationMode_addFullscreenChangeListeners,_PDFPresentationMode_removeFullscreenChangeListeners;const DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6;class PDFPresentationMode{constructor({container:t,pdfViewer:L,eventBus:n}){_PDFPresentationMode_instances.add(this),_PDFPresentationMode_state.set(this,PresentationModeState.UNKNOWN),_PDFPresentationMode_args.set(this,null),this.container=t,this.pdfViewer=L,this.eventBus=n,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){return __awaiter(this,void 0,void 0,function*(){const{container:t,pdfViewer:L}=this;if(this.active||!L.pagesCount||!t.requestFullscreen)return!1;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.CHANGING);const n=t.requestFullscreen();__classPrivateFieldSet(this,_PDFPresentationMode_args,{pageNumber:L.currentPageNumber,scaleValue:L.currentScaleValue,scrollMode:L.scrollMode,spreadMode:null,annotationEditorMode:null},"f"),L.spreadMode!==SpreadMode.NONE&&!(L.pageViewsReady&&L.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode=L.spreadMode),L.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode=L.annotationEditorMode);try{return yield n,L.focus(),!0}catch{__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL)}return!1})}get active(){return __classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.CHANGING||__classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.FULLSCREEN}}_PDFPresentationMode_state=new WeakMap,_PDFPresentationMode_args=new WeakMap,_PDFPresentationMode_instances=new WeakSet,_PDFPresentationMode_mouseWheel=function z(t){if(!this.active)return;t.preventDefault();const L=normalizeWheelEventDelta(t),n=Date.now(),g=this.mouseScrollTimeStamp;if(!(n>g&&n-g<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&L<0||this.mouseScrollDelta<0&&L>0)&&__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.mouseScrollDelta+=L,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){const V=this.mouseScrollDelta;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),(V>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=n)}},_PDFPresentationMode_notifyStateChange=function z(t){__classPrivateFieldSet(this,_PDFPresentationMode_state,t,"f"),this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})},_PDFPresentationMode_enter=function z(){var t;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(()=>{this.pdfViewer.scrollMode=ScrollMode.PAGE,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode!==null&&(this.pdfViewer.spreadMode=SpreadMode.NONE),this.pdfViewer.currentPageNumber=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").pageNumber,this.pdfViewer.currentScaleValue="page-fit",__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).call(this),this.contextMenuOpen=!1,(t=window.getSelection())===null||t===void 0||t.removeAllRanges()},_PDFPresentationMode_exit=function z(){const t=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(()=>{var L;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL),this.pdfViewer.scrollMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scrollMode,((L=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f"))===null||L===void 0?void 0:L.spreadMode)!==null&&(this.pdfViewer.spreadMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode),this.pdfViewer.currentScaleValue=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scaleValue,this.pdfViewer.currentPageNumber=t,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode),__classPrivateFieldSet(this,_PDFPresentationMode_args,null,"f")},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_hideControls).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.contextMenuOpen=!1},_PDFPresentationMode_mouseDown=function z(t){var L;if(this.contextMenuOpen){this.contextMenuOpen=!1,t.preventDefault();return}t.button===0&&(t.target.href&&(!((L=t.target.parentNode)===null||L===void 0)&&L.hasAttribute("data-internal-link"))||(t.preventDefault(),t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},_PDFPresentationMode_contextMenu=function z(){this.contextMenuOpen=!0},_PDFPresentationMode_showControls=function z(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)},_PDFPresentationMode_hideControls=function z(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)},_PDFPresentationMode_resetMouseScrollState=function z(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},_PDFPresentationMode_touchSwipe=function z(t){if(this.active){if(t.touches.length>1){this.touchSwipeState=null;return}switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=t.touches[0].pageX,this.touchSwipeState.endY=t.touches[0].pageY,t.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let L=0;const n=this.touchSwipeState.endX-this.touchSwipeState.startX,g=this.touchSwipeState.endY-this.touchSwipeState.startY,V=Math.abs(Math.atan2(g,n));Math.abs(n)>SWIPE_MIN_DISTANCE_THRESHOLD&&(V<=SWIPE_ANGLE_THRESHOLD||V>=Math.PI-SWIPE_ANGLE_THRESHOLD)?L=n:Math.abs(g)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(V-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(L=g),L>0?this.pdfViewer.previousPage():L<0&&this.pdfViewer.nextPage();break}}},_PDFPresentationMode_addWindowListeners=function z(){this.showControlsBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).bind(this),this.mouseDownBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseDown).bind(this),this.mouseWheelBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseWheel).bind(this),this.resetMouseScrollStateBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).bind(this),this.contextMenuBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_contextMenu).bind(this),this.touchSwipeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},_PDFPresentationMode_removeWindowListeners=function z(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},_PDFPresentationMode_fullscreenChange=function z(){document.fullscreenElement?__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_enter).call(this):__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_exit).call(this)},_PDFPresentationMode_addFullscreenChangeListeners=function z(){this.fullscreenChangeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},_PDFPresentationMode_removeFullscreenChangeListeners=function z(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind};const initialState={isDocumentLoaded:!1,pagesReady:!1,url:null,numPages:0,pageNumber:0,scale:0,scaleValue:"auto",pagesRotation:0,spreadMode:SpreadMode.UNKNOWN,scrollMode:ScrollMode.UNKNOWN,documentOutline:null,attachments:new Map,thumbnails:new Map,thumbnailViews:new Map,annotationEditorMode:pdfExports.AnnotationEditorType.NONE,pdfSlick:null},create=()=>createStore((z,t)=>Object.assign(Object.assign({},initialState),{_setThumbnailView:(L,n)=>{const g=new Map(t().thumbnails),V=new Map(t().thumbnailViews),{canvasWidth:O,canvasHeight:R,scale:T,rotation:c,loaded:r,pageLabel:D,src:M=null}=n;V.set(L,n),g.set(L,{pageNumber:L,width:O,height:R,scale:T,rotation:c,loaded:r,pageLabel:D,src:M}),z({thumbnailViews:V,thumbnails:g})},_setThumbnailsViews:L=>{const n=new Map(L.map(V=>[V.id,V])),g=new Map(L.map(V=>{const{canvasWidth:O,canvasHeight:R,scale:T,rotation:c,loaded:r,pageLabel:D,src:M=null}=V;return[V.id,{pageNumber:V.id,width:O,height:R,scale:T,rotation:c,loaded:r,pageLabel:D,src:M}]}));z({thumbnailViews:n,thumbnails:g})}}));var _PDFSlick_instances,_PDFSlick_renderingQueue,_PDFSlick_container,_PDFSlick_viewerContainer,_PDFSlick_thumbsContainer,_PDFSlick_annotationMode,_PDFSlick_annotationEditorMode,_PDFSlick_initializePageLabels,_PDFSlick_parseDocumentInfo,_PDFSlick_parsePageSize,_PDFSlick_initInternalEventListeners,_PDFSlick_onDocumentReady,_PDFSlick_onRotationChanging,_PDFSlick_onSwitchSpreadMode,_PDFSlick_onSwitchScrollMode,_PDFSlick_onScaleChanging,_PDFSlick_onPageChanging,_PDFSlick_onPageRendered;pdfExports.GlobalWorkerOptions.workerSrc=`//cdn.jsdelivr.net/npm/pdfjs-dist@${pdfExports.version}/build/pdf.worker.min.js`;const US_PAGE_NAMES={"8.5x11":"Letter","8.5x14":"Legal"},METRIC_PAGE_NAMES={"297x420":"A3","210x297":"A4"};function getPageName(z,t,L){const n=t?z.width:z.height,g=t?z.height:z.width;return L[`${n}x${g}`]}class PDFSlick{constructor({container:t,viewer:L,thumbs:n,store:g=create(),options:V}){var O,R,T,c,r,D,M,b,u,v,f,C,w;_PDFSlick_instances.add(this),_PDFSlick_renderingQueue.set(this,void 0),_PDFSlick_container.set(this,void 0),_PDFSlick_viewerContainer.set(this,void 0),_PDFSlick_thumbsContainer.set(this,void 0),this.downloadManager=null,this.findController=null,this.pdfPresentationMode=null,this.document=null,_PDFSlick_annotationMode.set(this,void 0),_PDFSlick_annotationEditorMode.set(this,void 0),__classPrivateFieldSet(this,_PDFSlick_container,t,"f"),__classPrivateFieldSet(this,_PDFSlick_viewerContainer,L,"f"),__classPrivateFieldSet(this,_PDFSlick_thumbsContainer,n,"f"),this.l10n=(O=V==null?void 0:V.l10n)!==null&&O!==void 0?O:pdf_viewerExports.NullL10n,this.downloadManager=new pdf_viewerExports.DownloadManager,this.textLayerMode=(R=V==null?void 0:V.textLayerMode)!==null&&R!==void 0?R:TextLayerMode.ENABLE,__classPrivateFieldSet(this,_PDFSlick_annotationMode,(T=V==null?void 0:V.annotationMode)!==null&&T!==void 0?T:pdfExports.AnnotationMode.ENABLE_FORMS,"f"),__classPrivateFieldSet(this,_PDFSlick_annotationEditorMode,(c=V==null?void 0:V.annotationEditorMode)!==null&&c!==void 0?c:pdfExports.AnnotationEditorType.NONE,"f"),this.removePageBorders=(r=V==null?void 0:V.removePageBorders)!==null&&r!==void 0?r:!1,this.singlePageViewer=(D=V==null?void 0:V.singlePageViewer)!==null&&D!==void 0?D:!1,this.enablePrintAutoRotate=(M=V==null?void 0:V.enablePrintAutoRotate)!==null&&M!==void 0?M:!1,this.useOnlyCssZoom=(b=V==null?void 0:V.useOnlyCssZoom)!==null&&b!==void 0?b:!1,this.pageColors=(u=V==null?void 0:V.pageColors)!==null&&u!==void 0?u:null,this.maxCanvasPixels=(v=V==null?void 0:V.maxCanvasPixels)!==null&&v!==void 0?v:16777216,this.printResolution=(f=V==null?void 0:V.printResolution)!==null&&f!==void 0?f:96,this.thumbnailWidth=(C=V==null?void 0:V.thumbnailWidth)!==null&&C!==void 0?C:125,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.l10n=pdf_viewerExports.NullL10n,this.store=g;const p=new PDFRenderingQueue;p.onIdle=this._cleanup.bind(this),p.isThumbnailViewEnabled=!0,__classPrivateFieldSet(this,_PDFSlick_renderingQueue,p,"f");const S=new pdf_viewerExports.EventBus,s=new pdf_viewerExports.PDFLinkService({eventBus:S,externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",ignoreDestinationZoom:!1}),i=Object.assign(Object.assign({container:t},L&&{viewer:L}),{eventBus:S,linkService:s,renderingQueue:p,defaultRenderingQueue:!0,textLayerMode:this.textLayerMode,l10n:this.l10n,annotationMode:__classPrivateFieldGet(this,_PDFSlick_annotationMode,"f"),annotationEditorMode:__classPrivateFieldGet(this,_PDFSlick_annotationEditorMode,"f"),removePageBorders:this.removePageBorders,imageResourcesPath:"/images/",useOnlyCssZoom:this.useOnlyCssZoom}),y=this.singlePageViewer?new pdf_viewerExports.PDFSinglePageViewer(i):new pdf_viewerExports.PDFViewer(i);p.setViewer(y),n&&(this.thumbnailViewer=new PDFThumbnailViewer({container:n,eventBus:S,linkService:s,renderingQueue:p,l10n:this.l10n,pageColors:this.pageColors,store:g,thumbnailWidth:this.thumbnailWidth}),p.setThumbnailViewer(this.thumbnailViewer)),document.fullscreenEnabled&&(this.pdfPresentationMode=new PDFPresentationMode({container:t,pdfViewer:y,eventBus:S})),this.eventBus=S,this.linkService=s,this.viewer=y,this.linkService.setViewer(y);const m=(w=V==null?void 0:V.scaleValue)!==null&&w!==void 0?w:"auto";this.store.setState({scaleValue:m})}loadDocument(t,L){var n,g,V,O,R;return __awaiter(this,void 0,void 0,function*(){if(this.url&&typeof this.url=="string")try{URL.revokeObjectURL(this.url)}catch{}(n=this.document)===null||n===void 0||n.destroy(),(g=this.viewer)===null||g===void 0||g.cleanup(),t instanceof URL?this.url=t.toString():this.url=t;const T=(V=L==null?void 0:L.filename)!==null&&V!==void 0?V:pdfExports.getPdfFilenameFromUrl((O=this.url)===null||O===void 0?void 0:O.toString());this.filename=T;const c=yield pdfExports.getDocument(t).promise;this.document=c,this.viewer.setDocument(this.document),this.linkService.setDocument(this.document),this.thumbnailViewer&&((R=this.thumbnailViewer)===null||R===void 0||R.setDocument(c)),__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initInternalEventListeners).call(this),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initializePageLabels).call(this),this.store.setState({filename:T,numPages:c.numPages,pageNumber:1,isDocumentLoaded:!0,url:t.toString()});const r=yield c.getAttachments(),D=new Map(Object.keys(r??{}).sort((M,b)=>M.toLowerCase().localeCompare(b.toLowerCase())).map(M=>[M,r[M]]));this.store.setState({attachments:D}),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parseDocumentInfo).call(this),this.forceRendering()})}forceRendering(t=!0){__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").printing=!!this.printService,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").isThumbnailViewEnabled=t,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").renderHighestPriority()}gotoPage(t){this.linkService.goToPage(t)}openOrDownloadData(t,L,n){var g;(g=this.downloadManager)===null||g===void 0||g.openOrDownloadData(t,L,n)}download(){var t,L;return __awaiter(this,void 0,void 0,function*(){const n=this.url,{filename:g}=this;try{const V=yield this.document.getData(),O=new Blob([V],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(O,n,g,{})}catch{yield(L=this.downloadManager)===null||L===void 0?void 0:L.downloadUrl(n,g,{})}})}save(){var t;return __awaiter(this,void 0,void 0,function*(){const L=this.url,{filename:n}=this;try{const g=yield this.document.saveDocument(),V=new Blob([g],{type:"application/pdf"});yield(t=this.downloadManager)===null||t===void 0?void 0:t.download(V,L,n,{})}catch(g){console.error(`Error when saving the document: ${g.message}`),yield this.download()}finally{}})}downloadOrSave(){var t;const{annotationStorage:L}=(t=this.document)!==null&&t!==void 0?t:{};L&&L.size>0?this.save():this.download()}get supportsPrinting(){return PDFPrintServiceFactory.instance.supportsPrinting}beforePrint(){if(this.printService||!this.supportsPrinting)return;if(!this.viewer.pageViewsReady){this.l10n.get("printing_not_ready").then(O=>{window.alert(O)});return}const t=this.viewer.getPagesOverview(),L=document.getElementById("printContainer"),n=this.printResolution,g=this.viewer.optionalContentConfigPromise,V=PDFPrintServiceFactory.instance.createPrintService(this.document,t,L,n,g,null,this.l10n);this.printService=V,this.forceRendering(),V.layout()}afterPrint(){var t;this.printService&&(this.printService.destroy(),this.printService=null,(t=this.document)===null||t===void 0||t.annotationStorage.resetModified()),this.forceRendering()}requestPresentationMode(){var t;(t=this.pdfPresentationMode)===null||t===void 0||t.request()}triggerPrinting(){this.supportsPrinting&&window.print()}_cleanup(){var t;if(this.document)try{this.viewer.cleanup(),(t=this.thumbnailViewer)===null||t===void 0||t.cleanup(),this.document.cleanup()}catch(L){console.error("Unable to perform cleanup",L)}}setAnnotationEditorMode(t){this.viewer.annotationEditorMode={mode:t},this.store.setState({annotationEditorMode:t})}setAnnotationEditorParams(t){const L=Array.isArray(t)?t:[t];for(const n of L)this.viewer.annotationEditorParams=n}setSpreadMode(t){isValidSpreadMode(t)&&(this.viewer.spreadMode=t,this.dispatch("switchspreadmode",{mode:t}))}setScrollMode(t){isValidScrollMode(t)&&(this.viewer.scrollMode=t,this.dispatch("switchscrollmode",{mode:t}))}setRotation(t){isValidRotation(t)&&(this.viewer.pagesRotation=t)}getPagesOverview(){var t,L;try{return(L=(t=this.viewer)===null||t===void 0?void 0:t.getPagesOverview())!==null&&L!==void 0?L:[]}catch{return[]}}increaseScale(){this.viewer.increaseScale()}decreaseScale(){this.viewer.decreaseScale()}set currentScaleValue(t){this.viewer.currentScaleValue=t}set currentScale(t){this.viewer.currentScale=t}getPageView(t){return this.viewer.getPageView(t)}on(t,L,n){this.eventBus.on(t,L,n)}off(t,L,n){this.eventBus.off(t,L,n)}dispatch(t,L){this.eventBus.dispatch(t,L)}}_PDFSlick_renderingQueue=new WeakMap,_PDFSlick_container=new WeakMap,_PDFSlick_viewerContainer=new WeakMap,_PDFSlick_thumbsContainer=new WeakMap,_PDFSlick_annotationMode=new WeakMap,_PDFSlick_annotationEditorMode=new WeakMap,_PDFSlick_instances=new WeakSet,_PDFSlick_initializePageLabels=function z(){var t;return __awaiter(this,void 0,void 0,function*(){const n=(t=yield this.document.getPageLabels())!==null&&t!==void 0?t:[],g=n.length;let V=0,O=0;for(let c=0;c<g;c++){const r=n[c];if(r===(c+1).toString())V++;else if(r==="")O++;else break}if(V>=g||O>=g)return;const{viewer:R,thumbnailViewer:T}=this;R.setPageLabels(n),T==null||T.setPageLabels(n)})},_PDFSlick_parseDocumentInfo=function z(){return __awaiter(this,void 0,void 0,function*(){const{info:t,contentLength:L}=yield this.document.getMetadata(),n=yield this.document.getPage(this.store.getState().pageNumber).then(g=>__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parsePageSize).call(this,getPageSizeInches(g),0));this.store.setState({filesize:L,title:t.Title,author:t.Author,subject:t.Subject,keywords:t.Keywords,creator:t.Creator,producer:t.Producer,version:t.PDFFormatVersion,creationDate:pdfExports.PDFDateString.toDateObject(t.CreationDate),modificationDate:pdfExports.PDFDateString.toDateObject(t.ModDate),isLinearized:t.IsLinearized,pageSize:n})})},_PDFSlick_parsePageSize=function z(t,L){return __awaiter(this,void 0,void 0,function*(){if(!t)return;L%180!==0&&(t={width:t.height,height:t.width});const n=isPortraitOrientation(t);let g={width:Math.round(t.width*100)/100,height:Math.round(t.height*100)/100},V={width:Math.round(t.width*25.4*10)/10,height:Math.round(t.height*25.4*10)/10},O=getPageName(g,n,US_PAGE_NAMES)||getPageName(V,n,METRIC_PAGE_NAMES);if(!O&&!(Number.isInteger(V.width)&&Number.isInteger(V.height))){const M={width:t.width*25.4,height:t.height*25.4},b={width:Math.round(V.width),height:Math.round(V.height)};Math.abs(M.width-b.width)<.1&&Math.abs(M.height-b.height)<.1&&(O=getPageName(b,n,METRIC_PAGE_NAMES),O&&(g={width:Math.round(b.width/25.4*100)/100,height:Math.round(b.height/25.4*100)/100},V=b))}const[{width:R,height:T},c,r,D]=yield Promise.all([g,this.l10n.get("document_properties_page_size_unit_inches"),O&&this.l10n.get(`document_properties_page_size_name_${O.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${n?"portrait":"landscape"}`)]);return{width:R.toLocaleString(),height:T.toLocaleString(),unit:c,name:r,orientation:D}})},_PDFSlick_initInternalEventListeners=function z(){this.eventBus._on("pagesinit",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onDocumentReady).bind(this)),this.eventBus._on("scalechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onScaleChanging).bind(this)),this.eventBus._on("pagechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageChanging).bind(this)),this.eventBus._on("pagerendered",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageRendered).bind(this)),this.eventBus._on("rotationchanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onRotationChanging).bind(this)),this.eventBus._on("switchspreadmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchSpreadMode).bind(this)),this.eventBus._on("switchscrollmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchScrollMode).bind(this)),this.eventBus._on("beforeprint",this.beforePrint.bind(this)),this.eventBus._on("afterprint",this.afterPrint.bind(this)),window.onbeforeprint=t=>{this.eventBus.dispatch("beforeprint",{source:window})},window.onafterprint=t=>{this.eventBus.dispatch("afterprint",{source:window})}},_PDFSlick_onDocumentReady=function z({source:t}){var L;return __awaiter(this,void 0,void 0,function*(){const n=yield(L=this.document)===null||L===void 0?void 0:L.getOutline(),g=this.store.getState().scaleValue;t.currentScale=1,t.currentScaleValue="auto",this.store.setState({documentOutline:n,pageNumber:1,scaleValue:g,pagesReady:!0})})},_PDFSlick_onRotationChanging=function z({pagesRotation:t,pageNumber:L}){this.store.setState({pagesRotation:t}),this.thumbnailViewer&&(this.thumbnailViewer.pagesRotation=t),this.forceRendering(),this.viewer.currentPageNumber=L},_PDFSlick_onSwitchSpreadMode=function z({mode:t}){this.store.setState({spreadMode:t})},_PDFSlick_onSwitchScrollMode=function z({mode:t}){this.store.setState({scrollMode:t})},_PDFSlick_onScaleChanging=function z({scale:t,presetValue:L}){this.store.setState({scale:t,scaleValue:L}),this.viewer.update()},_PDFSlick_onPageChanging=function z({pageNumber:t}){var L;(L=this.thumbnailViewer)===null||L===void 0||L.scrollThumbnailIntoView(t),this.store.setState({pageNumber:t})},_PDFSlick_onPageRendered=function z({pageNumber:t,error:L}){var n;if(__classPrivateFieldGet(this,_PDFSlick_thumbsContainer,"f")){const g=this.viewer.getPageView(t-1),V=(n=this.thumbnailViewer)===null||n===void 0?void 0:n.getThumbnail(t-1);g&&V&&V.setImage(g)}};var ELEMENT_SIZE_FALLBACK={width:null,height:null};function getElementSize(z){if(!z)return{...ELEMENT_SIZE_FALLBACK};const{width:t,height:L}=z.getBoundingClientRect();return{width:t,height:L}}function createElementSize(z){const t=typeof z=="function",[L,n]=createStaticStore(sharedConfig.context||t?ELEMENT_SIZE_FALLBACK:getElementSize(z)),g=new ResizeObserver(([V])=>n(getElementSize(V.target)));return onCleanup(()=>g.disconnect()),t?createEffect(()=>{const V=z();V&&(n(getElementSize(V)),g.observe(V),onCleanup(()=>g.unobserve(V)))}):(g.observe(z),onCleanup(()=>g.unobserve(z))),L}var _tmpl$$1$1=template('<div id=viewerContainer><div id=viewer class="pdfSlickViewer pdfViewer">');function PDFSlickViewer(z){const[t,L]=createSignal(),n=createElementSize(t);return createEffect(()=>{var g;n.width&&n.height&&(z.store.pdfSlick&&(z.store.scaleValue==="auto"||z.store.scaleValue==="page-fit"||z.store.scaleValue==="page-width")&&(z.store.pdfSlick.viewer.currentScaleValue=z.store.scaleValue),(g=z.store.pdfSlick)==null||g.viewer.update())}),(()=>{var g=_tmpl$$1$1();return use(V=>{z.viewerRef(V),L(V)},g),g.style.setProperty("position","absolute"),g.style.setProperty("inset","0"),createRenderEffect(()=>className(g,`pdfSlickContainer ${z.class??""}`)),g})()}var _tmpl$$2=template("<div>");function PDFSlickThumbnails(z){const[t,L]=createSignal(),n=createElementSize(t);return createEffect(()=>{var g;n.width&&n.height&&((g=z.store.pdfSlick)==null||g.forceRendering())}),(()=>{var g=_tmpl$$2();return use(V=>{z.thumbsRef(V),L(V)},g),g.style.setProperty("position","absolute"),g.style.setProperty("overflow","auto"),g.style.setProperty("inset","0"),insert(g,createComponent(For,{get each(){return Array.from(z.store.thumbnailViews)},children:([V,O])=>createComponent(Portal,{get mount(){return O.div},get children(){return z.children({pageNumber:V,width:O.canvasWidth,height:O.canvasHeight,scale:O.scale,src:(O==null?void 0:O.src)??null,rotation:O.rotation,pageLabel:O.pageLabel,loaded:O.loaded})}})})),createRenderEffect(V=>{var O=z.class??"",R=z.classList??{};return O!==V.e&&className(g,V.e=O),V.t=classList(g,R,V.t),V},{e:void 0,t:void 0}),g})()}function useStore(z,t=z.getState,L){const n=t(z.getState()),[g,V]=createStore$1(n),O=(T,c)=>{const r=t(c),D=t(T);L!==void 0?L(r,D)||V(reconcile(D)):V(reconcile(D))},R=z.subscribe(O);return onCleanup(()=>R()),g}const usePDFSlick=(z,t)=>{const[L,n]=createSignal(!1),[g,V]=createSignal(!1),[O,R]=createSignal(null),[T,c]=createSignal(null),[r,D]=createSignal(null),M=create(),b=useStore(M),u=f=>{R(f),V(!0)},v=f=>{c(f)};return createEffect(()=>{if(z&&g()){const f=new PDFSlick({container:O(),thumbs:T(),store:M,options:t});D(f),M.setState({pdfSlick:f}),f.loadDocument(z,t).then(()=>n(!0))}}),{isDocumentLoaded:L,viewerRef:u,thumbsRef:v,pdfSlick:r,pdfSlickStore:b,PDFSlickViewer,PDFSlickThumbnails}};var _tmpl$$1=template("<div class=pdf-viewer-wrapper>");function PDFViewer(z){const{viewerRef:t,pdfSlickStore:L,PDFSlickViewer:n}=usePDFSlick(z.pdfFilePath,{});return(()=>{var g=_tmpl$$1();return g.style.setProperty("position","relative"),g.style.setProperty("height","500px"),insert(g,createComponent(n,{store:L,viewerRef:t})),g})()}const demoPdf="/zasudi-solid/assets/demo-BKTSgfO1.pdf";var _tmpl$=template("<div>"),_tmpl$2=template("<div>Unknown item.");function Demo(){const[z,t]=createSignal("raschet"),L=()=>{switch(z()){case"raschet":return;case"prilojenie":return"Приложения";case"pdf":return"Заявление о вынесении судебного приказа";default:return"Unknown item"}};return(()=>{var n=_tmpl$();return insert(n,createComponent(QuestionSection,{get question(){return L()},get children(){return createComponent(Switch,{get fallback(){return _tmpl$2()},get children(){return[createComponent(Match,{get when(){return z()==="raschet"},get children(){return createComponent(Calculator,{})}}),createComponent(Match,{get when(){return z()==="prilojenie"},get children(){return createComponent(Prilojenie,{})}}),createComponent(Match,{get when(){return z()==="pdf"},get children(){return createComponent(PdfThing,{})}})]}})}}),null),insert(n,createComponent(QuestionSection,{get children(){return createComponent(ListBox,{items:[{text:"Расчёт исковых требований ",value:"raschet"},{text:"Приложения",value:"prilojenie"},{text:"Заявление о вынесении судебного приказа",value:"pdf"}],get value(){return z()},setValue:t})}}),null),n})()}function Prilojenie(){const[z,t]=createSignal("");return(()=>{var L=_tmpl$();return insert(L,createComponent(TextField,{icon:"no-space",label:"Наименование",get value(){return z()},setValue:t}),null),insert(L,createComponent(BigGreenButton,{thin:!0,text:"Добавить приложение",onClick:()=>{}}),null),createRenderEffect(()=>className(L,demo["demo-name"])),L})()}function PdfThing(){return createComponent(PDFViewer,{pdfFilePath:demoPdf})}export{Demo as default};
